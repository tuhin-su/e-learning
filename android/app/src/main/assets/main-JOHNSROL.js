import{$ as gt,$a as Ie,$b as ur,A as pi,Aa as Vo,Ab as Te,Ac as f_,B as bd,Ba as Vb,Bb as Zn,Bc as p_,C as _d,Ca as Ve,Cb as Zb,Cc as yi,D as jn,Da as Qf,Db as ze,Dc as Nd,E as mt,Ea as zb,Eb as np,Ec as Pd,F as Gf,Fa as Na,Fb as jo,Fc as m_,G as $i,Ga as Ub,Gb as Wo,Gc as g_,H as Ki,Ha as gi,Hb as F,Hc as op,I as yd,Ia as Kt,Ib as N,Ic as v_,J as qf,Ja as xc,Jb as Z,Jc as b_,K as on,Ka as Zf,Kb as vt,Kc as Ld,L as Rb,La as Cd,Lb as Ar,Lc as __,M as _c,Ma as Wn,Mb as Jb,Mc as Bd,N as Xi,Na as wc,Nb as ae,O as Qi,Oa as Pa,Ob as e_,P as Yf,Pa as La,Pb as de,Pc as eo,Q as Tb,Qa as jb,Qb as Ot,Qc as Xr,R as $f,Ra as Wb,Rb as tt,S as Fb,Sa as Hb,Sb as An,Sc as Pn,T as Ob,Ta as Gb,Tb as it,Tc as Ho,U as Kf,Ua as qb,Ub as je,Uc as ap,V as xd,Va as Yb,Vb as We,Vc as Mr,W as cn,Wa as $b,Wb as t_,Wc as y_,X as vn,Xa as Qn,Xb as n_,Xc as x_,Y as Ut,Ya as Dd,Yb as bi,Z as Nb,Za as Cc,Zb as J,_ as nt,_a as H,_b as Wt,a as Q,aa as lr,ab as Ba,ac as rp,b as ot,ba as X,bb as zo,bc as Id,c as jf,ca as _e,cb as Ed,cc as Md,da as Pb,db as Va,dc as Rd,e as md,ea as ne,eb as vi,ec as Et,f as cS,fa as Xf,fb as Uo,fc as r_,g as Rt,ga as ye,gb as Kr,gc as i_,h as Ct,ha as w,hb as Kb,hc as o_,i as Ib,ia as Po,ib as Jf,ic as Td,j as Yr,ja as yc,jb as Xb,jc as a_,k as Wf,ka as Lo,kb as ep,kc as s_,l as gd,la as Lb,lb as se,lc as St,m as he,ma as Er,mb as xe,mc as c_,n as Sn,na as dr,nb as we,nc as Fe,o as $r,oa as jt,ob as Dt,oc as kr,p as gn,pa as Ae,pb as Qb,pc as _i,q as fe,qa as ke,qb as lt,qc as Ir,r as No,ra as Sr,rb as Pe,rc as Fd,s as bc,sa as Bo,sb as Sd,sc as Od,t as Mb,ta as $t,tb as Ad,tc as l_,u as Nn,ua as yt,ub as tp,uc as za,v as Be,va as mi,vb as kd,vc as d_,w as Oa,wa as Bb,wb as Zi,wc as u_,x as Xn,xa as wd,xb as $e,xc as He,y as Hf,ya as le,yb as Ce,yc as h_,z as vd,za as Re,zb as Ji,zc as ip}from"./chunk-34TCH4GQ.js";var uw=md(()=>{"use strict"});var fw=md((Fs,hw)=>{"use strict";hw.exports=Fs=window.fetch;Fs.default=window.fetch.bind(window);Fs.Headers=window.Headers;Fs.Request=window.Request;Fs.Response=window.Response});var pw=md(()=>{"use strict"});var rS=md((pd,kb)=>{"use strict";(function(r,n){typeof pd=="object"&&typeof kb=="object"?kb.exports=n():typeof define=="function"&&define.amd?define([],n):typeof pd=="object"?pd.AOS=n():r.AOS=n()})(pd,function(){return function(r){function n(t){if(e[t])return e[t].exports;var i=e[t]={exports:{},id:t,loaded:!1};return r[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=r,n.c=e,n.p="dist/",n(0)}([function(r,n,e){"use strict";function t(M){return M&&M.__esModule?M:{default:M}}var i=Object.assign||function(M){for(var B=1;B<arguments.length;B++){var V=arguments[B];for(var z in V)Object.prototype.hasOwnProperty.call(V,z)&&(M[z]=V[z])}return M},o=e(1),a=(t(o),e(6)),s=t(a),c=e(7),l=t(c),d=e(8),u=t(d),h=e(9),f=t(h),p=e(10),m=t(p),g=e(11),v=t(g),_=e(14),y=t(_),b=[],x=!1,C={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},k=function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(M&&(x=!0),x)return b=(0,v.default)(b,C),(0,m.default)(b,C.once),b},I=function(){b=(0,y.default)(),k()},S=function(){b.forEach(function(M,B){M.node.removeAttribute("data-aos"),M.node.removeAttribute("data-aos-easing"),M.node.removeAttribute("data-aos-duration"),M.node.removeAttribute("data-aos-delay")})},D=function(M){return M===!0||M==="mobile"&&f.default.mobile()||M==="phone"&&f.default.phone()||M==="tablet"&&f.default.tablet()||typeof M=="function"&&M()===!0},R=function(M){C=i(C,M),b=(0,y.default)();var B=document.all&&!window.atob;return D(C.disable)||B?S():(C.disableMutationObserver||u.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),C.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",C.easing),document.querySelector("body").setAttribute("data-aos-duration",C.duration),document.querySelector("body").setAttribute("data-aos-delay",C.delay),C.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?k(!0):C.startEvent==="load"?window.addEventListener(C.startEvent,function(){k(!0)}):document.addEventListener(C.startEvent,function(){k(!0)}),window.addEventListener("resize",(0,l.default)(k,C.debounceDelay,!0)),window.addEventListener("orientationchange",(0,l.default)(k,C.debounceDelay,!0)),window.addEventListener("scroll",(0,s.default)(function(){(0,m.default)(b,C.once)},C.throttleDelay)),C.disableMutationObserver||u.default.ready("[data-aos]",I),b)};r.exports={init:R,refresh:k,refreshHard:I}},function(r,n){},,,,,function(r,n){(function(e){"use strict";function t(D,R,M){function B(Se){var qe=ce,ct=pe;return ce=pe=void 0,Ye=Se,De=D.apply(ct,qe)}function V(Se){return Ye=Se,Ee=setTimeout(W,R),Xe?B(Se):De}function z(Se){var qe=Se-Ue,ct=Se-Ye,kt=R-qe;return st?I(kt,Ne-ct):kt}function G(Se){var qe=Se-Ue,ct=Se-Ye;return Ue===void 0||qe>=R||qe<0||st&&ct>=Ne}function W(){var Se=S();return G(Se)?j(Se):void(Ee=setTimeout(W,z(Se)))}function j(Se){return Ee=void 0,be&&ce?B(Se):(ce=pe=void 0,De)}function q(){Ee!==void 0&&clearTimeout(Ee),Ye=0,ce=Ue=pe=Ee=void 0}function K(){return Ee===void 0?De:j(S())}function ie(){var Se=S(),qe=G(Se);if(ce=arguments,pe=this,Ue=Se,qe){if(Ee===void 0)return V(Ue);if(st)return Ee=setTimeout(W,R),B(Ue)}return Ee===void 0&&(Ee=setTimeout(W,R)),De}var ce,pe,Ne,De,Ee,Ue,Ye=0,Xe=!1,st=!1,be=!0;if(typeof D!="function")throw new TypeError(d);return R=c(R)||0,o(M)&&(Xe=!!M.leading,st="maxWait"in M,Ne=st?k(c(M.maxWait)||0,R):Ne,be="trailing"in M?!!M.trailing:be),ie.cancel=q,ie.flush=K,ie}function i(D,R,M){var B=!0,V=!0;if(typeof D!="function")throw new TypeError(d);return o(M)&&(B="leading"in M?!!M.leading:B,V="trailing"in M?!!M.trailing:V),t(D,R,{leading:B,maxWait:R,trailing:V})}function o(D){var R=typeof D>"u"?"undefined":l(D);return!!D&&(R=="object"||R=="function")}function a(D){return!!D&&(typeof D>"u"?"undefined":l(D))=="object"}function s(D){return(typeof D>"u"?"undefined":l(D))=="symbol"||a(D)&&C.call(D)==h}function c(D){if(typeof D=="number")return D;if(s(D))return u;if(o(D)){var R=typeof D.valueOf=="function"?D.valueOf():D;D=o(R)?R+"":R}if(typeof D!="string")return D===0?D:+D;D=D.replace(f,"");var M=m.test(D);return M||g.test(D)?v(D.slice(2),M?2:8):p.test(D)?u:+D}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},d="Expected a function",u=NaN,h="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,g=/^0o[0-7]+$/i,v=parseInt,_=(typeof e>"u"?"undefined":l(e))=="object"&&e&&e.Object===Object&&e,y=(typeof self>"u"?"undefined":l(self))=="object"&&self&&self.Object===Object&&self,b=_||y||Function("return this")(),x=Object.prototype,C=x.toString,k=Math.max,I=Math.min,S=function(){return b.Date.now()};r.exports=i}).call(n,function(){return this}())},function(r,n){(function(e){"use strict";function t(S,D,R){function M(be){var Se=ie,qe=ce;return ie=ce=void 0,Ue=be,Ne=S.apply(qe,Se)}function B(be){return Ue=be,De=setTimeout(G,D),Ye?M(be):Ne}function V(be){var Se=be-Ee,qe=be-Ue,ct=D-Se;return Xe?k(ct,pe-qe):ct}function z(be){var Se=be-Ee,qe=be-Ue;return Ee===void 0||Se>=D||Se<0||Xe&&qe>=pe}function G(){var be=I();return z(be)?W(be):void(De=setTimeout(G,V(be)))}function W(be){return De=void 0,st&&ie?M(be):(ie=ce=void 0,Ne)}function j(){De!==void 0&&clearTimeout(De),Ue=0,ie=Ee=ce=De=void 0}function q(){return De===void 0?Ne:W(I())}function K(){var be=I(),Se=z(be);if(ie=arguments,ce=this,Ee=be,Se){if(De===void 0)return B(Ee);if(Xe)return De=setTimeout(G,D),M(Ee)}return De===void 0&&(De=setTimeout(G,D)),Ne}var ie,ce,pe,Ne,De,Ee,Ue=0,Ye=!1,Xe=!1,st=!0;if(typeof S!="function")throw new TypeError(l);return D=s(D)||0,i(R)&&(Ye=!!R.leading,Xe="maxWait"in R,pe=Xe?C(s(R.maxWait)||0,D):pe,st="trailing"in R?!!R.trailing:st),K.cancel=j,K.flush=q,K}function i(S){var D=typeof S>"u"?"undefined":c(S);return!!S&&(D=="object"||D=="function")}function o(S){return!!S&&(typeof S>"u"?"undefined":c(S))=="object"}function a(S){return(typeof S>"u"?"undefined":c(S))=="symbol"||o(S)&&x.call(S)==u}function s(S){if(typeof S=="number")return S;if(a(S))return d;if(i(S)){var D=typeof S.valueOf=="function"?S.valueOf():S;S=i(D)?D+"":D}if(typeof S!="string")return S===0?S:+S;S=S.replace(h,"");var R=p.test(S);return R||m.test(S)?g(S.slice(2),R?2:8):f.test(S)?d:+S}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},l="Expected a function",d=NaN,u="[object Symbol]",h=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=parseInt,v=(typeof e>"u"?"undefined":c(e))=="object"&&e&&e.Object===Object&&e,_=(typeof self>"u"?"undefined":c(self))=="object"&&self&&self.Object===Object&&self,y=v||_||Function("return this")(),b=Object.prototype,x=b.toString,C=Math.max,k=Math.min,I=function(){return y.Date.now()};r.exports=t}).call(n,function(){return this}())},function(r,n){"use strict";function e(c){var l=void 0,d=void 0,u=void 0;for(l=0;l<c.length;l+=1)if(d=c[l],d.dataset&&d.dataset.aos||(u=d.children&&e(d.children)))return!0;return!1}function t(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function i(){return!!t()}function o(c,l){var d=window.document,u=t(),h=new u(a);s=l,h.observe(d.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function a(c){c&&c.forEach(function(l){var d=Array.prototype.slice.call(l.addedNodes),u=Array.prototype.slice.call(l.removedNodes),h=d.concat(u);if(e(h))return s()})}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){};n.default={isSupported:i,ready:o}},function(r,n){"use strict";function e(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function t(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function d(u,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,h,f){return h&&d(u.prototype,h),f&&d(u,f),u}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,l=function(){function d(){e(this,d)}return i(d,[{key:"phone",value:function(){var u=t();return!(!o.test(u)&&!a.test(u.substr(0,4)))}},{key:"mobile",value:function(){var u=t();return!(!s.test(u)&&!c.test(u.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),d}();n.default=new l},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(i,o,a){var s=i.node.getAttribute("data-aos-once");o>i.position?i.node.classList.add("aos-animate"):typeof s<"u"&&(s==="false"||!a&&s!=="true")&&i.node.classList.remove("aos-animate")},t=function(i,o){var a=window.pageYOffset,s=window.innerHeight;i.forEach(function(c,l){e(c,s+a,o)})};n.default=t},function(r,n,e){"use strict";function t(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(12),o=t(i),a=function(s,c){return s.forEach(function(l,d){l.node.classList.add("aos-init"),l.position=(0,o.default)(l.node,c.offset)}),s};n.default=a},function(r,n,e){"use strict";function t(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(13),o=t(i),a=function(s,c){var l=0,d=0,u=window.innerHeight,h={offset:s.getAttribute("data-aos-offset"),anchor:s.getAttribute("data-aos-anchor"),anchorPlacement:s.getAttribute("data-aos-anchor-placement")};switch(h.offset&&!isNaN(h.offset)&&(d=parseInt(h.offset)),h.anchor&&document.querySelectorAll(h.anchor)&&(s=document.querySelectorAll(h.anchor)[0]),l=(0,o.default)(s).top,h.anchorPlacement){case"top-bottom":break;case"center-bottom":l+=s.offsetHeight/2;break;case"bottom-bottom":l+=s.offsetHeight;break;case"top-center":l+=u/2;break;case"bottom-center":l+=u/2+s.offsetHeight;break;case"center-center":l+=u/2+s.offsetHeight/2;break;case"top-top":l+=u;break;case"bottom-top":l+=s.offsetHeight+u;break;case"center-top":l+=s.offsetHeight/2+u}return h.anchorPlacement||h.offset||isNaN(c)||(d=c),l+d};n.default=a},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){for(var i=0,o=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetLeft-(t.tagName!="BODY"?t.scrollLeft:0),o+=t.offsetTop-(t.tagName!="BODY"?t.scrollTop:0),t=t.offsetParent;return{top:o,left:i}};n.default=e},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){return t=t||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(t,function(i){return{node:i}})};n.default=e}])})});var Ec=class{},zd=class{},Xt=class r{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let t=e.indexOf(":");if(t>0){let i=e.slice(0,t),o=e.slice(t+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,t)=>{this.addHeaderEntry(t,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,t])=>{this.setHeaderEntries(e,t)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let t=n.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...t),this.headers.set(e,i);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}addHeaderEntry(n,e){let t=n.toLowerCase();this.maybeSetNormalizedName(n,t),this.headers.has(t)?this.headers.get(t).push(e):this.headers.set(t,[e])}setHeaderEntries(n,e){let t=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,t),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var cp=class{encodeKey(n){return w_(n)}encodeValue(n){return w_(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function dS(r,n){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],c=e.get(a)||[];c.push(s),e.set(a,c)}),e}var uS=/%(\d[a-f0-9])/gi,hS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function w_(r){return encodeURIComponent(r).replace(uS,(n,e)=>hS[e]??n)}function Vd(r){return`${r}`}var no=class r{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new cp,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=dS(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let t=n.fromObject[e],i=Array.isArray(t)?t.map(Vd):[Vd(t)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(t=>{let i=n[t];Array.isArray(i)?i.forEach(o=>{e.push({param:t,value:o,op:"a"})}):e.push({param:t,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Vd(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let t=this.map.get(n.param)||[],i=t.indexOf(Vd(n.value));i!==-1&&t.splice(i,1),t.length>0?this.map.set(n.param,t):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var lp=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function fS(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function C_(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function D_(r){return typeof Blob<"u"&&r instanceof Blob}function E_(r){return typeof FormData<"u"&&r instanceof FormData}function pS(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var Dc=class r{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,t,i){this.url=e,this.method=n.toUpperCase();let o;if(fS(this.method)||i?(this.body=t!==void 0?t:null,o=i):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Xt,this.context??=new lp,!this.params)this.params=new no,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),c=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+c+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||C_(this.body)||D_(this.body)||E_(this.body)||pS(this.body)?this.body:this.body instanceof no?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||E_(this.body)?null:D_(this.body)?this.body.type||null:C_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof no?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let e=n.method||this.method,t=n.url||this.url,i=n.responseType||this.responseType,o=n.transferCache??this.transferCache,a=n.body!==void 0?n.body:this.body,s=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress,l=n.headers||this.headers,d=n.params||this.params,u=n.context??this.context;return n.setHeaders!==void 0&&(l=Object.keys(n.setHeaders).reduce((h,f)=>h.set(f,n.setHeaders[f]),l)),n.setParams&&(d=Object.keys(n.setParams).reduce((h,f)=>h.set(f,n.setParams[f]),d)),new r(e,t,a,{params:d,headers:l,context:u,reportProgress:c,responseType:i,withCredentials:s,transferCache:o})}},ro=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(ro||{}),Sc=class{headers;status;statusText;url;ok;type;constructor(n,e=200,t="OK"){this.headers=n.headers||new Xt,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||t,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Ud=class r extends Sc{constructor(n={}){super(n)}type=ro.ResponseHeader;clone(n={}){return new r({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Ac=class r extends Sc{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=ro.Response;clone(n={}){return new r({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},to=class extends Sc{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},M_=200,mS=204;function sp(r,n){return{body:n,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var xi=(()=>{class r{handler;constructor(e){this.handler=e}request(e,t,i={}){let o;if(e instanceof Dc)o=e;else{let c;i.headers instanceof Xt?c=i.headers:c=new Xt(i.headers);let l;i.params&&(i.params instanceof no?l=i.params:l=new no({fromObject:i.params})),o=new Dc(e,t,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=fe(o).pipe(Ki(c=>this.handler.handle(c)));if(e instanceof Dc||i.observe==="events")return a;let s=a.pipe(mt(c=>c instanceof Ac));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(Be(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return s.pipe(Be(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return s.pipe(Be(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return s.pipe(Be(c=>c.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:new no().append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,i={}){return this.request("PATCH",e,sp(i,t))}post(e,t,i={}){return this.request("POST",e,sp(i,t))}put(e,t,i={}){return this.request("PUT",e,sp(i,t))}static \u0275fac=function(t){return new(t||r)(ye(Ec))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),gS=/^\)\]\}',?\n/,vS="X-Request-URL";function S_(r){if(r.url)return r.url;let n=vS.toLocaleLowerCase();return r.headers.get(n)}var bS=(()=>{class r{fetchImpl=w(dp,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=w(Re);handle(e){return new Yr(t=>{let i=new AbortController;return this.doRequest(e,i.signal,t).then(up,o=>t.error(new to({error:o}))),()=>i.abort()})}doRequest(e,t,i){return Rt(this,null,function*(){let o=this.createRequestInit(e),a;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,Q({signal:t},o)));_S(f),i.next({type:ro.Sent}),a=yield f}catch(f){i.error(new to({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}));return}let s=new Xt(a.headers),c=a.statusText,l=S_(a)??e.urlWithParams,d=a.status,u=null;if(e.reportProgress&&i.next(new Ud({headers:s,status:d,statusText:c,url:l})),a.body){let f=a.headers.get("content-length"),p=[],m=a.body.getReader(),g=0,v,_,y=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Rt(this,null,function*(){for(;;){let{done:x,value:C}=yield m.read();if(x)break;if(p.push(C),g+=C.length,e.reportProgress){_=e.responseType==="text"?(_??"")+(v??=new TextDecoder).decode(C,{stream:!0}):void 0;let k=()=>i.next({type:ro.DownloadProgress,total:f?+f:void 0,loaded:g,partialText:_});y?y.run(k):k()}}}));let b=this.concatChunks(p,g);try{let x=a.headers.get("Content-Type")??"";u=this.parseBody(e,b,x)}catch(x){i.error(new to({error:x,headers:new Xt(a.headers),status:a.status,statusText:a.statusText,url:S_(a)??e.urlWithParams}));return}}d===0&&(d=u?M_:0),d>=200&&d<300?(i.next(new Ac({body:u,headers:s,status:d,statusText:c,url:l})),i.complete()):i.error(new to({error:u,headers:s,status:d,statusText:c,url:l}))})}parseBody(e,t,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(t).replace(gS,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(t);case"blob":return new Blob([t],{type:i});case"arraybuffer":return t.buffer}}createRequestInit(e){let t={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,a)=>t[o]=a.join(",")),e.headers.has("Accept")||(t.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(t["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:t,credentials:i}}concatChunks(e,t){let i=new Uint8Array(t),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),dp=class{};function up(){}function _S(r){r.then(up,up)}function yS(r,n){return n(r)}function xS(r,n,e){return(t,i)=>dr(e,()=>n(t,o=>r(o,i)))}var R_=new ne(""),wS=new ne(""),CS=new ne("",{providedIn:"root",factory:()=>!0});var A_=(()=>{class r extends Ec{backend;injector;chain=null;pendingTasks=w(wd);contributeToStability=w(CS);constructor(e,t){super(),this.backend=e,this.injector=t}handle(e){if(this.chain===null){let t=Array.from(new Set([...this.injector.get(R_),...this.injector.get(wS,[])]));this.chain=t.reduceRight((i,o)=>xS(i,o,this.injector),yS)}if(this.contributeToStability){let t=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(Xi(()=>this.pendingTasks.remove(t)))}else return this.chain(e,t=>this.backend.handle(t))}static \u0275fac=function(t){return new(t||r)(ye(zd),ye(Er))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();var DS=/^\)\]\}',?\n/;function ES(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var k_=(()=>{class r{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new gt(-2800,!1);let t=this.xhrFactory;return(t.\u0275loadImpl?gn(t.\u0275loadImpl()):fe(null)).pipe(vn(()=>new Yr(o=>{let a=t.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((m,g)=>a.setRequestHeader(m,g.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let m=e.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(e.responseType){let m=e.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let s=e.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",g=new Xt(a.getAllResponseHeaders()),v=ES(a)||e.url;return c=new Ud({headers:g,status:a.status,statusText:m,url:v}),c},d=()=>{let{headers:m,status:g,statusText:v,url:_}=l(),y=null;g!==mS&&(y=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=y?M_:0);let b=g>=200&&g<300;if(e.responseType==="json"&&typeof y=="string"){let x=y;y=y.replace(DS,"");try{y=y!==""?JSON.parse(y):null}catch(C){y=x,b&&(b=!1,y={error:C,text:y})}}b?(o.next(new Ac({body:y,headers:m,status:g,statusText:v,url:_||void 0})),o.complete()):o.error(new to({error:y,headers:m,status:g,statusText:v,url:_||void 0}))},u=m=>{let{url:g}=l(),v=new to({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});o.error(v)},h=!1,f=m=>{h||(o.next(l()),h=!0);let g={type:ro.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),o.next(g)},p=m=>{let g={type:ro.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),o.next(g)};return a.addEventListener("load",d),a.addEventListener("error",u),a.addEventListener("timeout",u),a.addEventListener("abort",u),e.reportProgress&&(a.addEventListener("progress",f),s!==null&&a.upload&&a.upload.addEventListener("progress",p)),a.send(s),o.next({type:ro.Sent}),()=>{a.removeEventListener("error",u),a.removeEventListener("abort",u),a.removeEventListener("load",d),a.removeEventListener("timeout",u),e.reportProgress&&(a.removeEventListener("progress",f),s!==null&&a.upload&&a.upload.removeEventListener("progress",p)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(t){return new(t||r)(ye(Bd))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),T_=new ne(""),SS="XSRF-TOKEN",AS=new ne("",{providedIn:"root",factory:()=>SS}),kS="X-XSRF-TOKEN",IS=new ne("",{providedIn:"root",factory:()=>kS}),jd=class{},MS=(()=>{class r{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,t,i){this.doc=e,this.platform=t,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Nd(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(t){return new(t||r)(ye(He),ye(gi),ye(AS))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function RS(r,n){let e=r.url.toLowerCase();if(!w(T_)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(r);let t=w(jd).getToken(),i=w(IS);return t!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,t)})),n(r)}function F_(...r){let n=[xi,k_,A_,{provide:Ec,useExisting:A_},{provide:zd,useFactory:()=>w(bS,{optional:!0})??w(k_)},{provide:R_,useValue:RS,multi:!0},{provide:T_,useValue:!0},{provide:jd,useClass:MS}];for(let e of r)n.push(...e.\u0275providers);return Lo(n)}var fp=class extends u_{supportsDOMEvents=!0},pp=class r extends fp{static makeCurrent(){d_(new r)}onAndCancel(n,e,t){return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=FS();return e==null?null:OS(e)}resetBaseElement(){kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Nd(document.cookie,n)}},kc=null;function FS(){return kc=kc||document.querySelector("base"),kc?kc.getAttribute("href"):null}function OS(r){return new URL(r,document.baseURI).pathname}var NS=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),mp=new ne(""),B_=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,t){this._zone=t,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,t,i){return this._findPluginFor(t).addEventListener(e,t,i)}getZone(){return this._zone}_findPluginFor(e){let t=this._eventNameToPlugin.get(e);if(t)return t;if(t=this._plugins.find(o=>o.supports(e)),!t)throw new gt(5101,!1);return this._eventNameToPlugin.set(e,t),t}static \u0275fac=function(t){return new(t||r)(ye(mp),ye(Re))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Hd=class{_doc;constructor(n){this._doc=n}manager},gp="ng-app-id";function O_(r){for(let n of r)n.remove()}function N_(r,n){let e=n.createElement("style");return e.textContent=r,e}function PS(r,n,e){let t=r.head?.querySelectorAll(`style[${gp}="${n}"]`);if(t)for(let i of t)i.textContent&&(i.removeAttribute(gp),e.set(i.textContent,{usage:0,elements:[i]}))}function vp(r,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var V_=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,t,i,o={}){this.doc=e,this.appId=t,this.nonce=i,this.isServer=Ld(o),PS(e,t,this.inline),this.hosts.add(e.head)}addStyles(e,t){for(let i of e)this.addUsage(i,this.inline,N_);t?.forEach(i=>this.addUsage(i,this.external,vp))}removeStyles(e,t){for(let i of e)this.removeUsage(i,this.inline);t?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,t,i){let o=t.get(e);o?o.usage++:t.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(e,this.doc)))})}removeUsage(e,t){let i=t.get(e);i&&(i.usage--,i.usage<=0&&(O_(i.elements),t.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])O_(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[t,{elements:i}]of this.inline)i.push(this.addElement(e,N_(t,this.doc)));for(let[t,{elements:i}]of this.external)i.push(this.addElement(e,vp(t,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,t){return this.nonce&&t.setAttribute("nonce",this.nonce),this.isServer&&t.setAttribute(gp,this.appId),e.appendChild(t)}static \u0275fac=function(t){return new(t||r)(ye(He),ye(Na),ye(xc,8),ye(gi))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),hp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yp=/%COMP%/g,z_="%COMP%",LS=`_nghost-${z_}`,BS=`_ngcontent-${z_}`,VS=!0,zS=new ne("",{providedIn:"root",factory:()=>VS});function US(r){return BS.replace(yp,r)}function jS(r){return LS.replace(yp,r)}function U_(r,n){return n.map(e=>e.replace(yp,r))}var Gd=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,t,i,o,a,s,c,l=null){this.eventManager=e,this.sharedStylesHost=t,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=c,this.nonce=l,this.platformIsServer=Ld(s),this.defaultRenderer=new Ic(e,a,c,this.platformIsServer)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;this.platformIsServer&&t.encapsulation===wc.ShadowDom&&(t=ot(Q({},t),{encapsulation:wc.Emulated}));let i=this.getOrCreateRenderer(e,t);return i instanceof qd?i.applyToHost(e):i instanceof Mc&&i.applyStyles(),i}getOrCreateRenderer(e,t){let i=this.rendererByCompId,o=i.get(t.id);if(!o){let a=this.doc,s=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(t.encapsulation){case wc.Emulated:o=new qd(c,l,t,this.appId,d,a,s,u);break;case wc.ShadowDom:return new bp(c,l,e,t,a,s,this.nonce,u);default:o=new Mc(c,l,t,d,a,s,u);break}i.set(t.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(t){return new(t||r)(ye(B_),ye(V_),ye(Na),ye(zS),ye(He),ye(gi),ye(Re),ye(xc))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Ic=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,t,i){this.eventManager=n,this.doc=e,this.ngZone=t,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(hp[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(P_(n)?n.content:n).appendChild(e)}insertBefore(n,e,t){n&&(P_(n)?n.content:n).insertBefore(e,t)}removeChild(n,e){e.remove()}selectRootElement(n,e){let t=typeof n=="string"?this.doc.querySelector(n):n;if(!t)throw new gt(-5104,!1);return e||(t.textContent=""),t}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,t,i){if(i){e=i+":"+e;let o=hp[i];o?n.setAttributeNS(o,e,t):n.setAttribute(e,t)}else n.setAttribute(e,t)}removeAttribute(n,e,t){if(t){let i=hp[t];i?n.removeAttributeNS(i,e):n.removeAttribute(`${t}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,t,i){i&(Cc.DashCase|Cc.Important)?n.style.setProperty(e,t,i&Cc.Important?"important":""):n.style[e]=t}removeStyle(n,e,t){t&Cc.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,t){n!=null&&(n[e]=t)}setValue(n,e){n.nodeValue=e}listen(n,e,t){if(typeof n=="string"&&(n=za().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(t))}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function P_(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var bp=class extends Ic{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,t,i,o,a,s,c){super(n,o,a,c),this.sharedStylesHost=e,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=U_(i.id,i.styles);for(let u of l){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=u,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let u of d){let h=vp(u,o);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,t){return super.insertBefore(this.nodeOrShadowRoot(n),e,t)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mc=class extends Ic{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,t,i,o,a,s,c){super(n,o,a,s),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=c?U_(c,t.styles):t.styles,this.styleUrls=t.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qd=class extends Mc{contentAttr;hostAttr;constructor(n,e,t,i,o,a,s,c){let l=i+"-"+t.id;super(n,e,t,o,a,s,c,l),this.contentAttr=US(l),this.hostAttr=jS(l)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let t=super.createElement(n,e);return super.setAttribute(t,this.contentAttr,""),t}},WS=(()=>{class r extends Hd{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,i){return e.addEventListener(t,i,!1),()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,i){return e.removeEventListener(t,i)}static \u0275fac=function(t){return new(t||r)(ye(He))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),L_=["alt","control","meta","shift"],HS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GS={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},qS=(()=>{class r extends Hd{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,t,i){let o=r.parseEventName(t),a=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>za().onAndCancel(e,o.domEventName,a))}static parseEventName(e){let t=e.toLowerCase().split("."),i=t.shift();if(t.length===0||!(i==="keydown"||i==="keyup"))return null;let o=r._normalizeKey(t.pop()),a="",s=t.indexOf("code");if(s>-1&&(t.splice(s,1),a="code."),L_.forEach(l=>{let d=t.indexOf(l);d>-1&&(t.splice(d,1),a+=l+".")}),a+=o,t.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(e,t){let i=HS[e.key]||e.key,o="";return t.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),L_.forEach(a=>{if(a!==i){let s=GS[a];s(e)&&(o+=a+".")}}),o+=i,o===t)}static eventCallback(e,t,i){return o=>{r.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>t(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(t){return new(t||r)(ye(He))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function j_(r,n){return c_(Q({rootComponent:r},YS(n)))}function YS(r){return{appProviders:[...ZS,...r?.providers??[]],platformProviders:QS}}function $S(){pp.makeCurrent()}function KS(){return new Vo}function XS(){return zb(document),document}var QS=[{provide:gi,useValue:v_},{provide:Ub,useValue:$S,multi:!0},{provide:He,useFactory:XS,deps:[]}];var ZS=[{provide:Lb,useValue:"root"},{provide:Vo,useFactory:KS,deps:[]},{provide:mp,useClass:WS,multi:!0,deps:[He,Re,gi]},{provide:mp,useClass:qS,multi:!0,deps:[He]},Gd,V_,B_,{provide:Ed,useExisting:Gd},{provide:Bd,useClass:NS,deps:[]},[]];var W_=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(t){return new(t||r)(ye(He))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var xp=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:function(t){let i=null;return t?i=new(t||r):i=ye(JS),i},providedIn:"root"})}return r})(),JS=(()=>{class r extends xp{_doc;constructor(e){super(),this._doc=e}sanitize(e,t){if(t==null)return null;switch(e){case Qn.NONE:return t;case Qn.HTML:return La(t,"HTML")?Pa(t):$b(this._doc,String(t)).toString();case Qn.STYLE:return La(t,"Style")?Pa(t):t;case Qn.SCRIPT:if(La(t,"Script"))return Pa(t);throw new gt(5200,!1);case Qn.URL:return La(t,"URL")?Pa(t):Yb(String(t));case Qn.RESOURCE_URL:if(La(t,"ResourceURL"))return Pa(t);throw new gt(5201,!1);default:throw new gt(5202,!1)}}bypassSecurityTrustHtml(e){return jb(e)}bypassSecurityTrustStyle(e){return Wb(e)}bypassSecurityTrustScript(e){return Hb(e)}bypassSecurityTrustUrl(e){return Gb(e)}bypassSecurityTrustResourceUrl(e){return qb(e)}static \u0275fac=function(t){return new(t||r)(ye(He))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Qe="primary",qc=Symbol("RouteTitle"),Sp=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function qa(r){return new Sp(r)}function eA(r,n,e){let t=e.path.split("/");if(t.length>r.length||e.pathMatch==="full"&&(n.hasChildren()||t.length<r.length))return null;let i={};for(let o=0;o<t.length;o++){let a=t[o],s=r[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:r.slice(0,t.length),posParams:i}}function tA(r,n){if(r.length!==n.length)return!1;for(let e=0;e<r.length;++e)if(!Qr(r[e],n[e]))return!1;return!0}function Qr(r,n){let e=r?Ap(r):void 0,t=n?Ap(n):void 0;if(!e||!t||e.length!=t.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!ty(r[i],n[i]))return!1;return!0}function Ap(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function ty(r,n){if(Array.isArray(r)&&Array.isArray(n)){if(r.length!==n.length)return!1;let e=[...r].sort(),t=[...n].sort();return e.every((i,o)=>t[o]===i)}else return r===n}function ny(r){return r.length>0?r[r.length-1]:null}function oo(r){return bc(r)?r:Ad(r)?gn(Promise.resolve(r)):fe(r)}var nA={exact:iy,subset:oy},ry={exact:rA,subset:iA,ignored:()=>!0};function G_(r,n,e){return nA[e.paths](r.root,n.root,e.matrixParams)&&ry[e.queryParams](r.queryParams,n.queryParams)&&!(e.fragment==="exact"&&r.fragment!==n.fragment)}function rA(r,n){return Qr(r,n)}function iy(r,n,e){if(!qo(r.segments,n.segments)||!Kd(r.segments,n.segments,e)||r.numberOfChildren!==n.numberOfChildren)return!1;for(let t in n.children)if(!r.children[t]||!iy(r.children[t],n.children[t],e))return!1;return!0}function iA(r,n){return Object.keys(n).length<=Object.keys(r).length&&Object.keys(n).every(e=>ty(r[e],n[e]))}function oy(r,n,e){return ay(r,n,n.segments,e)}function ay(r,n,e,t){if(r.segments.length>e.length){let i=r.segments.slice(0,e.length);return!(!qo(i,e)||n.hasChildren()||!Kd(i,e,t))}else if(r.segments.length===e.length){if(!qo(r.segments,e)||!Kd(r.segments,e,t))return!1;for(let i in n.children)if(!r.children[i]||!oy(r.children[i],n.children[i],t))return!1;return!0}else{let i=e.slice(0,r.segments.length),o=e.slice(r.segments.length);return!qo(r.segments,i)||!Kd(r.segments,i,t)||!r.children[Qe]?!1:ay(r.children[Qe],n,o,t)}}function Kd(r,n,e){return n.every((t,i)=>ry[e](r[i].parameters,t.parameters))}var Ci=class{root;queryParams;fragment;_queryParamMap;constructor(n=new ft([],{}),e={},t=null){this.root=n,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=qa(this.queryParams),this._queryParamMap}toString(){return sA.serialize(this)}},ft=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xd(this)}},Go=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=qa(this.parameters),this._parameterMap}toString(){return cy(this)}};function oA(r,n){return qo(r,n)&&r.every((e,t)=>Qr(e.parameters,n[t].parameters))}function qo(r,n){return r.length!==n.length?!1:r.every((e,t)=>e.path===n[t].path)}function aA(r,n){let e=[];return Object.entries(r.children).forEach(([t,i])=>{t===Qe&&(e=e.concat(n(i,t)))}),Object.entries(r.children).forEach(([t,i])=>{t!==Qe&&(e=e.concat(n(i,t)))}),e}var Yc=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>new Ya,providedIn:"root"})}return r})(),Ya=class{parse(n){let e=new Ip(n);return new Ci(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Rc(n.root,!0)}`,t=dA(n.queryParams),i=typeof n.fragment=="string"?`#${cA(n.fragment)}`:"";return`${e}${t}${i}`}},sA=new Ya;function Xd(r){return r.segments.map(n=>cy(n)).join("/")}function Rc(r,n){if(!r.hasChildren())return Xd(r);if(n){let e=r.children[Qe]?Rc(r.children[Qe],!1):"",t=[];return Object.entries(r.children).forEach(([i,o])=>{i!==Qe&&t.push(`${i}:${Rc(o,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=aA(r,(t,i)=>i===Qe?[Rc(r.children[Qe],!1)]:[`${i}:${Rc(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[Qe]!=null?`${Xd(r)}/${e[0]}`:`${Xd(r)}/(${e.join("//")})`}}function sy(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yd(r){return sy(r).replace(/%3B/gi,";")}function cA(r){return encodeURI(r)}function kp(r){return sy(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qd(r){return decodeURIComponent(r)}function q_(r){return Qd(r.replace(/\+/g,"%20"))}function cy(r){return`${kp(r.path)}${lA(r.parameters)}`}function lA(r){return Object.entries(r).map(([n,e])=>`;${kp(n)}=${kp(e)}`).join("")}function dA(r){let n=Object.entries(r).map(([e,t])=>Array.isArray(t)?t.map(i=>`${Yd(e)}=${Yd(i)}`).join("&"):`${Yd(e)}=${Yd(t)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var uA=/^[^\/()?;#]+/;function wp(r){let n=r.match(uA);return n?n[0]:""}var hA=/^[^\/()?;=#]+/;function fA(r){let n=r.match(hA);return n?n[0]:""}var pA=/^[^=?&#]+/;function mA(r){let n=r.match(pA);return n?n[0]:""}var gA=/^[^&#]+/;function vA(r){let n=r.match(gA);return n?n[0]:""}var Ip=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(t[Qe]=new ft(n,e)),t}parseSegment(){let n=wp(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new gt(4009,!1);return this.capture(n),new Go(Qd(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=fA(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let i=wp(this.remaining);i&&(t=i,this.capture(t))}n[Qd(e)]=Qd(t)}parseQueryParam(n){let e=mA(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let a=vA(this.remaining);a&&(t=a,this.capture(t))}let i=q_(e),o=q_(t);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=wp(this.remaining),i=this.remaining[t.length];if(i!=="/"&&i!==")"&&i!==";")throw new gt(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Qe);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[Qe]:new ft([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new gt(4011,!1)}};function ly(r){return r.segments.length>0?new ft([],{[Qe]:r}):r}function dy(r){let n={};for(let[t,i]of Object.entries(r.children)){let o=dy(i);if(t===Qe&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[t]=o)}let e=new ft(r.segments,n);return bA(e)}function bA(r){if(r.numberOfChildren===1&&r.children[Qe]){let n=r.children[Qe];return new ft(r.segments.concat(n.segments),n.children)}return r}function Lc(r){return r instanceof Ci}function _A(r,n,e=null,t=null){let i=uy(r);return hy(i,n,e,t)}function uy(r){let n;function e(o){let a={};for(let c of o.children){let l=e(c);a[c.outlet]=l}let s=new ft(o.url,a);return o===r&&(n=s),s}let t=e(r.root),i=ly(t);return n??i}function hy(r,n,e,t){let i=r;for(;i.parent;)i=i.parent;if(n.length===0)return Cp(i,i,i,e,t);let o=yA(n);if(o.toRoot())return Cp(i,i,new ft([],{}),e,t);let a=xA(o,i,r),s=a.processChildren?Oc(a.segmentGroup,a.index,o.commands):py(a.segmentGroup,a.index,o.commands);return Cp(i,a.segmentGroup,s,e,t)}function Zd(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Bc(r){return typeof r=="object"&&r!=null&&r.outlets}function Cp(r,n,e,t,i){let o={};t&&Object.entries(t).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let a;r===n?a=e:a=fy(r,n,e);let s=ly(dy(a));return new Ci(s,o,i)}function fy(r,n,e){let t={};return Object.entries(r.children).forEach(([i,o])=>{o===n?t[i]=e:t[i]=fy(o,n,e)}),new ft(r.segments,t)}var Jd=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,t){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=t,n&&t.length>0&&Zd(t[0]))throw new gt(4003,!1);let i=t.find(Bc);if(i&&i!==ny(t))throw new gt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yA(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Jd(!0,0,r);let n=0,e=!1,t=r.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?e=!0:s===".."?n++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new Jd(e,n,t)}var Wa=class{segmentGroup;processChildren;index;constructor(n,e,t){this.segmentGroup=n,this.processChildren=e,this.index=t}};function xA(r,n,e){if(r.isAbsolute)return new Wa(n,!0,0);if(!e)return new Wa(n,!1,NaN);if(e.parent===null)return new Wa(e,!0,0);let t=Zd(r.commands[0])?0:1,i=e.segments.length-1+t;return wA(e,i,r.numberOfDoubleDots)}function wA(r,n,e){let t=r,i=n,o=e;for(;o>i;){if(o-=i,t=t.parent,!t)throw new gt(4005,!1);i=t.segments.length}return new Wa(t,!1,i-o)}function CA(r){return Bc(r[0])?r[0].outlets:{[Qe]:r}}function py(r,n,e){if(r??=new ft([],{}),r.segments.length===0&&r.hasChildren())return Oc(r,n,e);let t=DA(r,n,e),i=e.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let o=new ft(r.segments.slice(0,t.pathIndex),{});return o.children[Qe]=new ft(r.segments.slice(t.pathIndex),r.children),Oc(o,0,i)}else return t.match&&i.length===0?new ft(r.segments,{}):t.match&&!r.hasChildren()?Mp(r,n,e):t.match?Oc(r,0,i):Mp(r,n,e)}function Oc(r,n,e){if(e.length===0)return new ft(r.segments,{});{let t=CA(e),i={};if(Object.keys(t).some(o=>o!==Qe)&&r.children[Qe]&&r.numberOfChildren===1&&r.children[Qe].segments.length===0){let o=Oc(r.children[Qe],n,e);return new ft(r.segments,o.children)}return Object.entries(t).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=py(r.children[o],n,a))}),Object.entries(r.children).forEach(([o,a])=>{t[o]===void 0&&(i[o]=a)}),new ft(r.segments,i)}}function DA(r,n,e){let t=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(t>=e.length)return o;let a=r.segments[i],s=e[t];if(Bc(s))break;let c=`${s}`,l=t<e.length-1?e[t+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$_(c,l,a))return o;t+=2}else{if(!$_(c,{},a))return o;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}function Mp(r,n,e){let t=r.segments.slice(0,n),i=0;for(;i<e.length;){let o=e[i];if(Bc(o)){let c=EA(o.outlets);return new ft(t,c)}if(i===0&&Zd(e[0])){let c=r.segments[n];t.push(new Go(c.path,Y_(e[0]))),i++;continue}let a=Bc(o)?o.outlets[Qe]:`${o}`,s=i<e.length-1?e[i+1]:null;a&&s&&Zd(s)?(t.push(new Go(a,Y_(s))),i+=2):(t.push(new Go(a,{})),i++)}return new ft(t,{})}function EA(r){let n={};return Object.entries(r).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(n[e]=Mp(new ft([],{}),0,t))}),n}function Y_(r){let n={};return Object.entries(r).forEach(([e,t])=>n[e]=`${t}`),n}function $_(r,n,e){return r==e.path&&Qr(n,e.parameters)}var Nc="imperative",ln=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(ln||{}),hr=class{id;url;constructor(n,e){this.id=n,this.url=e}},$a=class extends hr{type=ln.NavigationStart;navigationTrigger;restoredState;constructor(n,e,t="imperative",i=null){super(n,e),this.navigationTrigger=t,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Di=class extends hr{urlAfterRedirects;type=ln.NavigationEnd;constructor(n,e,t){super(n,e),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},er=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(er||{}),eu=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(eu||{}),wi=class extends hr{reason;code;type=ln.NavigationCancel;constructor(n,e,t,i){super(n,e),this.reason=t,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},io=class extends hr{reason;code;type=ln.NavigationSkipped;constructor(n,e,t,i){super(n,e),this.reason=t,this.code=i}},Vc=class extends hr{error;target;type=ln.NavigationError;constructor(n,e,t,i){super(n,e),this.error=t,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tu=class extends hr{urlAfterRedirects;state;type=ln.RoutesRecognized;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rp=class extends hr{urlAfterRedirects;state;type=ln.GuardsCheckStart;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tp=class extends hr{urlAfterRedirects;state;shouldActivate;type=ln.GuardsCheckEnd;constructor(n,e,t,i,o){super(n,e),this.urlAfterRedirects=t,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fp=class extends hr{urlAfterRedirects;state;type=ln.ResolveStart;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Op=class extends hr{urlAfterRedirects;state;type=ln.ResolveEnd;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Np=class{route;type=ln.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Pp=class{route;type=ln.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lp=class{snapshot;type=ln.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bp=class{snapshot;type=ln.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vp=class{snapshot;type=ln.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zp=class{snapshot;type=ln.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nu=class{routerEvent;position;anchor;type=ln.Scroll;constructor(n,e,t){this.routerEvent=n,this.position=e,this.anchor=t}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},zc=class{},Ka=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function SA(r,n){return r.providers&&!r._injector&&(r._injector=ep(r.providers,n,`Route: ${r.path}`)),r._injector??n}function Rr(r){return r.outlet||Qe}function AA(r,n){let e=r.filter(t=>Rr(t)===n);return e.push(...r.filter(t=>Rr(t)!==n)),e}function $c(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let n=r.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Up=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $c(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Kc(this.rootInjector)}},Kc=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,t){let i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Up(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(t){return new(t||r)(ye(Er))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ru=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=jp(n,this._root);return e?e.children.map(t=>t.value):[]}firstChild(n){let e=jp(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=Wp(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Wp(n,this._root).map(e=>e.value)}};function jp(r,n){if(r===n.value)return n;for(let e of n.children){let t=jp(r,e);if(t)return t}return null}function Wp(r,n){if(r===n.value)return[n];for(let e of n.children){let t=Wp(r,e);if(t.length)return t.unshift(n),t}return[]}var Jn=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function ja(r){let n={};return r&&r.children.forEach(e=>n[e.value.outlet]=e),n}var iu=class extends ru{snapshot;constructor(n,e){super(n),this.snapshot=e,Zp(this,n)}toString(){return this.snapshot.toString()}};function my(r){let n=kA(r),e=new Sn([new Go("",{})]),t=new Sn({}),i=new Sn({}),o=new Sn({}),a=new Sn(""),s=new Yo(e,t,o,a,i,Qe,r,n.root);return s.snapshot=n.root,new iu(new Jn(s,[]),n)}function kA(r){let n={},e={},t={},i="",o=new Ha([],n,t,i,e,Qe,r,null,{});return new au("",new Jn(o,[]))}var Yo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,t,i,o,a,s,c){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Be(l=>l[qc]))??fe(void 0),this.url=n,this.params=e,this.queryParams=t,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(n=>qa(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(n=>qa(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ou(r,n,e="emptyOnly"){let t,{routeConfig:i}=r;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?t={params:Q(Q({},n.params),r.params),data:Q(Q({},n.data),r.data),resolve:Q(Q(Q(Q({},r.data),n.data),i?.data),r._resolvedData)}:t={params:Q({},r.params),data:Q({},r.data),resolve:Q(Q({},r.data),r._resolvedData??{})},i&&vy(i)&&(t.resolve[qc]=i.title),t}var Ha=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[qc]}constructor(n,e,t,i,o,a,s,c,l){this.url=n,this.params=e,this.queryParams=t,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qa(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},au=class extends ru{url;constructor(n,e){super(e),this.url=n,Zp(this,e)}toString(){return gy(this._root)}};function Zp(r,n){n.value._routerState=r,n.children.forEach(e=>Zp(r,e))}function gy(r){let n=r.children.length>0?` { ${r.children.map(gy).join(", ")} } `:"";return`${r.value}${n}`}function Dp(r){if(r.snapshot){let n=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Qr(n.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),Qr(n.params,e.params)||r.paramsSubject.next(e.params),tA(n.url,e.url)||r.urlSubject.next(e.url),Qr(n.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Hp(r,n){let e=Qr(r.params,n.params)&&oA(r.url,n.url),t=!r.parent!=!n.parent;return e&&!t&&(!r.parent||Hp(r.parent,n.parent))}function vy(r){return typeof r.title=="string"||r.title===null}var IA=new ne(""),Jp=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Qe;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=Vb(void 0);parentContexts=w(Kc);location=w(vi);changeDetector=w(St);inputBinder=w(du,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:i}=e.name;if(t)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new gt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new gt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new gt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new gt(4013,!1);this._activatedRoute=e;let i=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new Gp(e,s,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[jt]})}return r})(),Gp=class r{route;childContexts;parent;outletData;__ngOutletInjector(n){return new r(this.route,this.childContexts,n,this.outletData)}constructor(n,e,t,i){this.route=n,this.childContexts=e,this.parent=t,this.outletData=i}get(n,e){return n===Yo?this.route:n===Kc?this.childContexts:n===IA?this.outletData:this.parent.get(n,e)}},du=new ne(""),K_=(()=>{class r{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:t}=e,i=Oa([t.queryParams,t.params,t.data]).pipe(vn(([o,a,s],c)=>(s=Q(Q(Q({},o),a),s),c===0?fe(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==t||t.component===null){this.unsubscribeFromRouteData(e);return}let a=l_(t.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function MA(r,n,e){let t=Uc(r,n._root,e?e._root:void 0);return new iu(t,n)}function Uc(r,n,e){if(e&&r.shouldReuseRoute(n.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=n.value;let i=RA(r,n,e);return new Jn(t,i)}else{if(r.shouldAttach(n.value)){let o=r.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>Uc(r,s)),a}}let t=TA(n.value),i=n.children.map(o=>Uc(r,o));return new Jn(t,i)}}function RA(r,n,e){return n.children.map(t=>{for(let i of e.children)if(r.shouldReuseRoute(t.value,i.value.snapshot))return Uc(r,t,i);return Uc(r,t)})}function TA(r){return new Yo(new Sn(r.url),new Sn(r.params),new Sn(r.queryParams),new Sn(r.fragment),new Sn(r.data),r.outlet,r.component,r)}var jc=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},by="ngNavigationCancelingError";function su(r,n){let{redirectTo:e,navigationBehaviorOptions:t}=Lc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=_y(!1,er.Redirect);return i.url=e,i.navigationBehaviorOptions=t,i}function _y(r,n){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[by]=!0,e.cancellationCode=n,e}function FA(r){return yy(r)&&Lc(r.url)}function yy(r){return!!r&&r[by]}var OA=(r,n,e,t)=>Be(i=>(new qp(n,i.targetRouterState,i.currentRouterState,e,t).activate(r),i)),qp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,t,i,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=t,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,n),Dp(this.futureState.root),this.activateChildRoutes(e,t,n)}deactivateChildRoutes(n,e,t){let i=ja(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],t),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(n,e,t){let i=n.value,o=e?e.value:null;if(i===o)if(i.component){let a=t.getContext(i.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,t);else o&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let t=e.getContext(n.value.outlet),i=t&&n.value.component?t.children:e,o=ja(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(t&&t.outlet){let a=t.outlet.detach(),s=t.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let t=e.getContext(n.value.outlet),i=t&&n.value.component?t.children:e,o=ja(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(n,e,t){let i=ja(e);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],t),this.forwardEvent(new zp(o.value.snapshot))}),n.children.length&&this.forwardEvent(new Bp(n.value.snapshot))}activateRoutes(n,e,t){let i=n.value,o=e?e.value:null;if(Dp(i),i===o)if(i.component){let a=t.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,t);else if(i.component){let a=t.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Dp(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,t)}},cu=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Ga=class{component;route;constructor(n,e){this.component=n,this.route=e}};function NA(r,n,e){let t=r._root,i=n?n._root:null;return Tc(t,i,e,[t.value])}function PA(r){let n=r.routeConfig?r.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:r,guards:n}}function Qa(r,n){let e=Symbol(),t=n.get(r,e);return t===e?typeof r=="function"&&!Pb(r)?r:n.get(r):t}function Tc(r,n,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ja(n);return r.children.forEach(a=>{LA(a,o[a.value.outlet],e,t.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Pc(s,e.getContext(a),i)),i}function LA(r,n,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,a=n?n.value:null,s=e?e.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=BA(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new cu(t)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Tc(r,n,s?s.children:null,t,i):Tc(r,n,e,t,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Ga(s.outlet.component,a))}else a&&Pc(n,s,i),i.canActivateChecks.push(new cu(t)),o.component?Tc(r,null,s?s.children:null,t,i):Tc(r,null,e,t,i);return i}function BA(r,n,e){if(typeof e=="function")return e(r,n);switch(e){case"pathParamsChange":return!qo(r.url,n.url);case"pathParamsOrQueryParamsChange":return!qo(r.url,n.url)||!Qr(r.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hp(r,n)||!Qr(r.queryParams,n.queryParams);case"paramsChange":default:return!Hp(r,n)}}function Pc(r,n,e){let t=ja(r),i=r.value;Object.entries(t).forEach(([o,a])=>{i.component?n?Pc(a,n.children.getContext(o),e):Pc(a,null,e):Pc(a,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Ga(n.outlet.component,i)):e.canDeactivateChecks.push(new Ga(null,i)):e.canDeactivateChecks.push(new Ga(null,i))}function Xc(r){return typeof r=="function"}function VA(r){return typeof r=="boolean"}function zA(r){return r&&Xc(r.canLoad)}function UA(r){return r&&Xc(r.canActivate)}function jA(r){return r&&Xc(r.canActivateChild)}function WA(r){return r&&Xc(r.canDeactivate)}function HA(r){return r&&Xc(r.canMatch)}function xy(r){return r instanceof Mb||r?.name==="EmptyError"}var $d=Symbol("INITIAL_VALUE");function Xa(){return vn(r=>Oa(r.map(n=>n.pipe(on(1),cn($d)))).pipe(Be(n=>{for(let e of n)if(e!==!0){if(e===$d)return $d;if(e===!1||GA(e))return e}return!0}),mt(n=>n!==$d),on(1)))}function GA(r){return Lc(r)||r instanceof jc}function qA(r,n){return Xn(e=>{let{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?fe(ot(Q({},e),{guardsResult:!0})):YA(a,t,i,r).pipe(Xn(s=>s&&VA(s)?$A(t,o,r,n):fe(s)),Be(s=>ot(Q({},e),{guardsResult:s})))})}function YA(r,n,e,t){return gn(r).pipe(Xn(i=>JA(i.component,i.route,e,n,t)),Qi(i=>i!==!0,!0))}function $A(r,n,e,t){return gn(n).pipe(Ki(i=>vd(XA(i.route.parent,t),KA(i.route,t),ZA(r,i.path,e),QA(r,i.route,e))),Qi(i=>i!==!0,!0))}function KA(r,n){return r!==null&&n&&n(new Vp(r)),fe(!0)}function XA(r,n){return r!==null&&n&&n(new Lp(r)),fe(!0)}function QA(r,n,e){let t=n.routeConfig?n.routeConfig.canActivate:null;if(!t||t.length===0)return fe(!0);let i=t.map(o=>pi(()=>{let a=$c(n)??e,s=Qa(o,a),c=UA(s)?s.canActivate(n,r):dr(a,()=>s(n,r));return oo(c).pipe(Qi())}));return fe(i).pipe(Xa())}function ZA(r,n,e){let t=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>PA(a)).filter(a=>a!==null).map(a=>pi(()=>{let s=a.guards.map(c=>{let l=$c(a.node)??e,d=Qa(c,l),u=jA(d)?d.canActivateChild(t,r):dr(l,()=>d(t,r));return oo(u).pipe(Qi())});return fe(s).pipe(Xa())}));return fe(o).pipe(Xa())}function JA(r,n,e,t,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return fe(!0);let a=o.map(s=>{let c=$c(n)??i,l=Qa(s,c),d=WA(l)?l.canDeactivate(r,n,e,t):dr(c,()=>l(r,n,e,t));return oo(d).pipe(Qi())});return fe(a).pipe(Xa())}function ek(r,n,e,t){let i=n.canLoad;if(i===void 0||i.length===0)return fe(!0);let o=i.map(a=>{let s=Qa(a,r),c=zA(s)?s.canLoad(n,e):dr(r,()=>s(n,e));return oo(c)});return fe(o).pipe(Xa(),wy(t))}function wy(r){return Ib(nt(n=>{if(typeof n!="boolean")throw su(r,n)}),Be(n=>n===!0))}function tk(r,n,e,t){let i=n.canMatch;if(!i||i.length===0)return fe(!0);let o=i.map(a=>{let s=Qa(a,r),c=HA(s)?s.canMatch(n,e):dr(r,()=>s(n,e));return oo(c)});return fe(o).pipe(Xa(),wy(t))}var Wc=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Hc=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Ua(r){return No(new Wc(r))}function nk(r){return No(new gt(4e3,!1))}function rk(r){return No(_y(!1,er.GuardRejected))}var Yp=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let t=[],i=e.root;for(;;){if(t=t.concat(i.segments),i.numberOfChildren===0)return fe(t);if(i.numberOfChildren>1||!i.children[Qe])return nk(`${n.redirectTo}`);i=i.children[Qe]}}applyRedirectCommands(n,e,t,i,o){if(typeof e!="string"){let s=e,{queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,params:f,data:p,title:m}=i,g=dr(o,()=>s({params:f,data:p,queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,title:m}));if(g instanceof Ci)throw new Hc(g);e=g}let a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,t);if(e[0]==="/")throw new Hc(a);return a}applyRedirectCreateUrlTree(n,e,t,i){let o=this.createSegmentGroup(n,e.root,t,i);return new Ci(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let t={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);t[i]=e[s]}else t[i]=o}),t}createSegmentGroup(n,e,t,i){let o=this.createSegments(n,e.segments,t,i),a={};return Object.entries(e.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(n,c,t,i)}),new ft(o,a)}createSegments(n,e,t,i){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,t))}findPosParam(n,e,t){let i=t[e.path.substring(1)];if(!i)throw new gt(4001,!1);return i}findOrReturn(n,e){let t=0;for(let i of e){if(i.path===n.path)return e.splice(t),i;t++}return n}},$p={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ik(r,n,e,t,i){let o=Cy(r,n,e);return o.matched?(t=SA(n,t),tk(t,n,e,i).pipe(Be(a=>a===!0?o:Q({},$p)))):fe(o)}function Cy(r,n,e){if(n.path==="**")return ok(e);if(n.path==="")return n.pathMatch==="full"&&(r.hasChildren()||e.length>0)?Q({},$p):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||eA)(e,r,n);if(!i)return Q({},$p);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function ok(r){return{matched:!0,parameters:r.length>0?ny(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function X_(r,n,e,t){return e.length>0&&ck(r,e,t)?{segmentGroup:new ft(n,sk(t,new ft(e,r.children))),slicedSegments:[]}:e.length===0&&lk(r,e,t)?{segmentGroup:new ft(r.segments,ak(r,e,t,r.children)),slicedSegments:e}:{segmentGroup:new ft(r.segments,r.children),slicedSegments:e}}function ak(r,n,e,t){let i={};for(let o of e)if(uu(r,n,o)&&!t[Rr(o)]){let a=new ft([],{});i[Rr(o)]=a}return Q(Q({},t),i)}function sk(r,n){let e={};e[Qe]=n;for(let t of r)if(t.path===""&&Rr(t)!==Qe){let i=new ft([],{});e[Rr(t)]=i}return e}function ck(r,n,e){return e.some(t=>uu(r,n,t)&&Rr(t)!==Qe)}function lk(r,n,e){return e.some(t=>uu(r,n,t))}function uu(r,n,e){return(r.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function dk(r,n,e){return n.length===0&&!r.children[e]}var Kp=class{};function uk(r,n,e,t,i,o,a="emptyOnly"){return new Xp(r,n,e,t,i,a,o).recognize()}var hk=31,Xp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,t,i,o,a,s){this.injector=n,this.configLoader=e,this.rootComponentType=t,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Yp(this.urlSerializer,this.urlTree)}noMatchError(n){return new gt(4002,`'${n.segmentGroup}'`)}recognize(){let n=X_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Be(({children:e,rootSnapshot:t})=>{let i=new Jn(t,e),o=new au("",i),a=_A(t,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(n){let e=new Ha([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Qe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Qe,e).pipe(Be(t=>({children:t,rootSnapshot:e})),$i(t=>{if(t instanceof Hc)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof Wc?this.noMatchError(t):t}))}processSegmentGroup(n,e,t,i,o){return t.segments.length===0&&t.hasChildren()?this.processChildren(n,e,t,o):this.processSegment(n,e,t,t.segments,i,!0,o).pipe(Be(a=>a instanceof Jn?[a]:[]))}processChildren(n,e,t,i){let o=[];for(let a of Object.keys(t.children))a==="primary"?o.unshift(a):o.push(a);return gn(o).pipe(Ki(a=>{let s=t.children[a],c=AA(e,a);return this.processSegmentGroup(n,c,s,a,i)}),Fb((a,s)=>(a.push(...s),a)),qf(null),Tb(),Xn(a=>{if(a===null)return Ua(t);let s=Dy(a);return fk(s),fe(s)}))}processSegment(n,e,t,i,o,a,s){return gn(e).pipe(Ki(c=>this.processSegmentAgainstRoute(c._injector??n,e,c,t,i,o,a,s).pipe($i(l=>{if(l instanceof Wc)return fe(null);throw l}))),Qi(c=>!!c),$i(c=>{if(xy(c))return dk(t,i,o)?fe(new Kp):Ua(t);throw c}))}processSegmentAgainstRoute(n,e,t,i,o,a,s,c){return Rr(t)!==a&&(a===Qe||!uu(i,o,t))?Ua(i):t.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,t,o,a,c):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,t,o,a,c):Ua(i)}expandSegmentAgainstRouteUsingRedirect(n,e,t,i,o,a,s){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=Cy(e,i,o);if(!c)return Ua(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hk&&(this.allowRedirects=!1));let f=new Ha(o,l,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Q_(i),Rr(i),i.component??i._loadedComponent??null,i,Z_(i)),p=ou(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,u,f,n);return this.applyRedirects.lineralizeSegments(i,m).pipe(Xn(g=>this.processSegment(n,t,e,g.concat(h),a,!1,s)))}matchSegmentAgainstRoute(n,e,t,i,o,a){let s=ik(e,t,i,n,this.urlSerializer);return t.path==="**"&&(e.children={}),s.pipe(vn(c=>c.matched?(n=t._injector??n,this.getChildConfig(n,t,i).pipe(vn(({routes:l})=>{let d=t._loadedInjector??n,{parameters:u,consumedSegments:h,remainingSegments:f}=c,p=new Ha(h,u,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Q_(t),Rr(t),t.component??t._loadedComponent??null,t,Z_(t)),m=ou(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=X_(e,h,f,l);if(v.length===0&&g.hasChildren())return this.processChildren(d,l,g,p).pipe(Be(y=>new Jn(p,y)));if(l.length===0&&v.length===0)return fe(new Jn(p,[]));let _=Rr(t)===o;return this.processSegment(d,l,g,v,_?Qe:o,!0,p).pipe(Be(y=>new Jn(p,y instanceof Jn?[y]:[])))}))):Ua(e)))}getChildConfig(n,e,t){return e.children?fe({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?fe({routes:e._loadedRoutes,injector:e._loadedInjector}):ek(n,e,t,this.urlSerializer).pipe(Xn(i=>i?this.configLoader.loadChildren(n,e).pipe(nt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):rk(e))):fe({routes:[],injector:n})}};function fk(r){r.sort((n,e)=>n.value.outlet===Qe?-1:e.value.outlet===Qe?1:n.value.outlet.localeCompare(e.value.outlet))}function pk(r){let n=r.value.routeConfig;return n&&n.path===""}function Dy(r){let n=[],e=new Set;for(let t of r){if(!pk(t)){n.push(t);continue}let i=n.find(o=>t.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...t.children),e.add(i)):n.push(t)}for(let t of e){let i=Dy(t.children);n.push(new Jn(t.value,i))}return n.filter(t=>!e.has(t))}function Q_(r){return r.data||{}}function Z_(r){return r.resolve||{}}function mk(r,n,e,t,i,o){return Xn(a=>uk(r,n,e,t,a.extractedUrl,i,o).pipe(Be(({state:s,tree:c})=>ot(Q({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function gk(r,n){return Xn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return fe(e);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of Ey(c))a.add(l);let s=0;return gn(a).pipe(Ki(c=>o.has(c)?vk(c,t,r,n):(c.data=ou(c,c.parent,r).resolve,fe(void 0))),nt(()=>s++),Yf(1),Xn(c=>s===a.size?fe(e):$r))})}function Ey(r){let n=r.children.map(e=>Ey(e)).flat();return[r,...n]}function vk(r,n,e,t){let i=r.routeConfig,o=r._resolve;return i?.title!==void 0&&!vy(i)&&(o[qc]=i.title),bk(o,r,n,t).pipe(Be(a=>(r._resolvedData=a,r.data=ou(r,r.parent,e).resolve,null)))}function bk(r,n,e,t){let i=Ap(r);if(i.length===0)return fe({});let o={};return gn(i).pipe(Xn(a=>_k(r[a],n,e,t).pipe(Qi(),nt(s=>{if(s instanceof jc)throw su(new Ya,s);o[a]=s}))),Yf(1),Rb(o),$i(a=>xy(a)?$r:No(a)))}function _k(r,n,e,t){let i=$c(n)??t,o=Qa(r,i),a=o.resolve?o.resolve(n,e):dr(i,()=>o(n,e));return oo(a)}function Ep(r){return vn(n=>{let e=r(n);return e?gn(e).pipe(Be(()=>n)):fe(n)})}var Sy=(()=>{class r{buildTitle(e){let t,i=e.root;for(;i!==void 0;)t=this.getResolvedTitleForRoute(i)??t,i=i.children.find(o=>o.outlet===Qe);return t}getResolvedTitleForRoute(e){return e.data[qc]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>w(yk),providedIn:"root"})}return r})(),yk=(()=>{class r extends Sy{title;constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static \u0275fac=function(t){return new(t||r)(ye(W_))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Qc=new ne("",{providedIn:"root",factory:()=>({})}),xk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){t&1&&Z(0,"router-outlet")},dependencies:[Jp],encapsulation:2})}return r})();function em(r){let n=r.children&&r.children.map(em),e=n?ot(Q({},r),{children:n}):Q({},r);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Qe&&(e.component=xk),e}var Gc=new ne(""),tm=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(Td);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return fe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=oo(e.loadComponent()).pipe(Be(Ay),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Xi(()=>{this.componentLoaders.delete(e)})),i=new gd(t,()=>new he).pipe(Wf());return this.componentLoaders.set(e,i),i}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return fe({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let o=wk(t,this.compiler,e,this.onLoadEndListener).pipe(Xi(()=>{this.childrenLoaders.delete(t)})),a=new gd(o,()=>new he).pipe(Wf());return this.childrenLoaders.set(t,a),a}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function wk(r,n,e,t){return oo(r.loadChildren()).pipe(Be(Ay),Xn(i=>i instanceof Xb||Array.isArray(i)?fe(i):gn(n.compileModuleAsync(i))),Be(i=>{t&&t(r);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(e).injector,a=o.get(Gc,[],{optional:!0,self:!0}).flat()),{routes:a.map(em),injector:o}}))}function Ck(r){return r&&typeof r=="object"&&"default"in r}function Ay(r){return Ck(r)?r.default:r}var nm=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>w(Dk),providedIn:"root"})}return r})(),Dk=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ky=new ne(""),Iy=new ne("");function Ek(r,n,e){let t=r.get(Iy),i=r.get(He);return r.get(Re).runOutsideAngular(()=>{if(!i.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),Sk(r))),{onViewTransitionCreated:c}=t;return c&&dr(r,()=>c({transition:s,from:n,to:e})),a})}function Sk(r){return new Promise(n=>{Wn({read:()=>setTimeout(n)},{injector:r})})}var My=new ne(""),rm=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new he;transitionAbortSubject=new he;configLoader=w(tm);environmentInjector=w(Er);urlSerializer=w(Yc);rootContexts=w(Kc);location=w(yi);inputBindingEnabled=w(du,{optional:!0})!==null;titleStrategy=w(Sy);options=w(Qc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(nm);createViewTransition=w(ky,{optional:!0});navigationErrorHandler=w(My,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;constructor(){let e=i=>this.events.next(new Np(i)),t=i=>this.events.next(new Pp(i));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(ot(Q(Q({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,i){return this.transitions=new Sn({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),Be(o=>ot(Q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),vn(o=>{let a=!1,s=!1;return fe(o).pipe(vn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",er.SupersededByNewNavigation),$r;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ot(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new io(c.id,this.urlSerializer.serialize(c.rawUrl),u,eu.IgnoredSameUrlNavigation)),c.resolve(!1),$r}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return fe(c).pipe(vn(u=>{let h=this.transitions?.getValue();return this.events.next(new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?$r:Promise.resolve(u)}),mk(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ot(Q({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new tu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:f,restoredState:p,extras:m}=c,g=new $a(u,this.urlSerializer.serialize(h),f,p);this.events.next(g);let v=my(this.rootComponentType).snapshot;return this.currentTransition=o=ot(Q({},c),{targetSnapshot:v,urlAfterRedirects:h,extras:ot(Q({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,fe(o)}else{let u="";return this.events.next(new io(c.id,this.urlSerializer.serialize(c.extractedUrl),u,eu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),$r}}),nt(c=>{let l=new Rp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Be(c=>(this.currentTransition=o=ot(Q({},c),{guards:NA(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),qA(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw su(this.urlSerializer,c.guardsResult);let l=new Tp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",er.GuardRejected),!1)),Ep(c=>{if(c.guards.canActivateChecks.length)return fe(c).pipe(nt(l=>{let d=new Fp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),vn(l=>{let d=!1;return fe(l).pipe(gk(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",er.NoDataFromResolver)}}))}),nt(l=>{let d=new Op(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Ep(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(nt(h=>{d.component=h}),Be(()=>{})));for(let h of d.children)u.push(...l(h));return u};return Oa(l(c.targetSnapshot.root)).pipe(qf(null),on(1))}),Ep(()=>this.afterPreactivation()),vn(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?gn(d).pipe(Be(()=>o)):fe(o)}),Be(c=>{let l=MA(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ot(Q({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new zc)}),OA(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),on(1),nt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Di(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Ut(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),Xi(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",er.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),$i(c=>{if(s=!0,yy(c))this.events.next(new wi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),FA(c)?this.events.next(new Ka(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Vc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=dr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof jc){let{message:u,cancellationCode:h}=su(this.urlSerializer,d);this.events.next(new wi(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new Ka(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return $r}))}))}cancelNavigationTransition(e,t,i){let o=new wi(e.id,this.urlSerializer.serialize(e.extractedUrl),t,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==t?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ak(r){return r!==Nc}var kk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>w(Ik),providedIn:"root"})}return r})(),Qp=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},Ik=(()=>{class r extends Qp{static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ry=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>w(Mk),providedIn:"root"})}return r})(),Mk=(()=>{class r extends Ry{location=w(yi);urlSerializer=w(Yc);options=w(Qc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=w(nm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ci;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=my(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof $a)this.stateMemento=this.createStateMemento();else if(e instanceof io)this.rawUrlTree=t.initialUrl;else if(e instanceof tu){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(t.targetBrowserUrl??i,t)}}else e instanceof zc?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(t.targetBrowserUrl??this.rawUrlTree,t)):e instanceof wi&&(e.code===er.GuardRejected||e.code===er.NoDataFromResolver)?this.restoreHistory(t):e instanceof Vc?this.restoreHistory(t,!0):e instanceof Di&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let i=e instanceof Ci?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||t.extras.replaceUrl){let o=this.browserPageId,a=Q(Q({},t.extras.state),this.generateNgRouterState(t.id,o));this.location.replaceState(i,"",a)}else{let o=Q(Q({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Fc=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(Fc||{});function Ty(r,n){r.events.pipe(mt(e=>e instanceof Di||e instanceof wi||e instanceof Vc||e instanceof io),Be(e=>e instanceof Di||e instanceof io?Fc.COMPLETE:(e instanceof wi?e.code===er.Redirect||e.code===er.SupersededByNewNavigation:!1)?Fc.REDIRECTING:Fc.FAILED),mt(e=>e!==Fc.REDIRECTING),on(1)).subscribe(()=>{n()})}var Rk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(Sd);stateManager=w(Ry);options=w(Qc,{optional:!0})||{};pendingTasks=w(wd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(rm);urlSerializer=w(Yc);location=w(yi);urlHandlingStrategy=w(nm);_events=new he;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(kk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Gc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(du,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ct;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(t,o),t instanceof wi&&t.code!==er.Redirect&&t.code!==er.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof Di)this.navigated=!0;else if(t instanceof Ka){let a=t.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(t.url,i.currentRawUrl),c=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ak(i.source)},a);this.scheduleNavigation(s,Nc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Ok(t)&&this._events.next(t)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let c=Q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let s=this.parseUrl(e);this.scheduleNavigation(s,t,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(em),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:c}=t,l=c?this.currentUrlTree.fragment:a,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=i?i.snapshot:this.routerState.snapshot.root;u=uy(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),u=this.currentUrlTree.root}return hy(u,e,d,l??null)}navigateByUrl(e,t={skipLocationChange:!1}){let i=Lc(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Nc,null,t)}navigate(e,t={skipLocationChange:!1}){return Fk(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let i;if(t===!0?i=Q({},Rk):t===!1?i=Q({},Tk):i=t,Lc(e))return G_(this.currentUrlTree,e,i);let o=this.parseUrl(e);return G_(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((t,[i,o])=>(o!=null&&(t[i]=o),t),{})}scheduleNavigation(e,t,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,c,l;a?(s=a.resolve,c=a.reject,l=a.promise):l=new Promise((u,h)=>{s=u,c=h});let d=this.pendingTasks.add();return Ty(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Fk(r){for(let n=0;n<r.length;n++)if(r[n]==null)throw new gt(4008,!1)}function Ok(r){return!(r instanceof zc)&&!(r instanceof Ka)}var lu=class{};var Nk=(()=>{class r{router;injector;preloadingStrategy;loader;subscription;constructor(e,t,i,o,a){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(mt(e=>e instanceof Di),Ki(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){let i=[];for(let o of t){o.providers&&!o._injector&&(o._injector=ep(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return gn(i).pipe(Hf())}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{let i;t.loadChildren&&t.canLoad===void 0?i=this.loader.loadChildren(e,t):i=fe(null);let o=i.pipe(Xn(a=>a===null?fe(void 0):(t._loadedRoutes=a.routes,t._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(t.loadComponent&&!t._loadedComponent){let a=this.loader.loadComponent(t);return gn([o,a]).pipe(Hf())}else return o})}static \u0275fac=function(t){return new(t||r)(ye(Qt),ye(Td),ye(Er),ye(lu),ye(tm))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Fy=new ne(""),Pk=(()=>{class r{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,t,i,o,a={}){this.urlSerializer=e,this.transitions=t,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof $a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Di?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof io&&e.code===eu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof nu&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nu(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,t))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(t){Ba()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function Oy(r,...n){return Lo([{provide:Gc,multi:!0,useValue:r},[],{provide:Yo,useFactory:Ny,deps:[Qt]},{provide:kd,multi:!0,useFactory:Py},n.map(e=>e.\u0275providers)])}function Ny(r){return r.routerState.root}function Zc(r,n){return{\u0275kind:r,\u0275providers:n}}function Py(){let r=w(yt);return n=>{let e=r.get(Zi);if(n!==e.components[0])return;let t=r.get(Qt),i=r.get(Ly);r.get(im)===1&&t.initialNavigation(),r.get(By,null,Xf.Optional)?.setUpPreloading(),r.get(Fy,null,Xf.Optional)?.init(),t.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ly=new ne("",{factory:()=>new he}),im=new ne("",{providedIn:"root",factory:()=>1});function Lk(){return Zc(2,[{provide:im,useValue:0},{provide:tp,multi:!0,deps:[yt],useFactory:n=>{let e=n.get(h_,Promise.resolve());return()=>e.then(()=>new Promise(t=>{let i=n.get(Qt),o=n.get(Ly);Ty(i,()=>{t(!0)}),n.get(rm).afterPreactivation=()=>(t(!0),o.closed?fe(void 0):o),i.initialNavigation()}))}}])}function Bk(){return Zc(3,[{provide:tp,multi:!0,useFactory:()=>{let n=w(Qt);return()=>{n.setUpLocationChangeListener()}}},{provide:im,useValue:2}])}var By=new ne("");function Vk(r){return Zc(0,[{provide:By,useExisting:Nk},{provide:lu,useExisting:r}])}function zk(){return Zc(8,[K_,{provide:du,useExisting:K_}])}function Uk(r){let n=[{provide:ky,useValue:Ek},{provide:Iy,useValue:Q({skipNextTransition:!!r?.skipInitialTransition},r)}];return Zc(9,n)}var J_=new ne("ROUTER_FORROOT_GUARD"),jk=[yi,{provide:Yc,useClass:Ya},Qt,Kc,{provide:Yo,useFactory:Ny,deps:[Qt]},tm,[]],Vy=(()=>{class r{constructor(e){}static forRoot(e,t){return{ngModule:r,providers:[jk,[],{provide:Gc,multi:!0,useValue:e},{provide:J_,useFactory:qk,deps:[[Qt,new Po,new yc]]},t?.errorHandler?{provide:My,useValue:t.errorHandler}:[],{provide:Qc,useValue:t||{}},t?.useHash?Hk():Gk(),Wk(),t?.preloadingStrategy?Vk(t.preloadingStrategy).\u0275providers:[],t?.initialNavigation?Yk(t):[],t?.bindToComponentInputs?zk().\u0275providers:[],t?.enableViewTransitions?Uk().\u0275providers:[],$k()]}}static forChild(e){return{ngModule:r,providers:[{provide:Gc,multi:!0,useValue:e}]}}static \u0275fac=function(t){return new(t||r)(ye(J_,8))};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})();function Wk(){return{provide:Fy,useFactory:()=>{let r=w(__),n=w(Re),e=w(Qc),t=w(rm),i=w(Yc);return e.scrollOffset&&r.setOffset(e.scrollOffset),new Pk(i,t,r,n,e)}}}function Hk(){return{provide:ip,useClass:p_}}function Gk(){return{provide:ip,useClass:f_}}function qk(r){return"guarded"}function Yk(r){return[r.initialNavigation==="disabled"?Bk().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Lk().\u0275providers:[]]}var ey=new ne("");function $k(){return[{provide:ey,useFactory:Py},{provide:kd,multi:!0,useExisting:ey}]}function Ei(r){return r!=null&&`${r}`!="false"}function Jc(r,n=0){return Kk(r)?Number(r):arguments.length===2?n:0}function Kk(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function Ja(r){return Array.isArray(r)?r:[r]}function Yt(r){return r==null?"":typeof r=="string"?r:`${r}px`}function fr(r){return r instanceof Ve?r.nativeElement:r}function zy(r,n=/\s+/){let e=[];if(r!=null){let t=Array.isArray(r)?r:`${r}`.split(n);for(let i of t){let o=`${i}`.trim();o&&e.push(o)}}return e}var am;try{am=typeof Intl<"u"&&Intl.v8BreakIterator}catch{am=!1}var dt=(()=>{class r{_platformId=w(gi);isBrowser=this._platformId?b_(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||am)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var es,Uy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function sm(){if(es)return es;if(typeof document!="object"||!document)return es=new Set(Uy),es;let r=document.createElement("input");return es=new Set(Uy.filter(n=>(r.setAttribute("type",n),r.type===n))),es}var el;function Xk(){if(el==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>el=!0}))}finally{el=el||!1}return el}function pr(r){return Xk()?r:!!r.capture}var Tr=function(r){return r[r.NORMAL=0]="NORMAL",r[r.NEGATED=1]="NEGATED",r[r.INVERTED=2]="INVERTED",r}(Tr||{}),hu,$o;function fu(){if($o==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return $o=!1,$o;if("scrollBehavior"in document.documentElement.style)$o=!0;else{let r=Element.prototype.scrollTo;r?$o=!/\{\s*\[native code\]\s*\}/.test(r.toString()):$o=!1}}return $o}function ts(){if(typeof document!="object"||!document)return Tr.NORMAL;if(hu==null){let r=document.createElement("div"),n=r.style;r.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";let e=document.createElement("div"),t=e.style;t.width="2px",t.height="1px",r.appendChild(e),document.body.appendChild(r),hu=Tr.NORMAL,r.scrollLeft===0&&(r.scrollLeft=1,hu=r.scrollLeft===0?Tr.NEGATED:Tr.INVERTED),r.remove()}return hu}var om;function Qk(){if(om==null){let r=typeof document<"u"?document.head:null;om=!!(r&&(r.createShadowRoot||r.attachShadow))}return om}function jy(r){if(Qk()){let n=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function ao(){let r=typeof document<"u"&&document?document.activeElement:null;for(;r&&r.shadowRoot;){let n=r.shadowRoot.activeElement;if(n===r)break;r=n}return r}function tr(r){return r.composedPath?r.composedPath()[0]:r.target}function cm(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var pu=new WeakMap,Nt=(()=>{class r{_appRef;_injector=w(yt);_environmentInjector=w(Er);load(e){let t=this._appRef=this._appRef||this._injector.get(Zi),i=pu.get(t);i||(i={loaders:new Set,refs:[]},pu.set(t,i),t.onDestroy(()=>{pu.get(t)?.refs.forEach(o=>o.destroy()),pu.delete(t)})),i.loaders.has(e)||(i.loaders.add(e),i.refs.push(Od(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Fr=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(t,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return r})();function Zt(r,...n){return n.length?n.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}var Zk=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var mu=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[Zk]})}return r})();var Wy=new Set,Ko,Jk=(()=>{class r{_platform=w(dt);_nonce=w(xc,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tI}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&eI(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function eI(r,n){if(!Wy.has(r))try{Ko||(Ko=document.createElement("style"),n&&Ko.setAttribute("nonce",n),Ko.setAttribute("type","text/css"),document.head.appendChild(Ko)),Ko.sheet&&(Ko.sheet.insertRule(`@media ${r} {body{ }}`,0),Wy.add(r))}catch(e){console.error(e)}}function tI(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var Gy=(()=>{class r{_mediaMatcher=w(Jk);_zone=w(Re);_queries=new Map;_destroySubject=new he;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Hy(Ja(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=Hy(Ja(e)).map(a=>this._registerQuery(a).observable),o=Oa(i);return o=vd(o.pipe(on(1)),o.pipe(xd(1),yd(0))),o.pipe(Be(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:l})=>{s.matches=s.matches||c,s.breakpoints[l]=c}),s}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let t=this._mediaMatcher.matchMedia(e),o={observable:new Yr(a=>{let s=c=>this._zone.run(()=>a.next(c));return t.addListener(s),()=>{t.removeListener(s)}}).pipe(cn(t),Be(({matches:a})=>({query:e,matches:a})),Ut(this._destroySubject)),mql:t};return this._queries.set(e,o),o}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Hy(r){return r.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}var Xy=" ";function vm(r,n,e){let t=_u(r,n);e=e.trim(),!t.some(i=>i.trim()===e)&&(t.push(e),r.setAttribute(n,t.join(Xy)))}function xu(r,n,e){let t=_u(r,n);e=e.trim();let i=t.filter(o=>o!==e);i.length?r.setAttribute(n,i.join(Xy)):r.removeAttribute(n)}function _u(r,n){return r.getAttribute(n)?.match(/\S+/g)??[]}var Qy="cdk-describedby-message",gu="cdk-describedby-host",hm=0,Zy=(()=>{class r{_platform=w(dt);_document=w(He);_messageRegistry=new Map;_messagesContainer=null;_id=`${hm++}`;constructor(){w(Nt).load(Fr),this._id=w(Na)+"-"+hm++}describe(e,t,i){if(!this._canBeDescribed(e,t))return;let o=lm(t,i);typeof t!="string"?(qy(t,this._id),this._messageRegistry.set(o,{messageElement:t,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(t,i),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,t,i){if(!t||!this._isElementNode(e))return;let o=lm(t,i);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof t=="string"){let a=this._messageRegistry.get(o);a&&a.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${gu}="${this._id}"]`);for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute(gu);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,t){let i=this._document.createElement("div");qy(i,this._id),i.textContent=e,t&&i.setAttribute("role",t),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(lm(e,t),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",t=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<t.length;o++)t[o].remove();let i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){let t=_u(e,"aria-describedby").filter(i=>i.indexOf(Qy)!=0);e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){let i=this._messageRegistry.get(t);vm(e,"aria-describedby",i.messageElement.id),e.setAttribute(gu,this._id),i.referenceCount++}_removeMessageReference(e,t){let i=this._messageRegistry.get(t);i.referenceCount--,xu(e,"aria-describedby",i.messageElement.id),e.removeAttribute(gu)}_isElementDescribedByMessage(e,t){let i=_u(e,"aria-describedby"),o=this._messageRegistry.get(t),a=o&&o.messageElement.id;return!!a&&i.indexOf(a)!=-1}_canBeDescribed(e,t){if(!this._isElementNode(e))return!1;if(t&&typeof t=="object")return!0;let i=t==null?"":`${t}`.trim(),o=e.getAttribute("aria-label");return i?!o||o.trim()!==i:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function lm(r,n){return typeof r=="string"?`${n||""}/${r}`:r}function qy(r,n){r.id||(r.id=`${Qy}-${n}-${hm++}`)}var uI=200,fm=class{_letterKeyStream=new he;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new he;selectedItem=this._selectedItem;constructor(n,e){let t=typeof e?.debounceInterval=="number"?e.debounceInterval:uI;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(nt(e=>this._pressedLetters.push(e)),yd(n),mt(()=>this._pressedLetters.length>0),Be(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){let i=(this._selectedItemIndex+t)%this._items.length,o=this._items[i];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},pm=class{_items;_activeItemIndex=-1;_activeItem=Kr(null);_wrap=!1;_typeaheadSubscription=Ct.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof Qf?this._itemChangesSubscription=n.changes.subscribe(t=>this._itemsChanged(t.toArray())):Uo(n)&&(this._effectRef=Fd(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new he;change=new he;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new fm(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:t=>this._skipPredicateFn(t)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(t=>{this.setActiveItem(t)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(i||Zt(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),t=typeof n=="number"?n:e.indexOf(n),i=e[t];this._activeItem.set(i??null),this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let t=1;t<=e.length;t++){let i=(this._activeItemIndex+n*t+e.length)%e.length,o=e[i];if(!this._skipPredicateFn(o)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let t=this._getItemsArray();if(t[n]){for(;this._skipPredicateFn(t[n]);)if(n+=e,!t[n])return;this.setActiveItem(n)}}_getItemsArray(){return Uo(this._items)?this._items():this._items instanceof Qf?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let t=n.indexOf(e);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}},yu=class extends pm{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var rl=(()=>{class r{_platform=w(dt);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return fI(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let t=hI(xI(e));if(t&&(Yy(t)===-1||!this.isVisible(t)))return!1;let i=e.nodeName.toLowerCase(),o=Yy(e);return e.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!_I(e)?!1:i==="audio"?e.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,t){return yI(e)&&!this.isDisabled(e)&&(t?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function hI(r){try{return r.frameElement}catch{return null}}function fI(r){return!!(r.offsetWidth||r.offsetHeight||typeof r.getClientRects=="function"&&r.getClientRects().length)}function pI(r){let n=r.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function mI(r){return vI(r)&&r.type=="hidden"}function gI(r){return bI(r)&&r.hasAttribute("href")}function vI(r){return r.nodeName.toLowerCase()=="input"}function bI(r){return r.nodeName.toLowerCase()=="a"}function Jy(r){if(!r.hasAttribute("tabindex")||r.tabIndex===void 0)return!1;let n=r.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function Yy(r){if(!Jy(r))return null;let n=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function _I(r){let n=r.nodeName.toLowerCase(),e=n==="input"&&r.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function yI(r){return mI(r)?!1:pI(r)||gI(r)||r.hasAttribute("contenteditable")||Jy(r)}function xI(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}var mm=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,t,i,o=!1,a){this._element=n,this._checker=e,this._ngZone=t,this._document=i,this._injector=a,o||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let t=this._getFirstTabbableElement(e);return t?.focus(n),!!t}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let t=0;t<e.length;t++){let i=e[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[t]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let t=e.length-1;t>=0;t--){let i=e[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[t]):null;if(i)return i}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?Wn(n,{injector:this._injector}):setTimeout(n)}},bm=(()=>{class r{_checker=w(rl);_ngZone=w(Re);_document=w(He);_injector=w(yt);constructor(){w(Nt).load(Fr)}create(e,t=!1){return new mm(e,this._checker,this._ngZone,this._document,t,this._injector)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),e0=(()=>{class r{_elementRef=w(Ve);_focusTrapFactory=w(bm);focusTrap;_previouslyFocusedElement=null;get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}autoCapture;constructor(){w(dt).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=ao(),this.focusTrap?.focusInitialElementWhenReady()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Fe],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Fe]},exportAs:["cdkTrapFocus"],features:[lt,jt]})}return r})();function _m(r){return r.buttons===0||r.detail===0}function ym(r){let n=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var wI=new ne("cdk-input-modality-detector-options"),CI={ignoreKeys:[18,17,224,91,16]},t0=650,ns=pr({passive:!0,capture:!0}),DI=(()=>{class r{_platform=w(dt);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Sn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(t=>t===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=tr(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<t0||(this._modality.next(_m(e)?"keyboard":"mouse"),this._mostRecentTarget=tr(e))};_onTouchstart=e=>{if(ym(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=tr(e)};constructor(){let e=w(Re),t=w(He),i=w(wI,{optional:!0});this._options=Q(Q({},CI),i),this.modalityDetected=this._modality.pipe(xd(1)),this.modalityChanged=this.modalityDetected.pipe(_c()),this._platform.isBrowser&&e.runOutsideAngular(()=>{t.addEventListener("keydown",this._onKeydown,ns),t.addEventListener("mousedown",this._onMousedown,ns),t.addEventListener("touchstart",this._onTouchstart,ns)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ns),document.removeEventListener("mousedown",this._onMousedown,ns),document.removeEventListener("touchstart",this._onTouchstart,ns))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),EI=new ne("liveAnnouncerElement",{providedIn:"root",factory:SI});function SI(){return null}var AI=new ne("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),kI=0,n0=(()=>{class r{_ngZone=w(Re);_defaultOptions=w(AI,{optional:!0});_liveElement;_document=w(He);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=w(EI,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...t){let i=this._defaultOptions,o,a;return t.length===1&&typeof t[0]=="number"?a=t[0]:[o,a]=t,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),a==null&&i&&(a=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(s=>this._currentResolve=s)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",t=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let o=0;o<t.length;o++)t[o].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${kI++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(e){let t=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<t.length;i++){let o=t[i],a=o.getAttribute("aria-owns");a?a.indexOf(e)===-1&&o.setAttribute("aria-owns",a+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var bu=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(bu||{}),II=new ne("cdk-focus-monitor-default-options"),vu=pr({passive:!0,capture:!0}),Qo=(()=>{class r{_ngZone=w(Re);_platform=w(dt);_inputModalityDetector=w(DI);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=w(He,{optional:!0});_stopInputModalityDetector=new he;constructor(){let e=w(II,{optional:!0});this._detectionMode=e?.detectionMode||bu.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let t=tr(e);for(let i=t;i;i=i.parentElement)e.type==="focus"?this._onFocus(e,i):this._onBlur(e,i)};monitor(e,t=!1){let i=fr(e);if(!this._platform.isBrowser||i.nodeType!==1)return fe();let o=jy(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return t&&(a.checkChildren=!0),a.subject;let s={checkChildren:t,subject:new he,rootNode:o};return this._elementInfo.set(i,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){let t=fr(e),i=this._elementInfo.get(t);i&&(i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(i))}focusVia(e,t,i){let o=fr(e),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,c])=>this._originChanged(s,t,c)):(this._setOrigin(t),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===bu.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,t){e.classList.toggle("cdk-focused",!!t),e.classList.toggle("cdk-touch-focused",t==="touch"),e.classList.toggle("cdk-keyboard-focused",t==="keyboard"),e.classList.toggle("cdk-mouse-focused",t==="mouse"),e.classList.toggle("cdk-program-focused",t==="program")}_setOrigin(e,t=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&t,this._detectionMode===bu.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?t0:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(e,t){let i=this._elementInfo.get(t),o=tr(e);!i||!i.checkChildren&&t!==o||this._originChanged(t,this._getFocusOrigin(o),i)}_onBlur(e,t){let i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i,null))}_emitOrigin(e,t){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let t=e.rootNode,i=this._rootNodeFocusListenerCount.get(t)||0;i||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,vu),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,vu)}),this._rootNodeFocusListenerCount.set(t,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ut(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){let i=this._rootNodeFocusListenerCount.get(t);i>1?this._rootNodeFocusListenerCount.set(t,i-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,vu),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,vu),this._rootNodeFocusListenerCount.delete(t))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,t,i){this._setClasses(e,t),this._emitOrigin(i,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){let t=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&t.push([o,i])}),t}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:t,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!t||t===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(t))return!0}return!1}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),r0=(()=>{class r{_elementRef=w(Ve);_focusMonitor=w(Qo);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new le;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(t=>{this._focusOrigin=t,this.cdkFocusChange.emit(t)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return r})(),Xo=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(Xo||{}),$y="cdk-high-contrast-black-on-white",Ky="cdk-high-contrast-white-on-black",dm="cdk-high-contrast-active",xm=(()=>{class r{_platform=w(dt);_hasCheckedHighContrastMode;_document=w(He);_breakpointSubscription;constructor(){this._breakpointSubscription=w(Gy).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Xo.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let t=this._document.defaultView||window,i=t&&t.getComputedStyle?t.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Xo.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Xo.BLACK_ON_WHITE}return Xo.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(dm,$y,Ky),this._hasCheckedHighContrastMode=!0;let t=this.getHighContrastMode();t===Xo.BLACK_ON_WHITE?e.add(dm,$y):t===Xo.WHITE_ON_BLACK&&e.add(dm,Ky)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),os=(()=>{class r{constructor(){w(xm)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[mu]})}return r})(),um={},Tt=(()=>{class r{_appId=w(Na);getId(e){return this._appId!=="ng"&&(e+=this._appId),um.hasOwnProperty(e)||(um[e]=0),`${e}${um[e]++}`}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var MI=new ne("cdk-dir-doc",{providedIn:"root",factory:RI});function RI(){return w(He)}var TI=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function FI(r){let n=r?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?TI.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var bn=(()=>{class r{value="ltr";change=new le;constructor(){let e=w(MI,{optional:!0});if(e){let t=e.body?e.body.dir:null,i=e.documentElement?e.documentElement.dir:null;this.value=FI(t||i||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var lo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})();var OI=["text"],NI=[[["mat-icon"]],"*"],PI=["mat-icon","*"];function LI(r,n){if(r&1&&Z(0,"mat-pseudo-checkbox",1),r&2){let e=de();Ce("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function BI(r,n){if(r&1&&Z(0,"mat-pseudo-checkbox",3),r&2){let e=de();Ce("disabled",e.disabled)}}function VI(r,n){if(r&1&&(F(0,"span",4),J(1),N()),r&2){let e=de();H(),ur("(",e.group.label,")")}}var zI=["mat-internal-form-field",""],UI=["*"];var Ze=(()=>{class r{constructor(){w(xm)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[lo,lo]})}return r})(),Zo=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(n,e,t,i,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=t,this._parentForm=i,this._stateChanges=o}updateErrorState(){let n=this.errorState,e=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,o=t?.isErrorState(i,e)??!1;o!==n&&(this.errorState=o,this._stateChanges.next())}},i0=new ne("MAT_DATE_LOCALE",{providedIn:"root",factory:jI});function jI(){return w(s_)}var as="Method not implemented",kn=class{locale;_localeChanges=new he;localeChanges=this._localeChanges;setTime(n,e,t,i){throw new Error(as)}getHours(n){throw new Error(as)}getMinutes(n){throw new Error(as)}getSeconds(n){throw new Error(as)}parseTime(n,e){throw new Error(as)}addSeconds(n,e){throw new Error(as)}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return n==null||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}compareTime(n,e){return this.getHours(n)-this.getHours(e)||this.getMinutes(n)-this.getMinutes(e)||this.getSeconds(n)-this.getSeconds(e)}sameDate(n,e){if(n&&e){let t=this.isValid(n),i=this.isValid(e);return t&&i?!this.compareDate(n,e):t==i}return n==e}sameTime(n,e){if(n&&e){let t=this.isValid(n),i=this.isValid(e);return t&&i?!this.compareTime(n,e):t==i}return n==e}clampDate(n,e,t){return e&&this.compareDate(n,e)<0?e:t&&this.compareDate(n,t)>0?t:n}},Jo=new ne("mat-date-formats"),WI=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,HI=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function wm(r,n){let e=Array(r);for(let t=0;t<r;t++)e[t]=n(t);return e}var GI=(()=>{class r extends kn{useUtcForDisplay=!1;_matDateLocale=w(i0,{optional:!0});constructor(){super();let e=w(i0,{optional:!0});e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let t=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return wm(12,i=>this._format(t,new Date(2017,i,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return wm(31,t=>this._format(e,new Date(2017,0,t+1)))}getDayOfWeekNames(e){let t=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return wm(7,i=>this._format(t,new Date(2017,0,i+1)))}getYearName(e){let t=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(t,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),t=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return t===7?0:t}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,t,i){let o=this._createDateWithOverflow(e,t,i);return o.getMonth()!=t,o}today(){return new Date}parse(e,t){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,t){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let i=new Intl.DateTimeFormat(this.locale,ot(Q({},t),{timeZone:"utc"}));return this._format(i,e)}addCalendarYears(e,t){return this.addCalendarMonths(e,t*12)}addCalendarMonths(e,t){let i=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+t,this.getDate(e));return this.getMonth(i)!=((this.getMonth(e)+t)%12+12)%12&&(i=this._createDateWithOverflow(this.getYear(i),this.getMonth(i),0)),i}addCalendarDays(e,t){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+t)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(WI.test(e)){let t=new Date(e);if(this.isValid(t))return t}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}setTime(e,t,i,o){let a=this.clone(e);return a.setHours(t,i,o,0),a}getHours(e){return e.getHours()}getMinutes(e){return e.getMinutes()}getSeconds(e){return e.getSeconds()}parseTime(e,t){if(typeof e!="string")return e instanceof Date?new Date(e.getTime()):null;let i=e.trim();if(i.length===0)return null;let o=this._parseTimeString(i);if(o===null){let a=i.replace(/[^0-9:(AM|PM)]/gi,"").trim();a.length>0&&(o=this._parseTimeString(a))}return o||this.invalid()}addSeconds(e,t){return new Date(e.getTime()+t*1e3)}_createDateWithOverflow(e,t,i){let o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,t){let i=new Date;return i.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e.format(i)}_parseTimeString(e){let t=e.toUpperCase().match(HI);if(t){let i=parseInt(t[1]),o=parseInt(t[2]),a=t[3]==null?void 0:parseInt(t[3]),s=t[4];if(i===12?i=s==="AM"?0:i:s==="PM"&&(i+=12),Cm(i,0,23)&&Cm(o,0,59)&&(a==null||Cm(a,0,59)))return this.setTime(this.today(),i,o,a||0)}return null}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function Cm(r,n,e){return!isNaN(r)&&r>=n&&r<=e}var qI={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};function Eu(r=qI){return[{provide:kn,useClass:GI},{provide:Jo,useValue:r}]}var il=(()=>{class r{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ea=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["structural-styles"]],decls:0,vars:0,template:function(t,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return r})();var mr=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(mr||{}),Sm=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=mr.HIDDEN;constructor(n,e,t,i=!1){this._renderer=n,this.element=e,this.config=t,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},o0=pr({passive:!0,capture:!0}),Am=class{_events=new Map;addHandler(n,e,t,i){let o=this._events.get(e);if(o){let a=o.get(t);a?a.add(i):o.set(t,new Set([i]))}else this._events.set(e,new Map([[t,new Set([i])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,o0)})}removeHandler(n,e,t){let i=this._events.get(n);if(!i)return;let o=i.get(e);o&&(o.delete(t),o.size===0&&i.delete(e),i.size===0&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,o0)))}_delegateEventHandler=n=>{let e=tr(n);e&&this._events.get(n.type)?.forEach((t,i)=>{(i===e||i.contains(e))&&t.forEach(o=>o.handleEvent(n))})}},Cu={enterDuration:225,exitDuration:150},YI=800,a0=pr({passive:!0,capture:!0}),s0=["mousedown","touchstart"],c0=["mouseup","mouseleave","touchend","touchcancel"],$I=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return r})(),Du=class r{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Am;constructor(n,e,t,i,o){this._target=n,this._ngZone=e,this._platform=i,i.isBrowser&&(this._containerElement=fr(t)),o&&o.get(Nt).load($I)}fadeInRipple(n,e,t={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Q(Q({},Cu),t.animation);t.centered&&(n=i.left+i.width/2,e=i.top+i.height/2);let a=t.radius||KI(n,e,i),s=n-i.left,c=e-i.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${s-a}px`,d.style.top=`${c-a}px`,d.style.height=`${a*2}px`,d.style.width=`${a*2}px`,t.color!=null&&(d.style.backgroundColor=t.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,m=new Sm(this,d,t,p);d.style.transform="scale3d(1, 1, 1)",m.state=mr.FADING_IN,t.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let v=()=>{g&&(g.fallbackTimer=null),clearTimeout(y),this._finishRippleTransition(m)},_=()=>this._destroyRipple(m),y=setTimeout(_,l+100);d.addEventListener("transitionend",v),d.addEventListener("transitioncancel",_),g={onTransitionEnd:v,onTransitionCancel:_,fallbackTimer:y}}),this._activeRipples.set(m,g),(p||!l)&&this._finishRippleTransition(m),m}fadeOutRipple(n){if(n.state===mr.FADING_OUT||n.state===mr.HIDDEN)return;let e=n.element,t=Q(Q({},Cu),n.config.animation);e.style.transitionDuration=`${t.exitDuration}ms`,e.style.opacity="0",n.state=mr.FADING_OUT,(n._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){let e=fr(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,s0.forEach(t=>{r._eventManager.addHandler(this._ngZone,t,e,this)}))}handleEvent(n){n.type==="mousedown"?this._onMousedown(n):n.type==="touchstart"?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{c0.forEach(e=>{this._triggerElement.addEventListener(e,this,a0)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===mr.FADING_IN?this._startFadeOutTransition(n):n.state===mr.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){let e=n===this._mostRecentTransientRipple,{persistent:t}=n.config;n.state=mr.VISIBLE,!t&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){let e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=mr.HIDDEN,e!==null&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){let e=_m(n),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+YI;!this._target.rippleDisabled&&!e&&!t&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!ym(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=n.changedTouches;if(e)for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{let e=n.state===mr.VISIBLE||n.config.terminateOnPointerUp&&n.state===mr.FADING_IN;!n.config.persistent&&e&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let n=this._triggerElement;n&&(s0.forEach(e=>r._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(c0.forEach(e=>n.removeEventListener(e,this,a0)),this._pointerUpEventsRegistered=!1))}};function KI(r,n,e){let t=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),i=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(t*t+i*i)}var h0=new ne("mat-ripple-global-options"),Im=(()=>{class r{_elementRef=w(Ve);_animationMode=w(Kt,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=w(Re),t=w(dt),i=w(h0,{optional:!0}),o=w(yt);this._globalOptions=i||{},this._rippleRenderer=new Du(this,e,this._elementRef,t,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Q(Q(Q({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,i){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,t,Q(Q({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Q(Q({},this.rippleConfig),e))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){t&2&&Te("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return r})(),ol=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ze]})}return r})(),XI=(()=>{class r{_animationMode=w(Kt,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(t,i){t&2&&Te("mat-pseudo-checkbox-indeterminate",i.state==="indeterminate")("mat-pseudo-checkbox-checked",i.state==="checked")("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal",i.appearance==="minimal")("mat-pseudo-checkbox-full",i.appearance==="full")("_mat-animation-noopable",i._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return r})(),QI=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze]})}return r})(),Mm=new ne("MAT_OPTION_PARENT_COMPONENT"),Rm=new ne("MatOptgroup");var km=class{source;isUserInput;constructor(n,e=!1){this.source=n,this.isUserInput=e}},Su=(()=>{class r{_element=w(Ve);_changeDetectorRef=w(St);_parent=w(Mm,{optional:!0});group=w(Rm,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=w(Tt).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new le;_text;_stateChanges=new he;constructor(){w(Nt).load(ea),w(Nt).load(Fr),this._signalDisableRipple=!!this._parent&&Uo(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,t){let i=this._getHostElement();typeof i.focus=="function"&&i.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Zt(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new km(this,e))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-option"]],viewQuery:function(t,i){if(t&1&&it(OI,7),t&2){let o;je(o=We())&&(i._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(t,i){t&1&&ae("click",function(){return i._selectViaInteraction()})("keydown",function(a){return i._handleKeydown(a)}),t&2&&(Ar("id",i.id),$e("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Te("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Fe]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[lt],ngContentSelectors:PI,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){t&1&&(Ot(NI),Pe(0,LI,1,2,"mat-pseudo-checkbox",1),tt(1),F(2,"span",2,0),tt(4,1),N(),Pe(5,BI,1,1,"mat-pseudo-checkbox",3)(6,VI,2,1,"span",4),Z(7,"div",5)),t&2&&(ze(i.multiple?0:-1),H(5),ze(!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator?5:-1),H(),ze(i.group&&i.group._inert?6:-1),H(),Ce("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[XI,Im],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();function f0(r,n,e){if(e.length){let t=n.toArray(),i=e.toArray(),o=0;for(let a=0;a<r+1;a++)t[a].group&&t[a].group===i[o]&&o++;return o}return 0}function p0(r,n,e,t){return r<e?r:r+n>e+t?Math.max(0,r-t+n):e}var Tm=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[ol,Ze,QI]})}return r})(),l0={capture:!0},d0=["focus","mousedown","mouseenter","touchstart"],Dm="mat-ripple-loader-uninitialized",Em="mat-ripple-loader-class-name",u0="mat-ripple-loader-centered",wu="mat-ripple-loader-disabled",m0=(()=>{class r{_document=w(He,{optional:!0});_animationMode=w(Kt,{optional:!0});_globalRippleOptions=w(h0,{optional:!0});_platform=w(dt);_ngZone=w(Re);_injector=w(yt);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let e of d0)this._document?.addEventListener(e,this._onInteraction,l0)})}ngOnDestroy(){let e=this._hosts.keys();for(let t of e)this.destroyRipple(t);for(let t of d0)this._document?.removeEventListener(t,this._onInteraction,l0)}configureRipple(e,t){e.setAttribute(Dm,this._globalRippleOptions?.namespace??""),(t.className||!e.hasAttribute(Em))&&e.setAttribute(Em,t.className||""),t.centered&&e.setAttribute(u0,""),t.disabled&&e.setAttribute(wu,"")}setDisabled(e,t){let i=this._hosts.get(e);i?(i.target.rippleDisabled=t,!t&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(e))):t?e.setAttribute(wu,""):e.removeAttribute(wu)}_onInteraction=e=>{let t=tr(e);if(t instanceof HTMLElement){let i=t.closest(`[${Dm}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let t=this._document.createElement("span");t.classList.add("mat-ripple",e.getAttribute(Em)),e.append(t);let i=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,a=i?0:o?.animation?.enterDuration??Cu.enterDuration,s=i?0:o?.animation?.exitDuration??Cu.exitDuration,c={rippleDisabled:i||o?.disabled||e.hasAttribute(wu),rippleConfig:{centered:e.hasAttribute(u0),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:s}}},l=new Du(c,this._ngZone,t,this._platform,this._injector),d=!c.rippleDisabled;d&&l.setupTriggerEvents(e),this._hosts.set(e,{target:c,renderer:l,hasSetUpEvents:d}),e.removeAttribute(Dm)}destroyRipple(e){let t=this._hosts.get(e);t&&(t.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),g0=(()=>{class r{labelPosition;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(t,i){t&2&&Te("mdc-form-field--align-end",i.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:zI,ngContentSelectors:UI,decls:1,vars:0,template:function(t,i){t&1&&(Ot(),tt(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return r})();var b0=(()=>{class r{get vertical(){return this._vertical}set vertical(e){this._vertical=Ei(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=Ei(e)}_inset=!1;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){t&2&&($e("aria-orientation",i.vertical?"vertical":"horizontal"),Te("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return r})(),Au=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ze]})}return r})();var JI=["*"];var e2=new ne("MAT_CARD_CONFIG"),_0=(()=>{class r{appearance;constructor(){let e=w(e2,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){t&2&&Te("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:JI,decls:1,vars:0,template:function(t,i){t&1&&(Ot(),tt(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return r})();var y0=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return r})();var ku=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ze]})}return r})();var n2=["*"],Iu;function r2(){if(Iu===void 0&&(Iu=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&(Iu=r.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return Iu}function al(r){return r2()?.createHTML(r)||r}function x0(r){return Error(`Unable to find icon with the name "${r}"`)}function i2(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function w0(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function C0(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var Si=class{url;svgText;options;svgElement;constructor(n,e,t){this.url=n,this.svgText=e,this.options=t}},o2=(()=>{class r{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,t,i,o){this._httpClient=e,this._sanitizer=t,this._errorHandler=o,this._document=i}addSvgIcon(e,t,i){return this.addSvgIconInNamespace("",e,t,i)}addSvgIconLiteral(e,t,i){return this.addSvgIconLiteralInNamespace("",e,t,i)}addSvgIconInNamespace(e,t,i,o){return this._addSvgIconConfig(e,t,new Si(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,i,o){let a=this._sanitizer.sanitize(Qn.HTML,i);if(!a)throw C0(i);let s=al(a);return this._addSvgIconConfig(e,t,new Si("",s,o))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,i){return this._addSvgIconSetConfig(e,new Si(t,null,i))}addSvgIconSetLiteralInNamespace(e,t,i){let o=this._sanitizer.sanitize(Qn.HTML,t);if(!o)throw C0(t);let a=al(o);return this._addSvgIconSetConfig(e,new Si("",a,i))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let t=this._sanitizer.sanitize(Qn.RESOURCE_URL,e);if(!t)throw w0(e);let i=this._cachedIconsByUrl.get(t);return i?fe(Mu(i)):this._loadSvgIconFromConfig(new Si(e,null)).pipe(nt(o=>this._cachedIconsByUrl.set(t,o)),Be(o=>Mu(o)))}getNamedSvgIcon(e,t=""){let i=D0(t,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(t,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(t);return a?this._getSvgFromIconSetConfigs(e,a):No(x0(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?fe(Mu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Be(t=>Mu(t)))}_getSvgFromIconSetConfigs(e,t){let i=this._extractIconWithNameFromAnySet(e,t);if(i)return fe(i);let o=t.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe($i(s=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Qn.RESOURCE_URL,a.url)} failed: ${s.message}`;return this._errorHandler.handleError(new Error(l)),fe(null)})));return bd(o).pipe(Be(()=>{let a=this._extractIconWithNameFromAnySet(e,t);if(!a)throw x0(e);return a}))}_extractIconWithNameFromAnySet(e,t){for(let i=t.length-1;i>=0;i--){let o=t[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let a=this._svgElementFromConfig(o),s=this._extractSvgIconFromSet(a,e,o.options);if(s)return s}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(nt(t=>e.svgText=t),Be(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?fe(null):this._fetchIcon(e).pipe(nt(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,i){let o=e.querySelector(`[id="${t}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,i);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),i);let s=this._svgElementFromString(al("<svg></svg>"));return s.appendChild(a),this._setSvgAttributes(s,i)}_svgElementFromString(e){let t=this._document.createElement("DIV");t.innerHTML=e;let i=t.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let t=this._svgElementFromString(al("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:a,value:s}=i[o];a!=="id"&&t.setAttribute(a,s)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[o].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){let{url:t,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw i2();if(t==null)throw Error(`Cannot fetch icon from URL "${t}".`);let a=this._sanitizer.sanitize(Qn.RESOURCE_URL,t);if(!a)throw w0(t);let s=this._inProgressUrlFetches.get(a);if(s)return s;let c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Be(l=>al(l)),Xi(()=>this._inProgressUrlFetches.delete(a)),Ob());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,t,i){return this._svgIconConfigs.set(D0(e,t),i),this}_addSvgIconSetConfig(e,t){let i=this._iconSetConfigs.get(e);return i?i.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){let t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](t,e);if(o)return a2(o)?new Si(o.url,null,o.options):new Si(o,null)}}static \u0275fac=function(t){return new(t||r)(ye(xi,8),ye(xp),ye(He,8),ye(Vo))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Mu(r){return r.cloneNode(!0)}function D0(r,n){return r+":"+n}function a2(r){return!!(r.url&&r.options)}var s2=new ne("MAT_ICON_DEFAULT_OPTIONS"),c2=new ne("mat-icon-location",{providedIn:"root",factory:l2});function l2(){let r=w(He),n=r?r.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}var E0=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],d2=E0.map(r=>`[${r}]`).join(", "),u2=/^url\(['"]?#(.*?)['"]?\)$/,S0=(()=>{class r{_elementRef=w(Ve);_iconRegistry=w(o2);_location=w(c2);_errorHandler=w(Vo);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Ct.EMPTY;constructor(){let e=w(new mi("aria-hidden"),{optional:!0}),t=w(s2,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),t.fontSet&&(this.fontSet=t.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){let i=e.childNodes[t];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,t=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),t.forEach(i=>e.classList.add(i)),this._previousFontSetClass=t,this.fontIcon!==this._previousFontIconClass&&!t.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let t=this._elementsWithExternalReferences;t&&t.forEach((i,o)=>{i.forEach(a=>{o.setAttribute(a.name,`url('${e}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(e){let t=e.querySelectorAll(d2),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<t.length;o++)E0.forEach(a=>{let s=t[o],c=s.getAttribute(a),l=c?c.match(u2):null;if(l){let d=i.get(s);d||(d=[],i.set(s,d)),d.push({name:a,value:l[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[t,i]=this._splitIconName(e);t&&(this._svgNamespace=t),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,t).pipe(on(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${t}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(t,i){t&2&&($e("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Zn(i.color?"mat-"+i.color:""),Te("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Fe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[lt],ngContentSelectors:n2,decls:1,vars:0,template:function(t,i){t&1&&(Ot(),tt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return r})(),ss=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ze]})}return r})();var k0=["mat-button",""],Fm=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Om=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],f2='.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',I0="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}",p2=["mat-fab",""];var m2=["mat-icon-button",""],g2=["*"];var v2=new ne("MAT_BUTTON_CONFIG");var b2=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Ru=(()=>{class r{_elementRef=w(Ve);_platform=w(dt);_ngZone=w(Re);_animationMode=w(Kt,{optional:!0});_focusMonitor=w(Qo);_rippleLoader=w(m0);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){w(Nt).load(ea);let e=w(v2,{optional:!0}),t=this._elementRef.nativeElement,i=t.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:a}of b2)t.hasAttribute(o)&&i.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",t){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,t):this._elementRef.nativeElement.focus(t)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Fe],disabled:[2,"disabled","disabled",Fe],ariaDisabled:[2,"aria-disabled","ariaDisabled",Fe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fe]},features:[lt]})}return r})();var _2=(()=>{class r extends Ru{tabIndex;ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_haltDisabledEvents=e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())};_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled||null}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275dir=we({type:r,inputs:{tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:kr(e)]},features:[lt,Dt]})}return r})(),nr=(()=>{class r extends Ru{static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275cmp=se({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(t,i){t&2&&($e("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Zn(i.color?"mat-"+i.color:""),Te("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Dt],attrs:k0,ngContentSelectors:Om,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Ot(Fm),Z(0,"span",0),tt(1),F(2,"span",1),tt(3,1),N(),tt(4,2),Z(5,"span",2)(6,"span",3)),t&2&&Te("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return r})(),M0=(()=>{class r extends _2{static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275cmp=se({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(t,i){t&2&&($e("disabled",i._getDisabledAttribute())("tabindex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex)("aria-disabled",i._getAriaDisabled()),Zn(i.color?"mat-"+i.color:""),Te("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],features:[Dt],attrs:k0,ngContentSelectors:Om,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Ot(Fm),Z(0,"span",0),tt(1),F(2,"span",1),tt(3,1),N(),tt(4,2),Z(5,"span",2)(6,"span",3)),t&2&&Te("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[f2,I0],encapsulation:2,changeDetection:0})}return r})(),y2=new ne("mat-mdc-fab-default-options",{providedIn:"root",factory:R0});function R0(){return{color:"accent"}}var A0=R0(),T0=(()=>{class r extends Ru{_options=w(y2,{optional:!0});_isFab=!0;extended;constructor(){super(),this._options=this._options||A0,this.color=this._options.color||A0.color}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(t,i){t&2&&($e("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Zn(i.color?"mat-"+i.color:""),Te("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0)("mdc-fab--extended",i.extended)("mat-mdc-extended-fab",i.extended))},inputs:{extended:[2,"extended","extended",Fe]},exportAs:["matButton"],features:[lt,Dt],attrs:p2,ngContentSelectors:Om,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Ot(Fm),Z(0,"span",0),tt(1),F(2,"span",1),tt(3,1),N(),tt(4,2),Z(5,"span",2)(6,"span",3)),t&2&&Te("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-fab-base{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus .mat-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-container-shape, var(--mat-sys-corner-large));color:var(--mat-fab-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display, block)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-small-container-shape, var(--mat-sys-corner-medium));color:var(--mat-fab-small-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-small-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-small-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;height:var(--mdc-extended-fab-container-height, 56px);border-radius:var(--mdc-extended-fab-container-shape, var(--mat-sys-corner-large));font-family:var(--mdc-extended-fab-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-extended-fab-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-extended-fab-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-extended-fab-label-text-tracking, var(--mat-sys-label-large-tracking));box-shadow:var(--mdc-extended-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0})}return r})();var Nm=(()=>{class r extends Ru{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(t,i){t&2&&($e("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Zn(i.color?"mat-"+i.color:""),Te("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Dt],attrs:m2,ngContentSelectors:g2,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Ot(),Z(0,"span",0),tt(1),Z(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',I0],encapsulation:2,changeDetection:0})}return r})();var In=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,ol,Ze]})}return r})();var F0="mat-badge-content",x2=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}"],encapsulation:2,changeDetection:0})}return r})(),O0=(()=>{class r{_ngZone=w(Re);_elementRef=w(Ve);_ariaDescriber=w(Zy);_renderer=w(Va);_animationMode=w(Kt,{optional:!0});_idGenerator=w(Tt);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=w(rl);_document=w(He);constructor(){w(Nt).load(x2),w(Nt).load(Fr)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(F0),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){let t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${F0}`);for(let t of Array.from(e))t!==this._badgeElement&&t.remove()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,i){t&2&&Te("mat-badge-overlap",i.overlap)("mat-badge-above",i.isAbove())("mat-badge-below",!i.isAbove())("mat-badge-before",!i.isAfter())("mat-badge-after",i.isAfter())("mat-badge-small",i.size==="small")("mat-badge-medium",i.size==="medium")("mat-badge-large",i.size==="large")("mat-badge-hidden",i.hidden||!i.content)("mat-badge-disabled",i.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",Fe],disabled:[2,"matBadgeDisabled","disabled",Fe],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",Fe]},features:[lt]})}return r})(),N0=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[os,Ze,Ze]})}return r})();var Tu={api:"https://api.timt.in",production:!1};function Ai(r){Tu.production||console.log(r)}function P0(r){return r.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}function L0(r){let n=new Date(r),e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}var Hn=class r{storage=new Map;constructor(){let n=localStorage.getItem("token");n&&this.set("token",n);let e=localStorage.getItem("info");e&&this.set("info",JSON.parse(e));let t=localStorage.getItem("lable");t&&this.set("lable",t)}set(n,e){this.storage.set(n,e)}get(n){return this.storage.get(n)}delete(n){this.storage.delete(n)}has(n){return this.storage.has(n)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var Fu=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new he;constructor(n=!1,e,t=!0,i){this._multiple=n,this._emitChanges=t,this.compareWith=i,e&&e.length&&(n?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(t=>this._markSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(t=>this._unmarkSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,t=new Set(n);n.forEach(o=>this._markSelected(o)),e.filter(o=>!t.has(this._getConcreteValue(o,t))).forEach(o=>this._unmarkSelected(o));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let t of e)if(this.compareWith(n,t))return t;return n}else return n}};var B0=(()=>{class r{_listeners=[];notify(e,t){for(let i of this._listeners)i(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var C2=20,Pm=(()=>{class r{_ngZone=w(Re);_platform=w(dt);_document=w(He,{optional:!0});constructor(){}_scrolled=new he;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=C2){return this._platform.isBrowser?new Yr(t=>{this._globalSubscription||this._addGlobalListener();let i=e>0?this._scrolled.pipe(Gf(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):fe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(mt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&t.push(o)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let i=fr(t),o=e.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return _d(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),V0=(()=>{class r{elementRef=w(Ve);scrollDispatcher=w(Pm);ngZone=w(Re);dir=w(bn,{optional:!0});_destroyed=new he;_elementScrolled=new Yr(e=>this.ngZone.runOutsideAngular(()=>_d(this.elementRef.nativeElement,"scroll").pipe(Ut(this._destroyed)).subscribe(e)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let t=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=i?e.end:e.start),e.right==null&&(e.right=i?e.start:e.end),e.bottom!=null&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),i&&ts()!=Tr.NORMAL?(e.left!=null&&(e.right=t.scrollWidth-t.clientWidth-e.left),ts()==Tr.INVERTED?e.left=e.right:ts()==Tr.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let t=this.elementRef.nativeElement;fu()?t.scrollTo(e):(e.top!=null&&(t.scrollTop=e.top),e.left!=null&&(t.scrollLeft=e.left))}measureScrollOffset(e){let t="left",i="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let a=this.dir&&this.dir.value=="rtl";return e=="start"?e=a?i:t:e=="end"&&(e=a?t:i),a&&ts()==Tr.INVERTED?e==t?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&ts()==Tr.NEGATED?e==t?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==t?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return r})(),D2=20,sl=(()=>{class r{_platform=w(dt);_viewportSize;_change=new he;_changeListener=e=>{this._change.next(e)};_document=w(He,{optional:!0});constructor(){w(Re).runOutsideAngular(()=>{if(this._platform.isBrowser){let t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect(),a=-o.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,s=-o.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0;return{top:a,left:s}}change(e=D2){return e>0?this._change.pipe(Gf(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ds=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})(),Lm=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[lo,ds,lo,ds]})}return r})();var cl=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},ki=class extends cl{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,t,i,o){super(),this.component=n,this.viewContainerRef=e,this.injector=t,this.projectableNodes=o}},uo=class extends cl{templateRef;viewContainerRef;context;injector;constructor(n,e,t,i){super(),this.templateRef=n,this.viewContainerRef=e,this.context=t,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},Bm=class extends cl{element;constructor(n){super(),this.element=n instanceof Ve?n.nativeElement:n}},us=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof ki)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof uo)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof Bm)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Ou=class extends us{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,t,i,o){super(),this.outletElement=n,this._appRef=t,this._defaultInjector=i,this._document=o}attachComponentPortal(n){let e;if(n.viewContainerRef){let t=n.injector||n.viewContainerRef.injector,i=t.get(Jf,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:t,ngModuleRef:i,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=Od(n.component,{elementInjector:n.injector||this._defaultInjector||yt.NULL,environmentInjector:this._appRef.injector,projectableNodes:n.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,t=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return t.rootNodes.forEach(i=>this.outletElement.appendChild(i)),t.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(t);i!==-1&&e.remove(i)}),this._attachedPortal=n,t}attachDomPortal=n=>{let e=n.element;e.parentNode;let t=this._document.createComment("dom-portal");e.parentNode.insertBefore(t,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{t.parentNode&&t.parentNode.replaceChild(e,t)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var ho=(()=>{class r extends us{_moduleRef=w(Jf,{optional:!0});_document=w(He);_viewContainerRef=w(vi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new le;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let t=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,i=t.createComponent(e.component,{index:t.length,injector:e.injector||t.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return t!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);let t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(i,t),this._getRootNode().appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Dt]})}return r})();var Ii=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})();var z0=fu(),Vm=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Yt(-this._previousScrollPosition.left),n.style.top=Yt(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,t=n.style,i=e.style,o=t.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),z0&&(t.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),z0&&(t.scrollBehavior=o,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}};var zm=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,t,i){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=t,this._config=i}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(mt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Nu=class{enable(){}disable(){}attach(){}};function Um(r,n){return n.some(e=>{let t=r.bottom<e.top,i=r.top>e.bottom,o=r.right<e.left,a=r.left>e.right;return t||i||o||a})}function U0(r,n){return n.some(e=>{let t=r.top<e.top,i=r.bottom>e.bottom,o=r.left<e.left,a=r.right>e.right;return t||i||o||a})}var jm=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,t,i){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=t,this._config=i}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:i}=this._viewportRuler.getViewportSize();Um(e,[{width:t,height:i,bottom:i,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},S2=(()=>{class r{_scrollDispatcher=w(Pm);_viewportRuler=w(sl);_ngZone=w(Re);_document=w(He);constructor(){}noop=()=>new Nu;close=e=>new zm(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new Vm(this._viewportRuler,this._document);reposition=e=>new jm(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),fo=class{positionStrategy;scrollStrategy=new Nu;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let t of e)n[t]!==void 0&&(this[t]=n[t])}}};var Wm=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var Y0=(()=>{class r{_attachedOverlays=[];_document=w(He);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),A2=(()=>{class r extends Y0{_ngZone=w(Re,{optional:!0});add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=e=>{let t=this._attachedOverlays;for(let i=t.length-1;i>-1;i--)if(t[i]._keydownEvents.observers.length>0){let o=t[i]._keydownEvents;this._ngZone?this._ngZone.run(()=>o.next(e)):o.next(e);break}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),k2=(()=>{class r extends Y0{_platform=w(dt);_ngZone=w(Re,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let t=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(t)):this._addEventListeners(t),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=tr(e)};_clickListener=e=>{let t=tr(e),i=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:t;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){let s=o[a];if(s._outsidePointerEvents.observers.length<1||!s.hasAttached())continue;if(j0(s.overlayElement,t)||j0(s.overlayElement,i))break;let c=s._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(e)):c.next(e)}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function j0(r,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,t=n;for(;t;){if(t===r)return!0;t=e&&t instanceof ShadowRoot?t.host:t.parentNode}return!1}var $0=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return r})(),Pu=(()=>{class r{_platform=w(dt);_containerElement;_document=w(He);_styleLoader=w(Nt);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||cm()){let i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let t=this._document.createElement("div");t.classList.add(e),cm()?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}_loadStyles(){this._styleLoader.load($0)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),hs=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new he;_attachments=new he;_detachments=new he;_positionStrategy;_scrollStrategy;_locationChanges=Ct.EMPTY;_backdropClickHandler=n=>this._backdropClick.next(n);_backdropTransitionendHandler=n=>{this._disposeBackdrop(n.target)};_previousHostParent;_keydownEvents=new he;_outsidePointerEvents=new he;_renders=new he;_afterRenderRef;_afterNextRenderRef;constructor(n,e,t,i,o,a,s,c,l,d=!1,u){this._portalOutlet=n,this._host=e,this._pane=t,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._injector=u,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Ir(()=>Cd(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Wn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=Q(Q({},this._config),n),this._updateElementSize()}setDirection(n){this._config=ot(Q({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=Yt(this._config.width),n.height=Yt(this._config.height),n.minWidth=Yt(this._config.minWidth),n.minHeight=Yt(this._config.minHeight),n.maxWidth=Yt(this._config.maxWidth),n.maxHeight=Yt(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let n=this._backdropElement;if(n){if(this._animationsDisabled){this._disposeBackdrop(n);return}n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,t){let i=Ja(e||[]).filter(o=>!!o);i.length&&(t?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(Ut(jn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},W0="cdk-overlay-connected-position-bounding-box",I2=/([A-Za-z%]+)$/,ll=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new he;_resizeSubscription=Ct.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,t,i,o){this._viewportRuler=e,this._document=t,this._platform=i,this._overlayContainer=o,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(W0),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,t=this._viewportRect,i=this._containerRect,o=[],a;for(let s of this._preferredPositions){let c=this._getOriginPoint(n,i,s),l=this._getOverlayPoint(c,e,s),d=this._getOverlayFit(l,e,t,s);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(s,c);return}if(this._canFitWithFlexibleDimensions(d,l,t)){o.push({position:s,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,s)});continue}(!a||a.overlayFit.visibleArea<d.visibleArea)&&(a={overlayFit:d,overlayPoint:l,originPoint:c,position:s,overlayRect:e})}if(o.length){let s=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,s=l)}this._isPushed=!1,this._applyPosition(s.position,s.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ta(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(W0),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,t){let i;if(t.originX=="center")i=n.left+n.width/2;else{let a=this._isRtl()?n.right:n.left,s=this._isRtl()?n.left:n.right;i=t.originX=="start"?a:s}e.left<0&&(i-=e.left);let o;return t.originY=="center"?o=n.top+n.height/2:o=t.originY=="top"?n.top:n.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(n,e,t){let i;t.overlayX=="center"?i=-e.width/2:t.overlayX==="start"?i=this._isRtl()?-e.width:0:i=this._isRtl()?0:-e.width;let o;return t.overlayY=="center"?o=-e.height/2:o=t.overlayY=="top"?0:-e.height,{x:n.x+i,y:n.y+o}}_getOverlayFit(n,e,t,i){let o=G0(e),{x:a,y:s}=n,c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(a+=c),l&&(s+=l);let d=0-a,u=a+o.width-t.width,h=0-s,f=s+o.height-t.height,p=this._subtractOverflows(o.width,d,u),m=this._subtractOverflows(o.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:m===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(n,e,t){if(this._hasFlexibleDimensions){let i=t.bottom-e.y,o=t.right-e.x,a=H0(this._overlayRef.getConfig().minHeight),s=H0(this._overlayRef.getConfig().minWidth),c=n.fitsInViewportVertically||a!=null&&a<=i,l=n.fitsInViewportHorizontally||s!=null&&s<=o;return c&&l}return!1}_pushOverlayOnScreen(n,e,t){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let i=G0(e),o=this._viewportRect,a=Math.max(n.x+i.width-o.width,0),s=Math.max(n.y+i.height-o.height,0),c=Math.max(o.top-t.top-n.y,0),l=Math.max(o.left-t.left-n.x,0),d=0,u=0;return i.width<=o.width?d=l||-a:d=n.x<this._viewportMargin?o.left-t.left-n.x:0,i.height<=o.height?u=c||-s:u=n.y<this._viewportMargin?o.top-t.top-n.y:0,this._previousPushAmount={x:d,y:u},{x:n.x+d,y:n.y+u}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!M2(this._lastScrollVisibility,t)){let i=new Wm(n,t);this._positionChanges.next(i)}this._lastScrollVisibility=t}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,i=n.overlayY;n.overlayX==="center"?t="center":this._isRtl()?t=n.overlayX==="start"?"right":"left":t=n.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${t} ${i}`}_calculateBoundingBoxRect(n,e){let t=this._viewportRect,i=this._isRtl(),o,a,s;if(e.overlayY==="top")a=n.y,o=t.height-a+this._viewportMargin;else if(e.overlayY==="bottom")s=t.height-n.y+this._viewportMargin*2,o=t.height-s+this._viewportMargin;else{let f=Math.min(t.bottom-n.y+t.top,n.y),p=this._lastBoundingBoxSize.height;o=f*2,a=n.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(a=n.y-p/2)}let c=e.overlayX==="start"&&!i||e.overlayX==="end"&&i,l=e.overlayX==="end"&&!i||e.overlayX==="start"&&i,d,u,h;if(l)h=t.width-n.x+this._viewportMargin*2,d=n.x-this._viewportMargin;else if(c)u=n.x,d=t.right-n.x;else{let f=Math.min(t.right-n.x+t.left,n.x),p=this._lastBoundingBoxSize.width;d=f*2,u=n.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=n.x-p/2)}return{top:a,left:u,bottom:s,right:h,width:d,height:o}}_setBoundingBoxStyles(n,e){let t=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Yt(t.height),i.top=Yt(t.top),i.bottom=Yt(t.bottom),i.width=Yt(t.width),i.left=Yt(t.left),i.right=Yt(t.right),e.overlayX==="center"?i.alignItems="center":i.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?i.justifyContent="center":i.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=Yt(o)),a&&(i.maxWidth=Yt(a))}this._lastBoundingBoxSize=t,ta(this._boundingBox.style,i)}_resetBoundingBoxStyles(){ta(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ta(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let t={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let d=this._viewportRuler.getViewportScrollPosition();ta(t,this._getExactOverlayY(e,n,d)),ta(t,this._getExactOverlayX(e,n,d))}else t.position="static";let s="",c=this._getOffset(e,"x"),l=this._getOffset(e,"y");c&&(s+=`translateX(${c}px) `),l&&(s+=`translateY(${l}px)`),t.transform=s.trim(),a.maxHeight&&(i?t.maxHeight=Yt(a.maxHeight):o&&(t.maxHeight="")),a.maxWidth&&(i?t.maxWidth=Yt(a.maxWidth):o&&(t.maxWidth="")),ta(this._pane.style,t)}_getExactOverlayY(n,e,t){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t)),n.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(o.y+this._overlayRect.height)}px`}else i.top=Yt(o.y);return i}_getExactOverlayX(n,e,t){let i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t));let a;if(this._isRtl()?a=n.overlayX==="end"?"left":"right":a=n.overlayX==="end"?"right":"left",a==="right"){let s=this._document.documentElement.clientWidth;i.right=`${s-(o.x+this._overlayRect.width)}px`}else i.left=Yt(o.x);return i}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),t=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:U0(n,t),isOriginOutsideView:Um(n,t),isOverlayClipped:U0(e,t),isOverlayOutsideView:Um(e,t)}}_subtractOverflows(n,...e){return e.reduce((t,i)=>t-Math.max(i,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+n-this._viewportMargin,bottom:t.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Ja(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof Ve)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,t=n.height||0;return{top:n.y,bottom:n.y+t,left:n.x,right:n.x+e,height:t,width:e}}};function ta(r,n){for(let e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r}function H0(r){if(typeof r!="number"&&r!=null){let[n,e]=r.split(I2);return!e||e==="px"?parseFloat(n):null}return r||null}function G0(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function M2(r,n){return r===n?!0:r.isOriginClipped===n.isOriginClipped&&r.isOriginOutsideView===n.isOriginOutsideView&&r.isOverlayClipped===n.isOverlayClipped&&r.isOverlayOutsideView===n.isOverlayOutsideView}var q0="cdk-global-overlay-wrapper",Hm=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(q0),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:a,maxHeight:s}=t,c=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),l=(o==="100%"||o==="100vh")&&(!s||s==="100%"||s==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",m="";c?m="flex-start":d==="center"?(m="center",h?p=u:f=u):h?d==="left"||d==="end"?(m="flex-end",f=u):(d==="right"||d==="start")&&(m="flex-start",p=u):d==="left"||d==="start"?(m="flex-start",f=u):(d==="right"||d==="end")&&(m="flex-end",p=u),n.position=this._cssPosition,n.marginLeft=c?"0":f,n.marginTop=l?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=c?"0":p,e.justifyContent=m,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,t=e.style;e.classList.remove(q0),t.justifyContent=t.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},R2=(()=>{class r{_viewportRuler=w(sl);_document=w(He);_platform=w(dt);_overlayContainer=w(Pu);constructor(){}global(){return new Hm}flexibleConnectedTo(e){return new ll(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),_n=(()=>{class r{scrollStrategies=w(S2);_overlayContainer=w(Pu);_positionBuilder=w(R2);_keyboardDispatcher=w(A2);_injector=w(yt);_ngZone=w(Re);_document=w(He);_directionality=w(bn);_location=w(yi);_outsideClickDispatcher=w(k2);_animationsModuleType=w(Kt,{optional:!0});_idGenerator=w(Tt);_appRef;_styleLoader=w(Nt);constructor(){}create(e){this._styleLoader.load($0);let t=this._createHostElement(),i=this._createPaneElement(t),o=this._createPortalOutlet(i),a=new fo(e);return a.direction=a.direction||this._directionality.value,new hs(o,t,i,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Er))}position(){return this._positionBuilder}_createPaneElement(e){let t=this._document.createElement("div");return t.id=this._idGenerator.getId("cdk-overlay-"),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Zi)),new Ou(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),T2=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],K0=new ne("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=w(_n);return()=>r.scrollStrategies.reposition()}}),dl=(()=>{class r{elementRef=w(Ve);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return r})(),Gm=(()=>{class r{_overlay=w(_n);_dir=w(bn,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=Ct.EMPTY;_attachSubscription=Ct.EMPTY;_detachSubscription=Ct.EMPTY;_positionSubscription=Ct.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=w(K0);_disposeOnNavigation=!1;_ngZone=w(Re);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new le;positionChange=new le;attach=new le;detach=new le;overlayKeydown=new le;overlayOutsideClick=new le;constructor(){let e=w(zo),t=w(vi);this._templatePortal=new uo(e,t),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=T2);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),t.keyCode===27&&!this.disableClose&&!Zt(t)&&(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{let i=this._getOriginElement(),o=tr(t);(!i||i!==o&&!i.contains(o))&&this.overlayOutsideClick.next(t)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new fo({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(t.width=this.width),(this.height||this.height===0)&&(t.height=this.height),(this.minWidth||this.minWidth===0)&&(t.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){let t=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof dl?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof dl?this.origin.elementRef.nativeElement:this.origin instanceof Ve?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Nb(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Fe],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Fe],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Fe],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Fe],push:[2,"cdkConnectedOverlayPush","push",Fe],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Fe]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[lt,jt]})}return r})();function F2(r){return()=>r.scrollStrategies.reposition()}var O2={provide:K0,deps:[_n],useFactory:F2},mo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[_n,O2],imports:[lo,Ii,Lm,Lm]})}return r})();function N2(r,n){}var go=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Ym=(()=>{class r extends us{_elementRef=w(Ve);_focusTrapFactory=w(bm);_config;_interactivityChecker=w(rl);_ngZone=w(Re);_overlayRef=w(hs);_focusMonitor=w(Qo);_platform=w(dt);_document=w(He,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=w(St);_injector=w(yt);_isDestroyed=!1;constructor(){super(),this._config=w(go,{optional:!0})||new go,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let t=this._ariaLabelledByQueue.indexOf(e);t>-1&&(this._ariaLabelledByQueue.splice(t,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),t}attachTemplatePortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),t}attachDomPortal=e=>{this._portalOutlet.hasAttached();let t=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),t};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,t){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(t)}_focusByCssSelector(e,t){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,t)}_trapFocus(){this._isDestroyed||Wn(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,t=null;if(typeof e=="string"?t=this._document.querySelector(e):typeof e=="boolean"?t=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(t=e),this._config.restoreFocus&&t&&typeof t.focus=="function"){let i=ao(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,t=ao();return e===t||e.contains(t)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ao()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(t&1&&it(ho,7),t&2){let o;je(o=We())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){t&2&&$e("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Dt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){t&1&&Pe(0,N2,0,0,"ng-template",0)},dependencies:[ho],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return r})(),ul=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new he;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(t=>{t.keyCode===27&&!this.disableClose&&!Zt(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let t=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(n),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},P2=new ne("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=w(_n);return()=>r.scrollStrategies.block()}}),L2=new ne("DialogData"),B2=new ne("DefaultDialogConfig");var $m=(()=>{class r{_overlay=w(_n);_injector=w(yt);_defaultOptions=w(B2,{optional:!0});_parentDialog=w(r,{optional:!0,skipSelf:!0});_overlayContainer=w(Pu);_idGenerator=w(Tt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new he;_afterOpenedAtThisLevel=new he;_ariaHiddenElements=new Map;_scrollStrategy=w(P2);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=pi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0)));constructor(){}open(e,t){let i=this._defaultOptions||new go;t=Q(Q({},i),t),t.id=t.id||this._idGenerator.getId("cdk-dialog-"),t.id&&this.getDialogById(t.id);let o=this._getOverlayConfig(t),a=this._overlay.create(o),s=new ul(a,t),c=this._attachContainer(a,s,t);return s.containerInstance=c,this._attachDialogContent(e,s,c,t),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.closed.subscribe(()=>this._removeOpenDialog(s,!0)),this.afterOpened.next(s),s}closeAll(){qm(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){qm(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),qm(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let t=new fo({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachContainer(e,t,i){let o=i.injector||i.viewContainerRef?.injector,a=[{provide:go,useValue:i},{provide:ul,useValue:t},{provide:hs,useValue:e}],s;i.container?typeof i.container=="function"?s=i.container:(s=i.container.type,a.push(...i.container.providers(i))):s=Ym;let c=new ki(s,i.viewContainerRef,yt.create({parent:o||this._injector,providers:a}));return e.attach(c).instance}_attachDialogContent(e,t,i,o){if(e instanceof zo){let a=this._createInjector(o,t,i,void 0),s={$implicit:o.data,dialogRef:t};o.templateContext&&(s=Q(Q({},s),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new uo(e,null,s,a))}else{let a=this._createInjector(o,t,i,this._injector),s=i.attachComponentPortal(new ki(e,o.viewContainerRef,a));t.componentRef=s,t.componentInstance=s.instance}}_createInjector(e,t,i,o){let a=e.injector||e.viewContainerRef?.injector,s=[{provide:L2,useValue:e.data},{provide:ul,useValue:t}];return e.providers&&(typeof e.providers=="function"?s.push(...e.providers(t,e,i)):s.push(...e.providers)),e.direction&&(!a||!a.get(bn,null,{optional:!0}))&&s.push({provide:bn,useValue:{value:e.direction,change:fe()}}),yt.create({parent:a||o,providers:s})}_removeOpenDialog(e,t){let i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),t&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let t=e.parentElement.children;for(let i=t.length-1;i>-1;i--){let o=t[i];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function qm(r,n){let e=r.length;for(;e--;)n(r[e])}var X0=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[$m],imports:[mo,Ii,os,Ii]})}return r})();function V2(r,n){}var Bu=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},Km="mdc-dialog--open",Q0="mdc-dialog--opening",Z0="mdc-dialog--closing",z2=150,U2=75,j2=(()=>{class r extends Ym{_animationMode=w(Kt,{optional:!0});_animationStateChanged=new le;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?ex(this._config.enterAnimationDuration)??z2:0;_exitAnimationDuration=this._animationsEnabled?ex(this._config.exitAnimationDuration)??U2:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(J0,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Q0,Km)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Km),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Km),this._animationsEnabled?(this._hostElement.style.setProperty(J0,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Z0)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Q0,Z0)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275cmp=se({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,i){t&2&&(Ar("id",i._config.id),$e("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Te("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[Dt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){t&1&&(F(0,"div",0)(1,"div",1),Pe(2,V2,0,0,"ng-template",2),N()())},dependencies:[ho],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return r})(),J0="--mat-dialog-transition-duration";function ex(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?Jc(r.substring(0,r.length-2)):r.endsWith("s")?Jc(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var Lu=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(Lu||{}),fs=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new he;_beforeClosed=new he;_result;_closeFallbackTimeout;_state=Lu.OPEN;_closeInteractionType;constructor(n,e,t){this._ref=n,this._containerInstance=t,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(mt(i=>i.state==="opened"),on(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(mt(i=>i.state==="closed"),on(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),jn(this.backdropClick(),this.keydownEvents().pipe(mt(i=>i.keyCode===27&&!this.disableClose&&!Zt(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),W2(this,i.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(mt(e=>e.state==="closing"),on(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Lu.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Lu.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function W2(r,n,e){return r._closeInteractionType=n,r.close(e)}var Xm=new ne("MatMdcDialogData"),H2=new ne("mat-mdc-dialog-default-options"),G2=new ne("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=w(_n);return()=>r.scrollStrategies.block()}});var Vu=(()=>{class r{_overlay=w(_n);_defaultOptions=w(H2,{optional:!0});_scrollStrategy=w(G2);_parentDialog=w(r,{optional:!0,skipSelf:!0});_idGenerator=w(Tt);_dialog=w($m);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new he;_afterOpenedAtThisLevel=new he;dialogConfigClass=Bu;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=pi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0)));constructor(){this._dialogRefConstructor=fs,this._dialogContainerType=j2,this._dialogDataToken=Xm}open(e,t){let i;t=Q(Q({},this._defaultOptions||new Bu),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,ot(Q({},t),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:go,useValue:t}]},templateContext:()=>({dialogRef:i}),providers:(a,s,c)=>(i=new this._dialogRefConstructor(a,t,c),i.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:s.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(i);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var tx=(()=>{class r{_dialogRef=w(fs,{optional:!0});_elementRef=w(Ve);_dialog=w(Vu);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=q2(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r})}return r})(),nx=(()=>{class r extends tx{id=w(Tt).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275dir=we({type:r,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){t&2&&Ar("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Dt]})}return r})(),rx=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Qb([V0])]})}return r})(),ix=(()=>{class r extends tx{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275dir=we({type:r,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(t,i){t&2&&Te("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},features:[Dt]})}return r})();function q2(r,n){let e=r.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(t=>t.id===e.id):null}var ox=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[Vu],imports:[X0,mo,Ii,Ze,Ze]})}return r})();function Y2(r,n){if(r&1){let e=vt();F(0,"button",3),ae("click",function(){Ae(e);let i=de();return ke(i.onCancel())}),J(1,"Cancel"),N()}}var zu=class r{constructor(n,e){this.data=n;this.dialogRef=e}okClick=new le;cancelClick=new le;onOk(){this.okClick.emit(),this.dialogRef.close()}onCancel(){this.cancelClick.emit(),this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(Ie(Xm),Ie(fs))};static \u0275cmp=se({type:r,selectors:[["app-alert-dialog"]],outputs:{okClick:"okClick",cancelClick:"cancelClick"},decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button",""]],template:function(e,t){e&1&&(F(0,"h1",0),J(1),N(),F(2,"div",1)(3,"p"),J(4),N()(),F(5,"div",2)(6,"button",3),ae("click",function(){return t.onOk()}),J(7,"OK"),N(),Pe(8,Y2,2,0,"button",4),N()),e&2&&(H(),Wt(t.data.title),H(3),Wt(t.data.message),H(4),ze(t.data.cancelButton?8:-1))},dependencies:[ox,nx,ix,rx,In,nr],encapsulation:2})};var gr=class r{constructor(n){this.dialog=n}showSuccessAlert(n,e=!1,t,i){this.showDialog("Success",n,e,t,i)}showErrorAlert(n,e=!1,t,i){this.showDialog("Error",n,e,t,i)}showWarningAlert(n,e=!1,t,i){this.showDialog("Warning",n,e,t,i)}showDialog(n,e,t,i,o){let a=this.dialog.open(zu,{data:{title:n,message:e,cancelButton:t}});i&&a.componentInstance.okClick.subscribe(i),o&&a.componentInstance.cancelClick.subscribe(o)}static \u0275fac=function(e){return new(e||r)(ye(Vu))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var $2=["navImg"],Uu=class r{constructor(n,e,t){this.globalStorageService=n;this.router=e;this.alert=t}user;lable;navImg;ngOnInit(){this.globalStorageService.get("info")&&(this.user=this.globalStorageService.get("info"),this.lable=this.globalStorageService.get("lable"),this.user.name=P0(this.user.name))}goto(n){this.router.navigate([n])}openPayment(){window.open("https://www.timt.org.in/")}showToken(){let n=this.globalStorageService.get("token");n!=null&&this.alert.showSuccessAlert(n)}openShowCase(){window.open("https://www.facebook.com/timttmluk/photos_by")}openCalander(){window.open("https://www.timt.org.in/academic/academic-calender")}static \u0275fac=function(e){return new(e||r)(Ie(Hn),Ie(Qt),Ie(gr))};static \u0275cmp=se({type:r,selectors:[["app-dashbord"]],viewQuery:function(e,t){if(e&1&&it($2,5),e&2){let i;je(i=We())&&(t.navImg=i.first)}},decls:76,vars:1,consts:[["navImg",""],[1,"root","bg-img"],[1,"w-full","h-full","p-4","relative"],[1,"w-full","flex","justify-end"],["mat-fab","","disabled",""],["matBadge","4"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","#000000"],["d","M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Zm320-300Zm0 420q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-280h320v-280q0-66-47-113t-113-47q-66 0-113 47t-47 113v280Z"],[1,"relative","w-full","h-[60px]","bg-[#ffffff5e]","rounded-md","decoration-auto","p-1","flex","items-center",2,"margin-top","100px"],[1,"rounded-full","h-full","w-[52px]"],["alt","user","src","/img/user-286-512.png"],[1,"ml-2","parkinsans"],["data-aos","fade-up",1,"w-full","h-[65%]","bg-blue-500","absolute","bottom-0","rt-12px","flex","p-4","pt-22"],["appearance","outlined","data-aos","fade-right",1,"h-[100px]","w-[45%]","m-3"],[1,"decoration-auto"],["appearance","outlined","data-aos","fade-left",1,"h-[100px]","w-[45%]","m-3","parkinsans"],["data-aos","fade-up",1,"w-full","h-[50%]","bg-white","absolute","bottom-0","rt-12px","pt-[25px]"],[1,"grid","grid-cols-3","auto-rows-[150px]","gap-4","w-full","h-full","overflow-y-auto","p-4"],["appearance","outlined","data-aos","flip-left",1,"h-full","w-full","mat-card-click",3,"click"],[1,"w-full","h-full","flex","justify-center","items-center"],[1,"icon",2,"background-image","url('/icon/school/college.png')"],[1,"icon",2,"background-image","url('/icon/school/presentation.png')"],["appearance","outlined","data-aos","flip-left",1,"h-full","w-full","mat-card-click"],[1,"icon",2,"background-image","url('/icon/school/noticeboard.png')"],[1,"icon",2,"background-image","url('/icon/school/credit-card.png')"],[1,"icon",2,"background-image","url('/icon/school/blockchain.png')"],[1,"icon",2,"background-image","url('/icon/school/cogwheel.png')"],["appearance","outlined",1,"h-full","w-full","mat-card-click",3,"click"],[1,"icon",2,"background-image","url('/icon/school/cyber-security.png')"],[1,"icon",2,"background-image","url('/icon/school/portfolio.png')"],[1,"icon",2,"background-image","url('/icon/school/calendar.png')"],[1,"icon",2,"background-image","url('/icon/school/customer-review.png')"]],template:function(e,t){if(e&1){let i=vt();F(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4)(4,"mat-icon",5),Sr(),F(5,"svg",6),Z(6,"path",7),N()()()(),Bo(),F(7,"div",8)(8,"div",9),Z(9,"img",10,0),N(),F(11,"h1",11),J(12),N()()(),F(13,"div",12)(14,"mat-card",13)(15,"mat-card-content",14),J(16,"Attendance Persentage"),N(),F(17,"mat-card-content"),J(18,"0.1%"),N()(),F(19,"mat-card",15)(20,"mat-card-content"),J(21,"Class Persentage"),N(),F(22,"mat-card-content"),J(23,"0%"),N()()(),F(24,"div",16)(25,"div",17)(26,"mat-card",18),ae("click",function(){return Ae(i),ke(t.goto("/college/attendance"))}),F(27,"mat-card-content"),J(28,"Attendance"),N(),F(29,"div",19),Z(30,"div",20),N()(),F(31,"mat-card",18),ae("click",function(){return Ae(i),ke(t.goto("college/class"))}),F(32,"mat-card-content"),J(33,"Classes"),N(),F(34,"div",19),Z(35,"div",21),N()(),F(36,"mat-card",22)(37,"mat-card-content"),J(38,"Notic Bord"),N(),F(39,"div",19),Z(40,"div",23),N()(),F(41,"mat-card",18),ae("click",function(){return Ae(i),ke(t.openPayment())}),F(42,"mat-card-content"),J(43,"Payment"),N(),F(44,"div",19),Z(45,"div",24),N()(),F(46,"mat-card",18),ae("click",function(){return Ae(i),ke(t.showToken())}),F(47,"mat-card-content"),J(48,"Token"),N(),F(49,"div",19),Z(50,"div",25),N()(),F(51,"mat-card",18),ae("click",function(){return Ae(i),ke(t.goto("/me_data"))}),F(52,"mat-card-content"),J(53,"Setting"),N(),F(54,"div",19),Z(55,"div",26),N()(),F(56,"mat-card",27),ae("click",function(){return Ae(i),ke(t.goto("/me_data"))}),F(57,"mat-card-content"),J(58,"Securty"),N(),F(59,"div",19),Z(60,"div",28),N()(),F(61,"mat-card",27),ae("click",function(){return Ae(i),ke(t.openShowCase())}),F(62,"mat-card-content"),J(63,"Showcase"),N(),F(64,"div",19),Z(65,"div",29),N()(),F(66,"mat-card",27),ae("click",function(){return Ae(i),ke(t.openCalander())}),F(67,"mat-card-content"),J(68,"Calander"),N(),F(69,"div",19),Z(70,"div",30),N()(),F(71,"mat-card",27),ae("click",function(){return Ae(i),ke(t.goto("/college/feedback"))}),F(72,"mat-card-content"),J(73,"Feedback"),N(),F(74,"div",19),Z(75,"div",31),N()()()()()}e&2&&(H(12),Wt(t.user==null?null:t.user.name))},dependencies:[Au,ku,_0,y0,ss,S0,In,T0,N0,O0,Vy],styles:[".rt-12px[_ngcontent-%COMP%]{border-radius:24px 24px 0 0}.bg-img[_ngcontent-%COMP%]{background-image:url(/img/bg/bg2.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed}.icon[_ngcontent-%COMP%]{background-position:center;background-size:contain;background-repeat:no-repeat;background-attachment:fixed;height:58px;width:58px}.mat-card-click[_ngcontent-%COMP%]:active{transform:scale(1.1);background-color:#00f3}"]})};var Mi=class r{constructor(n,e){this.router=n;this.storage=e}canActivate(){return this.storage.get("token")?!0:(this.router.navigate(["/welcome"]),!1)}static \u0275fac=function(e){return new(e||r)(ye(Qt),ye(Hn))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var K2=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return r})(),sx=pr({passive:!0}),cx=(()=>{class r{_platform=w(dt);_ngZone=w(Re);_styleLoader=w(Nt);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return $r;this._styleLoader.load(K2);let t=fr(e),i=this._monitoredElements.get(t);if(i)return i.subject;let o=new he,a="cdk-text-field-autofilled",s=c=>{c.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(a)?(t.classList.add(a),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(a)&&(t.classList.remove(a),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,sx),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:o,unlisten:()=>{t.removeEventListener("animationstart",s,sx)}}),o}stopMonitoring(e){let t=fr(e),i=this._monitoredElements.get(t);i&&(i.unlisten(),i.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var lx=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})();var vx=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,t){this._renderer=e,this._elementRef=t}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(t){return new(t||r)(Ie(Va),Ie(Ve))};static \u0275dir=we({type:r})}return r})(),bx=(()=>{class r extends vx{static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275dir=we({type:r,features:[Dt]})}return r})(),na=new ne("");var X2={provide:na,useExisting:lr(()=>_o),multi:!0};function Q2(){let r=za()?za().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Z2=new ne(""),_o=(()=>{class r extends vx{_compositionMode;_composing=!1;constructor(e,t,i){super(e,t),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Q2())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(t){return new(t||r)(Ie(Va),Ie(Ve),Ie(Z2,8))};static \u0275dir=we({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){t&1&&ae("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Et([X2]),Dt]})}return r})();function vo(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function _x(r){return r!=null&&typeof r.length=="number"}var bl=new ne(""),rg=new ne(""),J2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ht=class{static min(n){return eM(n)}static max(n){return tM(n)}static required(n){return nM(n)}static requiredTrue(n){return rM(n)}static email(n){return iM(n)}static minLength(n){return oM(n)}static maxLength(n){return aM(n)}static pattern(n){return sM(n)}static nullValidator(n){return yx(n)}static compose(n){return Sx(n)}static composeAsync(n){return Ax(n)}};function eM(r){return n=>{if(vo(n.value)||vo(r))return null;let e=parseFloat(n.value);return!isNaN(e)&&e<r?{min:{min:r,actual:n.value}}:null}}function tM(r){return n=>{if(vo(n.value)||vo(r))return null;let e=parseFloat(n.value);return!isNaN(e)&&e>r?{max:{max:r,actual:n.value}}:null}}function nM(r){return vo(r.value)?{required:!0}:null}function rM(r){return r.value===!0?null:{required:!0}}function iM(r){return vo(r.value)||J2.test(r.value)?null:{email:!0}}function oM(r){return n=>vo(n.value)||!_x(n.value)?null:n.value.length<r?{minlength:{requiredLength:r,actualLength:n.value.length}}:null}function aM(r){return n=>_x(n.value)&&n.value.length>r?{maxlength:{requiredLength:r,actualLength:n.value.length}}:null}function sM(r){if(!r)return yx;let n,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=r.toString(),n=r),t=>{if(vo(t.value))return null;let i=t.value;return n.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function yx(r){return null}function xx(r){return r!=null}function wx(r){return Ad(r)?gn(r):r}function Cx(r){let n={};return r.forEach(e=>{n=e!=null?Q(Q({},n),e):n}),Object.keys(n).length===0?null:n}function Dx(r,n){return n.map(e=>e(r))}function cM(r){return!r.validate}function Ex(r){return r.map(n=>cM(n)?n:e=>n.validate(e))}function Sx(r){if(!r)return null;let n=r.filter(xx);return n.length==0?null:function(e){return Cx(Dx(e,n))}}function ig(r){return r!=null?Sx(Ex(r)):null}function Ax(r){if(!r)return null;let n=r.filter(xx);return n.length==0?null:function(e){let t=Dx(e,n).map(wx);return bd(t).pipe(Be(Cx))}}function og(r){return r!=null?Ax(Ex(r)):null}function dx(r,n){return r===null?[n]:Array.isArray(r)?[...r,n]:[r,n]}function kx(r){return r._rawValidators}function Ix(r){return r._rawAsyncValidators}function Qm(r){return r?Array.isArray(r)?r:[r]:[]}function Hu(r,n){return Array.isArray(r)?r.includes(n):r===n}function ux(r,n){let e=Qm(n);return Qm(r).forEach(i=>{Hu(e,i)||e.push(i)}),e}function hx(r,n){return Qm(n).filter(e=>!Hu(r,e))}var Gu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=ig(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=og(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},Ri=class extends Gu{name;get formDirective(){return null}get path(){return null}},ti=class extends Gu{_parent=null;name=null;valueAccessor=null},qu=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hj=ot(Q({},lM),{"[class.ng-submitted]":"isSubmitted"}),bs=(()=>{class r extends qu{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(Ie(ti,2))};static \u0275dir=we({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){t&2&&Te("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Dt]})}return r})(),_s=(()=>{class r extends qu{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(Ie(Ri,10))};static \u0275dir=we({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){t&2&&Te("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Dt]})}return r})();var fl="VALID",ju="INVALID",ps="PENDING",pl="DISABLED",bo=class{},Yu=class extends bo{value;source;constructor(n,e){super(),this.value=n,this.source=e}},gl=class extends bo{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},vl=class extends bo{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},ms=class extends bo{status;source;constructor(n,e){super(),this.status=n,this.source=e}},Zm=class extends bo{source;constructor(n){super(),this.source=n}},Jm=class extends bo{source;constructor(n){super(),this.source=n}};function ag(r){return(Xu(r)?r.validators:r)||null}function dM(r){return Array.isArray(r)?ig(r):r||null}function sg(r,n){return(Xu(n)?n.asyncValidators:r)||null}function uM(r){return Array.isArray(r)?og(r):r||null}function Xu(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function Mx(r,n,e){let t=r.controls;if(!(n?Object.keys(t):t).length)throw new gt(1e3,"");if(!t[e])throw new gt(1001,"")}function Rx(r,n,e){r._forEachChild((t,i)=>{if(e[i]===void 0)throw new gt(1002,"")})}var gs=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Ir(this.statusReactive)}set status(n){Ir(()=>this.statusReactive.set(n))}_status=_i(()=>this.statusReactive());statusReactive=Kr(void 0);get valid(){return this.status===fl}get invalid(){return this.status===ju}get pending(){return this.status==ps}get disabled(){return this.status===pl}get enabled(){return this.status!==pl}errors;get pristine(){return Ir(this.pristineReactive)}set pristine(n){Ir(()=>this.pristineReactive.set(n))}_pristine=_i(()=>this.pristineReactive());pristineReactive=Kr(!0);get dirty(){return!this.pristine}get touched(){return Ir(this.touchedReactive)}set touched(n){Ir(()=>this.touchedReactive.set(n))}_touched=_i(()=>this.touchedReactive());touchedReactive=Kr(!1);get untouched(){return!this.touched}_events=new he;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(ux(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(ux(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(hx(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(hx(n,this._rawAsyncValidators))}hasValidator(n){return Hu(this._rawValidators,n)}hasAsyncValidator(n){return Hu(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(ot(Q({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new vl(!0,t))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:t})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t),e&&n.emitEvent!==!1&&this._events.next(new vl(!1,t))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(ot(Q({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new gl(!1,t))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),e&&n.emitEvent!==!1&&this._events.next(new gl(!0,t))}markAsPending(n={}){this.status=ps;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ms(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(ot(Q({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=pl,this.errors=null,this._forEachChild(i=>{i.disable(ot(Q({},n),{onlySelf:!0}))}),this._updateValue();let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Yu(this.value,t)),this._events.next(new ms(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ot(Q({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=fl,this._forEachChild(t=>{t.enable(ot(Q({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ot(Q({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fl||this.status===ps)&&this._runAsyncValidator(t,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Yu(this.value,e)),this._events.next(new ms(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(ot(Q({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pl:fl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=ps,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=wx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,i)=>t&&t._find(i),this)}getError(n,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,t){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||t)&&this._events.next(new ms(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,t)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?pl:this.errors?ju:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ps)?ps:this._anyControlsHaveStatus(ju)?ju:fl}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let t=!this._anyControlsDirty(),i=this.pristine!==t;this.pristine=t,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),i&&this._events.next(new gl(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new vl(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Xu(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=dM(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=uM(this._rawAsyncValidators)}},vs=class extends gs{constructor(n,e,t){super(ag(e),sg(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,t={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Rx(this,!0,n),Object.keys(n).forEach(t=>{Mx(this,!0,t),this.controls[t].setValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(t=>{let i=this.controls[t];i&&i.patchValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((t,i)=>{t.reset(n?n[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,t)=>(n[t]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&n(t,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&n(t))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(n,e){let t=n;return this._forEachChild((i,o)=>{t=e(t,i,o)}),t}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var eg=class extends vs{};var Qu=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>Zu}),Zu="always";function hM(r,n){return[...n.path,r]}function tg(r,n,e=Zu){cg(r,n),n.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(r.disabled),pM(r,n),gM(r,n),mM(r,n),fM(r,n)}function fx(r,n,e=!0){let t=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(t),n.valueAccessor.registerOnTouched(t)),Ku(r,n),r&&(n._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function $u(r,n){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function fM(r,n){if(n.valueAccessor.setDisabledState){let e=t=>{n.valueAccessor.setDisabledState(t)};r.registerOnDisabledChange(e),n._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function cg(r,n){let e=kx(r);n.validator!==null?r.setValidators(dx(e,n.validator)):typeof e=="function"&&r.setValidators([e]);let t=Ix(r);n.asyncValidator!==null?r.setAsyncValidators(dx(t,n.asyncValidator)):typeof t=="function"&&r.setAsyncValidators([t]);let i=()=>r.updateValueAndValidity();$u(n._rawValidators,i),$u(n._rawAsyncValidators,i)}function Ku(r,n){let e=!1;if(r!==null){if(n.validator!==null){let i=kx(r);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==n.validator);o.length!==i.length&&(e=!0,r.setValidators(o))}}if(n.asyncValidator!==null){let i=Ix(r);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==n.asyncValidator);o.length!==i.length&&(e=!0,r.setAsyncValidators(o))}}}let t=()=>{};return $u(n._rawValidators,t),$u(n._rawAsyncValidators,t),e}function pM(r,n){n.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Tx(r,n)})}function mM(r,n){n.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Tx(r,n),r.updateOn!=="submit"&&r.markAsTouched()})}function Tx(r,n){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function gM(r,n){let e=(t,i)=>{n.valueAccessor.writeValue(t),i&&n.viewToModelUpdate(t)};r.registerOnChange(e),n._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function Fx(r,n){r==null,cg(r,n)}function vM(r,n){return Ku(r,n)}function bM(r,n){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function _M(r){return Object.getPrototypeOf(r.constructor)===bx}function Ox(r,n){r._syncPendingControls(),n.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function yM(r,n){if(!n)return null;Array.isArray(n);let e,t,i;return n.forEach(o=>{o.constructor===_o?e=o:_M(o)?t=o:i=o}),i||t||e||null}function xM(r,n){let e=r.indexOf(n);e>-1&&r.splice(e,1)}var wM={provide:Ri,useExisting:lr(()=>ys)},ml=Promise.resolve(),ys=(()=>{class r extends Ri{callSetDisabledState;get submitted(){return Ir(this.submittedReactive)}_submitted=_i(()=>this.submittedReactive());submittedReactive=Kr(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(e,t,i){super(),this.callSetDisabledState=i,this.form=new vs({},ig(e),og(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ml.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),tg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ml.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ml.then(()=>{let t=this._findContainer(e.path),i=new vs({});Fx(i,e),t.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ml.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){ml.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Ox(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(t){return new(t||r)(Ie(bl,10),Ie(rg,10),Ie(Qu,8))};static \u0275dir=we({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){t&1&&ae("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Et([wM]),Dt]})}return r})();function px(r,n){let e=r.indexOf(n);e>-1&&r.splice(e,1)}function mx(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Wu=class extends gs{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,t){super(ag(e),sg(t,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(mx(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){px(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){px(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){mx(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var CM=r=>r instanceof Wu;var xs=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})(),DM={provide:na,useExisting:lr(()=>lg),multi:!0},lg=(()=>{class r extends bx{writeValue(e){let t=e??"";this.setProperty("value",t)}registerOnChange(e){this.onChange=t=>{e(t==""?null:parseFloat(t))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275dir=we({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){t&1&&ae("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Et([DM]),Dt]})}return r})();var Nx=new ne("");var EM={provide:Ri,useExisting:lr(()=>vr)},vr=(()=>{class r extends Ri{callSetDisabledState;get submitted(){return Ir(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=_i(()=>this._submittedReactive());_submittedReactive=Kr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new le;constructor(e,t,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ku(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let t=this.form.get(e.path);return tg(t,e,this.callSetDisabledState),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){fx(e.control||null,e,!1),xM(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this._submittedReactive.set(!0),Ox(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Zm(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Jm(this.form))}_updateDomValue(){this.directives.forEach(e=>{let t=e.control,i=this.form.get(e.path);t!==i&&(fx(t||null,e),CM(i)&&(tg(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let t=this.form.get(e.path);Fx(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let t=this.form.get(e.path);t&&vM(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){cg(this.form,this),this._oldForm&&Ku(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(t){return new(t||r)(Ie(bl,10),Ie(rg,10),Ie(Qu,8))};static \u0275dir=we({type:r,selectors:[["","formGroup",""]],hostBindings:function(t,i){t&1&&ae("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Et([EM]),Dt,jt]})}return r})();var SM={provide:ti,useExisting:lr(()=>ra)},ra=(()=>{class r extends ti{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,t,i,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=yM(this,o)}ngOnChanges(e){this._added||this._setUpControl(),bM(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return hM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(t){return new(t||r)(Ie(Ri,13),Ie(bl,10),Ie(rg,10),Ie(na,10),Ie(Nx,8))};static \u0275dir=we({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Et([SM]),Dt,jt]})}return r})();var Px=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({})}return r})(),ng=class extends gs{constructor(n,e,t){super(ag(e),sg(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,t={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(n,e={}){let t=this._adjustIndex(n);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,t={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){Rx(this,!1,n),n.forEach((t,i)=>{Mx(this,!1,i),this.at(i).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(n.forEach((t,i)=>{this.at(i)&&this.at(i).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((t,i)=>{t.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,t)=>t._syncPendingControls()?!0:e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,t)=>{n(e,t)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}};function gx(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var ws=(()=>{class r{useNonNullable=!1;get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,t=null){let i=this._reduceControls(e),o={};return gx(t)?o=t:t!==null&&(o.validators=t.validator,o.asyncValidators=t.asyncValidator),new vs(i,o)}record(e,t=null){let i=this._reduceControls(e);return new eg(i,t)}control(e,t,i){let o={};return this.useNonNullable?(gx(t)?o=t:(o.validators=t,o.asyncValidators=i),new Wu(e,ot(Q({},o),{nonNullable:!0}))):new Wu(e,t,i)}array(e,t,i){let o=e.map(a=>this._createControl(a));return new ng(o,t,i)}_reduceControls(e){let t={};return Object.keys(e).forEach(i=>{t[i]=this._createControl(e[i])}),t}_createControl(e){if(e instanceof Wu)return e;if(e instanceof gs)return e;if(Array.isArray(e)){let t=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(t,i,o)}else return this.control(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ju=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Qu,useValue:e.callSetDisabledState??Zu}]}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Px]})}return r})(),Cs=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Nx,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Qu,useValue:e.callSetDisabledState??Zu}]}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Px]})}return r})();var ug=class{_box;_destroyed=new he;_resizeSubject=new he;_resizeObserver;_elementObservables=new Map;constructor(n){this._box=n,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Yr(e=>{let t=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),t.unsubscribe(),this._elementObservables.delete(n)}}).pipe(mt(e=>e.some(t=>t.target===n)),Kf({bufferSize:1,refCount:!0}),Ut(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Lx=(()=>{class r{_observers=new Map;_ngZone=w(Re);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,t){let i=t?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new ug(i)),this._observers.get(i).observe(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var AM=["notch"],kM=["matFormFieldNotchedOutline",""],IM=["*"],MM=["textField"],RM=["iconPrefixContainer"],TM=["textPrefixContainer"],FM=["iconSuffixContainer"],OM=["textSuffixContainer"],NM=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],PM=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function LM(r,n){r&1&&Z(0,"span",21)}function BM(r,n){if(r&1&&(F(0,"label",20),tt(1,1),Pe(2,LM,1,0,"span",21),N()),r&2){let e=de(2);Ce("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),$e("for",e._control.disableAutomaticLabeling?null:e._control.id),H(2),ze(!e.hideRequiredMarker&&e._control.required?2:-1)}}function VM(r,n){if(r&1&&Pe(0,BM,3,5,"label",20),r&2){let e=de();ze(e._hasFloatingLabel()?0:-1)}}function zM(r,n){r&1&&Z(0,"div",7)}function UM(r,n){}function jM(r,n){if(r&1&&Pe(0,UM,0,0,"ng-template",13),r&2){de(2);let e=bi(1);Ce("ngTemplateOutlet",e)}}function WM(r,n){if(r&1&&(F(0,"div",9),Pe(1,jM,1,1,null,13),N()),r&2){let e=de();Ce("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),H(),ze(e._forceDisplayInfixLabel()?-1:1)}}function HM(r,n){r&1&&(F(0,"div",10,2),tt(2,2),N())}function GM(r,n){r&1&&(F(0,"div",11,3),tt(2,3),N())}function qM(r,n){}function YM(r,n){if(r&1&&Pe(0,qM,0,0,"ng-template",13),r&2){de();let e=bi(1);Ce("ngTemplateOutlet",e)}}function $M(r,n){r&1&&(F(0,"div",14,4),tt(2,4),N())}function KM(r,n){r&1&&(F(0,"div",15,5),tt(2,5),N())}function XM(r,n){r&1&&Z(0,"div",16)}function QM(r,n){if(r&1&&(F(0,"div",18),tt(1,6),N()),r&2){let e=de();Ce("@transitionMessages",e._subscriptAnimationState)}}function ZM(r,n){if(r&1&&(F(0,"mat-hint",22),J(1),N()),r&2){let e=de(2);Ce("id",e._hintLabelId),H(),Wt(e.hintLabel)}}function JM(r,n){if(r&1&&(F(0,"div",19),Pe(1,ZM,2,2,"mat-hint",22),tt(2,7),Z(3,"div",23),tt(4,8),N()),r&2){let e=de();Ce("@transitionMessages",e._subscriptAnimationState),H(),ze(e.hintLabel?1:-1)}}var yo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["mat-label"]]})}return r})(),eR=new ne("MatError");var th=(()=>{class r{align="start";id=w(Tt).getId("mat-mdc-hint-");static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){t&2&&(Ar("id",i.id),$e("align",null),Te("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"}})}return r})(),tR=new ne("MatPrefix");var Hx=new ne("MatSuffix"),nh=(()=>{class r{set _isTextSelector(e){this._isText=!0}_isText=!1;static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[Et([{provide:Hx,useExisting:r}])]})}return r})(),Gx=new ne("FloatingLabelParent"),Bx=(()=>{class r{_elementRef=w(Ve);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=w(Lx);_ngZone=w(Re);_parent=w(Gx);_resizeSubscription=new Ct;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return nR(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){t&2&&Te("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return r})();function nR(r){let n=r;if(n.offsetParent!==null)return n.scrollWidth;let e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let t=e.scrollWidth;return e.remove(),t}var Vx="mdc-line-ripple--active",eh="mdc-line-ripple--deactivating",zx=(()=>{class r{_elementRef=w(Ve);constructor(){w(Re).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(eh),e.add(Vx)}deactivate(){this._elementRef.nativeElement.classList.add(eh)}_handleTransitionEnd=e=>{let t=this._elementRef.nativeElement.classList,i=t.contains(eh);e.propertyName==="opacity"&&i&&t.remove(Vx,eh)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return r})(),Ux=(()=>{class r{_elementRef=w(Ve);_ngZone=w(Re);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,i){if(t&1&&it(AM,5),t&2){let o;je(o=We())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){t&2&&Te("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:kM,ngContentSelectors:IM,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(t,i){t&1&&(Ot(),Z(0,"div",1),F(1,"div",2,0),tt(3),N(),Z(4,"div",3))},encapsulation:2,changeDetection:0})}return r})(),rR={transitionMessages:eo("transitionMessages",[Ho("enter",Pn({opacity:1,transform:"translateY(0%)"})),Mr("void => enter",[Pn({opacity:0,transform:"translateY(-5px)"}),Xr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Ds=(()=>{class r{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r})}return r})();var ia=new ne("MatFormField"),iR=new ne("MAT_FORM_FIELD_DEFAULT_OPTIONS"),jx="fill",oR="auto",Wx="fixed",aR="translateY(-50%)",Es=(()=>{class r{_elementRef=w(Ve);_changeDetectorRef=w(St);_dir=w(bn);_platform=w(dt);_idGenerator=w(Tt);_defaults=w(iR,{optional:!0});_animationMode=w(Kt,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=Kb(yo);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ei(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||oR}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let t=this._appearance,i=e||this._defaults?.appearance||jx;this._appearance=i,this._appearance==="outline"&&this._appearance!==t&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=jx;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Wx}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||Wx}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new he;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=w(yt);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=_i(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let t=this._control,i="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(i+e.controlType),t.controlType&&this._elementRef.nativeElement.classList.add(i+t.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=t.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=t.stateChanges.pipe(cn([void 0,void 0]),Be(()=>[t.errorState,t.userAriaDescribedBy]),$f(),mt(([[o,a],[s,c]])=>o!==s||a!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),t.ngControl&&t.ngControl.valueChanges&&(this._valueChanges=t.ngControl.valueChanges.pipe(Ut(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),jn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Cd(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Ut(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=_i(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let t=this._control?this._control.ngControl:null;return t&&t[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let t=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,i=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let t=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,a=this._textSuffixContainer?.nativeElement,s=t?.getBoundingClientRect().width??0,c=i?.getBoundingClientRect().width??0,l=o?.getBoundingClientRect().width??0,d=a?.getBoundingClientRect().width??0,u=this._dir.value==="rtl"?"-1":"1",h=`${s+c}px`,p=`calc(${u} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${aR} translateX(${p})
    )`;let m=s+c+l+d;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${m}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-form-field"]],contentQueries:function(t,i,o){if(t&1&&(t_(o,i._labelChild,yo,5),An(o,Ds,5),An(o,tR,5),An(o,Hx,5),An(o,eR,5),An(o,th,5)),t&2){n_();let a;je(a=We())&&(i._formFieldControl=a.first),je(a=We())&&(i._prefixChildren=a),je(a=We())&&(i._suffixChildren=a),je(a=We())&&(i._errorChildren=a),je(a=We())&&(i._hintChildren=a)}},viewQuery:function(t,i){if(t&1&&(it(MM,5),it(RM,5),it(TM,5),it(FM,5),it(OM,5),it(Bx,5),it(Ux,5),it(zx,5)),t&2){let o;je(o=We())&&(i._textField=o.first),je(o=We())&&(i._iconPrefixContainer=o.first),je(o=We())&&(i._textPrefixContainer=o.first),je(o=We())&&(i._iconSuffixContainer=o.first),je(o=We())&&(i._textSuffixContainer=o.first),je(o=We())&&(i._floatingLabel=o.first),je(o=We())&&(i._notchedOutline=o.first),je(o=We())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){t&2&&Te("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations",i._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Et([{provide:ia,useExisting:r},{provide:Gx,useExisting:r}])],ngContentSelectors:PM,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(t,i){if(t&1){let o=vt();Ot(NM),Pe(0,VM,1,1,"ng-template",null,0,o_),F(2,"div",6,1),ae("click",function(s){return Ae(o),ke(i._control.onContainerClick(s))}),Pe(4,zM,1,0,"div",7),F(5,"div",8),Pe(6,WM,2,2,"div",9)(7,HM,3,0,"div",10)(8,GM,3,0,"div",11),F(9,"div",12),Pe(10,YM,1,1,null,13),tt(11),N(),Pe(12,$M,3,0,"div",14)(13,KM,3,0,"div",15),N(),Pe(14,XM,1,0,"div",16),N(),F(15,"div",17),Pe(16,QM,2,1,"div",18)(17,JM,5,2,"div",19),N()}if(t&2){let o;H(2),Te("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),H(2),ze(!i._hasOutline()&&!i._control.disabled?4:-1),H(2),ze(i._hasOutline()?6:-1),H(),ze(i._hasIconPrefix?7:-1),H(),ze(i._hasTextPrefix?8:-1),H(2),ze(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),H(2),ze(i._hasTextSuffix?12:-1),H(),ze(i._hasIconSuffix?13:-1),H(),ze(i._hasOutline()?-1:14),H(),Te("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic"),H(),ze((o=i._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[Bx,Ux,m_,zx,th],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[rR.transitionMessages]},changeDetection:0})}return r})(),Ti=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,mu,Ze]})}return r})();var fg=new ne("MAT_INPUT_VALUE_ACCESSOR"),sR=["button","checkbox","file","hidden","image","radio","range","reset","submit"],cR=new ne("MAT_INPUT_CONFIG"),Ss=(()=>{class r{_elementRef=w(Ve);_platform=w(dt);ngControl=w(ti,{optional:!0,self:!0});_autofillMonitor=w(cx);_ngZone=w(Re);_formField=w(ia,{optional:!0});_uid=w(Tt).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_webkitBlinkWheelListenerAttached=!1;_config=w(cR,{optional:!0});_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new he;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Ht.required)??!1}set required(e){this._required=Ei(e)}_required;get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&sm().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ei(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>sm().has(e));constructor(){let e=w(ys,{optional:!0}),t=w(vr,{optional:!0}),i=w(il),o=w(fg,{optional:!0,self:!0}),a=this._elementRef.nativeElement,s=a.nodeName.toLowerCase();o?Uo(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=a,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{a.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Zo(i,this.ngControl,t,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=s==="select",this._isTextarea=s==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=a.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Fd(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let t=this._elementRef.nativeElement;t.type==="number"?(t.type="text",t.setSelectionRange(0,0),t.type="number"):t.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){sR.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(e){let t=this._elementRef.nativeElement,i=t.getAttribute("aria-describedby"),o;if(i){let a=this._formFieldDescribedBy||e;o=e.concat(i.split(" ").filter(s=>s&&!a.includes(s)))}else o=e;this._formFieldDescribedBy=e,o.length?t.setAttribute("aria-describedby",o.join(" ")):t.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let t=e.target;!t.value&&t.selectionStart===0&&t.selectionEnd===0&&(t.setSelectionRange(1,1),t.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(t,i){t&1&&ae("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),t&2&&(Ar("id",i.id)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),$e("name",i.name||null)("readonly",i._getReadonlyAttribute())("aria-disabled",i.disabled&&i.disabledInteractive?"true":null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Te("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mat-mdc-input-disabled-interactive",i.disabledInteractive)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fe]},exportAs:["matInput"],features:[Et([{provide:Ds,useExisting:r}]),lt,jt]})}return r})(),As=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ti,Ti,lx,Ze]})}return r})();var rh={api:"https://api.timt.in",production:!0};var ks=class r{constructor(n,e){this.http=n;this.storage=e}api=rh.api;login(n){let e=`${this.api}/login`,t={"Content-Type":"application/json"};return this.http.post(e,n,{headers:t})}postInfo(n){let e=`${this.api}/user_info`,t=this.storage.get("token"),i=new Xt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}static \u0275fac=function(e){return new(e||r)(ye(xi),ye(Hn))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function lR(r,n){if(r&1){let e=vt();F(0,"form",8),ae("ngSubmit",function(){Ae(e);let i=de();return ke(i.onSubmit())}),F(1,"mat-form-field",9)(2,"mat-label"),J(3,"Email Id"),N(),Z(4,"input",10),N(),F(5,"mat-form-field",9)(6,"mat-label"),J(7,"Password"),N(),Z(8,"input",11),N(),F(9,"div",12)(10,"a",13),J(11,"Forget Password?"),N()(),F(12,"div",14)(13,"button",15),J(14," Login "),N()()()}if(r&2){let e=de();Ce("formGroup",e.loginForm)}}var ih=class r{constructor(n,e,t,i,o){this.service=n;this.fb=e;this.alertService=t;this.router=i;this.storage=o}loginForm;ngOnInit(){this.storage.get("token")&&this.router.navigate(["/"]),Ai("Execute login component"),this.loginForm=this.fb.group({username:["",[Ht.required,Ht.email]],password:["",Ht.required]})}onSubmit(){return Rt(this,null,function*(){this.loginForm?.valid&&(Ai("Submit login form"),Ai(this.loginForm?.value),yield Nn(this.service.login(this.loginForm?.value).pipe(nt(n=>{n.token&&n.lable&&(localStorage.setItem("token",n.token),this.storage.set("token",n.token),localStorage.setItem("lable",n.lable),this.storage.set("lable",n.lable),n.info?(localStorage.setItem("info",JSON.stringify(n.info)),this.storage.set("info",n.info),this.router.navigate(["/"])):this.alertService.showErrorAlert("Complit your profile",!1,this.onOkError.bind(this)))},n=>{this.alertService.showErrorAlert(n.error.message)}))))})}onOkError(){this.router.navigate(["/me_data"])}static \u0275fac=function(e){return new(e||r)(Ie(ks),Ie(ws),Ie(gr),Ie(Qt),Ie(Hn))};static \u0275cmp=se({type:r,selectors:[["app-login"]],decls:10,vars:1,consts:[[1,"root"],[1,"mask-black"],[1,"root","bg-blue-500"],[1,"m-6","rounded-full","bg-white","bg-center","bg-no-repeat","bg-contain","w-[200px]","h-[200px]","shadow-2","z-[3]","absolute","top-[25%]",2,"background-image","url('img/timt.jpg')"],["data-aos","fade-left",1,"h-[55%]","w-full","shadow-1","p-4","bg-white","absolute","bottom-0","ml-2","mr-2","mt-[25px]","flex","justify-center","items-center","z-[2]",2,"border-radius","32px 32px 0px 0px"],[1,"example-form","w-full",3,"formGroup"],[1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-15%]","left-[-50%]"],[1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-25%]","left-[-30%]"],[1,"example-form","w-full",3,"ngSubmit","formGroup"],[1,"example-full-width","w-full","bg-transparent"],["matInput","","type","email","placeholder","example@gmial.com","formControlName","username"],["matInput","","type","password","placeholder","ddmmyyyy","formControlName","password"],[1,"w-full","flex","justify-end"],["mat-button","","disabled","","href","https://www.google.com/","target","_blank"],[1,"w-full","mt-5"],["mat-flat-button","",1,"w-full","shadow-2","justify-center"]],template:function(e,t){e&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),Z(3,"div",3),F(4,"div",4)(5,"mat-divider"),J(6,"s"),N(),Pe(7,lR,15,1,"form",5),N(),Z(8,"div",6)(9,"div",7),N()()()),e&2&&(H(7),ze(t.loginForm?7:-1))},dependencies:[In,M0,nr,Au,b0,ss,As,Ss,Es,yo,Ti,Ju,xs,_o,bs,_s,Cs,vr,ra],styles:[".example-full-width[_ngcontent-%COMP%]{background-color:transparent!important}"]})};var oh=class r{constructor(n){this.router=n}showMore=!1;goLogin(){this.router.navigate(["/login"])}showHide(){this.showMore?(document.getElementById("more").style.display="none",document.getElementById("donts").style.display="block",this.showMore=!1):(document.getElementById("more").style.display="block",document.getElementById("donts").style.display="none",this.showMore=!0)}static \u0275fac=function(e){return new(e||r)(Ie(Qt))};static \u0275cmp=se({type:r,selectors:[["app-welcome"]],decls:21,vars:1,consts:[[1,"root","bg-blue-500","flex-col",2,"overflow","hidden !important","position","relative"],["data-aos","zoom-in",1,"m-6","rounded-full","bg-white","bg-center","bg-no-repeat","bg-contain","w-[200px]","h-[200px]","shadow-2","z-[2]",2,"background-image","url('img/timt.jpg')"],[1,"w-full","text-center","text-white","z-[2]"],[1,"dancing"],[1,"bg-white","w-[85%]","p-4","shadow-1","z-[2]","rounded-sm","text-center","absolute","bottom-[100px]"],["id","donts"],["id","more"],["mat-button","",3,"click"],[1,"w-full","text-center","absolute","bottom-[50px]","z-[2]"],["mat-raised-button","",1,"w-[90%]",3,"click"],["data-aos","fade-up-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","bottom-[-15%]","left-[-50%]"],["data-aos","fade-up-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","bottom-[-25%]","left-[-40%]"],["data-aos","fade-down-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-15%]","left-[-50%]"],["data-aos","fade-down-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-25%]","left-[-30%]"]],template:function(e,t){e&1&&(F(0,"div",0),Z(1,"div",1),F(2,"div",2)(3,"p",3),J(4,"Welcome"),N()(),F(5,"div",4)(6,"p"),J(7,"The Tamralipta Institute of Management & Technology(TIMT) is situated at Tamluk, "),F(8,"span",5),J(9,"...."),N(),F(10,"span",6),J(11," the district head quarter of Purba Medinipur. It is affiliated to Maulana Abdul Kalam Azad University of Technology West Bengal(MAKAUT, WB). The institute has also received approval from All India Council for Technical Education (AICTE) vide letter No: F.NO.Eastern/2024-25/1-44130103223 dated on 09/05/2024 TIMT boasts of one of the best infrastructure which is evident from its consistent high ranking on infrastructure parameter. Its strength lies in its eminent faculty and the quality of its courses that have, in many cases, been trendsetter."),N()(),F(12,"button",7),ae("click",function(){return t.showHide()}),J(13),N()(),F(14,"div",8)(15,"button",9),ae("click",function(){return t.goLogin()}),J(16,"Go to Login"),N()(),Z(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13),N()),e&2&&(H(13),ur(" ",t.showMore?"Read More":"Read Less"," "))},dependencies:[In,nr,ss],styles:['@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLviuEViw.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLuiuEViw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLgiuE.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Lct-FG.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3vct-FG.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Pct-FG.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3zct-FG.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Dct-FG.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Hct-FG.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3_ctw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf3D33Esw.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf-D33Esw.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf2D33Esw.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf5D33Esw.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf1D33Esw.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf0D33Esw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf6D30.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.dancing[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-optical-sizing:auto;font-weight:200px!important;font-style:normal;font-size:80px}#more[_ngcontent-%COMP%]{display:none}']})};var dR=["input"],uR=["formField"],hR=["*"],ah=class{source;value;constructor(n,e){this.source=n,this.value=e}},fR={provide:na,useExisting:lr(()=>mg),multi:!0},Yx=new ne("MatRadioGroup"),pR=new ne("mat-radio-default-options",{providedIn:"root",factory:mR});function mR(){return{color:"accent",disabledInteractive:!1}}var mg=(()=>{class r{_changeDetector=w(St);_value=null;_name=w(Tt).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new le;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(t=>{t.checked=this.value===t.value,t.checked&&(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new ah(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["mat-radio-group"]],contentQueries:function(t,i,o){if(t&1&&An(o,sh,5),t&2){let a;je(a=We())&&(i._radios=a)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Fe],required:[2,"required","required",Fe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fe]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Et([fR,{provide:Yx,useExisting:r}]),lt]})}return r})(),sh=(()=>{class r{_elementRef=w(Ve);_changeDetector=w(St);_focusMonitor=w(Qo);_radioDispatcher=w(B0);_defaultOptions=w(pR,{optional:!0});_ngZone=w(Re);_uniqueId=w(Tt).getId("mat-radio-");id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new le;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=w(yt);constructor(){w(Nt).load(ea);let e=w(Yx,{optional:!0}),t=w(Kt,{optional:!0}),i=w(new mi("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=t==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,i&&(this.tabIndex=kr(i,0))}focus(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._inputElement.nativeElement.addEventListener("click",this._onInputClick)})}ngOnDestroy(){this._inputElement?.nativeElement.removeEventListener("click",this._onInputClick),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ah(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,t;if(!e||!e.selected||this.disabled?t=this.tabIndex:t=e.selected===this?this.tabIndex:-1,t!==this._previousTabIndex){let i=this._inputElement?.nativeElement;i&&(i.setAttribute("tabindex",t+""),this._previousTabIndex=t,Wn(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===i&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===i&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-radio-button"]],viewQuery:function(t,i){if(t&1&&(it(dR,5),it(uR,7,Ve)),t&2){let o;je(o=We())&&(i._inputElement=o.first),je(o=We())&&(i._rippleTrigger=o.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(t,i){t&1&&ae("focus",function(){return i._inputElement.nativeElement.focus()}),t&2&&($e("id",i.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Te("mat-primary",i.color==="primary")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("mat-mdc-radio-checked",i.checked)("mat-mdc-radio-disabled",i.disabled)("mat-mdc-radio-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Fe],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:kr(e)],checked:[2,"checked","checked",Fe],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Fe],required:[2,"required","required",Fe],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fe]},outputs:{change:"change"},exportAs:["matRadioButton"],features:[lt],ngContentSelectors:hR,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(t,i){if(t&1){let o=vt();Ot(),F(0,"div",2,0)(2,"div",3)(3,"div",4),ae("click",function(s){return Ae(o),ke(i._onTouchTargetClick(s))}),N(),F(4,"input",5,1),ae("change",function(s){return Ae(o),ke(i._onInputInteraction(s))}),N(),F(6,"div",6),Z(7,"div",7)(8,"div",8),N(),F(9,"div",9),Z(10,"div",10),N()(),F(11,"label",11),tt(12),N()()}t&2&&(Ce("labelPosition",i.labelPosition),H(2),Te("mdc-radio--disabled",i.disabled),H(2),Ce("id",i.inputId)("checked",i.checked)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),$e("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-disabled",i.disabled&&i.disabledInteractive?"true":null),H(5),Ce("matRippleTrigger",i._rippleTrigger.nativeElement)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0),H(2),Ce("for",i.inputId))},dependencies:[Im,g0],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return r})(),$x=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,ol,sh,Ze]})}return r})();var vR=["mat-calendar-body",""];function bR(r,n){return this._trackRow(n)}var nw=(r,n)=>n.id;function _R(r,n){if(r&1&&(F(0,"tr",0)(1,"td",3),J(2),N()()),r&2){let e=de();H(),Ji("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),$e("colspan",e.numCols),H(),ur(" ",e.label," ")}}function yR(r,n){if(r&1&&(F(0,"td",3),J(1),N()),r&2){let e=de(2);Ji("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),$e("colspan",e._firstRowOffset),H(),ur(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function xR(r,n){if(r&1){let e=vt();F(0,"td",6)(1,"button",7),ae("click",function(i){let o=Ae(e).$implicit,a=de(2);return ke(a._cellClicked(o,i))})("focus",function(i){let o=Ae(e).$implicit,a=de(2);return ke(a._emitActiveDateChange(o,i))}),F(2,"span",8),J(3),N(),Z(4,"span",9),N()()}if(r&2){let e=n.$implicit,t=n.$index,i=de().$index,o=de();Ji("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),$e("data-mat-row",i)("data-mat-col",t),H(),Te("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(i,t))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,i,t))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,i,t))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),Ce("ngClass",e.cssClasses)("tabindex",o._isActiveCell(i,t)?0:-1),$e("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null)("aria-describedby",o._getDescribedby(e.compareValue)),H(),Te("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),H(),ur(" ",e.displayValue," ")}}function wR(r,n){if(r&1&&(F(0,"tr",1),Pe(1,yR,2,6,"td",4),jo(2,xR,5,48,"td",5,nw),N()),r&2){let e=n.$implicit,t=n.$index,i=de();H(),ze(t===0&&i._firstRowOffset?1:-1),H(),Wo(e)}}function CR(r,n){if(r&1&&(F(0,"th",2)(1,"span",6),J(2),N(),F(3,"span",3),J(4),N()()),r&2){let e=n.$implicit;H(2),Wt(e.long),H(2),Wt(e.narrow)}}var DR=["*"];function ER(r,n){}function SR(r,n){if(r&1){let e=vt();F(0,"mat-month-view",4),Rd("activeDateChange",function(i){Ae(e);let o=de();return Md(o.activeDate,i)||(o.activeDate=i),ke(i)}),ae("_userSelection",function(i){Ae(e);let o=de();return ke(o._dateSelected(i))})("dragStarted",function(i){Ae(e);let o=de();return ke(o._dragStarted(i))})("dragEnded",function(i){Ae(e);let o=de();return ke(o._dragEnded(i))}),N()}if(r&2){let e=de();Id("activeDate",e.activeDate),Ce("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function AR(r,n){if(r&1){let e=vt();F(0,"mat-year-view",5),Rd("activeDateChange",function(i){Ae(e);let o=de();return Md(o.activeDate,i)||(o.activeDate=i),ke(i)}),ae("monthSelected",function(i){Ae(e);let o=de();return ke(o._monthSelectedInYearView(i))})("selectedChange",function(i){Ae(e);let o=de();return ke(o._goToDateInView(i,"month"))}),N()}if(r&2){let e=de();Id("activeDate",e.activeDate),Ce("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function kR(r,n){if(r&1){let e=vt();F(0,"mat-multi-year-view",6),Rd("activeDateChange",function(i){Ae(e);let o=de();return Md(o.activeDate,i)||(o.activeDate=i),ke(i)}),ae("yearSelected",function(i){Ae(e);let o=de();return ke(o._yearSelectedInMultiYearView(i))})("selectedChange",function(i){Ae(e);let o=de();return ke(o._goToDateInView(i,"year"))}),N()}if(r&2){let e=de();Id("activeDate",e.activeDate),Ce("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function IR(r,n){}var MR=["button"],RR=[[["","matDatepickerToggleIcon",""]]],TR=["[matDatepickerToggleIcon]"];function FR(r,n){r&1&&(Sr(),F(0,"svg",2),Z(1,"path",3),N())}var Rs=(()=>{class r{changes=new he;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,t){return`${e} \u2013 ${t}`}formatYearRangeLabel(e,t){return`${e} to ${t}`}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),OR=0,yl=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=OR++;constructor(n,e,t,i,o={},a=n,s){this.value=n,this.displayValue=e,this.ariaLabel=t,this.enabled=i,this.cssClasses=o,this.compareValue=a,this.rawValue=s}},Kx=pr({passive:!1,capture:!0}),xo=pr({passive:!0,capture:!0}),ch=pr({passive:!0}),Ms=(()=>{class r{_elementRef=w(Ve);_ngZone=w(Re);_platform=w(dt);_intl=w(Rs);_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new le;previewChange=new le;activeDateChange=new le;dragStarted=new le;dragEnded=new le;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=w(yt);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=w(Tt);this._startDateLabelId=e.getId("mat-calendar-body-start-"),this._endDateLabelId=e.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=e.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=e.getId("mat-calendar-body-comparison-end-"),w(Nt).load(ea),this._ngZone.runOutsideAngular(()=>{let t=this._elementRef.nativeElement;t.addEventListener("touchmove",this._touchmoveHandler,Kx),t.addEventListener("mouseenter",this._enterHandler,xo),t.addEventListener("focus",this._enterHandler,xo),t.addEventListener("mouseleave",this._leaveHandler,xo),t.addEventListener("blur",this._leaveHandler,xo),t.addEventListener("mousedown",this._mousedownHandler,ch),t.addEventListener("touchstart",this._mousedownHandler,ch),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,t){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:t})}_emitActiveDateChange(e,t){e.enabled&&this.activeDateChange.emit({value:e.value,event:t})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let t=e.numCols,{rows:i,numCols:o}=this;(e.rows||t)&&(this._firstRowOffset=i&&i.length&&i[0].length?o-i[0].length:0),(e.cellAspectRatio||t||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/o}%`),(t||!this._cellWidth)&&(this._cellWidth=`${100/o}%`)}ngOnDestroy(){let e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,Kx),e.removeEventListener("mouseenter",this._enterHandler,xo),e.removeEventListener("focus",this._enterHandler,xo),e.removeEventListener("mouseleave",this._leaveHandler,xo),e.removeEventListener("blur",this._leaveHandler,xo),e.removeEventListener("mousedown",this._mousedownHandler,ch),e.removeEventListener("touchstart",this._mousedownHandler,ch),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,t){let i=e*this.numCols+t;return e&&(i-=this._firstRowOffset),i==this.activeCell}_focusActiveCell(e=!0){Wn(()=>{setTimeout(()=>{let t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&(e||(this._skipNextFocus=!0),t.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return bg(e,this.startValue,this.endValue)}_isRangeEnd(e){return _g(e,this.startValue,this.endValue)}_isInRange(e){return yg(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return bg(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,t,i){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[t][i-1];if(!o){let a=this.rows[t-1];o=a&&a[a.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,t,i){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[t][i+1];if(!o){let a=this.rows[t+1];o=a&&a[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return _g(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return yg(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return bg(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return _g(e,this.previewStart,this.previewEnd)}_isInPreview(e){return yg(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let t=this._getCellFromElement(e.target);t&&this._ngZone.run(()=>this.previewChange.emit({value:t.enabled?t:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let t=Xx(e),i=t?this._getCellFromElement(t):null;t!==e.target&&(this._didDragSinceMouseDown=!0),vg(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:i?.enabled?i:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let t=e.target&&this._getCellFromElement(e.target);!t||!this._isInRange(t.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:t.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let t=vg(e.target);if(!t){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}t.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let i=this._getCellFromElement(t);this.dragEnded.emit({value:i?.rawValue??null,event:e})})};_touchendHandler=e=>{let t=Xx(e);t&&this._mouseupHandler({target:t})};_getCellFromElement(e){let t=vg(e);if(t){let i=t.getAttribute("data-mat-row"),o=t.getAttribute("data-mat-col");if(i&&o)return this.rows[parseInt(i)][parseInt(o)]}return null}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[jt],attrs:vR,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(t,i){t&1&&(Pe(0,_R,3,6,"tr",0),jo(1,wR,4,1,"tr",1,bR,!0),F(3,"span",2),J(4),N(),F(5,"span",2),J(6),N(),F(7,"span",2),J(8),N(),F(9,"span",2),J(10),N()),t&2&&(ze(i._firstRowOffset<i.labelMinRequiredCells?0:-1),H(),Wo(i.rows),H(2),Ce("id",i._startDateLabelId),H(),ur(" ",i.startDateAccessibleName,`
`),H(),Ce("id",i._endDateLabelId),H(),ur(" ",i.endDateAccessibleName,`
`),H(),Ce("id",i._comparisonStartDateLabelId),H(),rp(" ",i.comparisonDateAccessibleName," ",i.startDateAccessibleName,`
`),H(),Ce("id",i._comparisonEndDateLabelId),H(),rp(" ",i.comparisonDateAccessibleName," ",i.endDateAccessibleName,`
`))},dependencies:[Pd],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}'],encapsulation:2,changeDetection:0})}return r})();function gg(r){return r?.nodeName==="TD"}function vg(r){let n;return gg(r)?n=r:gg(r.parentNode)?n=r.parentNode:gg(r.parentNode?.parentNode)&&(n=r.parentNode.parentNode),n?.getAttribute("data-mat-row")!=null?n:null}function bg(r,n,e){return e!==null&&n!==e&&r<e&&r===n}function _g(r,n,e){return n!==null&&n!==e&&r>=n&&r===e}function yg(r,n,e,t){return t&&n!==null&&e!==null&&n!==e&&r>=n&&r<=e}function Xx(r){let n=r.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}var br=class{start;end;_disableStructuralEquivalency;constructor(n,e){this.start=n,this.end=e}},xl=(()=>{class r{selection;_adapter;_selectionChanged=new he;selectionChanged=this._selectionChanged;constructor(e,t){this.selection=e,this._adapter=t,this.selection=e}updateSelection(e,t){let i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(t){Ba()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),NR=(()=>{class r extends xl{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new r(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(t){return new(t||r)(ye(kn))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function PR(r,n){return r||new NR(n)}var rw={provide:xl,deps:[[new Po,new yc,xl],kn],useFactory:PR};var iw=new ne("MAT_DATE_RANGE_SELECTION_STRATEGY");var xg=7,LR=0,Qx=(()=>{class r{_changeDetectorRef=w(St);_dateFormats=w(Jo,{optional:!0});_dateAdapter=w(kn,{optional:!0});_dir=w(bn,{optional:!0});_rangeStrategy=w(iw,{optional:!0});_rerenderSubscription=Ct.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._hasSameMonthAndYear(t,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof br?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new le;_userSelection=new le;dragStarted=new le;dragEnded=new le;activeDateChange=new le;_matCalendarBody;_monthLabel;_weeks;_firstWeekOffset;_rangeStart;_rangeEnd;_comparisonRangeStart;_comparisonRangeEnd;_previewStart;_previewEnd;_isRange;_todayDate;_weekdays;constructor(){w(Nt).load(Fr),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(cn(null)).subscribe(()=>this._init())}ngOnChanges(e){let t=e.comparisonStart||e.comparisonEnd;t&&!t.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let t=e.value,i=this._getDateFromDayOfMonth(t),o,a;this._selected instanceof br?(o=this._getDateInCurrentMonth(this._selected.start),a=this._getDateInCurrentMonth(this._selected.end)):o=a=this._getDateInCurrentMonth(this._selected),(o!==t||a!==t)&&this.selectedChange.emit(i),this._userSelection.emit({value:i,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!Zt(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(xg+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%xg,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:t}){if(this._rangeStrategy){let i=t?t.rawValue:null,o=this._rangeStrategy.createPreview(i,this.selected,e);if(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end),this.activeDrag&&i){let a=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,i,e);a&&(this._previewStart=this._getCellCompareValue(a.start),this._previewEnd=this._getCellCompareValue(a.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let t=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:t??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),t=this._dateAdapter.getDayOfWeekNames("narrow"),o=this._dateAdapter.getDayOfWeekNames("long").map((a,s)=>({long:a,narrow:t[s],id:LR++}));this._weekdays=o.slice(e).concat(o.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),t=this._dateAdapter.getDateNames();this._weeks=[[]];for(let i=0,o=this._firstWeekOffset;i<e;i++,o++){o==xg&&(this._weeks.push([]),o=0);let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),s=this._shouldEnableDate(a),c=this._dateAdapter.format(a,this._dateFormats.display.dateA11yLabel),l=this.dateClass?this.dateClass(a,"month"):void 0;this._weeks[this._weeks.length-1].push(new yl(i+1,t[i],c,s,l,this._getCellCompareValue(a),a))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,t){return!!(e&&t&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t))}_getCellCompareValue(e){if(e){let t=this._dateAdapter.getYear(e),i=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(t,i,o).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof br?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-month-view"]],viewQuery:function(t,i){if(t&1&&it(Ms,5),t&2){let o;je(o=We())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[jt],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(t,i){t&1&&(F(0,"table",0)(1,"thead",1)(2,"tr"),jo(3,CR,5,2,"th",2,nw),N(),F(5,"tr",3),Z(6,"th",4),N()(),F(7,"tbody",5),ae("selectedValueChange",function(a){return i._dateSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("previewChange",function(a){return i._previewChanged(a)})("dragStarted",function(a){return i.dragStarted.emit(a)})("dragEnded",function(a){return i._dragEnded(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),N()()),t&2&&(H(3),Wo(i._weekdays),H(4),Ce("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName))},dependencies:[Ms],encapsulation:2,changeDetection:0})}return r})(),rr=24,wg=4,Zx=(()=>{class r{_changeDetectorRef=w(St);_dateAdapter=w(kn,{optional:!0});_dir=w(bn,{optional:!0});_rerenderSubscription=Ct.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),ow(this._dateAdapter,t,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof br?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new le;yearSelected=new le;activeDateChange=new le;_matCalendarBody;_years;_todayYear;_selectedYear;constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(cn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let t=this._dateAdapter.getYear(this._activeDate)-_l(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let i=0,o=[];i<rr;i++)o.push(t+i),o.length==wg&&(this._years.push(o.map(a=>this._createCellForYear(a))),o=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let t=e.value,i=this._dateAdapter.createDate(t,0,1),o=this._getDateFromYear(t);this.yearSelected.emit(i),this.selectedChange.emit(o)}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromYear(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-wg);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,wg);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-_l(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,rr-_l(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-rr*10:-rr);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?rr*10:rr);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return _l(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let t=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,t,1));return this._dateAdapter.createDate(e,t,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForYear(e){let t=this._dateAdapter.createDate(e,0,1),i=this._dateAdapter.getYearName(t),o=this.dateClass?this.dateClass(t,"multi-year"):void 0;return new yl(e,i,i,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let t=this._dateAdapter.createDate(e,0,1);for(let i=t;this._dateAdapter.getYear(i)==e;i=this._dateAdapter.addCalendarDays(i,1))if(this.dateFilter(i))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof br){let t=e.start||e.end;t&&(this._selectedYear=this._dateAdapter.getYear(t))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-multi-year-view"]],viewQuery:function(t,i){if(t&1&&it(Ms,5),t&2){let o;je(o=We())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(t,i){t&1&&(F(0,"table",0)(1,"thead",1)(2,"tr"),Z(3,"th",2),N()(),F(4,"tbody",3),ae("selectedValueChange",function(a){return i._yearSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),N()()),t&2&&(H(4),Ce("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[Ms],encapsulation:2,changeDetection:0})}return r})();function ow(r,n,e,t,i){let o=r.getYear(n),a=r.getYear(e),s=aw(r,t,i);return Math.floor((o-s)/rr)===Math.floor((a-s)/rr)}function _l(r,n,e,t){let i=r.getYear(n);return BR(i-aw(r,e,t),rr)}function aw(r,n,e){let t=0;return e?t=r.getYear(e)-rr+1:n&&(t=r.getYear(n)),t}function BR(r,n){return(r%n+n)%n}var Jx=(()=>{class r{_changeDetectorRef=w(St);_dateFormats=w(Jo,{optional:!0});_dateAdapter=w(kn,{optional:!0});_dir=w(bn,{optional:!0});_rerenderSubscription=Ct.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._dateAdapter.getYear(t)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof br?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new le;monthSelected=new le;activeDateChange=new le;_matCalendarBody;_months;_yearLabel;_todayMonth;_selectedMonth;constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(cn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let t=e.value,i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(i);let o=this._getDateFromMonth(t);this.selectedChange.emit(o)}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromMonth(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(t=>t.map(i=>this._createCellForMonth(i,e[i]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),i=this._dateAdapter.getNumDaysInMonth(t);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForMonth(e,t){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(i,this._dateFormats.display.monthYearA11yLabel),a=this.dateClass?this.dateClass(i,"year"):void 0;return new yl(e,t.toLocaleUpperCase(),o,this._shouldEnableMonth(e),a)}_shouldEnableMonth(e){let t=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(t,e)||this._isYearAndMonthBeforeMinDate(t,e))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(t,e,1);for(let o=i;this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,t){if(this.maxDate){let i=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>i||e===i&&t>o}return!1}_isYearAndMonthBeforeMinDate(e,t){if(this.minDate){let i=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<i||e===i&&t<o}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof br?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-year-view"]],viewQuery:function(t,i){if(t&1&&it(Ms,5),t&2){let o;je(o=We())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(t,i){t&1&&(F(0,"table",0)(1,"thead",1)(2,"tr"),Z(3,"th",2),N()(),F(4,"tbody",3),ae("selectedValueChange",function(a){return i._monthSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),N()()),t&2&&(H(4),Ce("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[Ms],encapsulation:2,changeDetection:0})}return r})(),sw=(()=>{class r{_intl=w(Rs);calendar=w(Cg);_dateAdapter=w(kn,{optional:!0});_dateFormats=w(Jo,{optional:!0});constructor(){w(Nt).load(Fr);let e=w(St);this.calendar.stateChanges.subscribe(()=>e.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-rr)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:rr)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,t){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t):ow(this._dateAdapter,e,t,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let t=this._dateAdapter.getYear(this.calendar.activeDate)-_l(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),i=t+rr-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1)),a=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1));return[o,a]}_periodButtonLabelId=w(Tt).getId("mat-calendar-period-label-");static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:DR,decls:17,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(t,i){t&1&&(Ot(),F(0,"div",0)(1,"div",1)(2,"span",2),J(3),N(),F(4,"button",3),ae("click",function(){return i.currentPeriodClicked()}),F(5,"span",4),J(6),N(),Sr(),F(7,"svg",5),Z(8,"polygon",6),N()(),Bo(),Z(9,"div",7),tt(10),F(11,"button",8),ae("click",function(){return i.previousClicked()}),Sr(),F(12,"svg",9),Z(13,"path",10),N()(),Bo(),F(14,"button",11),ae("click",function(){return i.nextClicked()}),Sr(),F(15,"svg",9),Z(16,"path",12),N()()()()),t&2&&(H(2),Ce("id",i._periodButtonLabelId),H(),Wt(i.periodButtonDescription),H(),$e("aria-label",i.periodButtonLabel)("aria-describedby",i._periodButtonLabelId),H(2),Wt(i.periodButtonText),H(),Te("mat-calendar-invert",i.calendar.currentView!=="month"),H(4),Ce("disabled",!i.previousEnabled()),$e("aria-label",i.prevButtonLabel),H(3),Ce("disabled",!i.nextEnabled()),$e("aria-label",i.nextButtonLabel))},dependencies:[nr,Nm],encapsulation:2,changeDetection:0})}return r})(),Cg=(()=>{class r{_dateAdapter=w(kn,{optional:!0});_dateFormats=w(Jo,{optional:!0});_changeDetectorRef=w(St);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get selected(){return this._selected}set selected(e){e instanceof br?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new le;yearSelected=new le;monthSelected=new le;viewChanged=new le(!0);_userSelection=new le;_userDragDrop=new le;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let t=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),t&&this.viewChanged.emit(t)}_currentView;_activeDrag=null;stateChanges=new he;constructor(){this._intlChanges=w(Rs).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new ki(this.headerComponent||sw),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let t=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,i=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=t||i||e.dateFilter;if(o&&!o.firstChange){let a=this._getCurrentViewComponent();a&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),a._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let t=e.value;(this.selected instanceof br||t&&!this._dateAdapter.sameDate(t,this.selected))&&this.selectedChange.emit(t),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,t){this.activeDate=e,this.currentView=t}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-calendar"]],viewQuery:function(t,i){if(t&1&&(it(Qx,5),it(Jx,5),it(Zx,5)),t&2){let o;je(o=We())&&(i.monthView=o.first),je(o=We())&&(i.yearView=o.first),je(o=We())&&(i.multiYearView=o.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[Et([rw]),jt],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(t,i){if(t&1&&(Pe(0,ER,0,0,"ng-template",0),F(1,"div",1),Pe(2,SR,1,11,"mat-month-view",2)(3,AR,1,6,"mat-year-view",3)(4,kR,1,6,"mat-multi-year-view",3),N()),t&2){let o;Ce("cdkPortalOutlet",i._calendarHeaderPortal),H(2),ze((o=i.currentView)==="month"?2:o==="year"?3:o==="multi-year"?4:-1)}},dependencies:[ho,r0,Qx,Jx,Zx],styles:['.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})(),ew={transformPanel:eo("transformPanel",[Mr("void => enter-dropdown",Xr("120ms cubic-bezier(0, 0, 0.2, 1)",ap([Pn({opacity:0,transform:"scale(1, 0.8)"}),Pn({opacity:1,transform:"scale(1, 1)"})]))),Mr("void => enter-dialog",Xr("150ms cubic-bezier(0, 0, 0.2, 1)",ap([Pn({opacity:0,transform:"scale(0.7)"}),Pn({transform:"none",opacity:1})]))),Mr("* => void",Xr("100ms linear",Pn({opacity:0})))]),fadeInCalendar:eo("fadeInCalendar",[Ho("void",Pn({opacity:0})),Ho("enter",Pn({opacity:1})),Mr("void => *",Xr("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},cw=new ne("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let r=w(_n);return()=>r.scrollStrategies.reposition()}});function VR(r){return()=>r.scrollStrategies.reposition()}var zR={provide:cw,deps:[_n],useFactory:VR},lw=(()=>{class r{_elementRef=w(Ve);_changeDetectorRef=w(St);_globalModel=w(xl);_dateAdapter=w(kn);_rangeSelectionStrategy=w(iw,{optional:!0});_subscriptions=new Ct;_model;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationState;_animationDone=new he;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){w(Nt).load(Fr);let e=w(Rs);this._closeButtonText=e.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let t=this._model.selection,i=e.value,o=t instanceof br;if(o&&this._rangeSelectionStrategy){let a=this._rangeSelectionStrategy.selectionFinished(i,t,e.event);this._model.updateSelection(a,this)}else i&&(o||!this._dateAdapter.sameDate(i,t))&&this._model.add(i);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating=e.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,t){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,t&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-datepicker-content"]],viewQuery:function(t,i){if(t&1&&it(Cg,5),t&2){let o;je(o=We())&&(i._calendar=o.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(t,i){t&1&&e_("@transformPanel.start",function(a){return i._handleAnimationEvent(a)})("@transformPanel.done",function(a){return i._handleAnimationEvent(a)}),t&2&&(Jb("@transformPanel",i._animationState),Zn(i.color?"mat-"+i.color:""),Te("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(t,i){if(t&1&&(F(0,"div",0)(1,"mat-calendar",1),ae("yearSelected",function(a){return i.datepicker._selectYear(a)})("monthSelected",function(a){return i.datepicker._selectMonth(a)})("viewChanged",function(a){return i.datepicker._viewChanged(a)})("_userSelection",function(a){return i._handleUserSelection(a)})("_userDragDrop",function(a){return i._handleUserDragDrop(a)}),N(),Pe(2,IR,0,0,"ng-template",2),F(3,"button",3),ae("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),J(4),N()()),t&2){let o;Te("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),$e("aria-modal",!0)("aria-labelledby",(o=i._dialogLabelId)!==null&&o!==void 0?o:void 0),H(),Zn(i.datepicker.panelClass),Ce("id",i.datepicker.id)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName),H(),Ce("cdkPortalOutlet",i._actionsPortal),H(),Te("cdk-visually-hidden",!i._closeButtonFocused),Ce("color",i.color||"primary"),H(),Wt(i._closeButtonText)}},dependencies:[e0,Cg,ho,nr],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[ew.transformPanel,ew.fadeInCalendar]},changeDetection:0})}return r})(),tw=(()=>{class r{_overlay=w(_n);_viewContainerRef=w(vi);_dateAdapter=w(kn,{optional:!0});_dir=w(bn,{optional:!0});_model=w(xl);_scrollStrategy=w(cw);_inputStateChanges=Ct.EMPTY;_document=w(He);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new le;monthSelected=new le;viewChanged=new le(!0);dateClass;openedStream=new le;closedStream=new le;get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=zy(e)}_panelClass;get opened(){return this._opened}set opened(e){e?this.open():this.close()}_opened=!1;id=w(Tt).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef;_componentRef;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal;datepickerInput;stateChanges=new he;_injector=w(yt);_changeDetectorRef=w(St);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let t=e.xPosition||e.yPosition;if(t&&!t.firstChange&&this._overlayRef){let i=this._overlayRef.getConfig().positionStrategy;i instanceof ll&&(this._setConnectedPositions(i),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=ao(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:i,location:o}=this._componentRef;i._startExitAnimation(),i._animationDone.pipe(on(1)).subscribe(()=>{let a=this._document.activeElement;e&&(!a||a===this._document.activeElement||o.nativeElement.contains(a))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(t):t()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,t=new ki(lw,this._viewContainerRef),i=this._overlayRef=this._overlay.create(new fo({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(i).subscribe(o=>{o&&o.preventDefault(),this.close()}),i.keydownEvents().subscribe(o=>{let a=o.keyCode;(a===38||a===40||a===37||a===39||a===33||a===34)&&o.preventDefault()}),this._componentRef=i.attach(t),this._forwardContentValues(this._componentRef.instance),e||Wn(()=>{i.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let t=this.xPosition==="end"?"end":"start",i=t==="start"?"end":"start",o=this.yPosition==="above"?"bottom":"top",a=o==="top"?"bottom":"top";return e.withPositions([{originX:t,originY:a,overlayX:t,overlayY:o},{originX:t,originY:o,overlayX:t,overlayY:a},{originX:i,originY:a,overlayX:i,overlayY:o},{originX:i,originY:o,overlayX:i,overlayY:a}])}_getCloseStream(e){let t=["ctrlKey","shiftKey","metaKey"];return jn(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(mt(i=>i.keyCode===27&&!Zt(i)||this.datepickerInput&&Zt(i,"altKey")&&i.keyCode===38&&t.every(o=>!Zt(i,o)))))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",Fe],disabled:[2,"disabled","disabled",Fe],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",Fe],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",Fe]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[lt,jt]})}return r})(),lh=(()=>{class r extends tw{static \u0275fac=(()=>{let e;return function(i){return(e||(e=$t(r)))(i||r)}})();static \u0275cmp=se({type:r,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[Et([rw,{provide:tw,useExisting:r}]),Dt],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0})}return r})(),Is=class{target;targetElement;value;constructor(n,e){this.target=n,this.targetElement=e,this.value=this.target.value}},UR=(()=>{class r{_elementRef=w(Ve);_dateAdapter=w(kn,{optional:!0});_dateFormats=w(Jo,{optional:!0});_isInitialized;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let t=e,i=this._elementRef.nativeElement;this._disabled!==t&&(this._disabled=t,this.stateChanges.next(void 0)),t&&this._isInitialized&&i.blur&&i.blur()}_disabled;dateChange=new le;dateInput=new le;stateChanges=new he;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=Ct.EMPTY;_localeSubscription=Ct.EMPTY;_pendingValue;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{matDatepickerFilter:!0}};_minValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMinDate();return!i||!t||this._dateAdapter.compareDate(i,t)<=0?null:{matDatepickerMin:{min:i,actual:t}}};_maxValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMaxDate();return!i||!t||this._dateAdapter.compareDate(i,t)>=0?null:{matDatepickerMax:{max:i,actual:t}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(t=>{if(this._shouldHandleChangeEvent(t)){let i=this._getValueFromModel(t.selection);this._lastValueValid=this._isValidValue(i),this._cvaOnChange(i),this._onTouched(),this._formatValue(i),this.dateInput.emit(new Is(this,this._elementRef.nativeElement)),this.dateChange.emit(new Is(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){jR(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let t=["ctrlKey","shiftKey","metaKey"];Zt(e,"altKey")&&e.keyCode===40&&t.every(o=>!Zt(e,o))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let t=this._lastValueValid,i=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(i),i=this._dateAdapter.getValidDateOrNull(i);let o=!this._dateAdapter.sameDate(i,this.value);!i||o?this._cvaOnChange(i):(e&&!this.value&&this._cvaOnChange(i),t!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(i),this.dateInput.emit(new Is(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Is(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let t=this._getDateFilter();return!t||t(e)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,inputs:{value:"value",disabled:[2,"disabled","disabled",Fe]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[lt,jt]})}return r})();function jR(r,n){let e=Object.keys(r);for(let t of e){let{previousValue:i,currentValue:o}=r[t];if(n.isDateInstance(i)&&n.isDateInstance(o)){if(!n.sameDate(i,o))return!0}else return!0}return!1}var WR={provide:na,useExisting:lr(()=>Ts),multi:!0},HR={provide:bl,useExisting:lr(()=>Ts),multi:!0},Ts=(()=>{class r extends UR{_formField=w(ia,{optional:!0});_closedSubscription=Ct.EMPTY;_openedSubscription=Ct.EMPTY;set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}_datepicker;_ariaOwns=Kr(null);get min(){return this._min}set min(e){let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._min)||(this._min=t,this._validatorOnChange())}_min;get max(){return this._max}set max(e){let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._max)||(this._max=t,this._validatorOnChange())}_max;get dateFilter(){return this._dateFilter}set dateFilter(e){let t=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==t&&this._validatorOnChange()}_dateFilter;_validator;constructor(){super(),this._validator=Ht.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(t,i){t&1&&ae("input",function(a){return i._onInput(a.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(a){return i._onKeydown(a)}),t&2&&(Ar("disabled",i.disabled),$e("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",i._ariaOwns())("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[Et([WR,HR,{provide:fg,useExisting:r}]),Dt]})}return r})(),GR=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=we({type:r,selectors:[["","matDatepickerToggleIcon",""]]})}return r})(),wl=(()=>{class r{_intl=w(Rs);_changeDetectorRef=w(St);_stateChanges=Ct.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple;_customIcon;_button;constructor(){let e=w(new mi("tabindex"),{optional:!0}),t=Number(e);this.tabIndex=t||t===0?t:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:fe(),t=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:fe(),i=this.datepicker?jn(this.datepicker.openedStream,this.datepicker.closedStream):fe();this._stateChanges.unsubscribe(),this._stateChanges=jn(this._intl.changes,e,t,i).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,i,o){if(t&1&&An(o,GR,5),t&2){let a;je(a=We())&&(i._customIcon=a.first)}},viewQuery:function(t,i){if(t&1&&it(MR,5),t&2){let o;je(o=We())&&(i._button=o.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(t,i){t&1&&ae("click",function(a){return i._open(a)}),t&2&&($e("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),Te("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&i.datepicker.color==="accent")("mat-warn",i.datepicker&&i.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Fe],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[lt,jt],ngContentSelectors:TR,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,i){t&1&&(Ot(RR),F(0,"button",1,0),Pe(2,FR,2,0,":svg:svg",2),tt(3),N()),t&2&&(Ce("disabled",i.disabled)("disableRipple",i.disableRipple),$e("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),H(2),ze(i._customIcon?-1:2))},dependencies:[Nm],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,changeDetection:0})}return r})();var dh=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[Rs,zR],imports:[In,mo,os,Ii,Ze,lw,wl,sw,ds]})}return r})();var uh=class r{constructor(n,e,t,i){this.fb=n;this.router=e;this.userInfoService=t;this.alertService=i}profileForm=null;imageSrc=null;userInfo=localStorage.getItem("info")?JSON.parse(localStorage.getItem("info")):null;update=!1;ngOnInit(){this.init()}init(){this.profileForm=this.fb.group({name:["",Ht.required],phone:["",Ht.required],address:["",Ht.required],gender:["",Ht.required],dob:[Date,Ht.required],img:[""]}),this.userInfo&&(this.update=!0,this.profileForm.patchValue(this.userInfo),this.imageSrc=this.userInfo.img)}onFileChange(n){let e=n.target;if(e.files&&e.files[0]){let t=e.files[0],i=new FileReader;i.onload=o=>{this.imageSrc=o.target.result,this.profileForm.patchValue({img:o.target.result})},i.onerror=o=>{console.error("FileReader error:",o),this.alertService.showErrorAlert("Faild Upload profile",!1)},i.readAsDataURL(t)}}onSubmit(){return Rt(this,null,function*(){if(Ai(this.profileForm.valid),this.profileForm!=null){if(!this.profileForm.valid){Ai("From are invalid");return}yield this.profileForm.patchValue({dob:L0(this.profileForm.value.dob)}),Ai(this.profileForm.value),this.update?this.alertService.showErrorAlert("Update info are disibaled"):yield Nn(this.userInfoService.postInfo(this.profileForm.value).pipe(nt(n=>{n&&(localStorage.setItem("info",JSON.stringify(this.profileForm.value)),this.router.navigate(["/"]))},n=>{Ai(n),this.alertService.showErrorAlert(n.error.message)})))}})}logout(){this.router.navigate(["/logout"])}static \u0275fac=function(e){return new(e||r)(Ie(ws),Ie(Qt),Ie(ks),Ie(gr))};static \u0275cmp=se({type:r,selectors:[["app-profile"]],features:[Et([Eu()])],decls:43,vars:4,consts:[["picker",""],[1,"root","bg-img"],[1,"w-full","h-full","p-4","bg-[#ffffff54]"],[1,"w-full","h-full",3,"submit","formGroup"],[1,"grid","h-[25%]","rounded-lg","p-6","relative"],[1,"absolute","flex","justify-center","items-center","w-full","h-full"],["id","imagePreview","alt","Profile Image",1,"circular-image","object-cover","object-center","h-full","z-10",3,"src"],[1,"absolute","inset-0","flex","items-center","justify-center"],["type","file","id","fileInput","formControlName","img",1,"absolute","inset-0","opacity-0","cursor-pointer","file-input",3,"change"],[1,"block","py-2","px-4","rounded-lg","text-sm","font-semibold","text-white","bg-blue-600","hover:bg-blue-700","dark:bg-blue-500","dark:hover:bg-blue-400","z-20"],[1,"w-full","h-[75%]","flex","justify-center","items-center","flex-col"],[1,"example-full-width"],["matInput","","formControlName","name","placeholder","John Doe"],["matInput","","type","number","formControlName","phone","placeholder","9067340000"],["matInput","","type","text","formControlName","address","placeholder","John Doe, 456 Elm Street, Suite 3, Los Angeles, CA 90001, USA"],["aria-label","Select an option","formControlName","gender"],["value","M"],["value","F"],["value","O"],["matInput","","formControlName","dob",3,"matDatepicker"],["matIconSuffix","",3,"for"],["mat-button","","type","submit"],["mat-button","","target","_blank",3,"click"]],template:function(e,t){if(e&1){let i=vt();F(0,"div",1)(1,"div",2)(2,"form",3),ae("submit",function(){return Ae(i),ke(t.onSubmit())}),F(3,"div",4)(4,"div",5),Z(5,"img",6),F(6,"label",7)(7,"input",8),ae("change",function(a){return Ae(i),ke(t.onFileChange(a))}),N(),F(8,"span",9),J(9," Choose "),N()()()(),F(10,"div",10)(11,"mat-form-field",11)(12,"mat-label"),J(13,"Your Name"),N(),Z(14,"input",12),N(),F(15,"mat-form-field",11)(16,"mat-label"),J(17,"Mobile No"),N(),Z(18,"input",13),N(),F(19,"mat-form-field",11)(20,"mat-label"),J(21,"Address"),N(),Z(22,"input",14),N(),F(23,"mat-radio-group",15)(24,"mat-radio-button",16),J(25,"Male"),N(),F(26,"mat-radio-button",17),J(27,"Female"),N(),F(28,"mat-radio-button",18),J(29,"Other"),N()(),F(30,"mat-form-field")(31,"mat-label"),J(32,"DOB"),N(),Z(33,"input",19),F(34,"mat-hint"),J(35,"MM/DD/YYYY"),N(),Z(36,"mat-datepicker-toggle",20)(37,"mat-datepicker",null,0),N(),F(39,"button",21),J(40,"Submit"),N(),F(41,"button",22),ae("click",function(){return Ae(i),ke(t.logout())}),J(42,"It\u2019s not my account"),N()()()()()}if(e&2){let i=bi(38);H(2),Ce("formGroup",t.profileForm),H(3),Ce("src",t.imageSrc||"/img/user-286-512.png",Dd),H(28),Ce("matDatepicker",i),H(3),Ce("for",i)}},dependencies:[Cs,xs,_o,lg,bs,_s,vr,ra,As,Ss,Es,yo,th,nh,Ju,$x,mg,sh,dh,lh,Ts,wl,In,nr],styles:[".bg-img[_ngcontent-%COMP%]{background-image:url(/img/bg/33391314-617d-4c74-8a6c-918976b69cc1.jpg);background-position:center;background-size:cover;background-repeat:no-repeat;background-attachment:fixed}mat-form-field[_ngcontent-%COMP%]{width:95%}.grid[_ngcontent-%COMP%]{position:relative}#imagePreview[_ngcontent-%COMP%]{position:relative;z-index:1}.file-input[_ngcontent-%COMP%]{z-index:2}"]})};var Zw=function(r,n){return(Zw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(r,n)};function Vr(r,n){function e(){this.constructor=r}Zw(r,n),r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function me(r,n,e,t){return new(e||(e=Promise))(function(i,o){function a(l){try{c(t.next(l))}catch(d){o(d)}}function s(l){try{c(t.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):new e(function(d){d(l.value)}).then(a,s)}c((t=t.apply(r,n||[])).next())})}function ge(r,n){var e,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,t&&(i=2&d[0]?t.return:d[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,d[1])).done)return i;switch(t=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,t=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=n.call(r,a)}catch(u){d=[6,u],t=0}finally{e=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,l])}}}var qR=function(){function r(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return r.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},r.prototype.registerFlag=function(n,e,t){if(this.flagRegistry[n]={evaluationFn:e,setHook:t},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},r.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},r.prototype.getNumber=function(n){return this.get(n)},r.prototype.getBool=function(n){return this.get(n)},r.prototype.getFlags=function(){return this.flags},Object.defineProperty(r.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),r.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},r.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},r.prototype.setFlags=function(n){this.flags=Object.assign({},n)},r.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},r.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,t,i=(e=this.global.location.search,t={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return YR(t,a[0],a[1]),a.join("=")}),t);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],c=a[1];n.urlFlags[s]=function(l,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+l+".")}(s,c)})}},r}();function YR(r,n,e){r[decodeURIComponent(n)]=decodeURIComponent(e||"")}function U(){return Jw}var Jw=null,kh=new Map,Gg=new Map;function e1(r,n){var e=n1(r,n);return kh.get(e)}function $R(r){return Gg.get(r)}function mw(r){for(var n=kh.entries(),e=[];;){var t=n.next(),i=t.done,o=t.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===r&&e.push(s)}return e}function t1(r){var n=r.kernelName,e=r.backendName,t=n1(n,e);if(kh.has(t))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");kh.set(t,r)}function KR(r){var n=r.kernelName;Gg.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),Gg.set(n,r)}function n1(r,n){return n+"_"+r}function gw(r){for(var n=r.length,e=0,t=0;n>0;)t=Math.random()*n|0,e=r[--n],r[n]=r[t],r[t]=e}function Ih(r,n,e){return Math.max(r,Math.min(n,e))}function hv(r){return r%2==0?r:r+1}function r1(r){for(var n=0,e=0;e<r.length;e++)n+=r[e];return n}function A(r,n){if(!r)throw new Error(typeof n=="string"?n:n())}function ut(r,n,e){e===void 0&&(e=""),A(Jt(r,n),function(){return e+" Shapes "+r+" and "+n+" must match"})}function va(r){A(r!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Li(r,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(r)||wn(r)&&!e)for(var t=0;t<r.length;++t)Li(r[t],n,e);else n.push(r);return n}function ve(r){if(r.length===0)return 1;for(var n=r[0],e=1;e<r.length;e++)n*=r[e];return n}function Jt(r,n){if(r===n)return!0;if(r==null||n==null||r.length!==n.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}function Vt(r){return r%1==0}function i1(r){if(Math.tanh!=null)return Math.tanh(r);if(r===1/0)return 1;if(r===-1/0)return-1;var n=Math.exp(2*r);return(n-1)/(n+1)}function Mh(r){var n=Math.ceil(Math.sqrt(r));return[n,Math.ceil(r/n)]}function ua(r,n){return n<=r.length?r:r+" ".repeat(n-r.length)}function qg(r,n,e){return n===void 0&&(n=function(t){return 0}),new Promise(function(t,i){var o=0,a=function(){if(r())t();else{o++;var s=n(o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function o1(r,n){for(var e=1,t=-1,i=0;i<r.length;++i)if(r[i]>=0)e*=r[i];else if(r[i]===-1){if(t!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+t+" and dim "+i);t=i}else if(r[i]<0)throw Error("Shapes can not be < 0. Found "+r[i]+" at dim "+i);if(t===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+r);return r}if(e===0)throw Error("Cannot infer the missing size in ["+r+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=r.slice();return o[t]=n/e,o}function tn(r,n){var e=n.length;return A((r=r==null?n.map(function(t,i){return i}):[].concat(r)).every(function(t){return t>=-e&&t<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+r}),A(r.every(function(t){return Vt(t)}),function(){return"All values in axis param must be integers but got axis "+r}),r.map(function(t){return t<0?e+t:t})}function wo(r,n){for(var e=[],t=[],i=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||i?null:tn(n,r).sort(),a=0,s=0;s<r.length;++s){if(o!=null){if(o[a]===s&&r[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+r[s]+"' is not 1");(o[a]==null||o[a]>s)&&r[s]===1&&(e.push(r[s]),t.push(s)),o[a]<=s&&a++}r[s]!==1&&(e.push(r[s]),t.push(s))}return{newShape:e,keptDims:t}}function Gs(r,n){var e=null;if(r==null||r==="float32")e=new Float32Array(n);else if(r==="int32")e=new Int32Array(n);else{if(r!=="bool")throw new Error("Unknown data type "+r);e=new Uint8Array(n)}return e}function Tl(r,n){var e=null;if(r==null||r==="float32")e=new Float32Array(n);else if(r==="int32")e=new Int32Array(n);else if(r==="bool")e=new Uint8Array(n);else{if(r!=="string")throw new Error("Unknown data type "+r);e=new Array(n)}return e}function a1(r,n){for(var e=0;e<r.length;e++){var t=r[e];if(isNaN(t)||!isFinite(t))throw Error("A tensor of type "+n+" being uploaded contains "+t+".")}}function s1(r){return r==="bool"||r==="complex64"||r==="float32"||r==="int32"||r==="string"}function c1(r,n){return n!=="complex64"&&(n!=="float32"||r==="complex64")&&(n!=="int32"||r==="float32"||r==="complex64")&&(n!=="bool"||r!=="bool")}function wn(r){return r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array}function fv(r){if(r==="float32"||r==="int32")return 4;if(r==="complex64")return 8;if(r==="bool")return 1;throw new Error("Unknown dtype "+r)}function l1(r){if(r==null)return 0;var n=0;return r.forEach(function(e){return n+=e.length}),n}function Co(r){return typeof r=="string"||r instanceof String}function d1(r){return typeof r=="boolean"}function u1(r){return typeof r=="number"}function Ys(r){return Array.isArray(r)?Ys(r[0]):r instanceof Float32Array?"float32":r instanceof Int32Array||r instanceof Uint8Array?"int32":u1(r)?"float32":Co(r)?"string":d1(r)?"bool":"float32"}function Rh(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Th(r,n){for(var e=n;e<r;++e)if(r%e==0)return e;return r}function Lr(r){var n=r.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=r[n-1];for(var t=n-3;t>=0;--t)e[t]=e[t+1]*r[t+1];return e}function pv(r,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(r)&&(r=Li(r)),e&&a1(r,n),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(r,n))return r;if(n==null||n==="float32"||n==="complex64")return new Float32Array(r);if(n==="int32")return new Int32Array(r);if(n==="bool"){for(var t=new Uint8Array(r.length),i=0;i<t.length;++i)Math.round(r[i])!==0&&(t[i]=1);return t}throw new Error("Unknown data type "+n)}function Yg(r,n){if(r.length===0)return n[0];var e=r.reduce(function(t,i){return t*i});if(e===0)return[];if(e!==n.length)throw new Error("["+r+"] does not match the input size.");return function t(i,o,a){var s=new Array;if(o.length===1)for(var c=o[0],l=0;l<c;l++)s[l]=a[i+l];else{c=o[0];var d=o.slice(1),u=d.reduce(function(h,f){return h*f});for(l=0;l<c;l++)s[l]=t(i+l*u,d,a)}return s}(0,r,n)}function mv(r,n){for(var e=$s(r,n),t=0;t<e.length;t++)e[t]=1;return e}function $s(r,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(r);if(n==="int32")return new Int32Array(r);if(n==="bool")return new Uint8Array(r);throw new Error("Unknown data type "+n)}function Pr(){return U().platform.now()}function gv(r){r.forEach(function(n){A(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+r+"]."})})}function h1(r,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",U().platform.encode(r,n)}function Fl(r,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",U().platform.decode(r,n)}function $g(r,n,e){if(n===0)return 0;if(n===1)return r[0];for(var t=r[r.length-1],i=0;i<r.length-1;++i)t+=e[i]*r[i];return t}function f1(r,n,e){if(n===0)return[];if(n===1)return[r];for(var t=new Array(n),i=0;i<t.length-1;++i)t[i]=Math.floor(r/e[i]),r-=t[i]*e[i];return t[t.length-1]=r,t}var I5=Object.freeze({shuffle:gw,clamp:Ih,nearestLargerEven:hv,sum:r1,randUniform:function(r,n){var e=Math.random();return n*e+(1-e)*r},distSquared:function(r,n){for(var e=0,t=0;t<r.length;t++){var i=Number(r[t])-Number(n[t]);e+=i*i}return e},assert:A,assertShapesMatch:ut,assertNonNull:va,flatten:Li,sizeFromShape:ve,isScalarShape:function(r){return r.length===0},arraysEqual:Jt,isInt:Vt,tanh:i1,sizeToSquarishShape:Mh,createShuffledIndices:function(r){for(var n=new Uint32Array(r),e=0;e<r;++e)n[e]=e;return gw(n),n},rightPad:ua,repeatedTry:qg,inferFromImplicitShape:o1,parseAxisParam:tn,squeezeShape:wo,getTypedArrayFromDType:Gs,getArrayFromDType:Tl,checkConversionForErrors:a1,isValidDtype:s1,hasEncodingLoss:c1,isTypedArray:wn,bytesPerElement:fv,bytesFromStringArray:l1,isString:Co,isBoolean:d1,isNumber:u1,inferDtype:Ys,isFunction:Rh,nearestDivisor:Th,computeStrides:Lr,toTypedArray:pv,toNestedArray:Yg,makeOnesTypedArray:mv,makeZerosTypedArray:$s,now:Pr,assertNonNegativeIntegerDimensions:gv,fetch:function(r,n){return U().platform.fetch(r,n)},encodeString:h1,decodeString:Fl,locToIndex:$g,indexToLoc:f1}),XR=function(){function r(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new QR)}return r.prototype.profileKernel=function(n,e,t){var i,o=this,a=this.backendTimer.time(function(){i=t()});return i.forEach(function(s){s.data().then(function(c){(function(l,d,u){if(d!=="float32")return!1;for(var h=0;h<l.length;h++){var f=l[h];if(isNaN(f)||!isFinite(f))return console.warn("Found "+f+" in the result of '"+u+"'"),!0}})(c,s.dtype,n),a.then(function(l){var d="";l.getExtraProfileInfo!=null&&(d=l.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,c,l.kernelMs,e,d)})})}),i},r}(),QR=function(){function r(){}return r.prototype.logKernelProfile=function(n,e,t,i,o,a){var s=typeof i=="number"?ua(i+"ms",9):i.error,c=ua(n,25),l=e.rank,d=e.size,u=ua(e.shape.toString(),14),h="";for(var f in o){var p=o[f].shape||e.shape,m=p.length;h+=f+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+c+"	%c"+s+"	%c"+l+"D "+u+"	%c"+d+"	%c"+h+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},r}(),vw=20,Cl=3,Dg=7;function ZR(r,n,e,t){var i=Lr(n),o=function(l,d,u,h){var f=ve(d),p=h[h.length-1],m=new Array(p).fill(0),g=d.length,v=u==="complex64"?El(l):l;if(g>1)for(var _=0;_<f/p;_++)for(var y=_*p,b=0;b<p;b++)m[b]=Math.max(m[b],Dl(v[y+b],0,u).length);return m}(r,n,e,i),a=n.length,s=function l(d,u,h,f,p,m){m===void 0&&(m=!0);var g=h==="complex64"?2:1,v=u[0],_=u.length;if(_===0)return h==="complex64"?[Dl(El(d)[0],0,h)]:h==="bool"?[p1(d[0])]:[d[0].toString()];if(_===1){if(v>vw){var y=Cl*g,b=Array.from(d.slice(0,y)),x=Array.from(d.slice((v-Cl)*g,v*g));return h==="complex64"&&(b=El(b),x=El(x)),["["+b.map(function(z,G){return Dl(z,p[G],h)}).join(", ")+", ..., "+x.map(function(z,G){return Dl(z,p[v-Cl+G],h)}).join(", ")+"]"]}return["["+(h==="complex64"?El(d):Array.from(d)).map(function(z,G){return Dl(z,p[G],h)}).join(", ")+"]"]}var C=u.slice(1),k=f.slice(1),I=f[0]*g,S=[];if(v>vw){for(var D=0;D<Cl;D++){var R=(M=D*I)+I;S.push.apply(S,l(d.slice(M,R),C,h,k,p,!1))}for(S.push("..."),D=v-Cl;D<v;D++)R=(M=D*I)+I,S.push.apply(S,l(d.slice(M,R),C,h,k,p,D===v-1))}else for(D=0;D<v;D++){var M;R=(M=D*I)+I,S.push.apply(S,l(d.slice(M,R),C,h,k,p,D===v-1))}var B=_===2?",":"";for(S[0]="["+S[0]+B,D=1;D<S.length-1;D++)S[D]=" "+S[D]+B;var V=`,
`;for(D=2;D<_;D++)V+=`
`;return S[S.length-1]=" "+S[S.length-1]+"]"+(m?"":V),S}(r,n,e,i,o),c=["Tensor"];return t&&(c.push("  dtype: "+e),c.push("  rank: "+a),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(s.map(function(l){return"    "+l}).join(`
`)),c.join(`
`)}function Dl(r,n,e){return ua(Array.isArray(r)?parseFloat(r[0].toFixed(Dg))+" + "+parseFloat(r[1].toFixed(Dg))+"j":Co(r)?"'"+r+"'":e==="bool"?p1(r):parseFloat(r.toFixed(Dg)).toString(),n)}function p1(r){return r===0?"false":"true"}function El(r){for(var n=[],e=0;e<r.length;e+=2)n.push([r[e],r[e+1]]);return n}var Ol=function(){function r(n,e,t){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=ve(n),t!=null){var o=t.length;A(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=t||Tl(e,this.size),this.strides=Lr(n)}return r.prototype.set=function(n){for(var e=this,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];t.length===0&&(t=[0]),A(t.length===this.rank,function(){return"The number of provided coordinates ("+t.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(t);this.values[o]=n},r.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var t=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[t]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}t++}for(var c=n[n.length-1],l=0;l<n.length-1;++l)c+=this.strides[l]*n[l];return this.values[c]},r.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],t=0;t<n.length-1;++t)e+=this.strides[t]*n[t];return e},r.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),t=0;t<e.length-1;++t)e[t]=Math.floor(n/this.strides[t]),n-=e[t]*this.strides[t];return e[e.length-1]=n,e},Object.defineProperty(r.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),r.prototype.toTensor=function(){return ni().makeTensor(this.values,this.shape,this.dtype)},r}(),ni=null,L=null,m1=null,xt=function(){function r(n,e,t,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=ve(n),this.strides=Lr(n),this.dataId=t,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return r.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},r.prototype.asScalar=function(){return this.throwIfDisposed(),A(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},r.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},r.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},r.prototype.as3D=function(n,e,t){return this.throwIfDisposed(),this.reshape([n,e,t])},r.prototype.as4D=function(n,e,t,i){return this.throwIfDisposed(),this.reshape([n,e,t,i])},r.prototype.as5D=function(n,e,t,i,o){return this.throwIfDisposed(),this.reshape([n,e,t,i,o])},r.prototype.asType=function(n){return this.throwIfDisposed(),L.cast(this,n)},Object.defineProperty(r.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),r.prototype.buffer=function(){return me(this,void 0,void 0,function(){var n;return ge(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,L.buffer(this.shape,this.dtype,n)]}})})},r.prototype.bufferSync=function(){return L.buffer(this.shape,this.dtype,this.dataSync())},r.prototype.array=function(){return me(this,void 0,void 0,function(){var n;return ge(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,Yg(this.shape,n)]}})})},r.prototype.arraySync=function(){return Yg(this.shape,this.dataSync())},r.prototype.data=function(){return me(this,void 0,void 0,function(){var n,e;return ge(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),n=ni().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=t.sent();try{return[2,e.map(function(i){return Fl(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}t.label=2;case 2:return[2,n]}})})},r.prototype.dataSync=function(){this.throwIfDisposed();var n=ni().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return Fl(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},r.prototype.bytes=function(){return me(this,void 0,void 0,function(){var n;return ge(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,ni().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},r.prototype.dispose=function(){this.isDisposed||(ni().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(r.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),r.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},r.prototype.toFloat=function(){return this.asType("float32")},r.prototype.toInt=function(){return this.asType("int32")},r.prototype.toBool=function(){return this.asType("bool")},r.prototype.print=function(n){return n===void 0&&(n=!1),L.print(this,n)},r.prototype.reshape=function(n){return this.throwIfDisposed(),L.reshape(this,n)},r.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},r.prototype.expandDims=function(n){return n===void 0&&(n=0),L.expandDims(this,n)},r.prototype.cumsum=function(n,e,t){return n===void 0&&(n=0),e===void 0&&(e=!1),t===void 0&&(t=!1),L.cumsum(this,n,e,t)},r.prototype.squeeze=function(n){return this.throwIfDisposed(),L.squeeze(this,n)},r.prototype.clone=function(){return this.throwIfDisposed(),L.clone(this)},r.prototype.oneHot=function(n,e,t){return this.throwIfDisposed(),L.oneHot(this,n,e,t)},r.prototype.toString=function(n){return n===void 0&&(n=!1),ZR(this.dataSync(),this.shape,this.dtype,n)},r.prototype.tile=function(n){return this.throwIfDisposed(),L.tile(this,n)},r.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),L.gather(this,n,e)},r.prototype.matMul=function(n,e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),this.throwIfDisposed(),L.matMul(this,n,e,t)},r.prototype.dot=function(n){return this.throwIfDisposed(),L.dot(this,n)},r.prototype.norm=function(n,e,t){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),L.norm(this,n,e,t)},r.prototype.slice=function(n,e){return this.throwIfDisposed(),L.slice(this,n,e)},r.prototype.reverse=function(n){return this.throwIfDisposed(),L.reverse(this,n)},r.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof r&&(n=[n]),L.concat([this].concat(n),e)},r.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),L.split(this,n,e)},r.prototype.stack=function(n,e){return e===void 0&&(e=0),L.stack([this,n],e)},r.prototype.unstack=function(n){return n===void 0&&(n=0),L.unstack(this,n)},r.prototype.pad=function(n,e){return e===void 0&&(e=0),L.pad(this,n,e)},r.prototype.batchNormalization=function(n,e,t,i,o){return t===void 0&&(t=.001),m1("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,t)},r.prototype.batchNorm=function(n,e,t,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),L.batchNorm(this,n,e,t,i,o)},r.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.all(this,n,e)},r.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.any(this,n,e)},r.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.logSumExp(this,n,e)},r.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.sum(this,n,e)},r.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.prod(this,n,e)},r.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.mean(this,n,e)},r.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.min(this,n,e)},r.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),L.max(this,n,e)},r.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),L.argMin(this,n)},r.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),L.argMax(this,n)},r.prototype.cast=function(n){return this.throwIfDisposed(),L.cast(this,n)},r.prototype.add=function(n){return this.throwIfDisposed(),L.add(this,n)},r.prototype.addStrict=function(n){return this.throwIfDisposed(),L.addStrict(this,n)},r.prototype.atan2=function(n){return this.throwIfDisposed(),L.atan2(this,n)},r.prototype.sub=function(n){return this.throwIfDisposed(),L.sub(this,n)},r.prototype.subStrict=function(n){return this.throwIfDisposed(),L.subStrict(this,n)},r.prototype.pow=function(n){return this.throwIfDisposed(),L.pow(this,n)},r.prototype.powStrict=function(n){return this.throwIfDisposed(),L.powStrict(this,n)},r.prototype.mul=function(n){return this.throwIfDisposed(),L.mul(this,n)},r.prototype.mulStrict=function(n){return this.throwIfDisposed(),L.mulStrict(this,n)},r.prototype.div=function(n){return this.throwIfDisposed(),L.div(this,n)},r.prototype.divNoNan=function(n){return this.throwIfDisposed(),L.divNoNan(this,n)},r.prototype.floorDiv=function(n){return this.throwIfDisposed(),L.floorDiv(this,n)},r.prototype.divStrict=function(n){return this.throwIfDisposed(),L.divStrict(this,n)},r.prototype.minimum=function(n){return this.throwIfDisposed(),L.minimum(this,n)},r.prototype.minimumStrict=function(n){return this.throwIfDisposed(),L.minimumStrict(this,n)},r.prototype.maximum=function(n){return this.throwIfDisposed(),L.maximum(this,n)},r.prototype.maximumStrict=function(n){return this.throwIfDisposed(),L.maximumStrict(this,n)},r.prototype.mod=function(n){return this.throwIfDisposed(),L.mod(this,n)},r.prototype.modStrict=function(n){return this.throwIfDisposed(),L.modStrict(this,n)},r.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),L.squaredDifferenceStrict(this,n)},r.prototype.transpose=function(n){return this.throwIfDisposed(),L.transpose(this,n)},r.prototype.notEqual=function(n){return this.throwIfDisposed(),L.notEqual(this,n)},r.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),L.notEqualStrict(this,n)},r.prototype.less=function(n){return this.throwIfDisposed(),L.less(this,n)},r.prototype.lessStrict=function(n){return this.throwIfDisposed(),L.lessStrict(this,n)},r.prototype.equal=function(n){return this.throwIfDisposed(),L.equal(this,n)},r.prototype.equalStrict=function(n){return this.throwIfDisposed(),L.equalStrict(this,n)},r.prototype.lessEqual=function(n){return this.throwIfDisposed(),L.lessEqual(this,n)},r.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),L.lessEqualStrict(this,n)},r.prototype.greater=function(n){return this.throwIfDisposed(),L.greater(this,n)},r.prototype.greaterStrict=function(n){return this.throwIfDisposed(),L.greaterStrict(this,n)},r.prototype.greaterEqual=function(n){return this.throwIfDisposed(),L.greaterEqual(this,n)},r.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),L.greaterEqualStrict(this,n)},r.prototype.logicalAnd=function(n){return this.throwIfDisposed(),L.logicalAnd(this,n)},r.prototype.logicalOr=function(n){return this.throwIfDisposed(),L.logicalOr(this,n)},r.prototype.logicalNot=function(){return this.throwIfDisposed(),L.logicalNot(this)},r.prototype.logicalXor=function(n){return this.throwIfDisposed(),L.logicalXor(this,n)},r.prototype.where=function(n,e){return this.throwIfDisposed(),L.where(n,this,e)},r.prototype.neg=function(){return this.throwIfDisposed(),L.neg(this)},r.prototype.ceil=function(){return this.throwIfDisposed(),L.ceil(this)},r.prototype.floor=function(){return this.throwIfDisposed(),L.floor(this)},r.prototype.sign=function(){return this.throwIfDisposed(),L.sign(this)},r.prototype.isNaN=function(){return this.throwIfDisposed(),L.isNaN(this)},r.prototype.isInf=function(){return this.throwIfDisposed(),L.isInf(this)},r.prototype.isFinite=function(){return this.throwIfDisposed(),L.isFinite(this)},r.prototype.exp=function(){return this.throwIfDisposed(),L.exp(this)},r.prototype.expm1=function(){return this.throwIfDisposed(),L.expm1(this)},r.prototype.log=function(){return this.throwIfDisposed(),L.log(this)},r.prototype.log1p=function(){return this.throwIfDisposed(),L.log1p(this)},r.prototype.sqrt=function(){return this.throwIfDisposed(),L.sqrt(this)},r.prototype.rsqrt=function(){return this.throwIfDisposed(),L.rsqrt(this)},r.prototype.square=function(){return this.throwIfDisposed(),L.square(this)},r.prototype.reciprocal=function(){return this.throwIfDisposed(),L.reciprocal(this)},r.prototype.abs=function(){return this.throwIfDisposed(),L.abs(this)},r.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),L.clipByValue(this,n,e)},r.prototype.relu=function(){return this.throwIfDisposed(),L.relu(this)},r.prototype.relu6=function(){return this.throwIfDisposed(),L.relu6(this)},r.prototype.elu=function(){return this.throwIfDisposed(),L.elu(this)},r.prototype.selu=function(){return this.throwIfDisposed(),L.selu(this)},r.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),L.leakyRelu(this,n)},r.prototype.prelu=function(n){return this.throwIfDisposed(),L.prelu(this,n)},r.prototype.sigmoid=function(){return this.throwIfDisposed(),L.sigmoid(this)},r.prototype.logSigmoid=function(){return this.throwIfDisposed(),L.logSigmoid(this)},r.prototype.softplus=function(){return this.throwIfDisposed(),L.softplus(this)},r.prototype.zerosLike=function(){return this.throwIfDisposed(),L.zerosLike(this)},r.prototype.onesLike=function(){return this.throwIfDisposed(),L.onesLike(this)},r.prototype.sin=function(){return this.throwIfDisposed(),L.sin(this)},r.prototype.cos=function(){return this.throwIfDisposed(),L.cos(this)},r.prototype.tan=function(){return this.throwIfDisposed(),L.tan(this)},r.prototype.asin=function(){return this.throwIfDisposed(),L.asin(this)},r.prototype.acos=function(){return this.throwIfDisposed(),L.acos(this)},r.prototype.atan=function(){return this.throwIfDisposed(),L.atan(this)},r.prototype.sinh=function(){return this.throwIfDisposed(),L.sinh(this)},r.prototype.cosh=function(){return this.throwIfDisposed(),L.cosh(this)},r.prototype.tanh=function(){return this.throwIfDisposed(),L.tanh(this)},r.prototype.asinh=function(){return this.throwIfDisposed(),L.asinh(this)},r.prototype.acosh=function(){return this.throwIfDisposed(),L.acosh(this)},r.prototype.atanh=function(){return this.throwIfDisposed(),L.atanh(this)},r.prototype.erf=function(){return this.throwIfDisposed(),L.erf(this)},r.prototype.round=function(){return this.throwIfDisposed(),L.round(this)},r.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),L.step(this,n)},r.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),L.softmax(this,n)},r.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),L.logSoftmax(this,n)},r.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),L.image.resizeBilinear(this,n,e)},r.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),L.image.resizeNearestNeighbor(this,n,e)},r.prototype.conv1d=function(n,e,t,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),L.conv1d(this,n,e,t,i,o,a)},r.prototype.conv2d=function(n,e,t,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),L.conv2d(this,n,e,t,i,o,a)},r.prototype.conv2dTranspose=function(n,e,t,i,o){return this.throwIfDisposed(),L.conv2dTranspose(this,n,e,t,i,o)},r.prototype.depthwiseConv2D=function(n,e,t,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),L.depthwiseConv2d(this,n,e,t,i,o,a)},r.prototype.separableConv2d=function(n,e,t,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),L.separableConv2d(this,n,e,t,i,o,a)},r.prototype.avgPool=function(n,e,t,i){return this.throwIfDisposed(),L.avgPool(this,n,e,t,i)},r.prototype.maxPool=function(n,e,t,i){return this.throwIfDisposed(),L.maxPool(this,n,e,t,i)},r.prototype.localResponseNormalization=function(n,e,t,i){return n===void 0&&(n=5),e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=.5),L.localResponseNormalization(this,n,e,t,i)},r.prototype.pool=function(n,e,t,i,o){return this.throwIfDisposed(),L.pool(this,n,e,t,i,o)},r.prototype.variable=function(n,e,t){return n===void 0&&(n=!0),this.throwIfDisposed(),ni().makeVariable(this,n,e,t)},r.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),L.unsortedSegmentSum(this,n,e)},r.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),L.batchToSpaceND(this,n,e)},r.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),L.spaceToBatchND(this,n,e)},r.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),L.topk(this,n,e)},r.prototype.stridedSlice=function(n,e,t,i,o,a,s,c){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=0),this.throwIfDisposed(),L.stridedSlice(this,n,e,t,i,o,a,s,c)},r.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),L.depthToSpace(this,n,e)},r.prototype.fft=function(){return this.throwIfDisposed(),L.spectral.fft(this)},r.prototype.ifft=function(){return this.throwIfDisposed(),L.spectral.ifft(this)},r.prototype.rfft=function(){return this.throwIfDisposed(),L.spectral.rfft(this)},r.prototype.irfft=function(){return this.throwIfDisposed(),L.spectral.irfft(this)},r}();Object.defineProperty(xt,Symbol.hasInstance,{value:function(r){return!!r&&r.dataId!=null&&r.shape!=null&&r.dtype!=null}});var bw,Kg,Xg,Qg,Zg,fa=function(r){function n(e,t,i,o){var a=r.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=t,a.name=i,a}return Vr(n,r),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Jt(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ni().disposeTensor(this),this.dataId=e.dataId,ni().incRef(this,null)},n.prototype.dispose=function(){ni().disposeVariable(this),this.isDisposedInternal=!0},n}(xt);Object.defineProperty(fa,Symbol.hasInstance,{value:function(r){return r instanceof xt&&r.assign!=null&&r.assign instanceof Function}}),function(r){r.R0="R0",r.R1="R1",r.R2="R2",r.R3="R3",r.R4="R4",r.R5="R5",r.R6="R6"}(bw||(bw={})),function(r){r.float32="float32",r.int32="int32",r.bool="int32",r.complex64="complex64"}(Kg||(Kg={})),function(r){r.float32="float32",r.int32="int32",r.bool="bool",r.complex64="complex64"}(Xg||(Xg={})),function(r){r.float32="float32",r.int32="float32",r.bool="float32",r.complex64="complex64"}(Qg||(Qg={})),function(r){r.float32="complex64",r.int32="complex64",r.bool="complex64",r.complex64="complex64"}(Zg||(Zg={}));var JR={float32:Qg,int32:Kg,bool:Xg,complex64:Zg};function dn(r,n){if(r==="string"||n==="string"){if(r==="string"&&n==="string")return"string";throw new Error("Can not upcast "+r+" with "+n)}return JR[r][n]}function Eg(r){return dn(r,"int32")}function Pt(r,n){if(r.dtype===n.dtype)return[r,n];var e=dn(r.dtype,n.dtype);return[r.cast(e),n.cast(e)]}function g1(r,n){A(r.dtype===n.dtype,function(){return"The dtypes of the first("+r.dtype+") and second("+n.dtype+") input must match"})}function vv(r){var n=[];return function e(t,i,o){if(t!=null){if(t instanceof xt)return void i.push(t);if(a=t,!(!Array.isArray(a)&&typeof a!="object")){var a,s=t;for(var c in s){var l=s[c];o.has(l)||(o.add(l),e(l,i,o))}}}}(r,n,new Set),n}var Sg,M5=Object.freeze({makeTypesMatch:Pt,assertTypesMatch:g1,isTensorInList:function(r,n){return n.some(function(e){return e.id===r.id})},getTensorsInContainer:vv}),_w=function(){function r(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return r.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},r}(),eT=function(){function r(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _w}return r.prototype.ready=function(){return me(this,void 0,void 0,function(){var n,e,t;return ge(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?(t=n[e],[4,this.initializeBackend(t).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(t)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(r.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),r.prototype.backendNames=function(){return Object.keys(this.registryFactory)},r.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},r.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},r.prototype.registerBackend=function(n,e,t){return t===void 0&&(t=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:t},!0)},r.prototype.setBackend=function(n){return me(this,void 0,void 0,function(){var e,t,i;return ge(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),t=e.success,e.asyncInit?[4,t]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=t,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new XR(this.backendInstance),[2,!0]}})})},r.prototype.setupRegisteredKernels=function(){var n=this;mw(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},r.prototype.disposeRegisteredKernels=function(n){var e=this;mw(n).forEach(function(t){t.disposeFunc!=null&&t.disposeFunc(e.registry[n])})},r.prototype.initializeBackend=function(n){var e=this,t=this.registryFactory[n];if(t==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=t.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},r.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},r.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,t){return n.registryFactory[t].priority-n.registryFactory[e].priority})},r.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var t=n[e],i=this.initializeBackend(t),o=i.success,a=i.asyncInit;if(a||o)return{name:t,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},r.prototype.moveData=function(n,e){var t=this.state.tensorInfo.get(e),i=t.backend,o=this.readSync(e);i.disposeData(e),t.backend=n,n.move(e,o,t.shape,t.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},r.prototype.tidy=function(n,e){var t,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(t)},function(){return(t=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),t})},r.prototype.scopedRun=function(n,e,t){n();try{var i=t();return e(),i}catch(o){throw e(),o}},r.prototype.nextTensorId=function(){return r.nextTensorId++},r.prototype.nextVariableId=function(){return r.nextVariableId++},r.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),t={x:n};return this.addTapeNode(this.state.activeScope.name,t,[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},r.prototype.runKernel=function(n,e,t,i,o){return this.runKernelFunc(null,e,null,n,t,i,o)},r.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},r.prototype.checkKernelForMemLeak=function(n,e,t){var i=this.backend.numDataIds(),o=0;t.forEach(function(c){o+=c.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-e-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},r.prototype.runKernelFunc=function(n,e,t,i,o,a,s){var c,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var d=[],u=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,f=function(_){u&&(d=_.map(function(y){return l.keep(l.clone(y))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,v=e1(i,this.backendName);return h=v!=null?function(){var _=l.backend.numDataIds();g=v.kernelFunc({inputs:e,attrs:o,backend:l.backend});var y=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,_,y);var b=y.map(function(C){var k=C.dataId,I=C.shape,S=C.dtype;return l.makeTensorFromDataId(k,I,S)}),x=b.filter(function(C,k){return s[k]});return f((a||[]).slice().concat(x)),b}:function(){var _=l.backend.numDataIds();g=l.tidy(function(){return n(l.backend,f)});var y=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,_,y),y},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){c=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,e,function(){return h()}):h()}),u&&this.addTapeNode(i,e,c,t,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(_){return e[_].shape}),outputShapes:c.map(function(_){return _.shape})}),Array.isArray(g)?c:c[0]},r.prototype.makeTensor=function(n,e,t,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");t=t||"float32",i=i||this.backend;var o=n;t==="string"&&Co(n[0])&&(o=n.map(function(d){return h1(d)}));var a=i.write(o,e,t),s=new xt(e,t,a,this.nextTensorId());if(this.incRef(s,i),t==="string"){var c=this.state.tensorInfo.get(a),l=l1(o);this.state.numBytes+=l-c.bytes,c.bytes=l}return s},r.prototype.makeTensorFromDataId=function(n,e,t,i){var o=new xt(e,t=t||"float32",n,this.nextTensorId());return this.incRef(o,i),o},r.prototype.makeVariable=function(n,e,t,i){e===void 0&&(e=!0),t=t||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var o=new fa(n,e,t,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},r.prototype.incRef=function(n,e){var t=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,t===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*fv(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof fa||this.track(n)},r.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},r.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},r.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},r.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},r.prototype.profile=function(n){return me(this,void 0,void 0,function(){var e,t;return ge(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,t=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-t,[2,this.state.activeProfile]})})},r.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},r.prototype.addTapeNode=function(n,e,t,i,o){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:t,saved:o},c=$R(n);c!=null&&(i=c.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(d,u){if(d==null){var h=t[u],f=$s(h.size,h.dtype);return a.makeTensor(f,h.shape,h.dtype)}return d}),i(l.length>1?l:l[0],o)}),this.state.activeTape.push(s)},r.prototype.keep=function(n){return n.kept=!0,n},r.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},r.prototype.endTape=function(){this.state.gradientDepth--},r.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},r.prototype.endScope=function(n){for(var e=this,t=vv(n),i=new Set(t.map(function(c){return c.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(function(c){c.kept||c.scopeId!==s.id||e.track(c)})},r.prototype.gradients=function(n,e,t,i){var o=this;if(i===void 0&&(i=!1),A(e.length>0,function(){return"gradients() received an empty list of xs."}),t!=null&&t.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+t.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});A(a instanceof xt,function(){return"The result y returned by f() must be a tensor."});var s=function(c,l,d){for(var u={},h={},f=0;f<l.length;f++)u[l[f].id]=!0;for(f=0;f<c.length;f++){var p=(C=c[f]).inputs;for(var m in p){for(var g=p[m],v=!1,_=0;_<l.length;_++)if(u[g.id]){C.outputs.forEach(function(D){return u[D.id]=!0}),v=!0,h[C.id]=!0;break}if(v)break}}var y={};y[d.id]=!0;var b={};for(f=c.length-1;f>=0;f--)for(p=(C=c[f]).inputs,_=0;_<C.outputs.length;_++)if(y[C.outputs[_].id]){for(var m in p)y[p[m].id]=!0,b[C.id]=!0;break}var x=[];for(f=0;f<c.length;f++){var C;if(h[(C=c[f]).id]&&b[C.id]){var k={};for(var m in C.inputs){var I=C.inputs[m];u[I.id]&&(k[m]=I)}var S=Object.assign({},C);S.inputs=k,S.outputs=C.outputs,x.push(S)}}return x}(this.state.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,l,d={};d[a.id]=t??(c=a.shape,l=mv(ve(c),"float32"),O.makeTensor(l,c,"float32")),function(h,f,p){for(var m=function(v){var _=f[v],y=[];if(_.outputs.forEach(function(k){var I=h[k.id];I!=null?y.push(I):y.push(null)}),_.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+_.kernelName+".");var b=_.gradient(y),x=function(k){if(!(k in b))throw new Error("Cannot backprop through input "+k+". Available gradients found: "+Object.keys(b)+".");var I=p(function(){return b[k]()});if(I.dtype!=="float32")throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input "+k+" must have 'float32' dtype, but has '"+I.dtype+"'");var S=_.inputs[k];if(!Jt(I.shape,S.shape))throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input '"+k+"' has shape '"+I.shape+"', which does not match the shape of the input '"+S.shape+"'");if(h[S.id]==null)h[S.id]=I;else{var D=h[S.id];h[S.id]=D.add(I),D.dispose()}};for(var C in _.inputs)x(C)},g=f.length-1;g>=0;g--)m(g)}(d,s,function(h){return o.tidy(h)});var u=e.map(function(h){return d[h.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(h){for(var f=0,p=h.saved;f<p.length;f++)p[f].dispose()}),o.state.activeTape=null),{value:a,grads:u}})},r.prototype.customGrad=function(n){var e=this;return A(Rh(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];A(i.every(function(s){return s instanceof xt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,c){a[c]=s}),e.runKernelFunc(function(s,c){return A((t=n.apply(void 0,i.concat([c]))).value instanceof xt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),A(Rh(t.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),t.value},a,function(s,c){var l=t.gradFunc(s,c),d=Array.isArray(l)?l:[l];A(d.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),A(d.every(function(h){return h instanceof xt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var u={};return d.forEach(function(h,f){u[f]=function(){return h}}),u})}},r.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},r.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},r.prototype.time=function(n){return me(this,void 0,void 0,function(){var e,t;return ge(this,function(i){switch(i.label){case 0:return e=Pr(),[4,this.backend.time(n)];case 1:return(t=i.sent()).wallMs=Pr()-e,[2,t]}})})},r.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(r.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),r.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _w,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},r.nextTensorId=0,r.nextVariableId=0,r}(),O=function(){var r=function(){if(Sg==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}Sg=e}return Sg}();if(r._tfengine==null){var n=new qR(r);r._tfengine=new eT(n)}return function(e){Jw=e}(r._tfengine.ENV),ni=function(){return r._tfengine},r._tfengine}();function v1(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Fi=U();Fi.registerFlag("DEBUG",function(){return!1},function(r){r&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Fi.registerFlag("IS_BROWSER",function(){return v1()}),Fi.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Fi.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Fi.registerFlag("PROD",function(){return!1}),Fi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Fi.getBool("DEBUG")}),Fi.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Fi.registerFlag("IS_TEST",function(){return!1});var Nl,or,ir,sa={},Ag={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function b1(r,n){sa[r]=n}function ai(r){r in sa||(sa[r]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete sa[e]},!1),e===1?t.getContext("webgl",Ag)||t.getContext("experimental-webgl",Ag):t.getContext("webgl2",Ag)}(r));var n=sa[r];return n.isContextLost()?(delete sa[r],ai(r)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),sa[r])}function Hh(r,n){return[n,r]}function Ml(r){var n=ve(r);return Mh(Math.ceil(n/4))}function jl(r,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(r/2))]}function bv(r,n){var e,t,i,o,a,s,c,l,d,u=r;return U().getNumber("WEBGL_VERSION")===2?(e=u.R32F,t=u.R16F,i=u.RGBA16F,o=u.RGBA32F,a=u.RED,s=4,c=1,l=u.HALF_FLOAT,d=u.FLOAT):(e=r.RGBA,t=r.RGBA,i=r.RGBA,o=u.RGBA,a=r.RGBA,s=4,c=4,l=n!=null?n.HALF_FLOAT_OES:null,d=r.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:t,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:r.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function ue(r,n,e){var t=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+y1(i,o))}(r),t}(function(r){r[r.DENSE=0]="DENSE",r[r.SHARED_BATCH=1]="SHARED_BATCH"})(Nl||(Nl={})),function(r){r[r.RENDER=0]="RENDER",r[r.UPLOAD=1]="UPLOAD",r[r.PIXELS=2]="PIXELS",r[r.DOWNLOAD=3]="DOWNLOAD"}(or||(or={})),function(r){r[r.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",r[r.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",r[r.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",r[r.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",r[r.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ir||(ir={}));var tT=596e-10,nT=65504;function _1(r){return!!(U().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||r===0||tT<Math.abs(r)&&Math.abs(r)<nT)}function y1(r,n){switch(n){case r.NO_ERROR:return"NO_ERROR";case r.INVALID_ENUM:return"INVALID_ENUM";case r.INVALID_VALUE:return"INVALID_VALUE";case r.INVALID_OPERATION:return"INVALID_OPERATION";case r.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case r.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case r.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Al(r,n,e){return Bi(r,n,function(){return r.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function x1(r,n,e){var t=Bi(r,n,function(){return r.createShader(r.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ue(r,n,function(){return r.shaderSource(t,e)}),ue(r,n,function(){return r.compileShader(t)}),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw console.log(r.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function w1(r,n,e){var t=Bi(r,n,function(){return r.createShader(r.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ue(r,n,function(){return r.shaderSource(t,e)}),ue(r,n,function(){return r.compileShader(t)}),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw function(i,o){var a=rT.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],c=i.split(`
`),l=c.length.toString().length+2,d=c.map(function(g,v){return ua((v+1).toString(),l)+g}),u=0,h=0;h<d.length;h++)u=Math.max(d[h].length,u);var f=d.slice(0,s-1),p=d.slice(s-1,s),m=d.slice(s);console.log(f.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+ua(p[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(e,r.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}var xh,wh,rT=/ERROR: [0-9]+:([0-9]+):/g;function C1(r,n){return Bi(r,n,function(){return r.createProgram()},"Unable to create WebGLProgram.")}function D1(r,n,e){if(ue(r,n,function(){return r.linkProgram(e)}),r.getProgramParameter(e,r.LINK_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Ch(r,n,e){if(ue(r,n,function(){return r.validateProgram(e)}),r.getProgramParameter(e,r.VALIDATE_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function E1(r,n,e){var t=Bi(r,n,function(){return r.createBuffer()},"Unable to create WebGLBuffer");return ue(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,t)}),ue(r,n,function(){return r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)}),t}function S1(r,n,e){var t=Bi(r,n,function(){return r.createBuffer()},"Unable to create WebGLBuffer");return ue(r,n,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t)}),ue(r,n,function(){return r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW)}),t}function A1(r,n){return Bi(r,n,function(){return r.createTexture()},"Unable to create WebGLTexture.")}function k1(r,n){var e=U().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||n<=0){var t="["+r+"x"+n+"]";throw new Error("Requested texture size "+t+" is invalid.")}if(r>e||n>e)throw t="["+r+"x"+n+"]",new Error("Requested texture size "+t+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function I1(r,n){return Bi(r,n,function(){return r.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Jg(r,n,e,t,i,o,a,s){var c=r.getAttribLocation(e,t);return c!==-1&&(ue(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,i)}),ue(r,n,function(){return r.vertexAttribPointer(c,o,r.FLOAT,!1,a,s)}),ue(r,n,function(){return r.enableVertexAttribArray(c)}),!0)}function M1(r,n,e,t){N1(r,t),ue(r,n,function(){return r.activeTexture(r.TEXTURE0+t)}),ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)})}function R1(r,n,e,t){return Bi(r,n,function(){return r.getUniformLocation(e,t)},'uniform "'+t+'" not present in program.')}function T1(r,n,e){return r.getUniformLocation(n,e)}function F1(r,n,e,t,i,o){ue(r,n,function(){return M1(r,n,t,o)}),ue(r,n,function(){return r.uniform1i(i,o)})}function Dh(r,n,e,t){ue(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,t)}),ue(r,n,function(){return r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0)})}function ev(r,n,e){ue(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,e)}),ue(r,n,function(){return r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0)})}function kl(r){var n=r.checkFramebufferStatus(r.FRAMEBUFFER);if(n!==r.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+O1(r,n))}function O1(r,n){switch(n){case r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case r.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Bi(r,n,e,t){var i=ue(r,n,function(){return e()});if(i==null)throw new Error(t);return i}function N1(r,n){var e=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,t=n+r.TEXTURE0;if(t<r.TEXTURE0||t>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function Pl(r,n){return n===void 0&&(n=2),ve(r.slice(0,r.length-n))}function Ll(r){if(r.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[r.length>1?r[r.length-2]:1,r[r.length-1]]}function Eh(r){var n=[1,1,1];return r.length===0||r.length===1&&r[0]===1||(n=[Pl(r)].concat(Ll(r))),n}function P1(r,n){var e;n===void 0&&(n=!1);var t=U().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(t*=2,(r=r.map(function(l,d){return d>=r.length-2?hv(r[d]):r[d]})).length===1&&(r=[2,r[0]])),r.length!==2){var i=wo(r);r=i.newShape}var o=ve(r);if(r.length<=1&&o<=t)return[1,o];if(r.length===2&&r[0]<=t&&r[1]<=t)return r;if(r.length===3&&r[0]*r[1]<=t&&r[2]<=t)return[r[0]*r[1],r[2]];if(r.length===3&&r[0]<=t&&r[1]*r[2]<=t)return[r[0],r[1]*r[2]];if(r.length===4&&r[0]*r[1]*r[2]<=t&&r[3]<=t)return[r[0]*r[1]*r[2],r[3]];if(r.length===4&&r[0]<=t&&r[1]*r[2]*r[3]<=t)return[r[0],r[1]*r[2]*r[3]];if(n){var a=Pl(r),s=2,c=2;return r.length&&(s=(e=Ll(r))[0],c=e[1]),Mh(o=a*(s/2)*(c/2)).map(function(l){return 2*l})}return Mh(o)}function hh(r){return r%2==0}function Il(r,n){if(Jt(r=r.slice(-2),n=n.slice(-2))||!r.length||!n.length||r[0]===0||r[1]===0||n[0]===0||n[1]===0)return!0;if(r.length!==n.length){var e=r.slice(-1)[0],t=n.slice(-1)[0];if(e===t||hh(e)&&hh(t)&&(r[0]===1||n[0]===1))return!0}return r[1]===n[1]&&hh(r[0])&&hh(n[0])}function L1(r){if(xh==null){var n=ai(r);xh=n.getParameter(n.MAX_TEXTURE_SIZE)}return xh}function B1(r){if(wh==null){var n=ai(r);wh=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,wh)}function V1(r){if(r===0)return 0;var n=ai(r);return ar(n,"EXT_disjoint_timer_query_webgl2")&&r===2?2:ar(n,"EXT_disjoint_timer_query")?1:0}function ar(r,n){return r.getExtension(n)!=null}function tv(r){try{if(ai(r)!=null)return!0}catch{return!1}return!1}function z1(r){if(r===0)return!1;var n=ai(r);if(r===1){if(!ar(n,"OES_texture_float"))return!1}else if(!ar(n,"EXT_color_buffer_float"))return!1;return nv(n)}function U1(r){if(r===0)return!1;var n=ai(r);if(r!==1){if(ar(n,"EXT_color_buffer_float"))return nv(n);if(ar(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(t,i){var o=bv(t,i),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);var c=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(a),t.deleteFramebuffer(s),c}(n,e)}return!1}return!!ar(n,"OES_texture_float")&&!!ar(n,"WEBGL_color_buffer_float")&&nv(n)}function nv(r){var n=bv(r),e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var t=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,t),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);var i=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(e),r.deleteFramebuffer(t),i}function j1(r){return r===2&&ai(r).fenceSync!=null}var iT=Object.freeze({callAndCheck:ue,canBeRepresented:_1,getWebGLErrorMessage:y1,getExtensionOrThrow:Al,createVertexShader:x1,createFragmentShader:w1,createProgram:C1,linkProgram:D1,validateProgram:Ch,createStaticVertexBuffer:E1,createStaticIndexBuffer:S1,getNumChannels:function(){return U().getNumber("WEBGL_VERSION")===2?1:4},createTexture:A1,validateTextureSize:k1,createFramebuffer:I1,bindVertexBufferToProgramAttribute:Jg,bindTextureUnit:M1,unbindTextureUnit:function(r,n,e){N1(r,e),ue(r,n,function(){return r.activeTexture(r.TEXTURE0+e)}),ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:R1,getProgramUniformLocation:T1,bindTextureToProgramUniformSampler:F1,bindCanvasToFramebuffer:function(r,n){ue(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),ue(r,n,function(){return r.viewport(0,0,r.canvas.width,r.canvas.height)}),ue(r,n,function(){return r.scissor(0,0,r.canvas.width,r.canvas.height)})},bindColorTextureToFramebuffer:Dh,unbindColorTextureFromFramebuffer:ev,validateFramebuffer:kl,getFramebufferErrorMessage:O1,getBatchDim:Pl,getRowsCols:Ll,getShapeAs3D:Eh,getTextureShapeFromLogicalShape:P1,isReshapeFree:Il,getWebGLMaxTextureSize:L1,resetMaxTextureSize:function(){xh=null},resetMaxTexturesInShader:function(){wh=null},getMaxTexturesInShader:B1,getWebGLDisjointQueryTimerVersion:V1,hasExtension:ar,isWebGLVersionEnabled:tv,isCapableOfRenderingToFloatTexture:z1,isDownloadFloatTextureEnabled:U1,isWebGLFenceEnabled:j1}),Ge=U();function W1(r){U().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(r+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function $(r,n){return O.tidy(r,n)}function Yn(r){vv(r).forEach(function(n){return n.dispose()})}function oT(r){return O.keep(r)}function Fh(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];U().getBool("IS_TEST")||console.warn.apply(console,r)}function oi(r,n){var e=r;if(wn(r))return n==="string"?[]:[r.length];if(!Array.isArray(r))return[];for(var t=[];Array.isArray(e)||wn(e)&&n!=="string";)t.push(e.length),e=e[0];return Array.isArray(r)&&U().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!wn(o))return void A(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});A(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),A(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var c=a.slice(1),l=0;l<o.length;++l)i(o[l],c,s.concat(l))}(r,t,[]),t}function yw(r,n,e,t){if(r!=null&&(r!=="numeric"&&r!==n||r==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+t+"' must be "+r+" tensor, but got "+n+" tensor")}function E(r,n,e,t){if(t===void 0&&(t="numeric"),r instanceof xt)return yw(t,r.dtype,n,e),r;var i=Ys(r);if(i!=="string"&&["bool","int32","float32"].indexOf(t)>=0&&(i=t),yw(t,i,n,e),r==null||!wn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string"){var o=r==null?"null":r.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=oi(r,i);wn(r)||Array.isArray(r)||(r=[r]);var s=i!=="string"?pv(r,i,U().getBool("DEBUG")):Li(r,[],!0);return O.makeTensor(s,a,i)}function Oh(r,n,e,t){if(t===void 0&&(t="numeric"),!Array.isArray(r))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return r.map(function(i,o){return E(i,n+"["+o+"]",e)},t)}function _v(r,n){for(var e=0;e<r.length;++e)if(r[r.length-e-1]!==n-1-e)return!1;return!0}function H1(r,n,e){for(var t=r.length+n.length,i=[],o=0,a=0,s=0;s<t;s++)e.indexOf(s)===-1?i.push(r[o++]):i.push(n[a++]);return i}function xn(r,n){for(var e=[],t=r.length,i=0;i<t;i++)n.indexOf(i)===-1&&e.push(r[i]);return[e,n.map(function(o){return r[o]})]}function Ln(r,n){return H1(r,n.map(function(e){return 1}),n)}function Gn(r,n,e){A(_v(n,e),function(){return r+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function zr(r,n){if(_v(r,n))return null;for(var e=[],t=0;t<n;++t)r.indexOf(t)===-1&&e.push(t);return r.forEach(function(i){return e.push(i)}),e}function Gh(r){return r.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function Ur(r,n){for(var e=[],t=n-r;t<n;++t)e.push(t);return e}function G1(r,n){var e=r[0].length;r.forEach(function(i,o){A(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),A(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var t=r[0];r.forEach(function(i,o){for(var a=0;a<e;a++)A(a===n||i[a]===t[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+t+") along the non-concatenated axis "+o+"."})})}function pa(r,n){for(var e=r[0].slice(),t=1;t<r.length;t++)e[n]+=r[t][n];return e}function T(r){var n=Object.keys(r);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],t=r[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];O.startScope(e);try{var s=t.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),O.endScope(s),s}catch(c){throw O.endScope(null),c}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}Ge.registerFlag("HAS_WEBGL",function(){return Ge.getNumber("WEBGL_VERSION")>0}),Ge.registerFlag("WEBGL_VERSION",function(){return tv(2)?2:tv(1)?1:0}),Ge.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ge.get("WEBGL_VERSION")===2}),Ge.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ge.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ge.registerFlag("WEBGL_PACK",function(){return Ge.getBool("HAS_WEBGL")}),Ge.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_CLIP",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ge.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_PACK_REDUCE",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_CONV_IM2COL",function(){return Ge.getBool("WEBGL_PACK")}),Ge.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return L1(Ge.getNumber("WEBGL_VERSION"))}),Ge.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return B1(Ge.getNumber("WEBGL_VERSION"))}),Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var r=Ge.getNumber("WEBGL_VERSION");return r===0?0:V1(r)}),Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ge.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(r=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))));var r}),Ge.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return z1(Ge.getNumber("WEBGL_VERSION"))}),Ge.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ge.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ge.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ge.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return U1(Ge.getNumber("WEBGL_VERSION"))}),Ge.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return j1(Ge.getNumber("WEBGL_VERSION"))}),Ge.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ge.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),m1=W1;var yn=T({complex_:function(r,n){var e=E(r,"real","complex"),t=E(n,"imag","complex");return ut(e.shape,t.shape,"real and imag shapes, "+e.shape+" and "+t.shape+", must match in call to tf.complex()."),O.runKernelFunc(function(i){return i.complex(e,t)},{$real:e,$imag:t})}}),_r=T({real_:function(r){var n=E(r,"input","real");return O.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),ri=T({imag_:function(r){var n=E(r,"input","imag");return O.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function un(r,n,e){return So(r,n,oi(r,e),e)}function So(r,n,e,t){if(t==null&&(t=Ys(r)),t==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!wn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){gv(n);var i=ve(n),o=ve(e);A(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<e.length;++a){var s=e[a],c=a!==e.length-1||s!==ve(n.slice(a));A(e[a]===n[a]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return wn(r)||Array.isArray(r)||(r=[r]),n=n||e,r=t!=="string"?pv(r,t,U().getBool("DEBUG")):Li(r,[],!0),O.makeTensor(r,n,t)}function re(r,n){if((wn(r)&&n!=="string"||Array.isArray(r))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&wn(r)&&!(r instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return So(r,[],[],n)}function At(r,n){va(r);var e=oi(r,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return So(r,null,e,n)}function ii(r,n,e){if(va(r),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var t=oi(r,e);if(t.length!==2&&t.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return So(r,n,t,e)}function qh(r,n,e){if(va(r),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var t=oi(r,e);if(t.length!==3&&t.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return So(r,n,t,e)}function an(r,n,e){if(va(r),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var t=oi(r,e);if(t.length!==4&&t.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return So(r,n,t,e)}function aT(r,n,e){if(va(r),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var t=oi(r,e);if(t.length!==5&&t.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return So(r,n,t,e)}function sT(r,n,e){if(va(r),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var t=oi(r,e);if(t.length!==6&&t.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return So(r,n=n||t,t,e)}function cT(r,n,e,t){return n===void 0&&(n=!0),O.makeVariable(r,n,e,t)}function Ks(r,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Ks(r,"float32"),t=It(r,"float32");return yn(e,t)}var i=mv(ve(r),n);return O.makeTensor(i,r,n)}function It(r,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=It(r,"float32"),t=It(r,"float32");return yn(e,t)}var i=$s(ve(r),n);return O.makeTensor(i,r,n)}function cr(r,n,e){return O.runKernelFunc(function(t){return t.fill(r,n,e)},{})}function lT(r,n,e){if(e<=0)throw new Error("The number of values should be positive.");return O.runKernelFunc(function(t){return t.linspace(r,n,e)},{})}function Nh(r,n,e,t){if(e===void 0&&(e=1),t===void 0&&(t="float32"),e===0)throw new Error("Cannot have a step of zero");if(r===n||r<n&&e<0||n<r&&e>1)return It([0],t);var i=$s(Math.abs(Math.ceil((n-r)/e)),t);n<r&&e===1&&(e=-1),i[0]=r;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return At(i,t)}var q1=T({onesLike_:function(r){var n=E(r,"x","onesLike");if(n.dtype==="complex64"){var e=q1(_r(n)),t=at(ri(n));return yn(e,t)}return O.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,o){return{$x:function(){return at(i)}}})}}),at=T({zerosLike_:function(r){var n=E(r,"x","zerosLike");return O.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,t){return{$x:function(){return at(e)}}})}}),Ft=T({concat_:function(r,n){n===void 0&&(n=0),A(r.length>=1,function(){return"Pass at least one tensor to concat"});var e=Oh(r,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=tn(n,e[0].shape)[0];var t=pa(e.map(function(s){return s.shape}),n);if(ve(t)===0)return un([],t);if((e=e.filter(function(s){return s.size>0})).length===1)return e[0];var i=e.map(function(s){return s.shape});G1(i,n);var o=e,a={axis:n};return O.runKernelFunc(function(s){return s.concat(e,n)},o,function(s){var c=i.map(function(l){return l[n]});return yv(s,c,n).map(function(l){return function(){return l}})},"Concat",a)}}),dT=T({concat1d_:function(r){return Ft(r,0)}}),uT=T({concat2d_:function(r,n){return Ft(r,n)}}),hT=T({concat3d_:function(r,n){return Ft(r,n)}}),fT=T({concat4d_:function(r,n){return Ft(r,n)}}),yv=T({split_:function(r,n,e){e===void 0&&(e=0);var t,i=E(r,"x","split");return e=tn(e,i.shape)[0],typeof n=="number"?(A(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),t=new Array(n).fill(i.shape[e]/n)):(A(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),t=n),O.runKernelFunc(function(o){return o.split(i,t,e)},{$x:i},function(o){return{$x:function(){return Ft(o,e)}}})}});function ba(r,n){return r(n={exports:{}},n.exports),n.exports}var pT=ba(function(r){(function(n,e,t){function i(s){var c,l=this,d=(c=4022871197,function(u){u=u.toString();for(var h=0;h<u.length;h++){var f=.02519603282416938*(c+=u.charCodeAt(h));f-=c=f>>>0,c=(f*=c)>>>0,c+=4294967296*(f-=c)}return 23283064365386963e-26*(c>>>0)});l.next=function(){var u=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=0|u)},l.c=1,l.s0=d(" "),l.s1=d(" "),l.s2=d(" "),l.s0-=d(s),l.s0<0&&(l.s0+=1),l.s1-=d(s),l.s1<0&&(l.s1+=1),l.s2-=d(s),l.s2<0&&(l.s2+=1),d=null}function o(s,c){return c.c=s.c,c.s0=s.s0,c.s1=s.s1,c.s2=s.s2,c}function a(s,c){var l=new i(s),d=c&&c.state,u=l.next;return u.int32=function(){return 4294967296*l.next()|0},u.double=function(){return u()+11102230246251565e-32*(2097152*u()|0)},u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.alea=a})(0,r,!1)}),mT=ba(function(r){(function(n,e,t){function i(s){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var u=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^u^u>>>8},s===(0|s)?c.x=s:l+=s;for(var d=0;d<l.length+64;d++)c.x^=0|l.charCodeAt(d),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xor128=a})(0,r,!1)}),gT=ba(function(r){(function(n,e,t){function i(s){var c=this,l="";c.next=function(){var u=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^u^u<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(0|s)?c.x=s:l+=s;for(var d=0;d<l.length+64;d++)c.x^=0|l.charCodeAt(d),d==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xorwow=a})(0,r,!1)}),vT=ba(function(r){(function(n,e,t){function i(s){var c=this;c.next=function(){var l,d,u=c.x,h=c.i;return l=u[h],d=(l^=l>>>7)^l<<24,d^=(l=u[h+1&7])^l>>>10,d^=(l=u[h+3&7])^l>>>3,d^=(l=u[h+4&7])^l<<7,l=u[h+7&7],d^=(l^=l<<13)^l<<9,u[h]=d,c.i=h+1&7,d},function(l,d){var u,h=[];if(d===(0|d))h[0]=d;else for(d=""+d,u=0;u<d.length;++u)h[7&u]=h[7&u]<<15^d.charCodeAt(u)+h[u+1&7]<<13;for(;h.length<8;)h.push(0);for(u=0;u<8&&h[u]===0;++u);for(u==8?h[7]=-1:h[u],l.x=h,l.i=0,u=256;u>0;--u)l.next()}(c,s)}function o(s,c){return c.x=s.x.slice(),c.i=s.i,c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(d.x&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xorshift7=a})(0,r,!1)}),bT=ba(function(r){(function(n,e,t){function i(s){var c=this;c.next=function(){var l,d,u=c.w,h=c.X,f=c.i;return c.w=u=u+1640531527|0,d=h[f+34&127],l=h[f=f+1&127],d^=d<<13,l^=l<<17,d^=d>>>15,l^=l>>>12,d=h[f]=d^l,c.i=f,d+(u^u>>>16)|0},function(l,d){var u,h,f,p,m,g=[],v=128;for(d===(0|d)?(h=d,d=null):(d+="\0",h=0,v=Math.max(v,d.length)),f=0,p=-32;p<v;++p)d&&(h^=d.charCodeAt((p+32)%d.length)),p===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(m=m+1640531527|0,f=(u=g[127&p]^=h+m)==0?f+1:0);for(f>=128&&(g[127&(d&&d.length||0)]=-1),f=127,p=512;p>0;--p)h=g[f+34&127],u=g[f=f+1&127],h^=h<<13,u^=u<<17,h^=h>>>15,u^=u>>>12,g[f]=h^u;l.w=m,l.X=g,l.i=f}(c,s)}function o(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(d.X&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xor4096=a})(0,r,!1)}),_T=ba(function(r){(function(n,e,t){function i(s){var c=this,l="";c.next=function(){var u=c.b,h=c.c,f=c.d,p=c.a;return u=u<<25^u>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-u|0,c.b=u=u<<20^u>>>12^h,c.c=h=h-f|0,c.d=f<<16^h>>>16^p,c.a=p-u|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=0|s):l+=s;for(var d=0;d<l.length+20;d++)c.b^=0|l.charCodeAt(d),c.next()}function o(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.tychei=a})(0,r,!1)}),ca=ba(function(r){(function(n,e){var t,i=this,o=256,a=6,s="random",c=e.pow(o,a),l=e.pow(2,52),d=2*l,u=o-1;function h(v,_,y){var b=[],x=m(function I(S,D){var R,M=[],B=typeof S;if(D&&B=="object")for(R in S)try{M.push(I(S[R],D-1))}catch{}return M.length?M:B=="string"?S:S+"\0"}((_=_==1?{entropy:!0}:_||{}).entropy?[v,g(n)]:v??function(){try{var I;return t&&(I=t.randomBytes)?I=I(o):(I=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(I)),g(I)}catch{var S=i.navigator,D=S&&S.plugins;return[+new Date,i,D,i.screen,g(n)]}}(),3),b),C=new f(b),k=function(){for(var I=C.g(a),S=c,D=0;I<l;)I=(I+D)*o,S*=o,D=C.g(1);for(;I>=d;)I/=2,S/=2,D>>>=1;return(I+D)/S};return k.int32=function(){return 0|C.g(4)},k.quick=function(){return C.g(4)/4294967296},k.double=k,m(g(C.S),n),(_.pass||y||function(I,S,D,R){return R&&(R.S&&p(R,C),I.state=function(){return p(C,{})}),D?(e[s]=I,S):I})(k,x,"global"in _?_.global:this==e,_.state)}function f(v){var _,y=v.length,b=this,x=0,C=b.i=b.j=0,k=b.S=[];for(y||(v=[y++]);x<o;)k[x]=x++;for(x=0;x<o;x++)k[x]=k[C=u&C+v[x%y]+(_=k[x])],k[C]=_;(b.g=function(I){for(var S,D=0,R=b.i,M=b.j,B=b.S;I--;)S=B[R=u&R+1],D=D*o+B[u&(B[R]=B[M=u&M+S])+(B[M]=S)];return b.i=R,b.j=M,D})(o)}function p(v,_){return _.i=v.i,_.j=v.j,_.S=v.S.slice(),_}function m(v,_){for(var y,b=v+"",x=0;x<b.length;)_[u&x]=u&(y^=19*_[u&x])+b.charCodeAt(x++);return g(_)}function g(v){return String.fromCharCode.apply(0,v)}if(e["seed"+s]=h,m(e.random(),n),r.exports){r.exports=h;try{t=uw()}catch{}}})([],Math)});ca.alea=pT,ca.xor128=mT,ca.xorwow=gT,ca.xorshift7=vT,ca.xor4096=bT,ca.tychei=_T;var Yh=ca.alea,xv=function(){function r(n,e,t,i,o){this.mean=n,this.stdDev=e,this.dtype=t,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Yh(a.toString())}return r.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,t,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var c=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*c,t=this.mean+this.stdDev*a*c,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)},r.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},r.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},r}(),yT=function(){function r(n,e,t,i){this.alpha=n,this.beta=1/e,this.dtype=t;var o=i||Math.random();this.randu=Yh(o.toString()),this.randn=new xv(0,1,t,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return r.prototype.nextValue=function(){for(var n,e,t,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=1-.331*(n=i*i)*n,t=.5*n+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<t)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},r.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},r}(),xT=function(){function r(n,e,t,i){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=t,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=Yh(i)}return r.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},r.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},r}();function Ke(r,n,e){return n===void 0&&(n="float32"),n=n||"float32",gv(r),new Ol(r,n,e)}function wT(r,n){n===void 0&&(n=!1),console.log(r.toString(n))}var Y1=T({batchToSpaceND_:function(r,n,e){var t=E(r,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return A(t.rank>=1+n.length,function(){return"input rank is "+t.rank+" but should be > than blockShape.length "+n.length}),A(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),A(t.shape[0]%i==0,function(){return"input tensor batch is "+t.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),O.runKernelFunc(function(o){return o.batchToSpaceND(t,n,e)},{$x:t},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),CT=T({broadcastTo_:function(r,n){var e=E(r,"broadcastTo","x"),t=e.shape;if(n.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var i=e.shape.slice();i.length<n.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(n),a=n.length-1;a>=0;a--)if(e.shape[a]===n[a])o[a]=1;else if(e.shape[a]!==1)throw new Error("broadcastTo(): ["+t+"] cannot be broadcast to ["+n+"].");var s=o.map(function(c,l){return c>1?l:-1}).filter(function(c){return c>=0});return s.length===0?e.clone():O.runKernelFunc(function(c){return c.tile(e,o)},{input:e},function(c){return{input:function(){return c.sum(s,!0)}}})}}),DT=T({cast_:function(r,n){var e=E(r,"x","cast");if(!s1(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var t={dtype:n};return O.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",t)}}),ET=T({clone_:function(r){var n=E(r,"x","clone",null);return O.runKernelFunc(function(){return O.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),ST=T({cumsum_:function(r,n,e,t){n===void 0&&(n=0),e===void 0&&(e=!1),t===void 0&&(t=!1);var i=E(r,"x","cumsum"),o=zr([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=Ur(1,i.rank)[0],c=O.runKernelFunc(function(l){return l.cumsum(a,s,e,t)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(n,e,!t)}}});return o!=null&&(c=c.transpose(o)),c}}),AT=T({depthToSpace_:function(r,n,e){e===void 0&&(e="NHWC");var t=E(r,"x","depthToSpace"),i=e==="NHWC"?t.shape[1]:t.shape[2],o=e==="NHWC"?t.shape[2]:t.shape[3],a=e==="NHWC"?t.shape[3]:t.shape[1];return A(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+t.shape}),A(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+t.shape}),A(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+t.shape}),O.runKernelFunc(function(s){return s.depthToSpace(t,n,e)},{$x:t})}}),Mn=T({expandDims_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","expandDims",null);A(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var t=e.shape.slice();return n<0&&(A(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),t.splice(n,0,1),Vn(e,t)}}),$1=T({eye_:function(r,n,e,t){t===void 0&&(t="float32"),n==null&&(n=r);for(var i=Ke([r,n],t),o=r<=n?r:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(r,n);if(e==null)return s;if(e.length===1)return ha(Mn(s,0),[e[0],1,1]);if(e.length===2)return ha(Mn(Mn(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return ha(Mn(Mn(Mn(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),kT=T({multinomial_:function(r,n,e,t){t===void 0&&(t=!1);var i=E(r,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,c=O.runKernelFunc(function(l){return l.multinomial(s,t,n,e)},{logits2D:s});return a===1?c.as1D():c}}),rv=T({oneHot_:function(r,n,e,t){if(e===void 0&&(e=1),t===void 0&&(t=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=E(r,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),O.runKernelFunc(function(a){return a.oneHot(i,n,e,t)},{$indices:i},function(a){return{$indices:function(){return It(i.shape,"float32")}}}).reshape(o)}}),Vi=T({pad_:function(r,n,e){e===void 0&&(e=0);var t=E(r,"x","pad");if(t.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:n,constantValue:e};return O.runKernelFunc(function(o){return o.pad(t,n,e)},{x:t},function(o){var a=n.map(function(s){return s[0]});return{x:function(){return o.slice(a,t.shape)}}},"PadV2",i)}}),IT=T({pad1d_:function(r,n,e){return e===void 0&&(e=0),A(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Vi(r,[n],e)}}),MT=T({pad2d_:function(r,n,e){return e===void 0&&(e=0),A(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vi(r,n,e)}}),RT=T({pad3d_:function(r,n,e){return e===void 0&&(e=0),A(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vi(r,n,e)}}),TT=T({pad4d_:function(r,n,e){return e===void 0&&(e=0),A(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vi(r,n,e)}}),FT=T({rand_:function(r,n,e){var t=ve(r),i=null;if(e==null||e==="float32")i=new Float32Array(t);else if(e==="int32")i=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(t)}for(var o=0;o<t;o++)i[o]=n();return O.makeTensor(i,r,e)}}),OT=T({randomNormal_:function(r,n,e,t,i){if(n===void 0&&(n=0),e===void 0&&(e=1),t!=null&&t==="bool")throw new Error("Unsupported data type "+t);for(var o=new xv(n,e,t,!1,i),a=Ke(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),NT=T({randomGamma_:function(r,n,e,t,i){if(e===void 0&&(e=1),t===void 0&&(t="float32"),e==null&&(e=1),t==null&&(t="float32"),t!=="float32"&&t!=="int32")throw new Error("Unsupported data type "+t);for(var o=new yT(n,e,t,i),a=Ke(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),K1=T({randomUniform_:function(r,n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=1),t===void 0&&(t="float32");for(var o=Ke(r,t),a=new xT(n,e,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Vn=T({reshape_:function(r,n){var e=E(r,"x","reshape",null);n=o1(n,e.size),A(e.size===ve(n),function(){return"new shape and old shape must have the same number of elements."});var t={shape:n};return O.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",t)}}),X1=T({spaceToBatchND_:function(r,n,e){var t=E(r,"x","spaceToBatchND");return A(t.rank>=1+n.length,function(){return"input rank "+t.rank+" should be > than [blockShape] "+n.length}),A(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),A(t.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+t.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),O.runKernelFunc(function(i){return i.spaceToBatchND(t,n,e)},{$x:t},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),Q1=T({squeeze_:function(r,n){var e=E(r,"x","squeeze");return Vn(e,wo(e.shape,n).newShape)}}),Cn=T({stack_:function(r,n){n===void 0&&(n=0);var e=Oh(r,"tensors","stack");if(A(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var t=e[0].rank,i=e[0].shape,o=e[0].dtype;A(n<=t,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){ut(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){A(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return Ft(a,n)}}),ha=T({tile_:function(r,n){var e=E(r,"x","tile",null);A(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."});var t=[e],i={reps:n};return O.runKernelFunc(function(o,a){var s=o.tile(e,n);return a([e]),s},{x:e},function(o,a){var s=a[0];return{x:function(){var c=at(s);if(s.rank===1)for(var l=0;l<n[0];++l)c=c.add(o.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<n[0];++l)for(var d=0;d<n[1];++d)c=c.add(o.slice([l*s.shape[0],d*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<n[0];++l)for(d=0;d<n[1];++d)for(var u=0;u<n[2];++u)c=c.add(o.slice([l*s.shape[0],d*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<n[0];++l)for(d=0;d<n[1];++d)for(u=0;u<n[2];++u)for(var h=0;h<n[3];++h)c=c.add(o.slice([l*s.shape[0],d*s.shape[1],u*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return c}}},"Tile",i,t)}}),PT=T({truncatedNormal_:function(r,n,e,t,i){if(n===void 0&&(n=0),e===void 0&&(e=1),t!=null&&t==="bool")throw new Error("Unsupported data type "+t);for(var o=new xv(n,e,t,!0,i),a=Ke(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),bt=T({unstack_:function(r,n){n===void 0&&(n=0),n=n||0;var e=E(r,"x","unstack");A(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length);var t={axis:n};return O.runKernelFunc(function(i){return i.unstack(e,n)},{x:e},function(i){return{x:function(){return Cn(i,n)}}},"Unpack",t)}}),LT=function(r,n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u;return ge(this,function(h){switch(h.label){case 0:return e=E(r,"x","setdiff1d"),t=E(n,"y","setdiff1d"),A(e.dtype===t.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+t.dtype+")."}),A(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),A(t.rank===1,function(){return"y should be 1D tensor, but got y ("+t.shape+")."}),[4,e.data()];case 1:return i=h.sent(),[4,t.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,d=0;d<i.length;d++)a.has(i[d])||s++;for(c=new Ol([s],e.dtype),l=new Ol([s],"int32"),d=0,u=0;d<i.length;d++)a.has(i[d])||(c.values[u]=i[d],l.values[u]=d,u++);return[2,[c.toTensor(),l.toTensor()]]}})})};function Ph(r,n,e,t){t===void 0&&(t=!0);var i=[];if(t)(i=i.concat(n.slice(0))).push(r[0]/e),i=i.concat(r.slice(1));else{i=i.concat(r[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([r[a+1]/n[a],n[a]]);i=i.concat(r.slice(o+1))}return i}function Lh(r,n,e){e===void 0&&(e=!0);var t=[];if(e){t.push(n);for(var i=n+1;i<r;++i)i<=2*n?(t.push(i),t.push(i-(n+1))):t.push(i)}else{var o=[],a=[];for(i=1;i<r;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);t.push.apply(t,o),t.push(0),t.push.apply(t,a)}return t}function Bh(r,n,e,t){t===void 0&&(t=!0);var i=[];t?i.push(r[0]/e):i.push(r[0]*e);for(var o=1;o<r.length;++o)o<=n.length?t?i.push(n[o-1]*r[o]):i.push(r[o]/n[o-1]):i.push(r[o]);return i}function Z1(r,n){for(var e=[0],t=0;t<n;++t)e.push(r[t][0]);return e}function J1(r,n,e){for(var t=r.slice(0,1),i=0;i<e;++i)t.push(r[i+1]-n[i][0]-n[i][1]);return t}function wv(r,n){if(r.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+r.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>r.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+r.rank);if(r.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+r.shape+".");for(var e=n.shape,t=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=r.shape,s=e.slice();s.pop();var c=1;for(o=t;o<r.rank;++o)c*=a[o],s.push(a[o]);var l=Lr(r.shape).map(function(d){return d/c}).concat([1]).slice(0,t);return[s,i,c,l]}var R5=Object.freeze({prepareAndValidate:wv}),Cv=30;function Sh(r){return r<=Cv?r:Th(r,Math.floor(Math.sqrt(r)))}function eC(r,n,e){var t=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+r+", sliceDim: "+t+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(r.length<t+(e.rank-i))throw new Error(o+" Output shape length < "+(t+(e.rank-i)));if(e.rank!==i+r.length-t)throw new Error(o+" update.rank != "+(i+r.length-t));for(var a=0;a<i;++a)if(e.shape[a]!==n.shape[a])throw new Error(o+" updates.shape["+a+"] ("+e.shape[a]+") != indices.shape["+a+"] ("+n.shape[a]+").");for(a=0;a<e.rank-i;++a)if(e.shape[a+i]!==r[a+t])throw new Error(o+" updates.shape["+(a+i)+"] ("+e.shape[a+i]+") != shape["+(a+i)+"] ("+r[a+i]+")")}function tC(r,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(r.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+r.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(r.size===0)throw new Error("Updates specified for empty output. updates shape: "+r.shape)}eC(e,n,r)}function Bl(r,n,e){for(var t=n.shape.length,i=t>1?n.shape[t-1]:1,o=e.length,a=1,s=i;s<o;++s)a*=e[s];var c=i<1?1:i;return{sliceRank:i,numUpdates:ve(n.shape)/c,sliceSize:a,strides:Lr(e.slice(0,i)).concat([1]),outputSize:ve(e)}}var T5=Object.freeze({validateUpdateShape:eC,validateInput:tC,calculateShapes:Bl});function nC(r,n,e){A(r.rank===n.length,function(){return"Error in slice"+r.rank+"D: Length of begin "+n+" must match the rank of the array ("+r.rank+")."}),A(r.rank===e.length,function(){return"Error in slice"+r.rank+"D: Length of size "+e+" must match the rank of the array ("+r.rank+")."});for(var t=function(o){A(n[o]+e[o]<=r.shape[o],function(){return"Error in slice"+r.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+r.shape[o]+")"})},i=0;i<r.rank;++i)t(i)}function iv(r){for(var n=[],e=0;r>0;)1&r&&n.push(e),r/=2,e++;return n}function $h(r,n,e){for(var t=[],i=0;i<r.length;i++)t[i]=Math.ceil((n[i]-r[i])/e[i]);return t}function rC(r,n,e,t,i){var o=n[i],a=e[i]||1;(r&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=t[i];return o<0&&(o+=s),o=Ih(0,o,s-1)}function iC(r,n,e,t,i){var o=n[i],a=e[i]||1;(r&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=t[i];return o<0&&(o+=s),o=a>0?Ih(0,o,s):Ih(-1,o,s-1)}function Dv(r,n,e){for(var t=e.length,i=0;i<e.length;i++)if(e[i]>1){t=i;break}for(i=t+1;i<e.length;i++)if(n[i]>0||e[i]!==r[i])return!1;return!0}function Ev(r,n){for(var e=r.length>0?r[r.length-1]:1,t=0;t<r.length-1;t++)e+=r[t]*n[t];return e}var F5=Object.freeze({assertParamsValid:nC,maskToAxes:iv,computeOutShape:$h,startForAxis:rC,stopForAxis:iC,isSliceContinous:Dv,computeFlatOffset:Ev});function BT(r,n){A(Rh(r),function(){return"The f passed in variableGrads(f) must be a function"}),A(n==null||Array.isArray(n)&&n.every(function(d){return d instanceof fa}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var t in n=[],O.registeredVariables)n.push(O.registeredVariables[t]);var i=e?n.filter(function(d){return!d.trainable}):null,o=n.length;A((n=n.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=O.gradients(r,n,null,!0),s=a.value,c=a.grads;A(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),A(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return n.forEach(function(d,u){c[u]!=null&&(l[d.name]=c[u])}),i?.forEach(function(d){return l[d.name]=null}),{value:s,grads:l}}function Kh(r){return O.customGrad(r)}var zn=T({softmax_:function(r,n){n===void 0&&(n=-1);var e=E(r,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return O.runKernelFunc(function(t,i){var o=t.softmax(e,n);return i([o]),o},{logits:e},function(t,i){var o=i[0],a=t.mul(o);return{logits:function(){return a.sub(a.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),VT=T({logSoftmax_:function(r,n){n===void 0&&(n=-1);var e=E(r,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return Kh(function(t,i){var o=t.max(n,!0),a=t.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(c,l){var d=l[0].exp();return c.sub(c.sum(n,!0).mul(d))}}})(e)}}),oC=function(){function r(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return r.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},r.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},r.prototype.has=function(n){return this.data.has(n)},r.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},r.prototype.numDataIds=function(){return this.dataIdsCount},r}(),aC=function(){function r(){}return r.prototype.time=function(n){return P("time")},r.prototype.read=function(n){return P("read")},r.prototype.readSync=function(n){return P("readSync")},r.prototype.numDataIds=function(){return P("numDataIds")},r.prototype.disposeData=function(n){return P("disposeData")},r.prototype.write=function(n,e,t){return P("write")},r.prototype.move=function(n,e,t,i){return P("move")},r.prototype.memory=function(){return P("memory")},r.prototype.floatPrecision=function(){return P("floatPrecision")},r.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},r.prototype.batchMatMul=function(n,e,t,i){return P("batchMatMul")},r.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,P("fusedBatchMatMul")},r.prototype.slice=function(n,e,t){return P("slice")},r.prototype.stridedSlice=function(n,e,t,i){return P("stridedSlice")},r.prototype.unstack=function(n,e){return P("unstack")},r.prototype.reverse=function(n,e){return P("reverse")},r.prototype.concat=function(n,e){return P("concat")},r.prototype.neg=function(n){return P("neg")},r.prototype.add=function(n,e){return P("add")},r.prototype.addN=function(n){return P("addN")},r.prototype.subtract=function(n,e){return P("subtract")},r.prototype.multiply=function(n,e){return P("multiply")},r.prototype.realDivide=function(n,e){return P("realDivide")},r.prototype.floorDiv=function(n,e){return P("floorDiv")},r.prototype.sum=function(n,e){return P("sum")},r.prototype.prod=function(n,e){return P("prod")},r.prototype.unsortedSegmentSum=function(n,e,t){return P("unsortedSegmentSum")},r.prototype.argMin=function(n,e){return P("argMin")},r.prototype.argMax=function(n,e){return P("argMax")},r.prototype.equal=function(n,e){return P("equal")},r.prototype.notEqual=function(n,e){return P("notEqual")},r.prototype.less=function(n,e){return P("less")},r.prototype.lessEqual=function(n,e){return P("lessEqual")},r.prototype.greater=function(n,e){return P("greater")},r.prototype.greaterEqual=function(n,e){return P("greaterEqual")},r.prototype.logicalNot=function(n){return P("logicalNot")},r.prototype.logicalAnd=function(n,e){return P("logicalAnd")},r.prototype.logicalOr=function(n,e){return P("logicalOr")},r.prototype.where=function(n){return P("where")},r.prototype.select=function(n,e,t){return P("select")},r.prototype.topk=function(n,e,t){return P("topk")},r.prototype.min=function(n,e){return P("min")},r.prototype.minimum=function(n,e){return P("minimum")},r.prototype.mod=function(n,e){return P("mod")},r.prototype.max=function(n,e){return P("max")},r.prototype.maximum=function(n,e){return P("maximum")},r.prototype.all=function(n,e){return P("all")},r.prototype.any=function(n,e){return P("any")},r.prototype.squaredDifference=function(n,e){return P("squaredDifference")},r.prototype.ceil=function(n){return P("ceil")},r.prototype.floor=function(n){return P("floor")},r.prototype.round=function(n){return P("round")},r.prototype.sign=function(n){return P("sign")},r.prototype.isNaN=function(n){return P("isNaN")},r.prototype.isInf=function(n){return P("isInf")},r.prototype.isFinite=function(n){return P("isFinite")},r.prototype.pow=function(n,e){return P("pow")},r.prototype.exp=function(n){return P("exp")},r.prototype.expm1=function(n){return P("expm1")},r.prototype.softmax=function(n,e){return P("softmax")},r.prototype.log=function(n){return P("log")},r.prototype.log1p=function(n){return P("log1p")},r.prototype.sqrt=function(n){return P("sqrt")},r.prototype.rsqrt=function(n){return P("rsqrt")},r.prototype.square=function(n){return P("square")},r.prototype.reciprocal=function(n){return P("reciprocal")},r.prototype.relu=function(n){return P("relu")},r.prototype.relu6=function(n){return P("relu6")},r.prototype.prelu=function(n,e){return P("prelu")},r.prototype.elu=function(n){return P("elu")},r.prototype.eluDer=function(n,e){return P("eluDer")},r.prototype.selu=function(n){return P("selu")},r.prototype.int=function(n){return P("int")},r.prototype.clip=function(n,e,t){return P("clip")},r.prototype.abs=function(n){return P("abs")},r.prototype.complexAbs=function(n){return P("complexAbs")},r.prototype.sigmoid=function(n){return P("sigmoid")},r.prototype.softplus=function(n){return P("softplus")},r.prototype.sin=function(n){return P("sin")},r.prototype.cos=function(n){return P("cos")},r.prototype.tan=function(n){return P("tan")},r.prototype.asin=function(n){return P("asin")},r.prototype.acos=function(n){return P("acos")},r.prototype.atan=function(n){return P("atan")},r.prototype.atan2=function(n,e){return P("atan2")},r.prototype.sinh=function(n){return P("sinh")},r.prototype.cosh=function(n){return P("cosh")},r.prototype.tanh=function(n){return P("tanh")},r.prototype.asinh=function(n){return P("asinh")},r.prototype.acosh=function(n){return P("acosh")},r.prototype.atanh=function(n){return P("atanh")},r.prototype.erf=function(n){return P("erf")},r.prototype.step=function(n,e){return P("step")},r.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,P("fusedConv2d")},r.prototype.conv2d=function(n,e,t){return P("conv2d")},r.prototype.conv2dDerInput=function(n,e,t){return P("conv2dDerInput")},r.prototype.conv2dDerFilter=function(n,e,t){return P("conv2dDerFilter")},r.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,P("fusedDepthwiseConv2D")},r.prototype.depthwiseConv2D=function(n,e,t){return P("depthwiseConv2D")},r.prototype.depthwiseConv2DDerInput=function(n,e,t){return P("depthwiseConv2DDerInput")},r.prototype.depthwiseConv2DDerFilter=function(n,e,t){return P("depthwiseConv2DDerFilter")},r.prototype.conv3d=function(n,e,t){return P("conv3d")},r.prototype.conv3dDerInput=function(n,e,t){return P("conv3dDerInput")},r.prototype.conv3dDerFilter=function(n,e,t){return P("conv3dDerFilter")},r.prototype.maxPool=function(n,e){return P("maxPool")},r.prototype.maxPoolBackprop=function(n,e,t,i){return P("maxPoolBackprop")},r.prototype.avgPool=function(n,e){return P("avgPool")},r.prototype.avgPoolBackprop=function(n,e,t){return P("avgPoolBackprop")},r.prototype.avgPool3d=function(n,e){return P("avgPool3d")},r.prototype.avgPool3dBackprop=function(n,e,t){return P("avgPool3dBackprop")},r.prototype.maxPool3d=function(n,e){return P("maxPool3d")},r.prototype.maxPool3dBackprop=function(n,e,t,i){return P("maxPool3dBackprop")},r.prototype.reshape=function(n,e){return P("reshape")},r.prototype.cast=function(n,e){return P("cast")},r.prototype.tile=function(n,e){return P("tile")},r.prototype.pad=function(n,e,t){return P("pad")},r.prototype.transpose=function(n,e){return P("transpose")},r.prototype.gather=function(n,e,t){return P("gather")},r.prototype.gatherND=function(n,e){return P("gatherND")},r.prototype.scatterND=function(n,e,t){return P("scatterND")},r.prototype.batchToSpaceND=function(n,e,t){return P("batchToSpaceND")},r.prototype.spaceToBatchND=function(n,e,t){return P("spaceToBatchND")},r.prototype.resizeBilinear=function(n,e,t,i){return P("resizeBilinear")},r.prototype.resizeBilinearBackprop=function(n,e,t){return P("resizeBilinearBackprop")},r.prototype.resizeNearestNeighbor=function(n,e,t,i){return P("resizeNearestNeighbor")},r.prototype.resizeNearestNeighborBackprop=function(n,e,t){return P("resizeNearestNeighborBackprop")},r.prototype.batchNormalization=function(n,e,t,i,o,a){return P("batchNormalization")},r.prototype.localResponseNormalization4D=function(n,e,t,i,o){return P("localResponseNormalization4D")},r.prototype.LRNGrad=function(n,e,t,i,o,a,s){return P("LRNGrad")},r.prototype.multinomial=function(n,e,t,i){return P("multinomial")},r.prototype.oneHot=function(n,e,t,i){return P("oneHot")},r.prototype.cumsum=function(n,e,t,i){return P("cumsum")},r.prototype.nonMaxSuppression=function(n,e,t,i,o){return P("nonMaxSuppression")},r.prototype.fft=function(n){return P("fft")},r.prototype.ifft=function(n){return P("ifft")},r.prototype.complex=function(n,e){return P("complex")},r.prototype.real=function(n){return P("real")},r.prototype.imag=function(n){return P("imag")},r.prototype.cropAndResize=function(n,e,t,i,o,a){return P("cropAndResize")},r.prototype.depthToSpace=function(n,e,t){return P("depthToSpace")},r.prototype.split=function(n,e,t){return P("split")},r.prototype.sparseToDense=function(n,e,t,i){return P("sparseToDense")},r.prototype.diag=function(n){return P("diag")},r.prototype.fill=function(n,e,t){return P("fill")},r.prototype.onesLike=function(n){return P("onesLike")},r.prototype.zerosLike=function(n){return P("zerosLike")},r.prototype.linspace=function(n,e,t){return P("linspace")},r.prototype.dispose=function(){return P("dispose")},r}();function P(r){throw new Error("'"+r+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Pi(r,n){for(var e=r.length,t=[],i=0;i<e;i++){var o=e-1-i,a=r[o]||1;(n[n.length-1-i]||1)>1&&a===1&&t.unshift(o)}return t}function en(r,n){for(var e=[],t=0;t<n.length;t++){var i=r[r.length-t-1],o=n.length-t-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function rt(r,n){for(var e=[],t=Math.max(r.length,n.length),i=0;i<t;i++){var o=r[r.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+r+" and "+n+".");e.unshift(o)}}return e}function qs(r,n,e,t,i,o,a){a===void 0&&(a="channelsLast");var s,c=Vh(n),l=c[0],d=c[1];if(a==="channelsLast")s=[l,d,r[3],r[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,d,r[1],r[1]]}return Ao(r,s,e,t,i,o,!1,a)}function Vl(r,n,e,t,i,o,a){a===void 0&&(a="NDHWC");var s,c,l=ov(n),d=l[0],u=l[1],h=l[2];if(a==="NDHWC")c="channelsLast",s=[d,u,h,r[4],r[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);c="channelsFirst",s=[d,u,h,r[1],r[1]]}return zl(r,s,e,t,i,!1,c,o)}function Ao(r,n,e,t,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1],l=c[0],d=c[1],u=c[2],h=c[3];if(s==="channelsLast")l=r[0],d=r[1],u=r[2],h=r[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=r[0],h=r[1],d=r[2],u=r[3]}var f,p=n[0],m=n[1],g=n[3],v=Vh(e),_=v[0],y=v[1],b=Vh(t),x=b[0],C=b[1],k=Us(p,x),I=Us(m,C),S=function(V,z,G,W,j,q,K,ie){var ce,pe,Ne;if(typeof V=="number"){ce={top:V,bottom:V,left:V,right:V,type:V===0?"VALID":"NUMBER"};var De=function(be,Se,qe,ct,kt){ct==null&&(ct=Sv(be,Se,qe));var Lt=be[0],Hr=be[1],Gr=Rl((Lt-Se+2*ct)/qe+1,kt);A(Vt(Gr),function(){return"The output # of rows ("+Gr+") must be an integer. Change the stride and/or zero pad parameters"});var Kn=Rl((Hr-Se+2*ct)/qe+1,kt);return A(Vt(Kn),function(){return"The output # of columns ("+Kn+") must be an integer. Change the stride and/or zero pad parameters"}),[Gr,Kn]}([z,G],q,W,V,ie);pe=De[0],Ne=De[1]}else if(V==="same"){pe=Math.ceil(z/W),Ne=Math.ceil(G/j);var Ee=Math.max(0,(pe-1)*W+q-z),Ue=Math.max(0,(Ne-1)*j+K-G),Ye=Math.floor(Ee/2),Xe=Ee-Ye,st=Math.floor(Ue/2);ce={top:Ye,bottom:Xe,left:st,right:Ue-st,type:"SAME"}}else{if(V!=="valid")throw Error("Unknown padding parameter: "+V);ce={top:0,bottom:0,left:0,right:0,type:"VALID"},pe=Math.ceil((z-q+1)/W),Ne=Math.ceil((G-K+1)/j)}return{padInfo:ce,outHeight:pe,outWidth:Ne}}(i,d,u,_,y,k,I,o),D=S.padInfo,R=S.outHeight,M=S.outWidth,B=a?g*h:g;return s==="channelsFirst"?f=[l,B,R,M]:s==="channelsLast"&&(f=[l,R,M,B]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:u,inChannels:h,outHeight:R,outWidth:M,outChannels:B,padInfo:D,strideHeight:_,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationHeight:x,dilationWidth:C,inShape:r,outShape:f,filterShape:n}}function zl(r,n,e,t,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var c=[-1,-1,-1,-1,-1],l=c[0],d=c[1],u=c[2],h=c[3],f=c[4];if(a==="channelsLast")l=r[0],d=r[1],u=r[2],h=r[3],f=r[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=r[0],f=r[1],d=r[2],u=r[3],h=r[4]}var p,m=n[0],g=n[1],v=n[2],_=n[4],y=ov(e),b=y[0],x=y[1],C=y[2],k=ov(t),I=k[0],S=k[1],D=k[2],R=Us(m,I),M=Us(g,S),B=Us(v,D),V=function(K,ie,ce,pe,Ne,De,Ee,Ue,Ye,Xe,st){var be,Se,qe,ct;if(typeof K=="number"){be={top:K,bottom:K,left:K,right:K,front:K,back:K,type:K===0?"VALID":"NUMBER"};var kt=function(Ta,fi,Lf,Fa,qr,Bf){qr==null&&(qr=Sv(Ta,fi,Fa));var oS=Ta[0],aS=Ta[1],sS=Ta[2],Vf=Rl((oS-fi+2*qr)/Fa+1,Bf);A(Vt(Vf),function(){return"The output # of depths ("+Vf+") must be an integer. Change the stride and/or zero pad parameters"});var zf=Rl((aS-fi+2*qr)/Fa+1,Bf);A(Vt(zf),function(){return"The output # of rows ("+zf+") must be an integer. Change the stride and/or zero pad parameters"});var Uf=Rl((sS-fi+2*qr)/Fa+1,Bf);return A(Vt(Uf),function(){return"The output # of columns ("+Uf+") must be an integer. Change the stride and/or zero pad parameters"}),[Vf,zf,Uf,Lf]}([ie,ce,pe,1],Ue,1,Ne,K,st);Se=kt[0],qe=kt[1],ct=kt[2]}else if(K==="same"){Se=Math.ceil(ie/Ne),qe=Math.ceil(ce/De),ct=Math.ceil(pe/Ee);var Lt=(Se-1)*Ne+Ue-ie,Hr=(qe-1)*De+Ye-ce,Gr=(ct-1)*Ee+Xe-pe,Kn=Math.floor(Lt/2),Ra=Lt-Kn,ui=Math.floor(Hr/2),Yi=Hr-ui,hi=Math.floor(Gr/2);be={top:ui,bottom:Yi,left:hi,right:Gr-hi,front:Kn,back:Ra,type:"SAME"}}else{if(K!=="valid")throw Error("Unknown padding parameter: "+K);be={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Se=Math.ceil((ie-Ue+1)/Ne),qe=Math.ceil((ce-Ye+1)/De),ct=Math.ceil((pe-Xe+1)/Ee)}return{padInfo:be,outDepth:Se,outHeight:qe,outWidth:ct}}(i,d,u,h,b,x,C,R,M,B,s),z=V.padInfo,G=V.outDepth,W=V.outHeight,j=V.outWidth,q=o?_*f:_;return a==="channelsFirst"?p=[l,q,G,W,j]:a==="channelsLast"&&(p=[l,G,W,j,q]),{batchSize:l,dataFormat:a,inDepth:d,inHeight:u,inWidth:h,inChannels:f,outDepth:G,outHeight:W,outWidth:j,outChannels:q,padInfo:z,strideDepth:b,strideHeight:x,strideWidth:C,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:R,effectiveFilterHeight:M,effectiveFilterWidth:B,dilationDepth:I,dilationHeight:S,dilationWidth:D,inShape:r,outShape:p,filterShape:n}}function Sv(r,n,e,t){t===void 0&&(t=1);var i=Us(n,t);return Math.floor((r[0]*(e-1)-e+i)/2)}function Vh(r){return typeof r=="number"?[r,r,r]:r.length===2?[r[0],r[1],1]:r}function ov(r){return typeof r=="number"?[r,r,r]:r}function Us(r,n){return n<=1?r:r+(r-1)*(n-1)}function Rl(r,n){if(!n)return r;switch(n){case"round":return Math.round(r);case"ceil":return Math.ceil(r);case"floor":return Math.floor(r);default:throw new Error("Unknown roundingMode "+n)}}function ma(r){var n=Vh(r),e=n[0],t=n[1],i=n[2];return e===1&&t===1&&i===1}function Bn(r,n){return ma(r)||ma(n)}function Xh(r){if(r==="NHWC")return"channelsLast";if(r==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+r)}function Av(r,n,e){if(n==="complex64"){if(r.dtype==="complex64")return r.clone();var t=It(r.shape),i=r.toFloat(),o=e.complex(i,t);return t.dispose(),i.dispose(),o}if(!c1(r.dtype,n))return O.makeTensorFromDataId(r.dataId,r.shape,n);if(r.dtype==="complex64"){var a=e.real(r);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(r);if(n==="bool"){var s=re(0,r.dtype);return o=e.notEqual(r,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+r.dtype+" to "+n)}function zh(r,n){return O.makeTensorFromDataId(r.dataId,n,r.dtype)}function kv(r,n,e){var t=(n-r)/(e-1),i=$s(e,"float32");i[0]=r;for(var o=1;o<i.length;o++)i[o]=i[o-1]+t;return At(i,"float32")}var O5=Object.freeze({castTensor:Av,reshapeTensor:zh,linspaceImpl:kv,upcastType:dn,axesAreInnerMostDims:_v,combineLocations:H1,computeOutAndReduceShapes:xn,expandShapeToKeepDim:Ln,assertAxesAreInnerMostDims:Gn,getAxesPermutation:zr,getUndoAxesPermutation:Gh,getInnerMostAxes:Ur,getBroadcastDims:Pi,getReductionAxes:en,assertAndGetBroadcastShape:rt,assertParamsConsistent:G1,computeOutShape:pa,computePool2DInfo:qs,computePool3DInfo:Vl,computeConv2DInfo:Ao,computeConv3DInfo:zl,computeDefaultPad:Sv,tupleValuesAreOne:ma,eitherStridesOrDilationsAreOne:Bn,convertConv2DDataFormat:Xh,PARALLELIZE_THRESHOLD:Cv,computeOptimalWindowSize:Sh});function av(r,n){if(r.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+r.length+", imag: "+n.length+".");for(var e=new Float32Array(2*r.length),t=0;t<e.length;t+=2)e[t]=r[t/2],e[t+1]=n[t/2];return e}function xw(r,n){return{real:r[2*n],imag:r[2*n+1]}}function zT(r,n,e,t){r[2*t]=n,r[2*t+1]=e}function UT(r,n,e){var t=(e?2:-2)*Math.PI*(r/n);return{real:Math.cos(t),imag:Math.sin(t)}}function jT(r,n,e){var t=function(o,a,s){return function(c,l,d){for(var u=0,h=c.length,f=0,p=!1;u<h;){var m=d(l,c[f=u+(h-u>>>1)]);m>0?u=f+1:(h=f,p=!m)}return p?u:-u-1}(o,a,s||WT)}(r,n,e),i=t<0?-(t+1):t;r.splice(i,0,n)}function WT(r,n){return r>n?1:r<n?-1:0}function Iv(r,n,e,t,i){return sC(r,n,e,t,i,0).selectedIndices}function Mv(r,n,e,t,i,o){var a=sC(r,n,e,t,i,o,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function sC(r,n,e,t,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s=!1);for(var c=Array.from(n).map(function(b,x){return{score:b,boxIndex:x,suppressBeginIndex:0}}).filter(function(b){return b.score>i}).sort(ww),l=o>0?-.5/o:0,d=[],u=[];d.length<e&&c.length>0;){var h=c.pop(),f=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(f<i)break;for(var g=!1,v=d.length-1;v>=m;--v){var _=HT(r,p,d[v]);if(_>=t){g=!0;break}if(h.score=h.score*GT(t,l,_),h.score<=i)break}h.suppressBeginIndex=d.length,g||(h.score===f?(d.push(p),u.push(h.score)):h.score>i&&jT(c,h,ww))}var y=d.length;return s&&(d.fill(0,y),u.fill(0,y)),{selectedIndices:At(d,"int32"),selectedScores:At(u,"float32"),numValidOutputs:re(y,"int32")}}function HT(r,n,e){var t=r.subarray(4*n,4*n+4),i=r.subarray(4*e,4*e+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),s=Math.max(t[0],t[2]),c=Math.max(t[1],t[3]),l=Math.min(i[0],i[2]),d=Math.min(i[1],i[3]),u=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(s-o)*(c-a),p=(u-l)*(h-d);if(f<=0||p<=0)return 0;var m=Math.max(o,l),g=Math.max(a,d),v=Math.min(s,u),_=Math.min(c,h),y=Math.max(v-m,0)*Math.max(_-g,0);return y/(f+p-y)}function GT(r,n,e){var t=Math.exp(n*e*e);return e<=r?t:0}function ww(r,n){return r.score-n.score||r.score===n.score&&n.boxIndex-r.boxIndex}function cC(r,n,e){var t=new Array(r.rank).fill(0),i=r.shape.slice();return n.map(function(o){i[e]=o;var a=r.slice(t,i);return t[e]+=o,a})}function lC(r,n){for(var e=new Array(r.rank),t=0;t<e.length;t++)e[t]=r.shape[t]*n[t];var i=Ke(e,r.dtype);for(t=0;t<i.values.length;++t){for(var o=i.indexToLoc(t),a=new Array(r.rank),s=0;s<a.length;s++)a[s]=o[s]%r.shape[s];var c=r.locToIndex(a);i.values[t]=r.values[c]}return i.toTensor()}function dC(r,n,e,t,i){for(var o=n[n.length-1],a=[r.length/o,o],s=a[0],c=a[1],l=Gs(e,s*t),d=Gs("int32",s*t),u=0;u<s;u++){for(var h=u*c,f=r.subarray(h,h+c),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort(function(b,x){return x.value-b.value});var g=u*t,v=l.subarray(g,g+t),_=d.subarray(g,g+t);for(m=0;m<t;m++)v[m]=p[m].value,_[m]=p[m].index}var y=n.slice();return y[y.length-1]=t,[un(l,y,e),un(d,y,"int32")]}function Rv(r,n){for(var e=[],t=0;t<n.length;t++)n[t]&&e.push(t);var i=Ke(r,"int32"),o=Ke([e.length,r.length],"int32");for(t=0;t<e.length;t++){var a=i.indexToLoc(e[t]),s=t*r.length;o.values.set(a,s)}return o.toTensor()}var qT=function(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var t=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+t+`;
        setOutput(result);
      }
    `},YT=function(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var t=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+t+`;
        setOutput(result);
      }
    `},$T=function(r,n,e){this.variableNames=["A"];var t=r.windowSize,i=r.batchSize,o=r.inSize,a=Math.ceil(o/t);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+t+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function uC(r,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return r+"."+e})}function qn(r,n){return n===1?[r]:uC(r,n)}function Rn(){var r,n,e,t,i,o,a,s,c,l;return U().getNumber("WEBGL_VERSION")===2?(r="#version 300 es",n="in",e="out",t="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(r="",n="attribute",e="varying",t="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:r,attribute:n,varyingVs:e,varyingFs:t,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function la(r,n,e){e===void 0&&(e="index");var t=Lr(n);return t.map(function(i,o){return"int "+r[o]+" = "+e+" / "+i+"; "+(o===t.length-1?"int "+r[o+1]+" = "+e+" - "+r[o]+" * "+i:"index -= "+r[o]+" * "+i)+";"}).join("")}function Tv(r){var n=Lr(r).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var hC=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function KT(r,n,e,t){var i=[];r.forEach(function(f){var p=ve(f.shapeInfo.logicalShape);f.shapeInfo.isUniform?i.push("uniform float "+f.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+f.name+";"),i.push("uniform int offset"+f.name+";"))});var o,a,s=i.join(`
`),c=r.map(function(f){return function(p,m,g){g===void 0&&(g=!1);var v="";v+=g?fC(p):Ls(p);var _=p.shapeInfo.logicalShape,y=m.logicalShape;return _.length<=y.length&&(v+=g?function(b,x){var C,k=b.name,I=k.charAt(0).toUpperCase()+k.slice(1),S="get"+I+"AtOutCoords",D=b.shapeInfo.logicalShape.length,R=x.logicalShape.length,M=Pi(b.shapeInfo.logicalShape,x.logicalShape),B=Mt(R),V=R-D,z=["x","y","z","w","u","v"];C=D===0?"":R<2&&M.length>=1?"coords = 0;":M.map(function(ce){return"coords."+z[ce+V]+" = 0;"}).join(`
`);var G="";G=R<2&&D>0?"coords":b.shapeInfo.logicalShape.map(function(ce,pe){return"coords."+z[pe+V]}).join(", ");var W="return outputValue;",j=ve(b.shapeInfo.logicalShape)===1,q=ve(x.logicalShape)===1;if(D!==1||j||q){if(j&&!q)W=R===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(M.length){var K=D-2,ie=D-1;M.indexOf(K)>-1&&M.indexOf(ie)>-1?W="return vec4(outputValue.x);":M.indexOf(K)>-1?W="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":M.indexOf(ie)>-1&&(W="return vec4(outputValue.xx, outputValue.zz);")}}else W=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+S+`() {
      `+B+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+I+"("+G+`);
      `+W+`
    }
  `}(p,m):function(b,x){var C=b.name,k=C.charAt(0).toUpperCase()+C.slice(1),I="get"+k+"AtOutCoords",S=x.texShape,D=b.shapeInfo.texShape,R=b.shapeInfo.logicalShape.length,M=x.logicalShape.length;if(!b.shapeInfo.isUniform&&R===M&&b.shapeInfo.flatOffset==null&&Jt(D,S))return`
      float `+I+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var B,V=Mt(M),z=Pi(b.shapeInfo.logicalShape,x.logicalShape),G=M-R,W=["x","y","z","w","u","v"];B=R===0?"":M<2&&z.length>=1?"coords = 0;":z.map(function(q){return"coords."+W[q+G]+" = 0;"}).join(`
`);var j="";return j=M<2&&R>0?"coords":b.shapeInfo.logicalShape.map(function(q,K){return"coords."+W[K+G]}).join(", "),`
    float `+I+`() {
      `+V+` coords = getOutputCoords();
      `+B+`
      return get`+k+"("+j+`);
    }
  `}(p,m)),v}(f,n,t)}).join(`
`),l=n.texShape,d=Rn(),u=function(f){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+f.texture2D+`(textureSampler, uv).r;
    }
  `}(d),h=function(f){return f.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+f.varyingFs+` vec2 resultUV;
    `+f.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+f.defineSpecialNaN+`
    `+f.defineSpecialInf+`
    `+f.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+XT+`
    `+QT+`
    `+ZT+`
  `}(d);return n.isPacked?(o=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,x){var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,x){var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];if(Jt(b,x))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var k=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec2(r, c);
    }
  `}(f,p);case 3:return m=f,g=p,v=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],_=Math.ceil(m[2]/2),y=_*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+_+`);
      int c = imod(index, `+_+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,x){for(var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],k=Math.ceil(b[b.length-1]/2),I=k*Math.ceil(b[b.length-2]/2),S=I,D="",R="b, r, c",M=2;M<b.length-1;M++)S*=b[b.length-M-1],D=`
      int b`+M+" = index / "+S+`;
      index -= b`+M+" * "+S+`;
    `+D,R="b"+M+", "+R;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+D+`

      int b = index / `+I+`;
      index -= b * `+I+`;

      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec`+b.length+"("+R+`);
    }
  `}(f,p)}var m,g,v,_,y}(n.logicalShape,l),a=function(f){return`
    void setOutput(vec4 val) {
      `+f.output+` = val;
    }
  `}(d)):(o=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,_){return _[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return resTexRC.x * `+_[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,_){return Jt(v,_)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(f,p);case 3:return m=p,g=la(["r","c","d"],f),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,_){var y=la(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(f,p);case 5:return function(v,_){var y=la(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+_[0]+`,
                             `+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(f,p);case 6:return function(v,_){var y=la(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(f,p);default:throw new Error(f.length+"-D output sampling is not yet supported")}var m,g}(n.logicalShape,l),a=function(f){return`
    void setOutput(float val) {
      `+f.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),t&&(h+=JT),[h,u,a,s,o,c,e].join(`
`)}function Ls(r){var n=r.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,i="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+t+";}";var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+t+`, halfCR);
      }
    `;var c=e.shapeInfo.texShape,l=c[0],d=c[1],u=oa(t);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+d+", "+u+`);
      return sampleTexture(`+t+`, uv);
    }
  `}(r);case 1:return function(e){var t=e.name,i="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Os(e)+`
      }
    `;var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+t+`, halfCR);
      }
    `;var c=oa(t);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+a+`.0);
        return sampleTexture(`+t+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+t+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+c+`);
      return sampleTexture(`+t+`, uv);
    }
  `}(r);case 2:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=e.shapeInfo.texShape;if(a!=null&&Jt(t,a)){var s=a[0],c=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=wo(t),d=l.newShape,u=l.keptDims,h=d;if(h.length<t.length){var f=Bs(e,h);return`
      `+Ls(f)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Vs(["row","col"],u)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+t[1]+`, 1)));
        `+Os(e)+`
      }
    `;var p=a[0],m=a[1],g=oa(i);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+t[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+t[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+t[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(r);case 3:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[1]*t[2],s=t[2],c=wo(t),l=c.newShape,d=c.keptDims,u=l;if(u.length<t.length){var h=Bs(e,u);return`
        `+Ls(h)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Vs(["row","col","depth"],d)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+Os(e)+`
      }
    `;var f=e.shapeInfo.texShape,p=f[0],m=f[1],g=e.shapeInfo.flatOffset;if(m===a&&g==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+t[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var v=oa(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(r);case 4:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[3],s=t[2]*a,c=t[1]*s,l=wo(t),d=l.newShape,u=l.keptDims;if(d.length<t.length){var h=Bs(e,d);return`
      `+Ls(h)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Vs(["row","col","depth","depth2"],u)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+s+", "+a+`, 1)));
        `+Os(e)+`
      }
    `;var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,m=p[0],g=p[1];if(g===c&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+t[1]*t[2]+", "+t[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var v=oa(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+v+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);case 5:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[4],s=t[3]*a,c=t[2]*s,l=t[1]*c,d=wo(t),u=d.newShape,h=d.keptDims;if(u.length<t.length){var f=Bs(e,u);return`
      `+Ls(f)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Vs(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+c+", "+s+", "+a+`)) +
          depth3;
        `+Os(e)+`
      }
    `;var p=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,g=m[0],v=m[1];if(v===l&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===a&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+t[1]*t[2]*t[3]+`,
               `+t[2]*t[3]+", "+t[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var _=oa(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+c+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+_+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);case 6:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=wo(t),s=a.newShape,c=a.keptDims;if(s.length<t.length){var l=Bs(e,s);return`
      `+Ls(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Vs(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=t[5],u=t[4]*d,h=t[3]*u,f=t[2]*h,p=t[1]*f;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+f+", "+h+", "+u+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Os(e)+`
      }
    `;var m=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,v=g[0],_=g[1];if(_===p&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+f+", "+h+", "+u+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(_===d&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+t[1]*t[2]*t[3]*t[4]+`,
               `+t[2]*t[3]*t[4]+`,
               `+t[3]*t[4]+`,
               `+t[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=oa(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+f+" + depth * "+h+` +
          depth2 * `+u+" + depth3 * "+d+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+_+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function fC(r){var n,e,t;switch(r.shapeInfo.logicalShape.length){case 0:return n=r.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),t=Rn(),`
    vec4 `+e+`() {
      return `+t.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Rn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(r);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,l=c[0],d=c[1],u=Rn();if(c!=null&&Jt(o,c))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+l+`.0);

        return `+u.texture2D+"("+a+`, uv);
      }
    `;var h=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+f+", "+h[0]+", "+h[1]+`, row, col);
      return `+u.texture2D+"("+a+`, uv);
    }
  `}(r);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,l=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var d=o.slice(1),u=Bs(i,d);return`
        `+fC(u)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Vs(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],f=l[1],p=Math.ceil(o[2]/2),m=p*Math.ceil(o[1]/2),g=Rn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+f+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+a+`, uv);
    }
  `}(r);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,c="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,d=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],u=d[0],h=d[1],f=Math.ceil(o[a-1]/2),p=f*Math.ceil(o[a-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+f+" + (col / 2)",v=2;v<a-1;v++)m="int b"+v+", "+m,p*=o[a-v-1],g="b"+v+" * "+p+" + "+g;var _=Rn();return`
    vec4 `+c+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+u+`);
      return `+_.texture2D+"("+s+`, uv);
    }
  `}(r)}}var XT=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,QT=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ZT=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,JT=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function oa(r){return"offset"+r}function Os(r){var n=r.name,e=ve(r.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Mt(r){if(r<=1)return"int";if(r===2)return"ivec2";if(r===3)return"ivec3";if(r===4)return"ivec4";if(r===5)return"ivec5";if(r===6)return"ivec6";throw Error("GPU for rank "+r+" is not yet supported")}function Bs(r,n){var e=JSON.parse(JSON.stringify(r));return e.shapeInfo.logicalShape=n,e}function Vs(r,n){return n.map(function(e){return r[e]}).join(", ")}var eF=function(r,n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,A(r.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=r[r.length-1],o=Math.ceil(i/n);this.outputShape=r.slice(0,-1),o>1&&this.outputShape.push(o),t||this.variableNames.push("bestIndicesA");var a,s,c=this.outputShape,l=c.length,d=Mt(l),u=qn("coords",l);if(o===1){var h=Mt(s=l+1);a=`
        `+h+" sourceLocR = "+h+"("+u.join()+`, 0);
        ++`+u[l-1]+`;
        `+h+" sourceLocG = "+h+"("+u.join()+`, 0);
        ++`+u[l-2]+`;
        `+h+" sourceLocA = "+h+"("+u.join()+`, 0);
        --`+u[l-1]+`;
        `+h+" sourceLocB = "+h+"("+u.join()+`, 0);
        --`+u[l-2]+";"}else s=l,a=`
        `+d+` sourceLocR = coords;
        ++`+u[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+u[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+u[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+u[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map(function(I){return"int "+I}),g=qn("sourceLocR",s-1).concat("inIdx.r"),v=qn("sourceLocG",s-1).concat("inIdx.g"),_=qn("sourceLocB",s-1).concat("inIdx.b"),y=qn("sourceLocA",s-1).concat("inIdx.a"),b=e==="max"?"greaterThan":"lessThan",x=t?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",C=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",k=t?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+f.join()+`),
                                          vec2(`+f.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+f.join()+`),
                               vec2(`+f.slice(-2).join()+`));
      }
      `+k+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+u[l-1]+" < "+(c[l-1]-1)+`;
        bool hasNextRow = `+u[l-2]+" < "+(c[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+x+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},tF=function(r){this.variableNames=["dy"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=r.dilationHeight,a=r.dilationWidth,s=r.effectiveFilterHeight,c=r.effectiveFilterWidth,l=s-1-r.padInfo.top,d=c-1-r.padInfo.left,u=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},nF=function(r){this.variableNames=["dy"],this.outputShape=r.inShape;var n=r.filterDepth,e=r.filterHeight,t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterDepth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=d-1-r.padInfo.front,p=u-1-r.padInfo.top,m=h-1-r.padInfo.left,g=1/(n*e*t);this.userCode=`
      const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+r.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rF=function(r,n,e,t,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],rt(r,n),rt(r,e);var a="0.0";t!=null&&(rt(r,t),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(rt(r,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},iF=function(r,n,e,t,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rt(r,n),rt(r,e);var a="vec4(0.0)";t!=null&&(rt(r,t),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(rt(r,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},oF="return areal * breal - aimag * bimag;",aF="return areal * bimag + aimag * breal;",Cw=function(r,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rt(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+r+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},kg="return a + b;",Ig="return a - b;",Dw="return a * b;",pC="return (a < 0.) ? b * a : a;",Gt=function(r,n,e){this.variableNames=["A","B"],this.outputShape=rt(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+r+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},mC=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Oi=function(r,n,e,t){t===void 0&&(t=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rt(n,e);var i=this.outputShape.length,o="";if(t)if(i===0||ve(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Mt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=qn("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+r+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},sF=function(){function r(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return r.prototype.getCustomSetupFunc=function(n,e){var t=this;return function(i,o){t.minLoc==null&&(t.minLoc=i.getUniformLocationNoThrow(o,"minVal"),t.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(t.minLoc,n),i.gl.uniform1f(t.maxLoc,e)}},r}(),cF=function(){function r(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return r.prototype.getCustomSetupFunc=function(n,e){var t=this;return function(i,o){t.minLoc==null&&(t.minLoc=i.getUniformLocationNoThrow(o,"minVal"),t.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(t.minLoc,n),i.gl.uniform1f(t.maxLoc,e)}},r}(),lF=function(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},dF=function(r){this.outputShape=[],this.outputShape=pa(r,1),this.variableNames=r.map(function(s,c){return"T"+c});var n=new Array(r.length-1);n[0]=r[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+r[e][1];var t=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];t.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];t.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+t.join(`
        `)+`
      }
    `},uF=function(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=pa(r,n);var e=this.outputShape,t=e.length,i=Mt(t),o=qn("coords",t),a=["x","y","z","w","u","v"].slice(0,t);this.variableNames=r.map(function(g,v){return"T"+v});var s=new Array(r.length-1);s[0]=r[0][n];for(var c=1;c<s.length;c++)s[c]=s[c-1]+r[c][n];var l=a[n],d=a.slice(-2),u=a.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+u+"), vec2("+d.join()+`));
        }`;for(c=1;c<s.length;c++){var f=s[c-1];h+=`
        if (`+l+" < "+s[c]+"  && "+l+" >= "+s[c-1]+`) {
          return getChannel(
            getT`+c+"("+fh(a,l,f)+`),
            vec2(`+fh(d,l,f)+`));
        }`}var p=s.length,m=s[s.length-1];h+=`
        return getChannel(
          getT`+p+"("+fh(a,l,m)+`),
          vec2(`+fh(d,l,m)+"));",this.userCode=`
      float getValue(`+a.map(function(g){return"int "+g})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[t-1]+" = "+o[t-1]+` + 1;
        if (`+o[t-1]+" < "+e[t-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[t-2]+" = "+o[t-2]+` + 1;
        if (`+o[t-2]+" < "+e[t-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[t-1]+" = "+o[t-1]+` - 1;
        if (`+o[t-2]+" < "+e[t-2]+` &&
            `+o[t-1]+" < "+e[t-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function fh(r,n,e){var t=r.indexOf(n);return r.map(function(i,o){return o===t?i+" - "+e:i}).join()}var hF=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideHeight,e=r.strideWidth,t=r.padInfo.top,i=r.padInfo.left,o=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yR = 0; yR < `+r.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+t+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+r.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},fF=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=r.dataFormat==="channelsLast",a=n-1-r.padInfo.top,s=e-1-r.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+r.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},pF=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideDepth,e=r.strideHeight,t=r.strideWidth,i=r.padInfo.front,o=r.padInfo.top,a=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yF = 0; yF < `+r.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+r.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+r.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+r.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+r.outWidth+`; yC++) {
                int xC = wC + yC * `+t+" - "+a+`;

                if (xC < 0 || xC >= `+r.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},mF=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterDepth,e=r.filterHeight,t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=n-1-r.padInfo.front,c=e-1-r.padInfo.top,l=t-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+c+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+r.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+t+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+t+` - 1 - wC;

              for (int d2 = 0; d2 < `+r.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},gF=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideHeight,e=r.strideWidth,t=r.padInfo.top,i=r.padInfo.left,o=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yR = 0; yR < `+r.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+t+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+r.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},vF=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=n-1-r.padInfo.top,a=e-1-r.padInfo.left,s=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ew=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.outputShape=r.outShape;var i=r.padInfo.top,o=r.padInfo.left,a=r.strideHeight,s=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.filterHeight,u=r.filterWidth,h=4*Math.floor(r.inChannels/4),f=r.inChannels%4,p=r.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,v=p?3:1,_="",y="";e&&(_=t?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+r.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+u+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+r.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(f===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(f===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(f===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+y+`
        setOutput(result);
      }
    `},bF=function(r){this.variableNames=["x","W"],this.outputShape=r.outShape;var n=r.padInfo.front,e=r.padInfo.top,t=r.padInfo.left,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.filterDepth,u=r.filterHeight,h=r.filterWidth,f=4*Math.floor(r.inChannels/4),p=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+t+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+r.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+u+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+f+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+f+`) *
                  getW(wF, wR, wC, `+f+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1),
                  getX(batch, xF, xR, xC, `+f+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2),
                  getW(wF, wR, wC, `+f+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Sw=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.outputShape=r.outShape;var i=r.inHeight,o=r.inWidth,a=r.padInfo.top,s=r.padInfo.left,c=r.strideHeight,l=r.strideWidth,d=r.dilationHeight,u=r.dilationWidth,h=r.filterHeight,f=r.filterWidth,p=r.outChannels/r.inChannels,m="",g="";e&&(m=t?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,g="result = activation(result);");var v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+c+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+g+`
        setOutput(result);
      }
    `},Aw=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.outShape;for(var i=r.inHeight,o=r.inWidth,a=r.padInfo.top,s=r.padInfo.left,c=r.strideHeight,l=r.strideWidth,d=r.dilationHeight,u=r.dilationWidth,h=r.filterHeight,f=r.filterWidth,p=f,m="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var v=0;v<f;v++)m+=`
          vec4 xTexelR`+g+"C"+2*v+` = vec4(0.);
          vec4 wR`+g+"C"+v+` = vec4(0.);
          vec4 xR`+g+"C"+v+" = vec4(0.);";for(g=0;g<h;g++)for(var _=0;_<p;_++){if(m+=`
          xR = xRCorner + `+g*d+`;
          xC = xCCorner + `+(v=2*_)*u+`;
        `,l===1){if(v<f&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+g+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+`.xy);
                } else {
                  xR`+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xR`+g+"C"+v+" = xTexelR"+g+"C"+v+`;
              `,v+1<f)){var y=s%2==0?hv(u):u;u%2==0&&s%2==1||u%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,u>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+`;
                `}}else v<f&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
              `,v+1<f&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+`.xy);
              `,v+1<f&&(m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
                `)),m+="}");v<f&&(m+=`
            vec4 wTexelR`+g+"C"+v+" = getW("+g+", "+v+`, d1, q);
            wR`+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+`.xz);
          `,v+1<f&&(m+=`
              vec4 wTexelR`+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+`, d1, q);
              wR`+g+"C"+(v+1)+` =
                vec4(wTexelR`+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<h;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",x="";e&&(b=t?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,x="result = activation(result);");var C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+c+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+C+`
        `+x+`
        setOutput(result);
      }
    `},_F=function(r,n,e,t,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=r[0],a=r[1],s=r[2],c=r[3],l=n[0],d=e[0],u=e[1];this.outputShape=[l,d,u,c];var h=t==="bilinear"?1:0,f=[a-1+".0",s-1+".0"],p=f[0],m=f[1],g=d>1?[""+(a-1)/(d-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],_=g[1],y=g[2],b=u>1?[""+(s-1)/(u-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=b[0],C=b[1],k=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+x+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+_+`;
        float width_scale = `+C+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+k+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},yF=function(r,n,e){this.variableNames=["x"],this.outputShape=r;var t=r.length,i=r[r.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Mt(t)+` coords = getOutputCoords();
        int end = `+kw(t,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+kw(t,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(t,"coords")+`);
        }
        setOutput(val);
      }
    `};function kw(r,n){if(r===1)return""+n;if(r===2)return n+".y";if(r===3)return n+".z";if(r===4)return n+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}var xF=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Nl.DENSE;var n=Ml(r),e=Rn();this.outputShape=r,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+la(["r","c","d"],r)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},wF=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Nl.DENSE;var n=Ml(r),e=Rn();this.outputShape=r,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+la(["r","c","d"],r)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},CF=function(){function r(n,e,t){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=t,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return r.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},r.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},r.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},r.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},r.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},r}(),DF=function(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},EF=function(r){this.variableNames=["A"],this.outTexUsage=or.DOWNLOAD;var n=Rn();this.outputShape=r,this.userCode=`
      `+hC+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},SF=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=or.DOWNLOAD;var n=Rn();this.outputShape=r,this.userCode=`
      `+hC+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},AF=function(r,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var t=Rn(),i=n[0],o=n[1];this.outputShape=r;var a="result";e&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+Tv(r)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+t.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+t.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},kF=function(r,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Rn(),i=n[0],o=n[1];this.outputShape=r;var a="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var l=0;l<=1;l++){var d=2*c+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+r[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+c+" < "+r[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+t.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Tv(r)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+t.output+" = "+s+`;
      }
    `},IF="return real * expR - imag * expI;",MF="return real * expI + imag * expR;",Iw=function(r,n,e){this.variableNames=["real","imag"];var t=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?t+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+r+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+t+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+t+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},RF=function(){function r(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;return function(t,i){e.valueLoc==null&&(e.valueLoc=t.getUniformLocationNoThrow(i,"value")),t.gl.uniform1f(e.valueLoc,n)}},r}(),TF=function(r,n,e){this.variableNames=["A","indices"];var t=r.slice();t[e]=n,this.outputShape=t,this.rank=t.length;var i=Mt(this.rank),o=function(a,s){var c=a.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],u=0;u<a.length;u++)u===s?d.push("int(getIndices("+l[u]+"))"):d.push(""+l[u]);return d.join()}(r,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},FF=function(r,n,e){this.sliceDim=r,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var t=Mt(n.length),i=Mt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+t+" strides = "+t+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function gC(r,n){var e=Rn();return x1(r,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function vC(r,n){return E1(r,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function bC(r,n){return S1(r,n,new Uint16Array([0,1,2,2,1,3]))}function Wl(r,n,e,t,i,o,a){k1(e,t);var s=A1(r,n),c=r.TEXTURE_2D;return ue(r,n,function(){return r.bindTexture(c,s)}),ue(r,n,function(){return r.texParameteri(c,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE)}),ue(r,n,function(){return r.texParameteri(c,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)}),ue(r,n,function(){return r.texParameteri(c,r.TEXTURE_MIN_FILTER,r.NEAREST)}),ue(r,n,function(){return r.texParameteri(c,r.TEXTURE_MAG_FILTER,r.NEAREST)}),ue(r,n,function(){return r.texImage2D(c,0,i,e,t,0,o,a,null)}),ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)}),s}function _C(r,n,e,t,i){var o=Hh(e,t);return Wl(r,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,r.FLOAT)}function yC(r,n,e,t,i){var o=Hh(e,t);return Wl(r,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function xC(r,n,e,t,i){var o=Hh(e,t);return Wl(r,n,o[0],o[1],r.RGBA,r.RGBA,r.UNSIGNED_BYTE)}function wC(r,n,e,t,i){var o=jl(e,t);return Wl(r,n,o[0],o[1],i.internalFormatPackedFloat,r.RGBA,r.FLOAT)}function CC(r,n,e,t,i){var o=jl(e,t);return Wl(r,n,o[0],o[1],i.internalFormatPackedHalfFloat,r.RGBA,i.textureTypeHalfFloat)}function DC(r,n,e,t){return ue(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,t)}),Jg(r,n,e,"clipSpacePos",t,3,20,0)&&Jg(r,n,e,"uv",t,2,20,12)}function EC(r,n,e,t,i,o,a){var s,c,l;ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(t*i*4),c=r.UNSIGNED_BYTE,l=r.RGBA):(s=new Float32Array(t*i*4),c=r.FLOAT,l=a.internalFormatPackedFloat),s.set(o),ue(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,l,t,i,0,r.RGBA,c,s)}),ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})}function SC(r,n,e,t){ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)}),t.data instanceof Uint8Array?ue(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width,t.height,0,r.RGBA,r.UNSIGNED_BYTE,t.data)}):ue(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}),ue(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})}function AC(r,n,e,t,i){var o=r.createBuffer();ue(r,n,function(){return r.bindBuffer(r.PIXEL_PACK_BUFFER,o)});var a=16*e*t;return ue(r,n,function(){return r.bufferData(r.PIXEL_PACK_BUFFER,a,r.STREAM_READ)}),ue(r,n,function(){return r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,0)}),ue(r,n,function(){return r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}),o}function kC(r,n,e){var t=r,i=new Float32Array(e);return t.bindBuffer(t.PIXEL_PACK_BUFFER,n),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),i}function IC(r,n,e,t,i){var o=Hh(e,t),a=o[0],s=o[1],c=new Uint8Array(e*t*4);return ue(r,n,function(){return r.readPixels(0,0,a,s,i.downloadTextureFormat,r.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function MC(r,n,e,t,i,o,a,s){var c=r,l=new Float32Array(function(d,u){var h=jl(d,u);return h[0]*h[1]*4}(o,a));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function RC(r,n,e,t){var i=new Float32Array(e*t*4);return ue(r,n,function(){return r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,i)}),i}var OF=Object.freeze({createVertexShader:gC,createVertexBuffer:vC,createIndexBuffer:bC,createFloat32MatrixTexture:_C,createFloat16MatrixTexture:yC,createUnsignedBytesMatrixTexture:xC,createPackedMatrixTexture:wC,createFloat16PackedMatrixTexture:CC,bindVertexProgramAttributeStreams:DC,uploadDenseMatrixToTexture:EC,uploadPixelDataToTexture:SC,createBufferFromOutputTexture:AC,downloadFloat32MatrixFromBuffer:kC,downloadByteEncodedFloatMatrixFromOutputTexture:IC,downloadPackedMatrixFromBuffer:MC,downloadMatrixFromPackedOutputTexture:RC}),TC=function(){function r(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=U().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,b1(e,n)):this.gl=ai(e);var t="WEBGL_color_buffer_float";if(U().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Al(this.gl,this.debug,"OES_texture_float"),ar(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Al(this.gl,this.debug,"OES_texture_half_float");else if(U().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(t),ar(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Al(this.gl,this.debug,"EXT_color_buffer_half_float");else if(U().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(t="EXT_color_buffer_float",ar(this.gl,t))this.colorBufferFloatExtension=this.gl.getExtension(t);else{if(!ar(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=vC(this.gl,this.debug),this.indexBuffer=bC(this.gl,this.debug),this.framebuffer=I1(this.gl,this.debug),this.textureConfig=bv(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(r.prototype,"debug",{get:function(){return U().getBool("DEBUG")},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ue(e,this.debug,function(){return e.finish()}),ue(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ue(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),ue(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ue(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ue(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},r.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),_C(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),yC(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),xC(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),SC(this.gl,this.debug,n,e)},r.prototype.uploadDenseMatrixToTexture=function(n,e,t,i){this.throwIfDisposed(),EC(this.gl,this.debug,n,e,t,i,this.textureConfig)},r.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),CC(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),wC(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(ev(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ue(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},r.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,t){var i=this;return this.downloadMatrixDriver(n,function(){return IC(i.gl,i.debug,e,t,i.textureConfig)})},r.prototype.downloadPackedMatrixFromBuffer=function(n,e,t,i,o,a){return MC(this.gl,n,0,0,0,o,a,this.textureConfig)},r.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return kC(this.gl,n,e)},r.prototype.createBufferFromTexture=function(n,e,t){this.bindTextureToFrameBuffer(n);var i=AC(this.gl,this.debug,e,t,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},r.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},r.prototype.createFence=function(n){var e,t,i=this;if(U().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),t=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),t=function(){return i.isQueryAvailable(e,U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):t=function(){return!0};return{query:e,isFencePassed:t}},r.prototype.downloadMatrixFromPackedTexture=function(n,e,t){var i=this;return this.downloadMatrixDriver(n,function(){return RC(i.gl,i.debug,e,t)})},r.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,t=w1(e,this.debug,n),i=gC(e,this.debug),o=C1(e,this.debug);return ue(e,this.debug,function(){return e.attachShader(o,i)}),ue(e,this.debug,function(){return e.attachShader(o,t)}),D1(e,this.debug,o),this.debug&&Ch(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=DC(e,this.debug,this.program,this.vertexBuffer)),o},r.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&ue(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},r.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Ch(this.gl,this.debug,this.program),ue(this.gl,this.debug,function(){return e.gl.useProgram(n)})},r.prototype.getUniformLocation=function(n,e,t){return t===void 0&&(t=!0),this.throwIfDisposed(),t?R1(this.gl,this.debug,n,e):T1(this.gl,n,e)},r.prototype.getAttributeLocation=function(n,e){var t=this;return this.throwIfDisposed(),ue(this.gl,this.debug,function(){return t.gl.getAttribLocation(n,e)})},r.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},r.prototype.setInputMatrixTexture=function(n,e,t){this.throwIfDisposed(),this.throwIfNoProgram(),F1(this.gl,this.debug,this.program,n,e,t)},r.prototype.setOutputMatrixTexture=function(n,e,t){this.setOutputMatrixTextureDriver(n,t,e)},r.prototype.setOutputPackedMatrixTexture=function(n,e,t){this.throwIfDisposed();var i=jl(e,t),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},r.prototype.setOutputMatrixWriteRegion=function(n,e,t,i){this.setOutputMatrixWriteRegionDriver(t,n,i,e)},r.prototype.setOutputPackedMatrixWriteRegion=function(n,e,t,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},r.prototype.debugValidate=function(){this.program!=null&&Ch(this.gl,this.debug,this.program),kl(this.gl)},r.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),ue(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},r.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),ue(this.gl,this.debug,function(){return n.gl.finish()})},r.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Al(this.gl,this.debug,U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},r.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},r.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},r.prototype.beginQuery=function(){if(U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),t=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,t),t}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},r.prototype.endQuery=function(){if(U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,t=this.getQueryTimerExtensionWebGL2();e.endQuery(t.TIME_ELAPSED_EXT)}},r.prototype.waitForQueryAndGetTime=function(n){return me(this,void 0,void 0,function(){var e=this;return ge(this,function(t){switch(t.label){case 0:return[4,qg(function(){return e.disposed||e.isQueryAvailable(n,U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return t.sent(),[2,this.getQueryTime(n,U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},r.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var t=this.gl;return t.getQueryParameter(n,t.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},r.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var t=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=t.getQueryParameter(n,t.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},r.prototype.pollFence=function(n){var e=this;return new Promise(function(t){e.addItemToPoll(function(){return n.isFencePassed()},function(){return t()})})},r.prototype.pollItems=function(){for(var n=function(t){for(var i=0;i<t.length&&t[i]();++i);return i-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},r.prototype.addItemToPoll=function(n,e){var t=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||qg(function(){return t.pollItems(),t.itemsToPoll.length===0})},r.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),Dh(this.gl,this.debug,n,this.framebuffer),this.debug&&kl(this.gl)},r.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Dh(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&kl(this.gl)):ev(this.gl,this.debug,this.framebuffer)},r.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var t=e();return this.unbindTextureToFrameBuffer(),t},r.prototype.setOutputMatrixTextureDriver=function(n,e,t){this.throwIfDisposed();var i=this.gl;Dh(i,this.debug,n,this.framebuffer),this.debug&&kl(i),this.outputTexture=n,ue(i,this.debug,function(){return i.viewport(0,0,e,t)}),ue(i,this.debug,function(){return i.scissor(0,0,e,t)})},r.prototype.setOutputMatrixWriteRegionDriver=function(n,e,t,i){var o=this;this.throwIfDisposed(),ue(this.gl,this.debug,function(){return o.gl.scissor(n,e,t,i)})},r.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},r.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},r}();function Mw(r,n){if(r.length!==n.length)throw Error("Binary was compiled with "+r.length+" inputs, but was executed with "+n.length+" inputs");r.forEach(function(e,t){var i=e.logicalShape,o=n[t],a=o.shape;if(!Jt(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!Jt(s,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+c+" must match")}})}var NF=function(r,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;for(var t=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,c=e.outWidth,l=e.dilationWidth,d=e.dilationHeight,u=e.dataFormat,h=s.left,f=s.top,p=i*t,m=Rn(),g=u==="channelsLast",v=g?0:1,_=g?1:2,y="",b=0;b<=1;b++)for(var x=0;x<=1;x++)y+=`
          blockIndex = rc.y + `+x+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+r[1]+" && pos < "+r[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+a+" - "+f+`;
            d0 = offsetY + `+d+" * (pos / "+p+`);

            if(d0 < `+n[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+n[_]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+x)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+x)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+m.output+` = result;
      }
    `},PF=function(r,n,e,t,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=r[3]-1;this.outputShape=r;var c="float("+e+") + float("+t+") * sum";o=i===.5?"inversesqrt("+c+")":i===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},LF=function(r,n,e,t,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=e,this.alpha=t,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+t+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+t+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},BF=function(r,n,e,t,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=n,s=r[3]-1;this.outputShape=r;var c="float("+e+") + float("+t+") * sum";o=i===.5?"inversesqrt("+c+")":i===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},VF=function(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;var n=r.strideHeight,e=r.strideWidth,t=r.dilationHeight,i=r.effectiveFilterHeight,o=r.effectiveFilterWidth,a=i-1-r.padInfo.top,s=o-1-r.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+t+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},zF=function(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;var n=r.strideDepth,e=r.strideHeight,t=r.strideWidth,i=r.dilationDepth,o=r.dilationHeight,a=r.dilationWidth,s=r.effectiveFilterDepth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,d=s-1-r.padInfo.front,u=c-1-r.padInfo.top,h=l-1-r.padInfo.left,f=s*c*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+u+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+r.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+t+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+f+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Mg=function(r,n,e,t,i,o,a){e===void 0&&(e=!1),t===void 0&&(t=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?r[1]:r[2],c=Math.ceil(s/2),l=e?"i * 2, rc.y":"rc.y, i * 2",d=t?"rc.z, i * 2":"i * 2, rc.z",u=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=t?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";o&&(f=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+f+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+u[0]+" * "+h[0]+`);
          result += (`+u[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},UF=function(){function r(n,e,t){this.variableNames=["probs"],this.outputShape=[n,t],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;return function(t,i){e.seedLoc==null&&(e.seedLoc=t.getUniformLocation(i,"seed")),t.gl.uniform1f(e.seedLoc,n)}},r}(),jF=function(r,n,e,t){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+t+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},WF=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r;var n=r.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=qn("rc",n),t=Mt(n),i=function(s,c,l){if(s===1)return"rc > "+c[0];for(var d="",u=s-2;u<s;u++)d+=l[u]+" >= "+c[u],u<s-1&&(d+="||");return d}(n,r,e),o=function(s,c,l,d){if(s===1)return"";var u=d.slice(-2);return`
    int r = `+u[0]+`;
    int c = `+u[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+l+`;
  `}(n,r[r.length-1],r[r.length-2],e),a=function(s,c){var l=s.length,d=function(u,h){for(var f=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<u;v++)g=h[h.length-1-v]+","+g;f.push(g)}return f}(l,c);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(r,e);this.userCode=`
        void main() {
          `+t+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},HF=function(r,n,e){this.variableNames=["x"],this.outputShape=n.map(function(c,l){return c[0]+r[l]+c[1]});var t=r.length,i=Mt(t),o=n.map(function(c){return c[0]}).join(","),a=n.map(function(c,l){return c[0]+r[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t);this.userCode=t!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},GF=function(r,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(g,v){return g[0]+r[v]+g[1]});for(var t=r.length,i=Mt(t),o=n.map(function(g){return g[0]}).join(","),a=n.map(function(g,v){return g[0]+r[v]}).join(","),s=qn("rc",t),c=qn("source",t),l=s[t-1]+" < "+this.outputShape[t-1],d=t===1?"source":"vec2("+c.slice(-2).join()+")",u=[i+" rc = outputLoc;",s[t-1]+` += 1;
       if(`+l+`) {
      `,t===1?"":`}
       rc = outputLoc;
       `+s[t-2]+` += 1;
       if(`+s[t-2]+" < "+this.outputShape[t-2]+") {",t===1?"":"  "+s[t-1]+` += 1;
         if(`+l+") {"],h=t===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=t===1?2:4;p<m;p++)f+=`
        `+u[p]+`
        if (`+h+`) {
          result[`+p+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;f+=t===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+f+`
        setOutput(result);
      }
    `},Rg=function(r,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var t=r.filterWidth,i=r.strideHeight,o=r.strideWidth,a=r.dilationHeight,s=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,d=r.padInfo.top,u=r.padInfo.left;this.outputShape=r.outShape;var h=n==="avg",f="0.0";if(h||(f="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+d+", "+u+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(p="avgValue / count");var m=4*Math.floor(t/4),g=t%4,v=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float initializationValue = `+f+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+r.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+f+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+r.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},Tg=function(r,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterDepth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.front,p=r.padInfo.top,m=r.padInfo.left;this.outputShape=r.outShape;var g=n==="avg",v="0.0";if(g||(v="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+r.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+u+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+r.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+r.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+u+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(_="avgValue / count");var y=4*Math.floor(t/4),b=t%4,x=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+r.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+r.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+u+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+x+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+x+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},qF=function(r,n){this.variableNames=["x"];var e=r.windowSize,t=r.batchSize,i=r.inSize,o=Math.ceil(i/e);this.outputShape=[t,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var l=4*Math.floor(e/4),d=e%4,u=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";n==="all"?(a="1.0",u=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",u=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var f="";i%e>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+f+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+u+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+u+`
        } else if (`+(d===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+u+`
        } else if (`+(d===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+u+`
        }
        setOutput(`+c+`);
      }
    `},YF=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;for(var e="",t=0;t<4;t++){var i="thisRC = rc;";t%2==1&&(i+="thisRC.z += 1;"),t>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(t>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+t+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(t>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+la(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+Tv(r)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+r[1]+`;
        int cols = `+r[2]+`;

        `+e+`

        setOutput(result);
      }
    `},$F=function(r,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var t=n.shape,i=t[1],o=t[2],a=r.shape,s=a[1],c=a[2],l=[e&&s>1?i-1:i,e&&c>1?o-1:o],d=[e&&s>1?s-1:s,e&&c>1?c-1:c],u=l[0]/d[0],h=l[1]/d[1],f=1/u,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+u+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},KF=function(r,n,e,t){this.variableNames=["A"],this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},XF=function(r,n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`,
          `+c[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},QF=function(r,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var t=n.shape,i=t[1],o=t[2],a=r.shape,s=a[1],c=a[2],l=[e&&s>1?i-1:i,e&&c>1?o-1:o],d=[e&&s>1?s-1:s,e&&c>1?c-1:c],u=l[0]/d[0],h=l[1]/d[1],f=1/u,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+u+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},ZF=function(r,n,e,t){this.variableNames=["A"],this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e],d=t?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},JF=function(r,n){this.variableNames=["x"];var e=r.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=r,e!==1){var t=r.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&r[s]!==1?r[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Mt(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+t+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+r[0]+` - coord - 1));
        }
      `},eO=function(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=r.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=r;var t=qn("rc",e),i=t[e-1]+" + 1 < "+this.outputShape[e-1],o=t[e-2]+" + 1 < "+this.outputShape[e-2],a=Mt(e);function s(c){var l=r.map(function(d,u){return function(h,f){return n.indexOf(h)!==-1&&r[h]!==1?r[h]+" - "+f[h]+" - 1":""+f[h]}(u,c)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+r[0]+` - rc - 1),
            `+r[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+r[0]+` - (rc  + 1) - 1),
                `+r[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return s(c)}(t.slice())+`;
          if(`+i+`){
            result.g = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",s(c)}(t.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(c){return c[e-2]="("+c[e-2]+" + 1)",s(c)}(t.slice())+`;
            if(`+i+`) {
              result.a = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",c[e-2]="("+c[e-2]+" + 1)",s(c)}(t.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Rw=function(r,n,e,t,i,o,a){a===void 0&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Mt(i.length),c=Mt(o.length),l="";e===1?l="i":e===2&&(l="i, j");var d="getIndices("+l+")",u="";t===1?u="i":t===2&&(u="i, coords[1]");var h="getUpdates("+u+")",f=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+r+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+f+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},tO=function(r,n){this.variableNames=["x","segmentIds"];var e=r.windowSize,t=r.batchSize,i=r.inSize,o=r.numSegments,a=o*Math.ceil(i/e);this.outputShape=[t,a];var s=4*Math.floor(e/4),c=e%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var u="";i%e>0&&(u=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+u+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},nO=function(r,n,e){var t,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",t="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],c=0;c<n.length;c++)s.push(""+o[c]),c<r&&a.push(""+o[c]);t=a.join(),i=s.join()}var l=Mt(e);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+t+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},rO=function(){function r(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,t=Mt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return Fg.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);e=`
        `+t+` sourceLoc;
        `+t+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+Fg[s]+" = start["+s+"] + coords."+Fg[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(t,i){e.startLoc==null&&(e.startLoc=t.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||t.gl.uniform1iv(e.startLoc,n)}},r}(),Fg=["x","y","z","w","u","v"],iO=function(){function r(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=Mt(this.rank),t=qn("coords",this.rank),i=qn("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+t[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+t[this.rank-1]+`;
      if (++`+t[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+t[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(d,u){return"start["+u+"]"}).join()+");":n.map(function(d,u){return i[u]+" = "+t[u]+" + start["+u+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+c+`
        setOutput(result);
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(t,i){e.startLoc==null&&(e.startLoc=t.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||t.gl.uniform1iv(e.startLoc,n)}},r}(),oO=function(r,n,e){this.variableNames=["x"],this.outputShape=e;var t=e.length,i=Mt(e.length),o=Mt(e.length),a="";if(t===1)a="coords * strides + begin";else{var s=0;a=e.map(function(c,l){return s++,e.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+r+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},aO=function(){function r(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return r.prototype.acquireTexture=function(n,e,t){var i,o=Tw(e,t),a=Fw(n,o,t);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===ir.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===ir.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===ir.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===ir.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===ir.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},r.prototype.releaseTexture=function(n,e,t,i){if(this.freeTextures!=null){var o=Fw(e,Tw(t,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},r.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},r.prototype.getNumUsedTextures=function(){return this.numUsedTextures},r.prototype.getNumFreeTextures=function(){return this.numFreeTextures},r.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(t){n.gpgpu.deleteMatrixTexture(t)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},r}();function Tw(r,n){if(r===or.UPLOAD)return ir.PACKED_2X2_FLOAT32;if(r===or.RENDER||r==null)return function(e){return U().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ir.PACKED_2X2_FLOAT32:ir.UNPACKED_FLOAT32:e?ir.PACKED_2X2_FLOAT16:ir.UNPACKED_FLOAT16}(n);if(r===or.DOWNLOAD||r===or.PIXELS)return ir.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+r)}function Fw(r,n,e){return r[0]+"_"+r[1]+"_"+n+"_"+e}var sO=function(r,n){this.variableNames=["A"];for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[t]*n[t];this.outputShape=e,this.rank=e.length;var i=Mt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],d=0;d<a.length;d++)l.push("imod("+c[d]+", "+a[d]+")");return l.join()}(r);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},cO=function(r,n){this.variableNames=["A"];for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[n[t]];this.outputShape=e,this.rank=e.length;var i=Mt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),d=0;d<a.length;d++)l[a[d]]=c[d];return l.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},lO=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[n[t]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Mt(this.rank),o=uC("rc",this.rank),a=new Array(this.rank);for(t=0;t<n.length;t++)a[n[t]]=o[t];var s="vec2("+a.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+e[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+c+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+c+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},Fv=1.7580993408473768,Ov=1.0507009873554805,Je=function(r,n){this.variableNames=["A"],this.outputShape=r,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},jr="if (isnan(x)) return x;",dO="return x;",Ow="return abs(x);",FC=jr+`
  return (x < 0.0) ? 0.0 : x;
`,OC=jr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,NC="return (x >= 0.0) ? x : (exp(x) - 1.0);",uO=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Fv+`;
  float scale = `+Ov+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Nw="return -x;",Pw="return ceil(x);",Lw="return floor(x);",Bw="return exp(x);",Vw="return exp(x) - 1.0;",hO=jr+`
  return sin(x);
`,fO=jr+`
  return cos(x);
`,pO=jr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,mO=jr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,gO=jr+`
  return atan(x);
`,vO=jr+"return log(x + sqrt(x * x + 1.0));",bO=jr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,_O=jr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,ph="return x;",yO="return x;",PC=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LC=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,BC=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Sl=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},xO=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r;var n=r.length,e=qn("rc",n),t=Mt(n),i=function(s,c){if(s===1)return"rc";for(var l="",d=0;d<s;d++)l+=c[d],d<s-1&&(l+=",");return l}(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+t+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},mh={};function gh(r,n){if(n===void 0&&(n=!1),r==="linear")return n?yO:dO;if(r==="relu")return n?PC:FC;if(r==="elu")return n?BC:NC;if(r==="relu6")return n?LC:OC;if(r==="prelu")return n?mC:pC;throw new Error("Activation "+r+" has not been implemented for the WebGL backend.")}var wO=600,VC=function(r){function n(e){var t,i=r.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!U().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=ai(U().getNumber("WEBGL_VERSION"));i.binaryCache=((t=U().getNumber("WEBGL_VERSION"))in mh||(mh[t]={}),mh[t]),i.gpgpu=new TC(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new aO(i.gpgpu),i.numMBBeforeWarning=U().global.screen==null?1024:U().global.screen.height*U().global.screen.width*window.devicePixelRatio*wO/1024/1024,i.texData=new oC(i,O),i}return Vr(n,r),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,t,i){if(U().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:t,dtype:i,values:e,usage:or.UPLOAD}),o},n.prototype.move=function(e,t,i,o){if(U().getBool("DEBUG")&&this.checkNumericalProblems(t),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:t,usage:or.UPLOAD})},n.prototype.readSync=function(e){var t=this.texData.get(e),i=t.values,o=t.dtype,a=t.complexTensors,s=t.slice,c=t.shape,l=t.isPacked;if(s!=null){var d=void 0;d=l?new Sl(c,ph):new Je(c,ph);var u=this.runWebGLProgram(d,[{dataId:e,shape:c,dtype:o}],o),h=this.readSync(u.dataId);return this.disposeData(u.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var f,p,m=this.activeTimers!=null;return m&&(f=Pr()),o==="complex64"?p=av(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=Pr()-f),this.convertAndCacheOnCPU(e,p)},n.prototype.read=function(e){return me(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,x,C,k,I;return ge(this,function(S){switch(S.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(D){return t.push(D)})];if(i=this.texData.get(e),o=i.values,a=i.shape,s=i.slice,c=i.dtype,l=i.complexTensors,d=i.isPacked,s!=null)return u=void 0,u=d?new Sl(a,ph):new Je(a,ph),h=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:c}],c),f=this.read(h.dataId),this.disposeData(h.dataId),[2,f];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!U().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&U().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,c!=="complex64"&&U().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),g=this.texData.get(m.dataId),p=(I=this.gpgpu).createBufferFromTexture.apply(I,[g.texture].concat(Ml(a)))),this.pendingRead.set(e,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:S.sent(),S.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return _=S.sent(),y=_[0],b=_[1],v=av(y,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(e):(x=ve(a),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,x)),S.label=5;case 5:return m!=null&&this.disposeData(m.dataId),C=this.convertAndCacheOnCPU(e,v),k=this.pendingRead.get(e),this.pendingRead.delete(e),k.forEach(function(D){return D(C)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,C]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];if(!_1(i))throw U().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var t,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.isPacked,c=ve(o);if(U().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),d=this.texData.get(l.dataId),u=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[d.texture].concat(Ml(o))).subarray(0,c);return this.disposeData(l.dataId),u}var h=U().getBool("WEBGL_PACK")&&s===!0,f=h?Eh(o):o,p=h?new SF(f):new EF(f),m=this.runWebGLProgram(p,[{shape:f,dtype:a,dataId:e}],"float32"),g=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,c);return this.disposeData(m.dataId),v},n.prototype.time=function(e){return me(this,void 0,void 0,function(){var t,i,o,a,s,c,l;return ge(this,function(d){switch(d.label){case 0:return t=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),a=Li(this.activeTimers.map(function(u){return u.query})).filter(function(u){return u!=null}),s=Li(this.activeTimers.map(function(u){return u.name})).filter(function(u){return u!=null}),this.activeTimers=t,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=d.sent(),c.kernelMs=r1(l),c.getExtraProfileInfo=function(){return l.map(function(u,h){return{name:s[h],ms:u}}).map(function(u){return u.name+": "+u.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Pr(),endMs:null}},n.prototype.endTimer=function(e){return U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Pr(),e)},n.prototype.getQueryTime=function(e){return me(this,void 0,void 0,function(){var t;return ge(this,function(i){return U().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;t!=null&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var t=this.texData.get(e),i=t.texture,o=t.dtype,a=t.texShape,s=t.usage,c=t.isPacked,l=t.slice,d=l&&l.origDataId||e,u=this.dataRefCount.get(d);u>1?this.dataRefCount.set(d,u-1):(this.dataRefCount.delete(d),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,c)));var h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return U().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=O.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,t){var i=this;return t===void 0&&(t=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<t})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,t){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:O.keep(e.clone()),imag:O.keep(t.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,t,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,i);if(ve(i)===0)return un([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,a=Dv(e.shape,t,i);if(o||!a){var s=U().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iO(i):new rO(i),c=s.getCustomSetupFunc(t);return this.compileAndRun(s,[e],null,c)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,i)},n.prototype.shallowSlice=function(e,t,i){var o=this.texData.get(e.dataId),a=this.makeOutput(i,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=e.dtype;var c=Ev(t,e.strides);o.slice&&(c+=o.slice.flatOffset),s.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},n.prototype.stridedSlice=function(e,t,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,i,o);var a=$h(t,i,o);if(a.some(function(c){return c===0}))return un([],a);var s=new oO(t,o,a);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,t){var i=U().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eO(e.shape,t):new JF(e.shape,t);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,t){if(e[0].dtype==="complex64"){var i=e.map(function(f){return _r(f)}),o=e.map(function(f){return ri(f)});return yn(this.concat(i,t),this.concat(o,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(e.length===1)return e[0];if(e.length>U().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),t),c=this.concat(e.slice(a),t);return this.concat([s,c],t)}if(U().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var l=new uF(e.map(function(f){return f.shape}),t);return this.compileAndRun(l,e)}var d=pa(e.map(function(f){return f.shape}),t),u=e.map(function(f){return f.as2D(-1,ve(f.shape.slice(t)))}),h=new dF(u.map(function(f){return f.shape}));return this.compileAndRun(h,u).reshape(d)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Nw,e.dtype);var t=new Je(e.shape,Nw);return this.compileAndRun(t,[e])},n.prototype.batchMatMul=function(e,t,i,o){var a=i?e.shape[2]:e.shape[1],s=o?t.shape[1]:t.shape[2],c=i?e.shape[1]:e.shape[2],l=e.shape[0];if((a===1||s===1)&&c>1e3){i&&(e=e.transpose([0,2,1])),o&&(t=t.transpose([0,2,1]));var d=s===1?e:e.as3D(l,c,1),u=s===1?2:1,h=s===1?t.as3D(l,1,c):t;return this.multiply(d,h).sum(u,!0)}var f=dn(e.dtype,t.dtype),p=new Mg(e.shape,[l,a,s],i,o);return this.compileAndRun(p,[e,t],f)},n.prototype.fusedBatchMatMul=function(e){var t=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=o?t.shape[2]:t.shape[1],u=a?i.shape[1]:i.shape[2],h=t.shape[0],f=dn(t.dtype,i.dtype),p=s!=null,m=l!=null,g=c?gh(c,!0):null,v=new Mg(t.shape,[h,d,u],o,a,p,g,m),_=[t,i];return s&&_.push(s),l&&_.push(l),this.compileAndRun(v,_,f)},n.prototype.multiply=function(e,t){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=new Cw(oF,e.shape,t.shape),s=new Cw(aF,e.shape,t.shape),c=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(t,o.complexTensors.real),this.makeComplexComponentTensorInfo(t,o.complexTensors.imag)],l=this.compileAndRun(a,c),d=this.compileAndRun(s,c),u=this.complex(l,d);return l.dispose(),d.dispose(),u}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Dw,e.dtype);var h=new Gt(Dw,e.shape,t.shape);return this.compileAndRun(h,[e,t],e.dtype)},n.prototype.batchNormalization=function(e,t,i,o,a,s){var c=[e,t,i],l=null;s!=null&&(l=s.shape,c.push(s));var d=null;if(a!=null&&(d=a.shape,c.push(a)),U().getBool("WEBGL_PACK_NORMALIZATION")){var u=new iF(e.shape,t.shape,i.shape,l,d,o);return this.compileAndRun(u,c)}var h=new rF(e.shape,t.shape,i.shape,l,d,o);return this.compileAndRun(h,c)},n.prototype.localResponseNormalization4D=function(e,t,i,o,a){var s=U().getBool("WEBGL_PACK_NORMALIZATION")?new BF(e.shape,t,i,o,a):new PF(e.shape,t,i,o,a);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,t,i,o,a,s,c){var l=new LF(t.shape,o,a,s,c);return this.compileAndRun(l,[t,i,e])},n.prototype.tile=function(e,t){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(a){return Fl(a)});return lC(Ke(e.shape,e.dtype,i),t)}var o=new sO(e.shape,t);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,t,i){var o=U().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GF(e.shape,t,i):new HF(e.shape,t,i);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var i=U().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lO(e.shape,t):new cO(e.shape,t);return this.compileAndRun(i,[e])},n.prototype.gather=function(e,t,i){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,i);var o=new TF(e.shape,t.size,i);return this.compileAndRun(o,[e,t])},n.prototype.batchToSpaceND=function(e,t,i){A(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=t.reduce(function(u,h){return u*h}),a=Ph(e.shape,t,o),s=Lh(a.length,t.length),c=Bh(e.shape,t,o),l=Z1(i,t.length),d=J1(c,i,t.length);return e.reshape(a).transpose(s).reshape(c).slice(l,d)},n.prototype.spaceToBatchND=function(e,t,i){A(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=t.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,i);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var c=e.pad(a),l=Ph(c.shape,t,o,!1),d=Lh(l.length,t.length,!1),u=Bh(c.shape,t,o,!1);return c.reshape(l).transpose(d).reshape(u)},n.prototype.reduce=function(e,t,i){var o=e.shape[0],a=e.shape[1],s=Sh(a),c=new qF({windowSize:s,inSize:a,batchSize:o},t),l=this.compileAndRun(c,[e],i);return l.shape[1]===1?l:this.reduce(l,t,i)},n.prototype.argReduce=function(e,t,i){i===void 0&&(i=null);var o=e.shape[0],a=e.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=Sh(a),c=new $T({windowSize:s,inSize:a,batchSize:o},t,i==null),l=[e];i!=null&&l.push(i);var d=this.compileAndRun(c,l,"int32");return d.shape[1]===1?d:this.argReduce(e,t,d)},n.prototype.argReducePacked=function(e,t,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,a=Sh(o[o.length-1]),s=new eF(o,a,t,i==null),c=i==null?[e]:[e,i],l=this.compileAndRun(s,c,"int32");return l.rank===e.rank?this.argReducePacked(e,t,l):l},n.prototype.sum=function(e,t){Gn("sum",t,e.rank);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a),c=Eg(e.dtype);return this.reduce(s,"sum",c).reshape(o)},n.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a),c=Eg(e.dtype);return this.reduce(s,"prod",c).reshape(o)},n.prototype.unsortedSegmentSum=function(e,t,i){var o=0,a=zr([o],e.rank),s=e;a!=null&&(s=e.transpose(a),o=Ur(1,e.rank)[0]);var c=function(f,p,m){for(var g=[],v=f.length,_=0;_<v;_++)_!==p?g.push(f[_]):g.push(m);return g}(s.shape,o,i),l=ve([s.shape[o]]),d=s.as2D(-1,l),u=Eg(e.dtype),h=this.segOpCompute(d,"unsortedSegmentSum",t,u,i).reshape(c);return a!=null&&(h=h.transpose(Gh(a))),h},n.prototype.segOpCompute=function(e,t,i,o,a){var s=e.shape[0],c=e.shape[1],l=function(h,f){var p,m=!1;for(h<=Cv?(p=h,m=!0):p=Th(h,Math.floor(Math.sqrt(h)));!m;)p>f||p===h?m=!0:p=Th(h,p+1);return p}(c,a),d=new tO({windowSize:l,inSize:c,batchSize:s,numSegments:a},t),u=this.compileAndRun(d,[e,i],o);return u.shape[1]===a?u:(i=Nh(0,a).tile([c/l]),this.segOpCompute(u,t,i,o,a))},n.prototype.argMinMaxReduce=function(e,t,i){var o=[t];if(Gn("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!U().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=xn(e.shape,o),s=a[0],c=ve(a[1]),l=e.as2D(-1,c);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},n.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},n.prototype.cumsum=function(e,t,i,o){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new yF(e.shape,i,o);return this.compileAndRun(a,[e])},n.prototype.equal=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(equal(a, b));
`,"bool");var i=new Gt("return float(a == b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.notEqual=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Gt("return float(a != b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Gt("return float(a < b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.lessEqual=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Gt("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Gt("return float(a > b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.greaterEqual=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Gt("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.logicalNot=function(e){var t=new Je(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},n.prototype.logicalAnd=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Gt("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.logicalOr=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Gt("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.select=function(e,t,i){var o=new nO(e.rank,t.shape,t.rank);return this.compileAndRun(o,[e,t,i],dn(t.dtype,i.dtype))},n.prototype.where=function(e){Fh("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Rv(e.shape,t)},n.prototype.topk=function(e,t,i){return dC(e.dataSync(),e.shape,e.dtype,t)},n.prototype.min=function(e,t){Gn("min",t,e.rank);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Gt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.mod=function(e,t){var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Gt(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Gn("max",t,e.rank);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Gt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.all=function(e,t){Gn("all",t,e.rank);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,t){Gn("any",t,e.rank);var i=xn(e.shape,t),o=i[0],a=ve(i[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.realDivide=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Gt(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,t.shape);return this.compileAndRun(i,[e,t],"float32")},n.prototype.floorDiv=function(e,t){if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Gt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,t.shape);return this.compileAndRun(i,[e,t],"int32")},n.prototype.add=function(e,t){if(e.dtype==="complex64"&&t.dtype==="complex64")return this.complexSeparableBinaryOp(e,t,kg);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var i=dn(e.dtype,t.dtype);if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,kg,i);var o=new Gt(kg,e.shape,t.shape);return this.compileAndRun(o,[e,t],i)},n.prototype.packedUnaryOp=function(e,t,i){var o=new Sl(e.shape,t);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,t,i,o,a){a===void 0&&(a=!1);var s=new Oi(i,e.shape,t.shape,a);return this.compileAndRun(s,[e,t],o)},n.prototype.complexSeparableBinaryOp=function(e,t,i){var o=this,a=this.texData.get(e.dataId),s=this.texData.get(t.dataId),c=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(h){var f=h[0],p=h[1],m=o.makeComplexComponentTensorInfo(e,f),g=o.makeComplexComponentTensorInfo(t,p),v=new Gt(i,e.shape,t.shape);return o.compileAndRun(v,[m,g],dn(f.dtype,p.dtype))}),l=c[0],d=c[1],u=this.complex(l,d);return l.dispose(),d.dispose(),u},n.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>U().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),i=this.addN(e.slice(0,t)),o=this.addN(e.slice(t));return this.addN([i,o])}var a=e.map(function(l){return l.dtype}).reduce(function(l,d){return dn(l,d)}),s=e.map(function(l){return l.shape}),c=U().getBool("WEBGL_PACK")?new YT(e[0].shape,s):new qT(e[0].shape,s);return this.compileAndRun(c,e,a)},n.prototype.subtract=function(e,t){if(e.dtype==="complex64"&&t.dtype==="complex64")return this.complexSeparableBinaryOp(e,t,Ig);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var i=dn(e.dtype,t.dtype);if(U().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Ig,e.dtype);var o=new Gt(Ig,e.shape,t.shape);return this.compileAndRun(o,[e,t],i)},n.prototype.pow=function(e,t){var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Gt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,t.shape),o=dn(e.dtype,t.dtype);return this.compileAndRun(i,[e,t],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Pw,e.dtype);var t=new Je(e.shape,Pw);return this.compileAndRun(t,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Lw,e.dtype);var t=new Je(e.shape,Lw);return this.compileAndRun(t,[e])},n.prototype.sign=function(e){var t=new Je(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(t,[e])},n.prototype.isNaN=function(e){var t=new Je(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.isInf=function(e){var t=new Je(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.isFinite=function(e){var t=new Je(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.round=function(e){var t=new Je(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(t,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Bw,e.dtype);var t=new Je(e.shape,Bw);return this.compileAndRun(t,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Vw,e.dtype);var t=new Je(e.shape,Vw);return this.compileAndRun(t,[e])},n.prototype.softmax=function(e,t){var i=tn([t],e.shape),o=this.max(e,i),a=Ln(o.shape,i),s=this.subtract(e,o.reshape(a)),c=this.exp(s),l=this.sum(c,i).reshape(a);return this.realDivide(c,l)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var t=new Je(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(t,[e])},n.prototype.log1p=function(e){var t=new Je(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},n.prototype.sqrt=function(e){var t=new Je(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Je(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},n.prototype.reciprocal=function(e){var t=new Je(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},n.prototype.relu=function(e){var t;return t=U().getBool("WEBGL_PACK")?new Sl(e.shape,PC):new Je(e.shape,FC),this.compileAndRun(t,[e])},n.prototype.relu6=function(e){var t;return t=U().getBool("WEBGL_PACK")?new Sl(e.shape,LC):new Je(e.shape,OC),this.compileAndRun(t,[e])},n.prototype.prelu=function(e,t){var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(mC,e.shape,t.shape):new Gt(pC,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.elu=function(e){if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,BC,e.dtype);var t=new Je(e.shape,NC);return this.compileAndRun(t,[e])},n.prototype.eluDer=function(e,t){var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,t.shape):new Gt("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.selu=function(e){var t=new Je(e.shape,uO);return this.compileAndRun(t,[e])},n.prototype.int=function(e){var t=new Je(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},n.prototype.clip=function(e,t,i){var o,a=(o=U().getBool("WEBGL_PACK_CLIP")?new cF(e.shape):new sF(e.shape)).getCustomSetupFunc(t,i);return this.compileAndRun(o,[e],null,a)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(U().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ow,e.dtype);var t=new Je(e.shape,Ow);return this.compileAndRun(t,[e])},n.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),i=new lF(e.shape),o=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var t=new Je(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},n.prototype.softplus=function(e){var t=new Je(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(t,[e])},n.prototype.sin=function(e){var t=new Je(e.shape,hO);return this.compileAndRun(t,[e])},n.prototype.cos=function(e){var t=new Je(e.shape,fO);return this.compileAndRun(t,[e])},n.prototype.tan=function(e){var t=new Je(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},n.prototype.asin=function(e){var t=new Je(e.shape,pO);return this.compileAndRun(t,[e])},n.prototype.acos=function(e){var t=new Je(e.shape,mO);return this.compileAndRun(t,[e])},n.prototype.atan=function(e){var t=new Je(e.shape,gO);return this.compileAndRun(t,[e])},n.prototype.atan2=function(e,t){var i=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Gt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.sinh=function(e){var t=new Je(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(t,[e])},n.prototype.cosh=function(e){var t=new Je(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(t,[e])},n.prototype.tanh=function(e){var t=new Je(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(t,[e])},n.prototype.asinh=function(e){var t=new Je(e.shape,vO);return this.compileAndRun(t,[e])},n.prototype.acosh=function(e){var t=new Je(e.shape,bO);return this.compileAndRun(t,[e])},n.prototype.atanh=function(e){var t=new Je(e.shape,_O);return this.compileAndRun(t,[e])},n.prototype.erf=function(e){var t=new Je(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(t,[e])},n.prototype.step=function(e,t){var i=new Je(e.shape,function(o){return o===void 0&&(o=0),jr+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(t));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,t,i,o,a,s){var c=e.shape,l=this.texData.get(e.dataId),d=i.inChannels,u=c[0]*c[1]*c[2],h=i.outChannels,f=i.dataFormat==="channelsLast",p=(u===1||h===1)&&d>1e3,m=c[2]%2!=0&&!!l.isPacked;if(p||!U().getBool("WEBGL_LAZILY_UNPACK")||!U().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=f?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],v=this.reshape(e,[1,g,i.inChannels]),_=this.reshape(t,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:_,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var y=f?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),b={dataId:e.dataId,shape:[1,y,i.inChannels],dtype:e.dtype},x=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,A(Il(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var C=this.reshape(t,[1,i.inChannels,i.outChannels]),k=this.fusedBatchMatMul({a:b,b:C,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),I=this.texData.get(k.dataId);return A(I.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=x,I.shape=i.outShape,O.makeTensorFromDataId(k.dataId,i.outShape,k.dtype)},n.prototype.conv2dWithIm2Row=function(e,t,i,o,a,s){var c=i.filterWidth,l=i.filterHeight,d=i.inChannels,u=i.outWidth,h=i.outHeight,f=i.dataFormat==="channelsLast",p=c*l*d,m=h*u,g=[p,m],v=e.squeeze([0]),_=t.reshape([1,p,-1]),y=new NF(g,v.shape,i),b=this.compileAndRun(y,[v]).reshape([1,g[0],g[1]]),x=o!=null,C=s!=null,k=a?gh(a,!0):null,I=new Mg(b.shape,[1,m,i.outChannels],!0,!1,x,k,C),S=[b,_];o&&S.push(o),C&&S.push(s);var D=this.compileAndRun(I,S);return f?D.reshape([1,h,u,i.outChannels]):D.reshape([1,i.outChannels,h,u])},n.prototype.fusedConv2d=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(t,i,o,a,s,c);if(U().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,i,o,a,s,c);var l=a!=null,d=c!=null,u=s?gh(s,!1):null,h=new Ew(o,l,u,d),f=[t,i];return a&&f.push(a),c&&f.push(c),this.compileAndRun(h,f)},n.prototype.conv2d=function(e,t,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,t,i);if(U().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,t,i);var o=new Ew(i);return this.compileAndRun(o,[e,t])},n.prototype.conv2dDerInput=function(e,t,i){var o=new fF(i);return this.compileAndRun(o,[e,t])},n.prototype.conv2dDerFilter=function(e,t,i){var o=new hF(i);return this.compileAndRun(o,[e,t])},n.prototype.fusedDepthwiseConv2D=function(e){var t,i=e.input,o=e.filter,a=e.convInfo,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=U().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,u=c?gh(c,d):null,h=[i,o],f=s!=null,p=l!=null;return f&&h.push(s),p&&h.push(l),d?(t=new Aw(a,f,u,p),this.compileAndRun(t,h)):(t=new Sw(a,f,u,p),this.compileAndRun(t,h))},n.prototype.depthwiseConv2D=function(e,t,i){var o;return U().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new Aw(i),this.compileAndRun(o,[e,t])):(o=new Sw(i),this.compileAndRun(o,[e,t]))},n.prototype.depthwiseConv2DDerInput=function(e,t,i){var o=new vF(i);return this.compileAndRun(o,[e,t])},n.prototype.depthwiseConv2DDerFilter=function(e,t,i){var o=new gF(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3d=function(e,t,i){var o=new bF(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3dDerInput=function(e,t,i){var o=new mF(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3dDerFilter=function(e,t,i){var o=new pF(i);return this.compileAndRun(o,[e,t])},n.prototype.maxPool=function(e,t){var i=new Rg(t,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,t){var i=new Rg(t,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,t,i,o){var a=new Rg(o,"max",!0),s=this.compileAndRun(a,[t]),c=new VF(o),l=this.compileAndRun(c,[e,s],t.dtype);return s.dispose(),l},n.prototype.avgPoolBackprop=function(e,t,i){var o=new tF(i);return this.compileAndRun(o,[e],t.dtype)},n.prototype.cast=function(e,t){return Av(e,t,this)},n.prototype.unstack=function(e,t){for(var i=e.shape[t],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(o[a++]=e.shape[s]);var c=new Array(e.rank).fill(0),l=e.shape.slice();l[t]=1;var d=new Array(i);for(s=0;s<d.length;s++)c[t]=s,d[s]=this.slice(e,c,l).reshape(o);return d},n.prototype.avgPool3d=function(e,t){var i=new Tg(t,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,t,i){var o=new nF(i);return this.compileAndRun(o,[e],t.dtype)},n.prototype.maxPool3d=function(e,t){var i=new Tg(t,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,t,i,o){var a=new Tg(o,"max",!0),s=this.compileAndRun(a,[t]),c=new zF(o),l=this.compileAndRun(c,[e,s],t.dtype);return s.dispose(),l},n.prototype.reshape=function(e,t){var i=this.texData.get(e.dataId);if(i.isPacked&&!Il(e.shape,t)&&(i.texture===null||!Il(i.shape,t))){var o=this.packedReshape(e,t);return O.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return zh(e,t)},n.prototype.resizeBilinear=function(e,t,i,o){var a=U().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new XF(e.shape,t,i,o):new KF(e.shape,t,i,o);return this.compileAndRun(a,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,t,i){var o=new $F(e,t,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,t,i,o){var a=new ZF(e.shape,t,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,t,i){var o=new QF(e,t,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,t,i,o){var a=t?e:zn(e),s=a.shape[0],c=a.shape[1],l=new UF(s,c,i),d=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",d)},n.prototype.oneHot=function(e,t,i,o){var a=new jF(e.size,t,i,o);return this.compileAndRun(a,[e])},n.prototype.diag=function(e){var t=new DF(e.size);return this.compileAndRun(t,[e])},n.prototype.nonMaxSuppression=function(e,t,i,o,a){return Fh("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Iv(e.dataSync(),t.dataSync(),i,o,a)},n.prototype.cropAndResize=function(e,t,i,o,a,s){var c=new _F(e.shape,t.shape,o,a,s);return this.compileAndRun(c,[e,t,i],"float32")},n.prototype.depthToSpace=function(e,t,i){A(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var o=e.shape[0],a=i==="NHWC"?e.shape[1]:e.shape[2],s=i==="NHWC"?e.shape[2]:e.shape[3],c=i==="NHWC"?e.shape[3]:e.shape[1],l=a*t,d=s*t,u=c/(t*t),h=new CF(i==="NHWC"?[o,l,d,u]:[o,u,l,d],t,i);return this.compileAndRun(h,[e])},n.prototype.split=function(e,t,i){return cC(e,t,i)},n.prototype.scatterND=function(e,t,i){var o=Bl(0,e,i),a=o.sliceRank,s=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,u=[d/c,c],h=e.reshape([s,a]),f=t.reshape([s,c]);if(d===0)return zh(un([]),i);var p=re(0),m=new Rw(s,a,h.rank,f.rank,l,u);return this.compileAndRun(m,[f,h,p]).reshape(i)},n.prototype.sparseToDense=function(e,t,i,o){var a=Bl(0,e,i),s=a.sliceRank,c=a.numUpdates,l=a.strides,d=a.outputSize,u=new Rw(c,s,e.rank,t.rank,l,[d,1],!1);return this.compileAndRun(u,[t,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,t){var i=this.texData.get(e.dataId),o=new Iw(IF,e.shape,t),a=new Iw(MF,e.shape,t),s=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],c=this.compileAndRun(o,s),l=this.compileAndRun(a,s),d=this.complex(c,l).as2D(e.shape[0],e.shape[1]);return c.dispose(),l.dispose(),d},n.prototype.gatherND=function(e,t){var i=t.shape,o=i[i.length-1],a=wv(e,t),s=a[0],c=a[1],l=a[2],d=a[3],u=t.reshape([c,o]),h=e.reshape([e.size/l,l]),f=new FF(o,d,[c,l]);return this.compileAndRun(f,[h,u]).reshape(s)},n.prototype.fill=function(e,t,i){if((i=i||Ys(t))==="string"){var o=Tl(i,ve(e));return o.fill(t),O.makeTensor(o,e,i,this)}var a=new RF(e,t),s=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],i,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,t,i){return kv(e,t,i)},n.prototype.makeTensorInfo=function(e,t){var i=this.write(null,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}},n.prototype.makeOutput=function(e,t){var i=this.makeTensorInfo(e,t).dataId;return O.makeTensorFromDataId(i,e,t,this)},n.prototype.unpackTensor=function(e){var t=new xO(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},n.prototype.packTensor=function(e){var t=new WF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,t){var i=[Pl(e.shape)].concat(Ll(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},a=[Pl(t)].concat(Ll(t)),s=new YF(a,i),c=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}},n.prototype.decode=function(e){var t,i=this.texData.get(e),o=i.isPacked,a=i.shape,s=i.dtype,c=Eh(a);return t=o?new wF(c):new xF(c),{dtype:s,shape:a,dataId:this.runWebGLProgram(t,[{shape:c,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,t,i,o,a){var s=this;a===void 0&&(a=!1);var c=this.makeTensorInfo(e.outputShape,i),l=this.texData.get(c.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Nl.DENSE){var d=Ml(e.outputShape);l.texShape=d.map(function(y){return 2*y})}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ve(c.shape)===0)return l.values=Gs(c.dtype,0),c;var u=[],h=t.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(y.dataId);if(b.texture==null){if(!e.packedInputs&&ve(y.shape)<=U().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}else if(!!b.isPacked!=!!e.packedInputs)y=b.isPacked?s.unpackTensor(y):s.packTensor(y),u.push(y),b=s.texData.get(y.dataId);else if(b.isPacked&&!Il(b.shape,y.shape)){var x=y,C=y.shape;y.shape=b.shape,y=s.packedReshape(y,C),u.push(y),b=s.texData.get(y.dataId),x.shape=C}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(c.dataId);var f,p={shape:c.shape,texData:l,isUniform:!1},m=function(y,b,x){var C="";b.concat(x).forEach(function(S){var D=S.texData!=null&&S.texData.slice!=null&&S.texData.slice.flatOffset>0,R=S.isUniform?"uniform":S.texData.texShape;C+=S.shape+"_"+R+"_"+D});var k=y.userCode,I=y.constructor.name;return I+="_"+C+"_"+k}(e,h,p),g=this.getAndSaveBinary(m,function(){return function(y,b,x,C){var k=b.userCode,I=x.map(function(j,q){var K={logicalShape:j.shape,texShape:j.isUniform?null:j.texData.texShape,isUniform:j.isUniform,isPacked:!j.isUniform&&j.texData.isPacked,flatOffset:null};return j.texData!=null&&j.texData.slice!=null&&j.texData.slice.flatOffset>0&&(K.flatOffset=j.texData.slice.flatOffset),{name:b.variableNames[q],shapeInfo:K}}),S=I.map(function(j){return j.shapeInfo}),D={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},R=KT(I,D,k,b.packedInputs),M=y.createProgram(R),B=null,V=y.getUniformLocation(M,"NAN",!1);U().getNumber("WEBGL_VERSION")===1&&(B=y.getUniformLocation(M,"INFINITY",!1));for(var z={},G=0;G<b.variableNames.length;G++){var W=b.variableNames[G];z[W]=y.getUniformLocation(M,W,!1),z["offset"+W]=y.getUniformLocation(M,"offset"+W,!1)}return{program:b,source:R,webGLProgram:M,uniformLocations:z,inShapeInfos:S,outShapeInfo:D,infLoc:B,nanLoc:V}}(s.gpgpu,e,h,p)}),v=this.activeTimers!=null;if(v&&(f=this.startTimer()),function(y,b,x,C,k){Mw(b.inShapeInfos,x),Mw([b.outShapeInfo],[C]);var I=C.texData.texture,S=C.texData.texShape;C.texData.isPacked?y.setOutputPackedMatrixTexture(I,S[0],S[1]):y.setOutputMatrixTexture(I,S[0],S[1]),y.setProgram(b.webGLProgram),U().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&y.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&y.gl.uniform1f(b.nanLoc,NaN),x.forEach(function(D,R){var M=b.program.variableNames[R],B=b.uniformLocations[M],V=b.uniformLocations["offset"+M];if(B!=null)if(D.isUniform)if(ve(D.shape)<2)y.gl.uniform1f(B,D.uniformValues[0]);else{var z=D.uniformValues;z instanceof Float32Array||(z=new Float32Array(z)),y.gl.uniform1fv(B,z)}else D.texData.slice!=null&&V!=null&&y.gl.uniform1i(V,D.texData.slice.flatOffset),y.setInputMatrixTexture(D.texData.texture,B,R)}),k?.(y,b.webGLProgram),y.executeProgram()}(this.gpgpu,g,h,p,o),u.forEach(function(y){return s.disposeData(y.dataId)}),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!U().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var _=this.unpackTensor(c);return this.disposeData(c.dataId),_}return c},n.prototype.compileAndRun=function(e,t,i,o,a){a===void 0&&(a=!1),i=i||t[0].dtype;var s=this.runWebGLProgram(e,t,i,o,a);return O.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(U().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=$(function(){if(!U().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=U().getBool("DEBUG");U().set("DEBUG",!1);var i=e.abs(re(1e-8)).dataSync()[0];if(U().set("DEBUG",t),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var t,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.values,c=i.texture,l=i.usage,d=i.isPacked;if(c==null){var u,h=this.activeTimers!=null;h&&(u=Pr());var f=i.texShape;if(f==null&&(f=P1(o,d),i.texShape=f),s!=null){var p=Eh(o),m=void 0,g=f[1],v=f[0],_=s instanceof Uint8Array;d?(g=(t=jl(f[0],f[1]))[0],v=t[1],m=new kF(p,[v,g],_)):m=new AF(p,[v,g],_);var y=this.makeTensorInfo([v,g],a);this.texData.get(y.dataId).usage=_?or.PIXELS:or.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),g,v,s);var b=this.runWebGLProgram(m,[y],a,null,!0),x=this.texData.get(b.dataId);i.texture=x.texture,i.texShape=x.texShape,i.isPacked=x.isPacked,i.usage=x.usage,this.disposeData(y.dataId),this.texData.delete(b.dataId),i.values=null,h&&(this.uploadWaitMs+=Pr()-u)}else{var C=this.acquireTexture(f,l,a,d);i.texture=C}}},n.prototype.convertAndCacheOnCPU=function(e,t){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),t!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var c=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<c.length;++l)c[l]=Math.round(a[l]);return c}throw new Error("Unknown dtype "+s)}(t,o)),i.values},n.prototype.acquireTexture=function(e,t,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,o)},n.prototype.computeBytes=function(e,t){return e[0]*e[1]*fv(t)},n}(aC);v1()&&O.registerBackend("webgl",function(){return new VC},2);var CO=T({square_:function(r){var n=E(r,"x","square"),e=[n];return O.runKernelFunc(function(t,i){return i([n]),t.square(n)},{x:n},null,"Square",{},e,[])}}),Ul="SquaredDifference",zC=T({squaredDifference_:function(r,n){var e,t=E(r,"a","squaredDifference"),i=E(n,"b","squaredDifference");e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape);var o={a:t,b:i},a=[t,i];return O.runKernelFunc(function(s,c){var l=s.squaredDifference(t,i);return c([t,i]),l},o,function(s,c){var l=c[0],d=c[1],u=re(2);return{a:function(){return s.mul(l.sub(d).mul(u))},b:function(){return s.mul(d.sub(l).mul(u))}}},Ul,{},a,[])}}),DO=T({abs_:function(r){var n=E(r,"x","abs");return n.dtype==="complex64"?O.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):O.runKernelFunc(function(e,t){var i=e.abs(n);return t([n]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),EO=T({acos_:function(r){var n=E(r,"x","acos");return O.runKernelFunc(function(e,t){var i=e.acos(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(re(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),SO=T({acosh_:function(r){var n=E(r,"x","acosh");return O.runKernelFunc(function(e,t){var i=e.acosh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),AO=T({asin_:function(r){var n=E(r,"x","asin");return O.runKernelFunc(function(e,t){var i=e.asin(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(re(1).sub(i.toFloat().square()).sqrt())}}})}}),kO=T({asinh_:function(r){var n=E(r,"x","asinh");return O.runKernelFunc(function(e,t){var i=e.asinh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(re(1).add(i.toFloat().square()).sqrt())}}})}}),IO=T({atan_:function(r){var n=E(r,"x","atan");return O.runKernelFunc(function(e,t){var i=e.atan(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),MO=T({atanh_:function(r){var n=E(r,"x","atanh");return O.runKernelFunc(function(e,t){var i=e.atanh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(re(1).sub(i.toFloat().square()))}}})}}),RO=T({ceil_:function(r){var n=E(r,"x","ceil");return O.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),Hl=T({clipByValue_:function(r,n,e){var t=E(r,"x","clipByValue");A(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."});var i=[t],o={min:n,max:e};return O.runKernelFunc(function(a,s){var c=a.clip(t,n,e);return s([t]),c},{x:t},function(a,s){var c=s[0];return{x:function(){return a.where(c.greaterEqual(n).logicalAnd(c.lessEqual(e)),at(a))}}},"ClipByValue",o,i)}}),TO=T({cos_:function(r){var n=E(r,"x","cos"),e=[n];return O.runKernelFunc(function(t,i){var o=t.cos(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(t)}}},"Cos",{},e)}}),FO=T({cosh_:function(r){var n=E(r,"x","cosh");return O.runKernelFunc(function(e,t){var i=e.cosh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),OO=T({erf_:function(r){var n=E(r,"x","erf");return A(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),O.runKernelFunc(function(e,t){var i=e.erf(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Qh=T({exp_:function(r){var n=E(r,"x","exp");return O.runKernelFunc(function(e,t){var i=e.exp(n);return t([i]),i},{x:n},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),NO=T({expm1_:function(r){var n=E(r,"x","expm1");return O.runKernelFunc(function(e,t){var i=e.expm1(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.exp())}}})}}),PO=T({floor_:function(r){var n=E(r,"x","floor");return O.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),LO=T({log_:function(r){var n=E(r,"x","log"),e=[n];return O.runKernelFunc(function(t,i){var o=t.log(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return t.div(o.toFloat())}}},"Log",{},e)}}),BO=T({log1p_:function(r){var n=E(r,"x","log1p");return O.runKernelFunc(function(e,t){var i=e.log1p(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.add(1))}}})}}),VO=T({logSigmoid_:function(r){var n=E(r,"x","logSigmoid");return O.runKernelFunc(function(e,t){var i=e.softplus(n.neg()).neg();return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),Gl=T({neg_:function(r){var n=E(r,"x","neg"),e=[n];return O.runKernelFunc(function(t){return t.neg(n)},{x:n},function(t){return{x:function(){return t.neg()}}},"Neg",{},e)}}),zO=T({reciprocal_:function(r){var n=E(r,"x","reciprocal");return O.runKernelFunc(function(e,t){var i=e.reciprocal(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.square().neg())}}})}}),UO=T({round_:function(r){var n=E(r,"x","round");return O.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),UC=T({rsqrt_:function(r){var n=E(r,"x","rsqrt"),e=[n];return O.runKernelFunc(function(t,i){var o=t.rsqrt(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return t.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),Nv=T({sigmoid_:function(r){var n=E(r,"x","sigmoid");return O.runKernelFunc(function(e,t){var i=e.sigmoid(n);return t([i]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mul(i.mul(re(1).sub(i)))}}},"Sigmoid")}}),jO=T({sign_:function(r){var n=E(r,"x","sign");return O.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),WO=T({isNaN_:function(r){var n=E(r,"x","isNaN");return O.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),HO=T({isInf_:function(r){var n=E(r,"x","isInf");return O.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),GO=T({isFinite_:function(r){var n=E(r,"x","isFinite");return O.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),qO=T({sin_:function(r){var n=E(r,"x","sin"),e=[n];return O.runKernelFunc(function(t,i){var o=t.sin(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(t)}}},"Sin",{},e)}}),YO=T({sinh_:function(r){var n=E(r,"x","sinh");return O.runKernelFunc(function(e,t){var i=e.sinh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),$O=T({softplus_:function(r){var n=E(r,"x","softplus");return O.runKernelFunc(function(e,t){var i=e.softplus(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),KO=T({sqrt_:function(r){var n=E(r,"x","sqrt");return O.runKernelFunc(function(e,t){var i=e.sqrt(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),XO=T({step_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","step");return O.runKernelFunc(function(t){return t.step(e,n)},{$x:e},function(t){return{$x:function(){return at(t)}}})}}),QO=T({tan_:function(r){var n=E(r,"x","tan");return O.runKernelFunc(function(e,t){var i=e.tan(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.cos().square())}}})}}),ZO=T({tanh_:function(r){var n=E(r,"x","tanh");return O.runKernelFunc(function(e,t){var i=e.tanh(n);return t([i]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return re(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function jC(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),A(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),A(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),A(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),a!=null&&A(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&A(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),ql(c,l,d,s,a,o)}function WC(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),A(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),A(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),A(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),a!=null&&A(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&A(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),ql(c,l,d,s,a,o)}function HC(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),A(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),A(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),A(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),a!=null&&A(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&A(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),ql(c,l,d,s,a,o)}function ql(r,n,e,t,i,o){o==null&&(o=.001);var a,s,c,l=E(r,"x","batchNorm"),d=E(n,"mean","batchNorm"),u=E(e,"variance","batchNorm");i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),A(d.rank===u.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),A(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),A(a==null||d.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,d,u,a];return O.runKernelFunc(function(f,p){var m=f.batchNormalization(c,vh(d),vh(u),o,vh(a),vh(s));return p([l,d,u,a]),m},{x:l,mean:d,variance:u,scale:a,offset:s},function(f,p){var m=p,g=m[0],v=m[1],_=m[2],y=m[3],b=y??re(1),x=en(v.shape,c.shape),C=[];if(v.rank===1){for(var k=0;k<c.shape.length-1;++k)C.push(c.shape[k]);C.push(1)}var I=g.sub(v),S=f.mul(b),D=UC(_.add(re(o))),R=D.mul(D).mul(D).mul(re(-.5));return{x:function(){return v.rank===1?f.mul(ha(D.as4D(1,1,1,v.shape[0]),C)).mul(b).reshape(g.shape):f.mul(D).mul(b).reshape(g.shape)},mean:function(){var M=D.mul(re(-1)).mul(S);return v.rank===1&&(M=M.sum(x)),M.reshape(v.shape)},variance:function(){var M=R.mul(I).mul(S);return v.rank===1&&(M=M.sum(x)),M.reshape(v.shape)},scale:function(){var M=I.mul(D),B=f.mul(M);return v.rank===1&&(B=B.sum(x)),B.reshape(v.shape)},offset:function(){var M=f;return v.rank===1&&(M=M.sum(x)),M.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:o},h).reshape(l.shape)}function vh(r){return r==null?null:r.rank===0?r.as1D():r.rank===1?r:r.rank===2?r.as4D(1,1,r.shape[0],r.shape[1]):r.rank===3?r.as4D(1,r.shape[0],r.shape[1],r.shape[2]):r}function Zh(){W1("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var JO=T({batchNormalization2d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Zh(),jC(r,n,e,o,i,t)}}),eN=T({batchNormalization3d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Zh(),WC(r,n,e,o,i,t)}}),tN=T({batchNormalization4d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Zh(),HC(r,n,e,o,i,t)}}),nN=T({batchNormalization_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Zh(),ql(r,n,e,o,i,t)}}),Pv=T({batchNorm_:ql}),rN=T({batchNorm2d_:jC}),iN=T({batchNorm3d_:WC}),oN=T({batchNorm4d_:HC}),Jh=T({logicalAnd_:function(r,n){var e=E(r,"a","logicalAnd","bool"),t=E(n,"b","logicalAnd","bool");return rt(e.shape,t.shape),O.runKernelFunc(function(i){return i.logicalAnd(e,t)},{a:e,b:t},null,"LogicalAnd")}}),aN=T({logicalNot_:function(r){var n=E(r,"x","logicalNot","bool");return O.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),GC=T({logicalOr_:function(r,n){var e=E(r,"a","logicalOr","bool"),t=E(n,"b","logicalOr","bool");return rt(e.shape,t.shape),O.runKernelFunc(function(i){return i.logicalOr(e,t)},{$a:e,$b:t})}}),sN=T({logicalXor_:function(r,n){var e=E(r,"a","logicalXor","bool"),t=E(n,"b","logicalXor","bool");return rt(e.shape,t.shape),GC(r,n).logicalAnd(Jh(r,n).logicalNot())}}),ga=T({where_:function(r,n,e){var t=E(n,"a","where"),i=E(e,"b","where"),o=E(r,"condition","where","bool");return ut(t.shape,i.shape,"Error in where: "),o.rank===1?A(o.shape[0]===t.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ut(o.shape,i.shape,"Error in where: "),O.runKernelFunc(function(a,s){var c=a.select(o,t,i);return s([o]),c},{$condition:o,$a:t,$b:i},function(a,s){var c=s[0];return{$condition:function(){return at(c).toFloat()},$a:function(){return a.mul(c.cast(a.dtype))},$b:function(){return a.mul(c.logicalNot().cast(a.dtype))}}})}}),qC=function(r){return me(this,void 0,void 0,function(){var n,e,t;return ge(this,function(i){switch(i.label){case 0:return[4,(n=E(r,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),t=Rv(n.shape,e),r!==n&&n.dispose(),[2,t]}})})},Oe=T({add_:function(r,n){var e,t=E(r,"a","add"),i=E(n,"b","add");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a){return a.add(t,i)},{a:t,b:i},function(a){return{a:function(){var s=a,c=en(t.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(t.shape)},b:function(){var s=a,c=en(i.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(i.shape)}}},"Add")}}),cN=T({addN_:function(r){A(Array.isArray(r),function(){return"The argument passed to tf.addN() must be a list of tensors"}),A(r.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+r.length});var n=r.map(function(i,o){return E(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Jt(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var t=n;return O.runKernelFunc(function(i){return i.addN(n)},t,function(i){var o={};return n.forEach(function(a,s){o[s]=function(){return i.clone()}}),o},"AddN")}}),lN=T({addStrict_:function(r,n){var e=E(r,"a","addStrict"),t=E(n,"b","addStrict");return ut(e.shape,t.shape,"Error in addStrict: "),e.add(t)}}),dN=T({atan2_:function(r,n){var e,t=E(r,"a","atan2"),i=E(n,"b","atan2");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a,s){var c=a.atan2(t,i);return s([t,i]),c},{$a:t,$b:i},function(a,s){var c=s[0],l=s[1];return{$a:function(){var d=Oe(c.square(),l.square()),u=a.mul(l.div(d)),h=en(c.shape,o);return h.length>0&&(u=u.sum(h)),u.reshape(c.shape)},$b:function(){var d=Oe(c.square(),l.square()),u=Gl(a.mul(c.div(d))),h=en(l.shape,o);return h.length>0&&(u=u.sum(h)),u.reshape(l.shape)}}})}}),yr=T({div_:function(r,n){var e,t=E(r,"a","div"),i=E(n,"b","div");if(e=Pt(t,i),t=e[0],i=e[1],t.dtype==="int32"&&i.dtype==="int32")return YC(t,i);var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a,s){var c=a.realDivide(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.div(l.toFloat()),u=en(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=en(l.shape,o);u.length>0&&(d=d.sum(u).reshape(l.shape));var h=l.square();return d.div(h.toFloat()).neg()}}},"Div")}}),uN=T({divNoNan_:function(r,n){var e,t=E(r,"a","div"),i=E(n,"b","div");t=(e=Pt(t,i))[0],i=e[1];var o=yr(t,i),a=at(o),s=i.equal(a);return ga(s,a,o)}}),hN=T({divStrict_:function(r,n){var e=E(r,"a","div"),t=E(n,"b","div");return ut(e.shape,t.shape,"Error in divideStrict: "),e.div(t)}}),YC=T({floorDiv_:function(r,n){var e,t=E(r,"a","floorDiv"),i=E(n,"b","floorDiv");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a,s){var c=a.floorDiv(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.div(l.toFloat()),u=en(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=en(l.shape,o);u.length>0&&(d=d.sum(u).reshape(l.shape));var h=l.square();return d.div(h.toFloat()).neg()}}},"FloorDiv")}}),Lv=T({maximum_:function(r,n){var e,t=E(r,"a","maximum"),i=E(n,"b","maximum");return e=Pt(t,i),t=e[0],i=e[1],t.dtype==="bool"&&(t=t.toInt(),i=i.toInt()),rt(t.shape,i.shape),O.runKernelFunc(function(o,a){var s=o.maximum(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return o.mul(s.greaterEqual(c).toFloat())},b:function(){return o.mul(s.less(c).toFloat())}}},"Maximum")}}),fN=T({maximumStrict_:function(r,n){var e=E(r,"a","maximumStrict"),t=E(n,"b","maximumStrict");return ut(e.shape,t.shape,"Error in maximumStrict: "),e.maximum(t)}}),$C=T({minimum_:function(r,n){var e,t=E(r,"a","minimum"),i=E(n,"b","minimum");return e=Pt(t,i),t=e[0],i=e[1],t.dtype==="bool"&&(t=t.toInt(),i=i.toInt()),rt(t.shape,i.shape),O.runKernelFunc(function(o,a){var s=o.minimum(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return o.mul(s.lessEqual(c).toFloat())},b:function(){return o.mul(s.greater(c).toFloat())}}},"Minimum")}}),pN=T({minimumStrict_:function(r,n){var e=E(r,"a","minimumStrict"),t=E(n,"b","minimumStrict");return ut(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)}}),mN=T({mod_:function(r,n){var e,t=E(r,"a","mod"),i=E(n,"b","mod");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a,s){var c=a.mod(t,i);return s([t,i]),c},{$a:t,$b:i},function(a,s){var c=s[0],l=s[1];return{$a:function(){var d=en(c.shape,o);return d.length>0?a.sum(d).reshape(c.shape):a},$b:function(){var d=a.mul(c.div(l).floor().neg()),u=en(l.shape,o);return u.length>0?d.sum(u).reshape(l.shape):d}}})}}),gN=T({modStrict_:function(r,n){var e=E(r,"a","modStrict"),t=E(n,"b","modStrict");return ut(e.shape,t.shape,"Error in modStrict: "),e.mod(t)}}),Bt=T({mul_:function(r,n){var e,t=E(r,"a","mul"),i=E(n,"b","mul");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a,s){var c=a.multiply(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.mul(l.toFloat()),u=en(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=en(l.shape,o);return u.length>0?d.sum(u).reshape(l.shape):d}}},"Mul")}}),vN=T({mulStrict_:function(r,n){var e=E(r,"a","mul"),t=E(n,"b","mul");return ut(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)}}),Uh=T({pow_:function(r,n){var e,t=E(r,"base","pow"),i=E(n,"exp","pow");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape),a=[t,i];return O.runKernelFunc(function(s,c){var l=s.pow(t,i);return c([t,i,l]),l},{a:t,b:i},function(s,c){var l=c[0],d=c[1],u=c[2];return{a:function(){var h=d.toFloat(),f=s.mul(h.mul(l.pow(h.sub(re(1))))),p=en(l.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)},b:function(){var h=l.greater(0),f=l.log().where(h,at(l)),p=s.mul(u.mul(f)),m=en(d.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(d.shape)}}},"Pow",{},a,[!0])}}),bN=T({powStrict_:function(r,n){return ut(r.shape,n.shape,"Error in powStrict: "),r.pow(n)}}),_N=T({squaredDifferenceStrict_:function(r,n){var e=E(r,"a","squaredDifferenceStrict"),t=E(n,"b","squaredDifferenceStrict");return ut(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)}}),wt=T({sub_:function(r,n){var e,t=E(r,"a","sub"),i=E(n,"b","sub");e=Pt(t,i),t=e[0],i=e[1];var o=rt(t.shape,i.shape);return O.runKernelFunc(function(a){return a.subtract(t,i)},{a:t,b:i},function(a){return{a:function(){var s=a,c=en(t.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(t.shape)},b:function(){var s=a,c=en(i.shape,o);return c.length>0&&(s=s.sum(c)),s.neg().reshape(i.shape)}}},"Sub")}}),yN=T({subStrict_:function(r,n){var e=E(r,"a","subStrict"),t=E(n,"b","subStrict");return ut(e.shape,t.shape,"Error in subStrict: "),e.sub(t)}}),KC=T({equal_:function(r,n){var e,t=E(r,"a","equal"),i=E(n,"b","equal");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o){return o.equal(t,i)},{$a:t,$b:i})}}),xN=T({equalStrict_:function(r,n){var e=E(r,"a","equalStrict"),t=E(n,"b","equalStrict");return ut(e.shape,t.shape,"Error in equalStrict: "),e.equal(t)}}),wN=T({greater_:function(r,n){var e,t=E(r,"a","greater"),i=E(n,"b","greater");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o){return o.greater(t,i)},{a:t,b:i},null,"Greater")}}),XC=T({greaterEqual_:function(r,n){var e,t=E(r,"a","greaterEqual"),i=E(n,"b","greaterEqual");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o,a){var s=o.greaterEqual(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return at(s)},b:function(){return at(c)}}},"GreaterEqual")}}),CN=T({greaterEqualStrict_:function(r,n){var e=E(r,"a","greaterEqualStrict"),t=E(n,"b","greaterEqualStrict");return ut(e.shape,t.shape,"Error in greaterEqualStrict: "),e.greaterEqual(t)}}),DN=T({greaterStrict_:function(r,n){var e=E(r,"a","greaterStrict"),t=E(n,"b","greaterStrict");return ut(e.shape,t.shape,"Error in greaterStrict: "),e.greater(t)}}),EN=T({less_:function(r,n){var e,t=E(r,"a","less"),i=E(n,"b","less");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o){return o.less(t,i)},{a:t,b:i},null,"Less")}}),SN=T({lessEqual_:function(r,n){var e,t=E(r,"a","lessEqual"),i=E(n,"b","lessEqual");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o,a){var s=o.lessEqual(t,i);return a([t,i]),s},{a:t,b:i},null,"LessEqual")}}),AN=T({lessEqualStrict_:function(r,n){var e=E(r,"a","lessEqualStrict"),t=E(n,"b","lessEqualStrict");return ut(e.shape,t.shape,"Error in lessEqualStrict: "),e.lessEqual(t)}}),kN=T({lessStrict_:function(r,n){var e=E(r,"a","lessStrict"),t=E(n,"b","lessStrict");return ut(e.shape,t.shape,"Error in lessStrict: "),e.less(t)}}),IN=T({notEqual_:function(r,n){var e,t=E(r,"a","notEqual"),i=E(n,"b","notEqual");return e=Pt(t,i),t=e[0],i=e[1],rt(t.shape,i.shape),O.runKernelFunc(function(o){return o.notEqual(t,i)},{a:t,b:i},null,"NotEqual")}}),MN=T({notEqualStrict_:function(r,n){var e=E(r,"a","notEqualStrict"),t=E(n,"b","notEqualStrict");return ut(e.shape,t.shape,"Error in notEqualStrict: "),e.notEqual(t)}});function zw(r,n){for(var e=[],t=r;t<n;++t)e.push(t);return e}function Uw(r){for(var n=[],e=0;e<r.length;++e)for(var t=0;t<r[e].length;++t)n.push(r[e][t]);return n}var Bv=T({gather_:function(r,n,e){e===void 0&&(e=0);var t=E(r,"x","gather"),i=E(n,"indices","gather","int32");e=tn(e,t.shape)[0];var o=function(a,s,c){for(var l=a.shape[c],d=[],u=1,h=1,f=0;f<c;f++)d.push(a.shape[f]),u*=a.shape[f];for(f=0;f<s.rank;f++)d.push(s.shape[f]);for(f=c+1;f<a.rank;f++)d.push(a.shape[f]),h*=a.shape[f];return{batchSize:u,sliceSize:h,dimSize:l,outputShape:d}}(t,i,e);return O.runKernelFunc(function(a,s){var c=a.gather(t,i.flatten(),e);return s([i]),c},{x:t,indices:i},function(a,s){var c=s[0];return{x:function(){var l=t.shape,d=c.size,u=l.slice(0,e),h=u.length,f=l.slice(e,l.length).slice(1),p=f.length,m=zw(0,h),g=zw(h+1,h+1+p),v=Uw([u,[d],f]),_=a.reshape(v),y=c.reshape([d]),b=Uw([[h],m,g]),x=_.transpose(b),C=QC(x,y,t.shape[e]),k=Gh(b);return C=C.transpose(k)},indices:function(){return c}}},"Gather",{axis:e}).reshape(o.outputShape)}}),QC=T({unsortedSegmentSum_:function(r,n,e){var t=E(r,"x","unsortedSegmentSum"),i=E(n,"segmentIds","unsortedSegmentSum","int32");return A(Vt(e),function(){return"numSegments must be of dtype int"}),O.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(t,i,e);return a([i]),s},{$x:t},function(o,a){var s=a[0];return{$x:function(){return function(c,l){for(var d=Lv(l,at(l)),u=Bv(c,d),h=XC(l,re(0,"int32")),f=u.rank-h.rank,p=0;p<f;++p)h=Mn(h,p+1);h=Jh(h,Ks(u.shape,"bool"));var m=at(u);return ga(h,u,m)}(o,s)}}})}}),RN=function(r,n,e){return me(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m;return ge(this,function(g){switch(g.label){case 0:for(t=E(r,"tensor","boolMask"),i=E(n,"mask","boolMask","bool"),o=e??0,a=i.rank,s=t.shape,A(a>0,function(){return"mask cannot be scalar"}),ut(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+a;l++)c*=s[l];return d=s.slice(0,o).concat([c],s.slice(o+a)),u=t.reshape(d),h=i.reshape([-1]),[4,qC(h)];case 1:return f=g.sent(),p=f.squeeze([1]),m=Bv(u,p,o),r!==t&&t.dispose(),n!==i&&i.dispose(),p.dispose(),u.dispose(),h.dispose(),f.dispose(),[2,m]}})})};function ZC(r,n,e,t,i,o,a){o===void 0&&(o="NHWC"),A(r.length===n.rank,function(){return"Length of inShape ("+r.length+") and rank of dy ("+n.rank+") must match"});var s=r,c=n,l=!1;n.rank===3&&(l=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,r[0],r[1],r[2]]),A(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),A(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),A(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var d=o==="NHWC"?s[3]:s[1],u=o==="NHWC"?c.shape[3]:c.shape[1];A(d===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+e.shape[2]+"."}),A(u===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+u+") must match output depth for filter "+e.shape[3]+"."}),a!=null&&A(Vt(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var h=Xh(o),f=Ao(s,e.shape,t,1,i,a,!1,h),p=O.runKernelFunc(function(m,g){var v=m.conv2dDerInput(c,e,f);return g([e,c]),v},{dy4D:c,filter:e},function(m,g){var v=g[0],_=g[1];return{dy4D:function(){return hn(m,v,t,i,o,1,a)},filter:function(){return Vv(m,_,v.shape,t,i,o,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Og(r){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(r),e=n[0],t=n[1],i=n[2];return e===1&&t===1&&i===1}function JC(r,n,e,t,i){A(r.length===n.rank,function(){return"Length of inShape ("+r.length+") and rank of dy ("+n.rank+") must match"});var o=r,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,r[0],r[1],r[2],r[3]]);var c=o[4],l=a.shape[4];A(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),A(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),A(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),A(c===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[3]+"."}),A(l===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+e.shape[4]+"."});var d=zl(o,e.shape,t,1,i),u=O.runKernelFunc(function(h){return h.conv3dDerInput(a,e,d)},{dy5D:a});return s?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}var TN=T({conv1d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=E(r,"x","conv1d"),c=E(n,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),A(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),A(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),a!=null&&A(Vt(t),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."}),A(l.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),A(Bn(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),A(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var u=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=hn(h,u,[1,e],t,"NHWC",[1,o],a);return d?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),hn=T({conv2d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=E(r,"x","conv2d"),c=E(n,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),A(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),A(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),a!=null&&A(Vt(t),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."});var u=i==="NHWC"?l.shape[3]:l.shape[1];A(u===c.shape[2],function(){return"Error in conv2d: depth of input ("+u+") must match input depth for filter "+c.shape[2]+"."}),A(Bn(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var h=Xh(i),f=Ao(l.shape,c.shape,e,o,t,a,!1,h),p=[c,l],m=O.runKernelFunc(function(g,v){var _=g.conv2d(l,c,f);return v([c,l]),_},{x:l,filter:c},function(g,v){var _=v,y=_[0],b=_[1];return A(ma(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return eD(b.shape,g,y,e,t,i)},filter:function(){return Vv(b,g,y.shape,e,t,i)}}},"Conv2D",f,p);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),FN=T({conv3d_:function(r,n,e,t,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=E(r,"x","conv3d"),s=E(n,"filter","conv3d"),c=a,l=!1;a.rank===4&&(l=!0,c=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),A(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),A(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),A(c.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),A(function(h,f){return Og(h)||Og(f)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),A(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var d=zl(c.shape,s.shape,e,o,t),u=O.runKernelFunc(function(h,f){var p=h.conv3d(c,s,d);return f([c,s]),p},{x:c,$filter:s},function(h,f){A(Og(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var p=f[0],m=f[1];return{x:function(){return JC(p.shape,h,m,e,t)},$filter:function(){return function(g,v,_,y,b){var x=g;g.rank===4&&(x=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var C=v;C.rank===4&&(C=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),A(x.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+x.shape+"."}),A(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),A(_.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+_+"."}),A(x.shape[4]===_[3],function(){return"Error in conv3dDerFilter: depth of input "+x.shape[4]+") must match input depth in filter ("+_[3]+"."}),A(C.shape[4]===_[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+_[4]+")."});var k=zl(x.shape,_,y,1,b);return O.runKernelFunc(function(I){return I.conv3dDerFilter(x,C,k)},{x5D:x,dy5D:C})}(p,h,m.shape,e,t)}}});return l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),Vv=T({conv2dDerFilter_:function(r,n,e,t,i,o,a){o===void 0&&(o="NHWC");var s=r;r.rank===3&&(s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),A(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),A(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),A(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],d=o==="NHWC"?c.shape[3]:c.shape[1];A(l===e[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+e[2]+"."}),A(d===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+e[3]+")."}),a!=null&&A(Vt(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var u=Xh(o),h=Ao(s.shape,e,t,1,i,a,!1,u);return O.runKernelFunc(function(f){return f.conv2dDerFilter(s,c,h)},{x4D:s,dy4D:c})}}),eD=T({conv2dDerInput_:ZC}),Yl=T({depthwiseConv2d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=E(r,"x","depthwiseConv2d"),c=E(n,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),A(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),A(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),A(l.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),o==null&&(o=[1,1]),A(Bn(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&A(Vt(t),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."});var u=Ao(l.shape,c.shape,e,o,t,a,!0),h=[l,c],f=O.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(l,c,u);return m([l,c]),g},{x:l,filter:c},function(p,m){A(ma(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var g=m[0],v=m[1];return{x:function(){return tD(g.shape,p,v,u)},filter:function(){return nD(g,p,v.shape,u)}}},"DepthwiseConv2dNative",u,h);return d?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),tD=T({depthwiseConv2dDerInput_:function(r,n,e,t){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=O.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,e,t)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),nD=T({depthwiseConv2dDerFilter_:function(r,n,e,t){var i=r;r.rank===3&&(i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),O.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,t)},{x4D:i,dy4D:o})}}),$l=T({separableConv2d_:function(r,n,e,t,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=E(r,"x","separableConv2d"),c=E(n,"depthwiseFilter","separableConv2d"),l=E(e,"pointwiseFilter","separableConv2d"),d=s,u=!1;if(s.rank===3&&(u=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),A(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),A(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),A(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),A(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=c.shape[2],f=c.shape[3];A(l.shape[2]===h*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."});var p=Yl(d,c,t,i,a,o),m=hn(p,l,1,"valid",a);return u?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),ON=T({conv2dTranspose_:function(r,n,e,t,i,o){return ZC(e,E(r,"x","conv2dTranspose"),E(n,"filter","conv2dTranspose"),t,i,"NHWC",o)}}),NN=T({conv3dTranspose_:function(r,n,e,t,i){return JC(e,E(r,"x","conv3dTranspose"),E(n,"filter","conv3dTranspose"),t,i)}}),Xs=T({matMul_:function(r,n,e,t){var i;e===void 0&&(e=!1),t===void 0&&(t=!1);var o=E(r,"a","matMul"),a=E(n,"b","matMul");i=Pt(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],c=t?a.shape[a.rank-1]:a.shape[a.rank-2],l=e?o.shape[o.rank-1]:o.shape[o.rank-2],d=t?a.shape[a.rank-2]:a.shape[a.rank-1],u=o.shape.slice(0,-2),h=a.shape.slice(0,-2),f=ve(u),p=ve(h);A(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),A(Jt(u,h),function(){return"Error in matMul: outer dimensions ("+u+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),A(s===c,function(){return"Error in matMul: inner shapes ("+s+") and ("+c+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+t+" must match."});var m=o.shape.slice(0,-2).concat([l,d]),g=e?o.as3D(f,s,l):o.as3D(f,l,s),v=t?a.as3D(p,d,c):a.as3D(p,c,d),_={transposeA:e,transposeB:t};return O.runKernelFunc(function(y,b){var x=y.batchMatMul(g,v,e,t);return b([g,v]),x},{a:g,b:v},function(y,b){var x=b,C=x[0],k=x[1];return e||t?!e&&t?{a:function(){return y.matMul(k,!1,!1)},b:function(){return y.matMul(C,!0,!1)}}:e&&!t?{a:function(){return k.matMul(y,!1,!0)},b:function(){return C.matMul(y,!1,!1)}}:{a:function(){return k.matMul(y,!0,!0)},b:function(){return y.matMul(C,!0,!0)}}:{a:function(){return y.matMul(k,!1,!0)},b:function(){return C.matMul(y,!0,!1)}}},"BatchMatMul",_).reshape(m)}}),PN=T({dot_:function(r,n){var e=E(r,"t1","dot"),t=E(n,"t2","dot");A(!(e.rank!==1&&e.rank!==2||t.rank!==1&&t.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+t.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=t.rank===1?t.size:t.shape[0];return A(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&t.rank===1?e.as2D(1,-1).matMul(t.as2D(-1,1)).asScalar():e.rank===1&&t.rank===2?e.as2D(1,-1).matMul(t.as2D(t.shape[0],t.shape[1])).as1D():e.rank===2&&t.rank===1?e.matMul(t.as2D(-1,1)).as1D():e.matMul(t.as2D(t.shape[0],t.shape[1]))}}),LN=T({outerProduct_:function(r,n){var e=E(r,"v1","outerProduct"),t=E(n,"v2","outerProduct");return A(e.rank===1&&t.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."}),e.as2D(-1,1).matMul(t.as2D(1,-1))}}),Kl=T({reverse_:function(r,n){var e=E(r,"x","reverse");if(e.rank===0)return e.clone();var t=tn(n,e.shape);return O.runKernelFunc(function(i){return i.reverse(e,t)},{$x:e},function(i){return{$x:function(){return i.reverse(t)}}}).reshapeAs(e)}}),BN=T({reverse1d_:function(r){var n=E(r,"x","reverse");return A(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Kl(n,0)}}),VN=T({reverse2d_:function(r,n){var e=E(r,"x","reverse");return A(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Kl(e,n)}}),zN=T({reverse3d_:function(r,n){var e=E(r,"x","reverse");return A(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Kl(e,n)}}),UN=T({reverse4d_:function(r,n){var e=E(r,"x","reverse");return A(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Kl(e,n)}});function rD(r,n,e,t,i,o){var a=E(r,"x","maxPool"),s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),t==null&&(t=[1,1]),A(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),A(Bn(e,t),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+t+"'"}),o!=null&&A(Vt(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=qs(s.shape,n,e,t,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return a.clone();var d=[s],u=O.runKernelFunc(function(h,f){var p=h.maxPool(s,l);return f([s,p]),p},{x:s},function(h,f){var p=f[0],m=f[1];return{x:function(){return function(g,v,_,y,b,x,C,k){var I=E(g,"dy","maxPoolBackprop"),S=E(v,"input","maxPoolBackprop"),D=E(_,"output","maxPoolBackprop");A(S.rank===I.rank,function(){return"Rank of input ("+S.rank+") does not match rank of dy ("+I.rank+")"}),x==null&&(x=[1,1]),A(Bn(b,x),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+x+"'"}),A(I.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."}),A(S.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+S.rank+"."}),k!=null&&A(Vt(C),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+k+" but got pad "+C+"."});var R=qs(S.shape,y,b,x,C,k);return O.runKernelFunc(function(M){return M.maxPoolBackprop(I,S,D,R)},{$dy:I,$input:S})}(h,p,m,n,e,t,i)}}},"MaxPool",l,d);return c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function iD(r,n,e,t,i,o){var a=E(r,"x","avgPool","float32");t==null&&(t=[1,1]),A(Bn(e,t),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+t+"'"});var s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),A(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&A(Vt(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=qs(s.shape,n,e,t,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return a.clone();var d=O.runKernelFunc(function(u){return u.avgPool(s,l)},{x:s},function(u){return{x:function(){return function(h,f,p,m,g,v){var _=E(h,"dy","avgPoolBackprop"),y=E(f,"input","avgPoolBackprop");A(y.rank===_.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+_.rank+")"}),g==null&&(g=[1,1]),A(Bn(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var b=y,x=_,C=!1;y.rank===3&&(C=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),x=_.as4D(1,_.shape[0],_.shape[1],_.shape[2])),A(x.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),A(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var k=qs(b.shape,p,m,g,v),I=O.runKernelFunc(function(S){return S.avgPoolBackprop(x,b,k)},{dy4D:x,input4D:b});return C?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}(u,s,n,e,t,i)}}},"AvgPool",l);return d=d.cast(a.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var zt=T({maxPool_:function(r,n,e,t,i){return rD(r,n,e,1,t,i)}}),zi=T({avgPool_:function(r,n,e,t,i){return iD(r,n,e,1,t,i)}}),jN=T({pool_:function(r,n,e,t,i,o){i==null&&(i=[1,1]),o==null&&(o=1),t===0&&(t="valid");var a=E(r,"x","maxPool"),s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),A(Bn(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,d=qs(s.shape,n,o,i,t),u=[d.dilationHeight,d.dilationWidth];l=t==="same"?function(b,x){var C=b.map(function(S,D){return S+(S-1)*(x[D]-1)}).map(function(S){return S-1}),k=C.map(function(S){return Math.floor(S/2)}),I=C.map(function(S,D){return S-k[D]});return C.map(function(S,D){return[k[D],I[D]]})}([d.filterHeight,d.filterWidth],u):[[0,0],[0,0]];var h=u[0]===1&&u[1]===1,f=function(b,x,C){var k=C.map(function(V){return V[0]}),I=C.map(function(V){return V[1]}),S=b.concat(k,I),D=x.map(function(V,z){return(V-S[z]%V)%V}),R=I.map(function(V,z){return V+D[z]}),M=x.map(function(V,z){return[k[z],R[z]]}),B=x.map(function(V,z){return[0,D[z]]});return[M,B]}([d.inHeight,d.inWidth],u,l),p=f[0],m=f[1],g=h?t:"valid",v=h?s:X1(s,u,p),_=(e==="avg"?function(){return iD(v,n,o,1,g)}:function(){return rD(v,n,o,1,g)})(),y=h?_:Y1(_,u,m);return c?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),WN=T({maxPool3d_:function(r,n,e,t,i,o,a){o===void 0&&(o="NDHWC");var s=E(r,"x","maxPool3d"),c=s,l=!1;s.rank===4&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),A(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),A(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),A(Bn(e,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&A(Vt(t),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+t+"."});var d=Vl(c.shape,n,e,a,t,i,o),u=O.runKernelFunc(function(h,f){var p=h.maxPool3d(c,d);return f([c,p]),p},{x:c},function(h,f){var p=f[0],m=f[1];return{x:function(){return function(g,v,_,y,b,x,C,k){var I=E(g,"dy","maxPool3dBackprop"),S=E(v,"input","maxPool3dBackprop"),D=E(_,"output","maxPool3dBackprop"),R=I,M=S,B=D,V=!1;S.rank===4&&(V=!0,R=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),M=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),B=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3])),A(R.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+R.rank+"."}),A(M.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+M.rank+"."}),A(B.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+B.rank+"."}),x==null&&(x=[1,1,1]),A(Bn(b,x),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+x+"'"}),k!=null&&A(Vt(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+k+" but got pad "+C+"."});var z=Vl(M.shape,y,b,x,C,k),G=O.runKernelFunc(function(W){return W.maxPool3dBackprop(R,M,B,z)},{dy5D:R,input5D:M});return V?G.as4D(G.shape[1],G.shape[2],G.shape[3],G.shape[4]):G}(h,p,m,n,e,a,t,i)}}});return l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),HN=T({avgPool3d_:function(r,n,e,t,i,o,a){o===void 0&&(o="NDHWC");var s=E(r,"x","avgPool3d","float32"),c=s,l=!1;s.rank===4&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),A(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),A(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),A(Bn(e,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&A(Vt(t),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+t+"."});var d=Vl(c.shape,n,e,a,t,i,o),u=O.runKernelFunc(function(h){return h.avgPool3d(c,d)},{x:c},function(h){return{x:function(){return function(f,p,m,g,v,_,y){var b=E(f,"dy","avgPool3dBackprop"),x=E(p,"input","avgPool3dBackprop"),C=b,k=x,I=!1;x.rank===4&&(I=!0,C=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),k=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3])),A(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),A(k.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+k.rank+"."}),v==null&&(v=[1,1,1]),A(Bn(g,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+v+"'"}),y!=null&&A(Vt(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+_+"."});var S=Vl(k.shape,m,g,v,_,y),D=O.runKernelFunc(function(R){return R.avgPool3dBackprop(C,k,S)},{dy5D:C,input5D:k});return I?D.as4D(D.shape[1],D.shape[2],D.shape[3],D.shape[4]):D}(h,c,n,e,a,t,i)}}});return u=u.cast(c.dtype),l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),Br=T({slice_:function(r,n,e){var t,i,o=E(r,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(t=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(c){A(c!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(c,l){return c>=0?c:(A(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+l+"."}),o.shape[l]-t[l])}),nC(o,t,i);var a=o.shape,s={begin:t,size:i};return O.runKernelFunc(function(c){return c.slice(o,t,i)},{x:o},function(c){for(var l=[],d=0;d<c.rank;d++)l.push([t[d],a[d]-t[d]-i[d]]);return{x:function(){return c.pad(l)}}},"Slice",s)}}),GN=T({slice1d_:function(r,n,e){var t=E(r,"x","slice1d");return A(t.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+t.rank+" tensor"}),Br(t,[n],[e])}}),qN=T({slice2d_:function(r,n,e){var t=E(r,"x","slice2d");return A(t.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+t.rank+" tensor"}),Br(t,n,e)}}),zv=T({slice3d_:function(r,n,e){var t=E(r,"x","slice3d");return A(t.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+t.rank+" tensor"}),Br(t,n,e)}}),YN=T({slice4d_:function(r,n,e){var t=E(r,"x","slice4d");return A(t.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+t.rank+" tensor"}),Br(t,n,e)}});function oD(r,n,e,t,i){return n.rank<e.rank&&(n=n.reshape(Ln(n.shape,t))),r.rank<e.rank&&(r=r.reshape(Ln(r.shape,t))),{x:function(){var o=r.mul(e.equal(n).cast(r.dtype));return i==null?o:o.transpose(i)}}}var $N=T({all_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","all","bool"),i=tn(n,t.shape),o=i,a=zr(o,t.rank);a!=null&&(t=t.transpose(a),o=Ur(o.length,t.rank));var s=O.runKernelFunc(function(l){return l.all(t,o)},{$x:t});if(e){var c=Ln(s.shape,i);return s.reshape(c)}return s}}),KN=T({any_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","any","bool"),i=tn(n,t.shape),o=i,a=zr(o,t.rank);a!=null&&(t=t.transpose(a),o=Ur(o.length,t.rank));var s=O.runKernelFunc(function(l){return l.any(t,o)},{$x:t});if(e){var c=Ln(s.shape,i);return s.reshape(c)}return s}}),XN=T({argMax_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","argMax");n==null&&(n=0);var t=tn(n,e.shape),i=zr(t,e.rank);i!=null&&(e=e.transpose(i),t=Ur(t.length,e.rank));var o={axis:t[0]},a=[e];return O.runKernelFunc(function(s,c){var l=s.argMax(e,t[0]);return c([e]),l},{x:e},function(s,c){var l=c[0];return{x:function(){return at(l)}}},"ArgMax",o,a)}}),QN=T({argMin_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","argMin");n==null&&(n=0);var t=tn(n,e.shape),i=zr(t,e.rank);return i!=null&&(e=e.transpose(i),t=Ur(t.length,e.rank)),O.runKernelFunc(function(o,a){var s=o.argMin(e,t[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return at(s)}}})}}),ZN=T({logSumExp_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","logSumExp"),i=tn(n,t.shape),o=t.max(i,!0),a=t.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var c=Ln(s.shape,i);return s.reshape(c)}return s}}),_a=T({max_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","max"),i=t,o=tn(n,t.shape),a=o,s=zr(a,t.rank);s!=null&&(t=t.transpose(s),a=Ur(a.length,t.rank));var c=[t],l=O.runKernelFunc(function(u,h){var f=u.max(t,a);return h([i,f]),f},{x:t},function(u,h){return oD(u,h[1],h[0],o,s)},"Max",{axes:a},c,[!0]);if(e){var d=Ln(l.shape,o);l=l.reshape(d)}return l}}),JN=T({mean_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","mean"),i=tn(n,t.shape),o=ve(xn(t.shape,i)[1]);return Kh(function(a){var s=re(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(c){var l=a.shape.slice();return i.forEach(function(d){l[d]=1}),c.reshape(l).mul(Ks(a.shape,"float32")).div(o)}}})(t)}}),eP=T({min_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","min"),i=t,o=tn(n,t.shape),a=o,s=zr(a,t.rank);s!=null&&(t=t.transpose(s),a=Ur(a.length,t.rank));var c=[t],l=O.runKernelFunc(function(u,h){var f=u.min(t,a);return h([i,f]),f},{x:t},function(u,h){return oD(u,h[1],h[0],o,s)},"Min",{axes:a},c,[!0]);if(e){var d=Ln(l.shape,o);l=l.reshape(d)}return l}}),tP=T({moments_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=tn(n,(r=E(r,"x","moments")).shape),i=r.mean(t,e),o=i.shape;e||(o=Ln(i.shape,t));var a=r.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(t,e)}}}),aD=T({sum_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","sum");t.dtype==="bool"&&(t=t.toInt());var i=tn(n,t.shape);return Kh(function(o){var a=zr(i,o.rank),s=i,c=o;a!=null&&(c=o.transpose(a),s=Ur(s.length,o.rank));var l=function(f){var p=o.shape.slice();return i.forEach(function(m){p[m]=1}),f.reshape(p).mul(Ks(o.shape,"float32"))},d={axes:s},u=O.runKernelFunc(function(f){return f.sum(c,s)},{x:c},function(f){return{x:function(){return l(f)}}},"Sum",d);if(e){var h=Ln(u.shape,i);u=u.reshape(h)}return{value:u,gradFunc:l}})(t)}}),nP=T({prod_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","prod");t.dtype==="bool"&&(t=t.toInt());var i=tn(n,t.shape),o=zr(i,t.rank),a=i,s=t;o!=null&&(s=t.transpose(o),a=Ur(a.length,t.rank));var c=O.runKernelFunc(function(d){return d.prod(s,a)},{permutedX:s});if(e){var l=Ln(c.shape,i);c=c.reshape(l)}return c}}),sD=T({elu_:function(r){var n=E(r,"x","elu");return O.runKernelFunc(function(e,t){var i=e.elu(n);return t([i]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return O.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),rP=T({leakyRelu_:function(r,n){n===void 0&&(n=.2);var e=E(r,"x","leakyRelu");return Lv(re(n).mul(e),e)}}),cD=T({prelu_:function(r,n){var e=E(r,"x","prelu"),t=E(n,"alpha","prelu");return O.runKernelFunc(function(i,o){var a=i.prelu(e,t);return o([e,t]),a},{x:e,alpha:t},function(i,o){var a=o[0],s=o[1],c=a.greater(0);return{x:function(){return ga(c,i,i.mul(s))},alpha:function(){var l=ga(c,at(i),i.mul(a)),d=en(s.shape,i.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}},"Prelu")}}),pt=T({relu_:function(r){var n=E(r,"x","relu");return n.dtype==="bool"?n.toInt():O.runKernelFunc(function(e,t){var i=e.relu(n);return t([n]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),lD=T({relu6_:function(r){var n=E(r,"x","relu6");return n.dtype==="bool"?n.toInt():O.runKernelFunc(function(e,t){var i=e.relu6(n);return t([n]),i},{x:n},function(e,t){var i=t[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),iP=T({selu_:function(r){var n=E(r,"x","selu");return O.runKernelFunc(function(e,t){var i=e.selu(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){var o=i.greater(re(0)),a=re(Fv),s=re(Ov),c=e.mul(s),l=e.mul(a).mul(i.toFloat().exp());return ga(o,c,l)}}})}}),xr=T({transpose_:function(r,n){var e=E(r,"x","transpose");if(n==null&&(n=e.shape.map(function(i,o){return o}).reverse()),A(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(i){A(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1)return e.clone();var t={perm:n};return O.runKernelFunc(function(i){return i.transpose(e,n)},{x:e},function(i){var o=Gh(n);return{x:function(){return i.transpose(o)}}},"Transpose",t)}}),oP=T({localResponseNormalization_:function(r,n,e,t,i){n===void 0&&(n=5),e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=.5);var o=E(r,"x","localResponseNormalization");A(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),A(Vt(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=O.runKernelFunc(function(l,d){var u=l.localResponseNormalization4D(a,n,e,t,i);return d([a,u]),u},{x4D:a},function(l,d){var u=d[0],h=d[1];return{x4D:function(){return O.runKernelFunc(function(f){return f.LRNGrad(l,u,h,n,e,t,i)},{})}}});return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dD=T({norm_:function(r,n,e,t){n===void 0&&(n="euclidean"),e===void 0&&(e=null),t===void 0&&(t=!1);var i=function s(c,l,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return s(c.reshape([-1]),l,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(l===1)return c.abs().sum(d);if(l===1/0)return c.abs().max(d);if(l===-1/0)return c.abs().min(d);if(l==="euclidean"||l===2)return c.abs().pow(re(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(d)&&d.length===2){if(l===1)return c.abs().sum(d[0]).max(d[1]-1);if(l===1/0)return c.abs().sum(d[1]).max(d[0]);if(l===-1/0)return c.abs().sum(d[1]).min(d[0]);if(l==="fro"||l==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+d)}(r=E(r,"x","norm"),n,e),o=i.shape;if(t){var a=tn(e,r.shape);o=Ln(i.shape,a)}return i.reshape(o)}}),aP=T({basicLSTMCell_:function(r,n,e,t,i,o){var a=E(r,"forgetBias","basicLSTMCell"),s=E(n,"lstmKernel","basicLSTMCell"),c=E(e,"lstmBias","basicLSTMCell"),l=E(t,"data","basicLSTMCell"),d=E(i,"c","basicLSTMCell"),u=E(o,"h","basicLSTMCell"),h=l.concat(u,1).matMul(s).add(c),f=h.shape[0],p=h.shape[1]/4,m=[f,p],g=h.slice([0,0],m),v=h.slice([0,p],m),_=h.slice([0,2*p],m),y=h.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(d.mulStrict(a.add(_).sigmoid())),x=b.tanh().mulStrict(y.sigmoid());return[b,x]}}),sP=T({multiRNNCell_:function(r,n,e,t){for(var i=E(n,"data","multiRNNCell"),o=Oh(e,"c","multiRNNCell"),a=Oh(t,"h","multiRNNCell"),s=i,c=[],l=0;l<r.length;l++){var d=r[l](s,o[l],a[l]);c.push(d[0]),c.push(d[1]),s=d[1]}var u=[],h=[];for(l=0;l<c.length;l+=2)u.push(c[l]),h.push(c[l+1]);return[u,h]}}),cP=T({movingAverage_:function(r,n,e,t,i){i===void 0&&(i=!0);var o=E(r,"v","movingAverage"),a=E(n,"x","movingAverage"),s=E(e,"decay","movingAverage");g1(o,a),A(Jt(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var c=re(1),l=c.sub(s),d=a.sub(o).mul(l);if(i){A(t!=null,function(){return"When using zeroDebias: true, step is required."});var u=E(t,"step","movingAverage");d=d.div(c.sub(Uh(s,u)))}return o.add(d)}}),lP=T({stridedSlice_:function(r,n,e,t,i,o,a,s,c){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=0),t==null&&(t=new Array(n.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=E(r,"x","stridedSlice"),d=iv(s),u=l.shape.slice();d.forEach(function(g){n[g]=0,e[g]=1,u.splice(g,0,1)}),l=l.reshape(u);for(var h=0;h<l.rank;h++)n[h]=rC(i,n,t,l.shape,h),e[h]=iC(o,e,t,l.shape,h),t[h]=t[h]||1;var f=iv(c);f.forEach(function(g){e[g]=n[g]+1,t[g]=1});var p=$h(n,e,t),m=p.filter(function(g,v){return f.indexOf(v)===-1});return t.every(function(g){return g===1})?Br(l,n,p).reshape(m):O.runKernelFunc(function(g){return g.stridedSlice(l,n,e,t)},{$x:l}).reshape(m)}}),dP=T({topk_:function(r,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var t=E(r,"x","topk");if(t.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=t.shape[t.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=O.runKernelFunc(function(a){return a.topk(t,n,e)},{$x:t});return{values:o[0],indices:o[1]}}}),uP=T({scatterND_:function(r,n,e){var t=E(r,"indices","scatterND","int32"),i=E(n,"updates","scatterND");return tC(i,t,e),O.runKernelFunc(function(o){return o.scatterND(t,i,e)},{indices:t,updates:i},null,"ScatterNd",{shape:e})}}),Uv=T({fft_:function(r){A(r.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+r.dtype+"."});var n=r.shape[r.shape.length-1],e=r.size/n,t=r.as2D(e,n);return O.runKernelFunc(function(i){return i.fft(t)},{input:r}).reshape(r.shape)}}),jh=T({ifft_:function(r){A(r.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+r.dtype+"."});var n=r.shape[r.shape.length-1],e=r.size/n,t=r.as2D(e,n);return O.runKernelFunc(function(i){return i.ifft(t)},{input:r}).reshape(r.shape)}}),jv=T({rfft_:function(r,n){A(r.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+r.dtype});var e,t=r.shape[r.shape.length-1],i=r.size/t;if(n!=null&&n<t){var o=r.shape.map(function(v){return 0}),a=r.shape.map(function(v){return v});a[r.shape.length-1]=n,e=r.slice(o,a),t=n}else if(n!=null&&n>t){var s=r.shape.map(function(v){return v});s[r.shape.length-1]=n-t,e=r.concat(It(s),r.shape.length-1),t=n}else e=r;var c=e.zerosLike(),l=yn(e,c).as2D(i,t),d=Uv(l),u=Math.floor(t/2)+1,h=_r(d),f=ri(d),p=h.split([u,t-u],h.shape.length-1),m=f.split([u,t-u],f.shape.length-1),g=e.shape.slice();return g[e.shape.length-1]=u,yn(p[0],m[0]).reshape(g)}}),uD=T({irfft_:function(r){var n=r.shape[r.shape.length-1],e=r.size/n;if(n<=2){var t=r.as2D(e,n),i=jh(t);return _r(i)}var o=[e,2*(n-1)],a=_r(r).as2D(e,n),s=ri(r).as2D(e,n),c=a.slice([0,1],[e,n-2]).reverse(1),l=s.slice([0,1],[e,n-2]).reverse(1).mul(re(-1)),d=a.concat(c,1),u=s.concat(l,1);return t=yn(d,u).as2D(o[0],o[1]),i=jh(t),_r(i)}}),hP=Object.freeze({fft:Uv,ifft:jh,rfft:jv,irfft:uD}),fP=T({sparseToDense_:function(r,n,e,t){t===void 0&&(t=0);var i=E(r,"sparseIndices","sparseToDense","int32"),o=E(n,"sparseValues","sparseToDense"),a=E(t,"defaultValue","sparseToDense",o.dtype);return function(s,c,l,d){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var u=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var f=c.size;if(c.rank!==0&&(c.rank!==1||f!==u))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+u+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,a),O.runKernelFunc(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),pP=T({gatherND_:function(r,n){var e=E(n,"indices","gatherND","int32"),t=E(r,"x","gatherND");return O.runKernelFunc(function(i){return i.gatherND(t,e)},{x:t,indices:e},null,"GatherNd")}}),mP=T({diag_:function(r){var n=E(r,"x","diag").flatten(),e=r.shape.concat(r.shape);return O.runKernelFunc(function(t){return t.diag(n)},{$x:n}).reshape(e)}}),gP=T({dropout_:function(r,n,e,t){var i=E(r,"x","dropout");if(A(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),A(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return r instanceof xt?i.clone():i;var o=function(c,l){if(l==null)return c.shape.slice();if(Jt(c.shape,l))return l;if(c.shape.length===l.length){for(var d=[],u=0;u<c.shape.length;u++)l[u]==null&&c.shape[u]!=null?d.push(c.shape[u]):d.push(l[u]);return d}return l}(i,e),a=1-n,s=K1(o,0,1,"float32",t).add(a).floor().div(a);return i.mul(s)}});function hD(r,n,e){for(var t=1-r%2,i=new Float32Array(r),o=0;o<r;++o){var a=2*Math.PI*o/(r+t-1);i[o]=n-e*Math.cos(a)}return At(i,"float32")}var Wv=T({hannWindow_:function(r){return hD(r,.5,.5)}}),fD=T({hammingWindow_:function(r){return hD(r,.54,.46)}}),Hv=T({frame_:function(r,n,e,t,i){t===void 0&&(t=!1),i===void 0&&(i=0);for(var o=0,a=[];o+n<=r.size;)a.push(Br(r,o,n)),o+=e;if(t)for(;o<r.size;){var s=o+n-r.size,c=Ft([Br(r,o,n-s),cr([s],i)]);a.push(c),o+=e}return a.length===0?ii([],[0,n]):Ft(a).as2D(a.length,n)}}),pD=T({stft_:function(r,n,e,t,i){var o;i===void 0&&(i=Wv),t==null&&(o=n,t=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=Hv(r,n,e),s=Bt(a,i(n)),c=[],l=0;l<a.shape[0];l++)c.push(jv(s.slice([l,0],[1,n]),t));return Ft(c)}}),vP=Object.freeze({hannWindow:Wv,hammingWindow:fD,frame:Hv,stft:pD}),Tn,bP=function(r,n,e){return e===void 0&&(e=1),me(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m,g;return ge(this,function(v){switch(v.label){case 0:return t=E(r,"predictions","inTopK"),i=E(n,"targets","inTopK"),A(t.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+t.rank}),A(t.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+t.rank+" and targets rank "+i.rank}),ut(t.shape.slice(0,t.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=t.shape[t.shape.length-1],A(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,t.data()];case 1:return a=v.sent(),[4,i.data()];case 2:for(s=v.sent(),c=[a.length/o,o],d=c[1],u=Gs("bool",l=c[0]),h=0;h<l;h++){for(f=h*d,p=a.subarray(f,f+d),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(_,y){return y.value-_.value}),u[h]=0,g=0;g<e;g++)if(m[g].index===s[h]){u[h]=1;break}}return r!==t&&t.dispose(),n!==i&&i.dispose(),[2,un(u,i.shape,"bool")]}})})};(function(r){r[r.NONE=0]="NONE",r[r.MEAN=1]="MEAN",r[r.SUM=2]="SUM",r[r.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Tn||(Tn={}));var _P=T({absoluteDifference_:function(r,n,e,t){t===void 0&&(t=Tn.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","absoluteDifference"),o=E(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=E(e,"weights","absoluteDifference")),ut(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return Ui(s,a,t)}}),Ui=T({computeWeightedLoss_:function(r,n,e){e===void 0&&(e=Tn.SUM_BY_NONZERO_WEIGHTS);var t=E(r,"losses","computeWeightedLoss"),i=null;n!=null&&(i=E(n,"weights","computeWeightedLoss"));var o=i==null?t:t.mul(i);if(e===Tn.NONE)return o;if(e===Tn.SUM)return o.sum();if(e===Tn.MEAN){if(i==null)return o.mean();var a=t.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(re(a)):s}if(e===Tn.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(re(t.size));var c=i.mul(Ks(t.shape)).notEqual(re(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+e)}}),yP=T({cosineDistance_:function(r,n,e,t,i){i===void 0&&(i=Tn.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","cosineDistance"),a=E(n,"predictions","cosineDistance"),s=null;t!=null&&(s=E(t,"weights","cosineDistance")),ut(o.shape,a.shape,"Error in cosineDistance: ");var c=re(1).sub(o.mul(a).sum(e,!0));return Ui(c,s,i)}}),xP=T({hingeLoss_:function(r,n,e,t){t===void 0&&(t=Tn.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","hingeLoss"),o=E(n,"predictions","hingeLoss"),a=null;e!=null&&(a=E(e,"weights","hingeLoss")),ut(i.shape,o.shape,"Error in hingeLoss: ");var s=re(1);i=re(2).mul(i).sub(s);var c=s.sub(i.mul(o)).relu();return Ui(c,a,t)}}),wP=T({huberLoss_:function(r,n,e,t,i){t===void 0&&(t=1),i===void 0&&(i=Tn.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","huberLoss"),a=E(n,"predictions","huberLoss"),s=null;e!=null&&(s=E(e,"weights","huberLoss")),ut(o.shape,a.shape,"Error in huberLoss: ");var c=re(t),l=a.sub(o).abs(),d=$C(l,c),u=l.sub(d),h=re(.5).mul(d.square()).add(c.mul(u));return Ui(h,s,i)}}),CP=T({logLoss_:function(r,n,e,t,i){t===void 0&&(t=1e-7),i===void 0&&(i=Tn.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","logLoss"),a=E(n,"predictions","logLoss"),s=null;e!=null&&(s=E(e,"weights","logLoss")),ut(o.shape,a.shape,"Error in logLoss: ");var c=re(1),l=re(t),d=o.mul(a.add(l).log()).neg().sub(c.sub(o).mul(c.sub(a).add(l).log()));return Ui(d,s,i)}}),DP=T({meanSquaredError_:function(r,n,e,t){t===void 0&&(t=Tn.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","meanSquaredError"),o=E(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=E(e,"weights","meanSquaredError")),ut(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return Ui(s,a,t)}}),EP=T({sigmoidCrossEntropy_:function(r,n,e,t,i){t===void 0&&(t=0),i===void 0&&(i=Tn.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"multiClassLabels","sigmoidCrossEntropy"),a=E(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=E(e,"weights","sigmoidCrossEntropy")),ut(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),t>0){var c=re(t),l=re(1),d=re(.5);o=o.mul(l.sub(c)).add(d.mul(c))}var u=function(h,f){var p=E(h,"labels","sigmoidCrossEntropyWithLogits"),m=E(f,"logits","sigmoidCrossEntropyWithLogits");ut(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),v=m.mul(p),_=m.abs().neg().exp().log1p();return g.sub(v).add(_)}(o,a);return Ui(u,s,i)}}),SP=T({softmaxCrossEntropy_:function(r,n,e,t,i){t===void 0&&(t=0),i===void 0&&(i=Tn.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"onehotLabels","softmaxCrossEntropy"),a=E(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=E(e,"weights","softmaxCrossEntropy")),ut(o.shape,a.shape,"Error in softmaxCrossEntropy: "),t>0){var c=re(t),l=re(1),d=re(o.shape[1]);o=o.mul(l.sub(c)).add(c.div(d))}var u=function(h,f,p){if(p===void 0&&(p=-1),p===-1&&(p=f.rank-1),p!==f.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+f.rank+" and dim was "+p);return Kh(function(m,g,v){var _=g.logSumExp([p],!0),y=g.toFloat().sub(_);return v([m,y]),{value:y.mul(m).neg().sum([p]),gradFunc:function(b,x){var C=x[0],k=x[1],I=Ln(b.shape,[p]);return[b.reshape(I).mul(C.toFloat().sub(k.exp())),b.reshape(I).mul(k.exp().sub(C.toFloat()))]}}})(h,f)}(o,a);return Ui(u,s,i)}}),AP=Object.freeze({get Reduction(){return Tn},absoluteDifference:_P,computeWeightedLoss:Ui,cosineDistance:yP,hingeLoss:xP,huberLoss:wP,logLoss:CP,meanSquaredError:DP,sigmoidCrossEntropy:EP,softmaxCrossEntropy:SP});function jw(r,n){return n===void 0&&(n=!1),O.tidy(function(){if(r.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+r.shape.length+"D Tensor.");for(var e=r.shape[0],t=r.shape[1],i=$1(e),o=r.clone(),a=ii([[1]],[1,1]),s=a.clone(),c=e>=t?t:e,l=function(u){var h,f=o,p=s,m=i;h=O.tidy(function(){var g=o.slice([u,u],[e-u,1]),v=g.norm(),_=o.slice([u,u],[1,1]),y=ii([[-1]]).where(_.greater(0),ii([[1]])),b=_.sub(y.mul(v)),x=g.div(b);s=x.shape[0]===1?a.clone():a.concat(x.slice([1,0],[x.shape[0]-1,x.shape[1]]),0);var C=y.matMul(b).div(v).neg(),k=o.slice([u,0],[e-u,t]),I=C.mul(s);if(u===0)o=k.sub(I.matMul(s.transpose().matMul(k)));else{var S=k.sub(I.matMul(s.transpose().matMul(k)));o=o.slice([0,0],[u,t]).concat(S,0)}var D=i.slice([0,u],[e,i.shape[1]-u]);if(u===0)i=D.sub(D.matMul(s).matMul(I.transpose()));else{var R=D.sub(D.matMul(s).matMul(I.transpose()));i=i.slice([0,0],[e,u]).concat(R,1)}return[s,o,i]}),s=h[0],o=h[1],i=h[2],Yn([f,p,m])},d=0;d<c;++d)l(d);return!n&&e>t&&(i=i.slice([0,0],[e,t]),o=o.slice([0,0],[t,t])),[i,o]})}var kP=T({bandPart_:function(r,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var t=E(r,"a","bandPart");if(t.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+t.rank+".");var i=t.shape,o=t.shape.slice(-2),a=o[0],s=o[1];if(!(n<=a))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+a+").");if(!(e<=s))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+s+").");n<0&&(n=a),e<0&&(e=s);var c=Nh(0,a,1,"int32").reshape([-1,1]),l=Nh(0,s,1,"int32"),d=wt(c,l),u=Jh(d.lessEqual(re(+n,"int32")),d.greaterEqual(re(-e,"int32"))),h=It([a,s],t.dtype);return Cn(bt(t.reshape([-1,a,s])).map(function(f){return ga(u,f,h)})).reshape(i)}}),IP=T({gramSchmidt_:function(r){var n;if(Array.isArray(r)){n=!1,A(r!=null&&r.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=r[0].shape[0],t=function(c){A(r[c].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+r[c].shape[0]+" vs. "+e+")"})},i=1;i<r.length;++i)t(i)}else n=!0,r=yv(r,r.shape[0],0).map(function(c){return Q1(c,[0])});A(r.length<=r[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+r.length+") exceeds number of dimensions ("+r[0].shape[0]+")."});var o=[],a=r,s=function(c){o.push(O.tidy(function(){var l=a[c];if(c>0)for(var d=0;d<c;++d){var u=aD(o[d].mulStrict(l)).mul(o[d]);l=l.sub(u)}return l.div(dD(l,"euclidean"))}))};for(i=0;i<r.length;++i)s(i);return n?Cn(o,0):o}}),MP=T({qr_:function(r,n){if(n===void 0&&(n=!1),r.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+r.rank);if(r.rank===2)return jw(r,n);var e=r.shape.slice(0,r.shape.length-2).reduce(function(a,s){return a*s}),t=bt(r.reshape([e,r.shape[r.shape.length-2],r.shape[r.shape.length-1]]),0),i=[],o=[];return t.forEach(function(a){var s=jw(a,n),c=s[0],l=s[1];i.push(c),o.push(l)}),[Cn(i,0).reshape(r.shape),Cn(o,0).reshape(r.shape)]}}),RP=Object.freeze({bandPart:kP,gramSchmidt:IP,qr:MP});function ef(r,n,e,t,i,o){t==null&&(t=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var a=r.shape[0];return e=Math.min(e,a),A(0<=t&&t<=1,function(){return"iouThreshold must be in [0, 1], but was '"+t+"'"}),A(r.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+r.rank+"'"}),A(r.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+r.shape[1]}),A(n.rank===1,function(){return"scores must be a 1D tensor"}),A(n.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+n.shape[0]}),A(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:t,scoreThreshold:i,softNmsSigma:o}}var TP=T({resizeBilinear_:function(r,n,e){e===void 0&&(e=!1);var t=E(r,"images","resizeBilinear");A(t.rank===3||t.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+t.rank+"."}),A(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=n[0],s=n[1],c=O.runKernelFunc(function(l,d){return d([i]),l.resizeBilinear(i,a,s,e)},{x:i},function(l,d){return{x:function(){return O.runKernelFunc(function(u){return u.resizeBilinearBackprop(l,d[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:a,newWidth:s});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),FP=T({resizeNearestNeighbor_:function(r,n,e){e===void 0&&(e=!1);var t=E(r,"images","resizeNearestNeighbor");A(t.rank===3||t.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+t.rank+"."}),A(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),A(t.dtype==="float32"||t.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=n[0],s=n[1],c=O.runKernelFunc(function(l,d){return d([i]),l.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(l,d){return{batchImages:function(){return O.runKernelFunc(function(u){return u.resizeNearestNeighborBackprop(l,d[0],e)},{})}}});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),OP=T({nonMaxSuppression_:function(r,n,e,t,i){t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=E(r,"boxes","nonMaxSuppression"),a=E(n,"scores","nonMaxSuppression"),s=ef(o,a,e,t,i);e=s.maxOutputSize,t=s.iouThreshold,i=s.scoreThreshold;var c={maxOutputSize:e,iouThreshold:t,scoreThreshold:i};return O.runKernelFunc(function(l){return l.nonMaxSuppression(o,a,e,t,i)},{boxes:o,scores:a},null,"NonMaxSuppressionV3",c)}}),NP=function(r,n,e,t,i){return t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),me(this,void 0,void 0,function(){var o,a,s,c,l,d,u;return ge(this,function(h){switch(h.label){case 0:return o=E(r,"boxes","nonMaxSuppressionAsync"),a=E(n,"scores","nonMaxSuppressionAsync"),s=ef(o,a,e,t,i),e=s.maxOutputSize,t=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return c=h.sent(),l=c[0],d=c[1],u=Iv(l,d,e,t,i),o!==r&&o.dispose(),a!==n&&a.dispose(),[2,u]}})})},PP=T({nonMaxSuppressionWithScore_:function(r,n,e,t,i,o){t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var a=E(r,"boxes","nonMaxSuppression"),s=E(n,"scores","nonMaxSuppression"),c=ef(a,s,e,t,i,o),l={maxOutputSize:e=c.maxOutputSize,iouThreshold:t=c.iouThreshold,scoreThreshold:i=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},d=O.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:d[0],selectedScores:d[1]}}}),LP=function(r,n,e,t,i,o){return t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),me(this,void 0,void 0,function(){var a,s,c,l,d,u,h;return ge(this,function(f){switch(f.label){case 0:return a=E(r,"boxes","nonMaxSuppressionAsync"),s=E(n,"scores","nonMaxSuppressionAsync"),c=ef(a,s,e,t,i,o),e=c.maxOutputSize,t=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=f.sent(),d=l[0],u=l[1],h=Mv(d,u,e,t,i,o),a!==r&&a.dispose(),s!==n&&s.dispose(),[2,h]}})})},BP=T({cropAndResize_:function(r,n,e,t,i,o){var a=E(r,"image","cropAndResize"),s=E(n,"boxes","cropAndResize","float32"),c=E(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return A(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),A(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),A(c.rank===1&&c.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),A(t.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+t.length+"."}),A(t[0]>=1&&t[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+t}),A(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),O.runKernelFunc(function(d,u){return d.cropAndResize(a,s,c,t,i,o)},{images:a,boxes:s,boxInd:c},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:t})}}),Xl=Object.freeze({resizeBilinear:TP,resizeNearestNeighbor:FP,nonMaxSuppression:OP,nonMaxSuppressionAsync:NP,nonMaxSuppressionWithScore:PP,nonMaxSuppressionWithScoreAsync:LP,cropAndResize:BP}),Gv=function(r,n){return!(r>0)||n==="linear"},qv=function(r,n,e){if(e==null||e==="linear")return r;if(e==="relu")return r.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},Yv=function(r,n){var e=n,t=en(r.shape,n.shape);return t.length>0&&(e=e.sum(t)),e.reshape(r.shape)},$v=function(r,n,e){if(n==="linear")return r;if(n==="relu")return pt(r);if(n==="elu")return sD(r);if(n==="relu6")return lD(r);if(n==="prelu")return cD(r,e);throw new Error("Unknown fused activation "+n+".")},VP=T({fusedMatMul_:function(r){var n,e=r.a,t=r.b,i=r.transposeA,o=i!==void 0&&i,a=r.transposeB,s=a!==void 0&&a,c=r.bias,l=r.activation,d=l===void 0?"linear":l,u=r.preluActivationWeights;if(Gv(O.state.gradientDepth,d)===!1){var h=Xs(e,t,o,s);return c!=null&&(h=Oe(h,c)),$v(h,d,u)}var f=E(e,"a","fused matMul"),p=E(t,"b","fused matMul");n=Pt(f,p),f=n[0],p=n[1];var m=o?f.shape[f.rank-2]:f.shape[f.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=o?f.shape[f.rank-1]:f.shape[f.rank-2],_=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=f.shape.slice(0,-2),b=p.shape.slice(0,-2),x=ve(y),C=ve(b);A(f.rank>=2&&p.rank>=2&&f.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."}),A(Jt(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."}),A(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var k,I,S=f.shape.slice(0,-2).concat([v,_]),D=o?f.as3D(x,m,v):f.as3D(x,v,m),R=s?p.as3D(C,_,g):p.as3D(C,g,_);c!=null&&rt(S,(k=Pt(k=E(c,"bias","fused matMul"),f)[0]).shape),u!=null&&(I=E(u,"prelu weights","fused matMul"));var M={a:D,b:R};c!=null&&(M.bias=k),u!=null&&(M.preluActivationWeights=I);var B=[D,R];return O.runKernelFunc(function(V,z){var G=V.fusedBatchMatMul({a:D,b:R,transposeA:o,transposeB:s,bias:k,activation:d,preluActivationWeights:I});return z([D,R,G]),G},M,function(V,z){var G=z[0],W=z[1],j=z[2],q=qv(V,j,d),K={};return c!=null&&(K={bias:function(){return Yv(k,q)}}),Object.assign(o||s?!o&&s?{a:function(){return q.matMul(W,!1,!1)},b:function(){return q.matMul(G,!0,!1)}}:o&&!s?{a:function(){return W.matMul(q,!1,!0)},b:function(){return G.matMul(q,!1,!1)}}:{a:function(){return W.matMul(q,!0,!0)},b:function(){return q.matMul(G,!0,!0)}}:{a:function(){return q.matMul(W,!1,!0)},b:function(){return G.matMul(q,!0,!1)}},K)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:d},B,[!0]).reshape(S)}}),zP=T({fusedConv2d_:function(r){var n=r.x,e=r.filter,t=r.strides,i=r.pad,o=r.dataFormat,a=o===void 0?"NHWC":o,s=r.dilations,c=s===void 0?[1,1]:s,l=r.dimRoundingMode,d=r.bias,u=r.activation,h=u===void 0?"linear":u,f=r.preluActivationWeights;if(h=h||"linear",Gv(O.state.gradientDepth,h)===!1){var p=hn(n,e,t,i,a,c,l);return d!=null&&(p=Oe(p,d)),$v(p,h,f)}var m=E(n,"x","conv2d"),g=E(e,"filter","conv2d"),v=m,_=!1;m.rank===3&&(_=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),A(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),A(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&A(Vt(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),A(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),A(Bn(t,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+c+"'"}),A(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var y,b,x=Ao(v.shape,g.shape,t,c,i,l);d!=null&&(y=Pt(y=E(d,"bias","fused conv2d"),m)[0],rt(x.outShape,y.shape)),f!=null&&(b=E(f,"prelu weights","fused conv2d"));var C={x:v,filter:g};d!=null&&(C.bias=y),f!=null&&(C.preluActivationWeights=b);var k=[g,v],I=O.runKernelFunc(function(S,D){var R=S.fusedConv2d({input:v,filter:g,convInfo:x,bias:y,activation:h,preluActivationWeights:b});return D([g,v,R]),R},C,function(S,D){var R=D,M=R[0],B=R[1],V=R[2],z=qv(S,V,h);A(ma(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var G={};return d!=null&&(G={bias:function(){return Yv(y,z)}}),Object.assign({x:function(){return eD(B.shape,z,M,t,i)},filter:function(){return Vv(B,z,M.shape,t,i)}},G)},"FusedConv2D",{convInfo:x,activation:h},k,[!0]);return _?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),UP=T({fusedDepthwiseConv2d_:function(r){var n=r.x,e=r.filter,t=r.strides,i=r.pad,o=r.dataFormat,a=o===void 0?"NHWC":o,s=r.dilations,c=s===void 0?[1,1]:s,l=r.dimRoundingMode,d=r.bias,u=r.activation,h=u===void 0?"linear":u,f=r.preluActivationWeights;if(Gv(O.state.gradientDepth,h)===!1){var p=Yl(n,e,t,i,a,c,l);return d!=null&&(p=Oe(p,d)),$v(p,h,f)}var m=E(n,"x","depthwiseConv2d"),g=E(e,"filter","depthwiseConv2d"),v=m,_=!1;m.rank===3&&(_=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),A(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),A(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),A(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),c==null&&(c=[1,1]),A(Bn(t,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+c+"'"}),l!=null&&A(Vt(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var y,b,x=Ao(v.shape,g.shape,t,c,i,l,!0);d!=null&&(y=Pt(y=E(d,"bias","fused conv2d"),m)[0],rt(x.outShape,y.shape)),f!=null&&(b=E(f,"prelu weights","fused depthwiseConv2d"));var C={x:v,filter:g};d!=null&&(C.bias=y),f!=null&&(C.preluActivationWeights=b);var k=[g,v],I=O.runKernelFunc(function(S,D){var R=S.fusedDepthwiseConv2D({input:v,filter:g,convInfo:x,bias:y,activation:h,preluActivationWeights:b});return D([g,v,R]),R},C,function(S,D){A(ma(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var R=D[0],M=D[1],B=D[2],V=qv(S,B,h),z={};return d!=null&&(z={bias:function(){return Yv(y,V)}}),Object.assign({x:function(){return tD(M.shape,V,R,x)},filter:function(){return nD(M,V,R.shape,x)}},z)},"FusedDepthwiseConv2D",{convInfo:x,activation:h},k,[!0]);return _?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),jP=Object.freeze({matMul:VP,conv2d:zP,depthwiseConv2d:UP}),WP=Object.freeze({image:Xl,linalg:RP,losses:AP,spectral:hP,fused:jP,signal:vP,square:CO,squaredDifference:zC,conv1d:TN,conv2d:hn,conv3d:FN,depthwiseConv2d:Yl,separableConv2d:$l,conv2dTranspose:ON,conv3dTranspose:NN,op:T,batchNormalization2d:JO,batchNormalization3d:eN,batchNormalization4d:tN,batchNormalization:nN,batchNorm:Pv,batchNorm2d:rN,batchNorm3d:iN,batchNorm4d:oN,booleanMaskAsync:RN,complex:yn,real:_r,imag:ri,concat:Ft,concat1d:dT,concat2d:uT,concat3d:hT,concat4d:fT,split:yv,matMul:Xs,dot:PN,outerProduct:LN,reverse:Kl,reverse1d:BN,reverse2d:VN,reverse3d:zN,reverse4d:UN,maxPool:zt,avgPool:zi,pool:jN,maxPool3d:WN,avgPool3d:HN,slice:Br,slice1d:GN,slice2d:qN,slice3d:zv,slice4d:YN,abs:DO,acos:EO,acosh:SO,asin:AO,asinh:kO,atan:IO,atanh:MO,ceil:RO,clipByValue:Hl,cos:TO,cosh:FO,erf:OO,exp:Qh,expm1:NO,floor:PO,log:LO,log1p:BO,logSigmoid:VO,neg:Gl,reciprocal:zO,round:UO,rsqrt:UC,sigmoid:Nv,sign:jO,isNaN:WO,isInf:HO,isFinite:GO,sin:qO,sinh:YO,softplus:$O,sqrt:KO,step:XO,tan:QO,tanh:ZO,all:$N,any:KN,argMax:XN,argMin:QN,logSumExp:ZN,max:_a,mean:JN,min:eP,moments:tP,sum:aD,prod:nP,equal:KC,equalStrict:xN,greater:wN,greaterEqual:XC,greaterEqualStrict:CN,greaterStrict:DN,less:EN,lessEqual:SN,lessEqualStrict:AN,lessStrict:kN,notEqual:IN,notEqualStrict:MN,add:Oe,addN:cN,addStrict:lN,atan2:dN,div:yr,divNoNan:uN,divStrict:hN,floorDiv:YC,maximum:Lv,maximumStrict:fN,minimum:$C,minimumStrict:pN,mod:mN,modStrict:gN,mul:Bt,mulStrict:vN,pow:Uh,powStrict:bN,squaredDifferenceStrict:_N,sub:wt,subStrict:yN,elu:sD,leakyRelu:rP,prelu:cD,relu:pt,relu6:lD,selu:iP,logicalAnd:Jh,logicalNot:aN,logicalOr:GC,logicalXor:sN,where:ga,whereAsync:qC,buffer:Ke,print:wT,batchToSpaceND:Y1,broadcastTo:CT,cast:DT,clone:ET,cumsum:ST,depthToSpace:AT,expandDims:Mn,eye:$1,multinomial:kT,oneHot:rv,pad:Vi,pad1d:IT,pad2d:MT,pad3d:RT,pad4d:TT,rand:FT,randomNormal:OT,randomGamma:NT,randomUniform:K1,reshape:Vn,spaceToBatchND:X1,squeeze:Q1,stack:Cn,tile:ha,truncatedNormal:PT,unstack:bt,setdiff1dAsync:LT,fill:cr,linspace:lT,ones:Ks,range:Nh,scalar:re,tensor:un,tensor1d:At,tensor2d:ii,tensor3d:qh,tensor4d:an,tensor5d:aT,tensor6d:sT,variable:cT,zeros:It,onesLike:q1,zerosLike:at,transpose:xr,softmax:zn,logSoftmax:VT,localResponseNormalization:oP,norm:dD,gather:Bv,unsortedSegmentSum:QC,basicLSTMCell:aP,multiRNNCell:sP,movingAverage:cP,stridedSlice:lP,topk:dP,scatterND:uP,fft:Uv,ifft:jh,rfft:jv,irfft:uD,sparseToDense:fP,gatherND:pP,diag:mP,dropout:gP,hannWindow:Wv,hammingWindow:fD,frame:Hv,stft:pD,inTopKAsync:bP});function Y(r,n){Array.isArray(r)||(r=[r]),r.forEach(function(e){e!=null&&A(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function Ng(r,n,e,t){if(e==="linear")return r.linear(n);if(e==="relu")return r.relu(n);if(e==="elu")return r.elu(n);if(e==="relu6")return r.relu6(n);if(e==="prelu")return r.prelu(n,t);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var HP=function(r){function n(){var e=r.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new oC(e,O),e}return Vr(n,r),n.prototype.write=function(e,t,i){this.firstUse&&(this.firstUse=!1,U().get("IS_NODE")&&Fh(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,t,i,o){this.data.set(e,{values:t,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var t=this.data.get(e),i=t.dtype,o=t.complexTensors;return i==="complex64"?av(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),i=t;if(e.dtype==="string")try{i=t.map(function(o){return Fl(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ke(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,t,i){var o=this.write(e,t,i);return O.makeTensorFromDataId(o,t,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;t!=null&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return me(this,void 0,void 0,function(){var t;return ge(this,function(i){return t=Pr(),e(),[2,{kernelMs:Pr()-t}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,t){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:O.keep(e.clone()),imag:O.keep(t.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,t,i){if(Y(e,"slice"),Dv(e.shape,t,i)){var o=Ev(t,e.strides),a=ve(i);return un(this.readSync(e.dataId).subarray(o,o+a),i,e.dtype)}for(var s=Ke(i,e.dtype),c=this.bufferSync(e),l=0;l<s.size;++l){var d=s.indexToLoc(l).map(function(u,h){return u+t[h]});s.values[l]=c.get.apply(c,d)}return s.toTensor()},n.prototype.stridedSlice=function(e,t,i,o){Y(e,"stridedSlice");var a=$h(t,i,o);if(a.some(function(f){return f===0}))return un([],a);for(var s=Ke(a,e.dtype),c=this.bufferSync(e),l=0;l<s.size;l++){for(var d=s.indexToLoc(l),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[h]*o[h]+t[h];s.set.apply(s,[c.get.apply(c,u)].concat(d))}return s.toTensor()},n.prototype.diag=function(e){for(var t=this.readSync(e.dataId),i=Ke([e.size,e.size],e.dtype),o=i.values,a=0;a<t.length;a++)o[a*e.size+a]=t[a];return i.toTensor()},n.prototype.unstack=function(e,t){for(var i=e.shape[t],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(o[a++]=e.shape[s]);var c=new Array(e.rank).fill(0),l=e.shape.slice();l[t]=1;var d=new Array(i);for(s=0;s<d.length;s++)c[t]=s,d[s]=this.slice(e,c,l).reshape(o);return d},n.prototype.reverse=function(e,t){Y(e,"reverse");for(var i=Ke(e.shape,e.dtype),o=this.bufferSync(e),a=function(c){var l=i.indexToLoc(c),d=l.slice();t.forEach(function(u){return d[u]=e.shape[u]-1-d[u]}),i.set.apply(i,[o.get.apply(o,d)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},n.prototype.concat=function(e,t){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(f){return _r(f)}),a=e.map(function(f){return ri(f)});return yn(this.concat(o,t),this.concat(a,t))}var s=e.map(function(f){var p=ve(f.shape.slice(t));return f.as2D(-1,p)}),c=pa(s.map(function(f){return f.shape}),1),l=Ke(c,e[0].dtype).values;if(s[0].shape[0]===1){var d=0;s.forEach(function(f){l.set(i.readSync(f.dataId),d),d+=f.size})}else{var u=0;s.forEach(function(f){for(var p=i.readSync(f.dataId),m=0,g=0;g<f.shape[0];++g)for(var v=g*c[1]+u,_=0;_<f.shape[1];++_)l[v+_]=p[m++];u+=f.shape[1]})}var h=pa(e.map(function(f){return f.shape}),t);return un(l,h,e[0].dtype)},n.prototype.neg=function(e){return Y(e,"neg"),this.multiply(re(-1),e)},n.prototype.add=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(e,t,dn(e.dtype,t.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var t=this;Y(e,"addN");for(var i=e.map(function(d){return t.readSync(d.dataId)}),o=Ke(e[0].shape,e[0].dtype),a=o.values,s=0;s<e.length;s++)for(var c=i[s],l=0;l<a.length;l++)a[l]+=c[l];return o.toTensor()},n.prototype.softmax=function(e,t){var i=tn([t],e.shape),o=this.max(e,i),a=Ln(o.shape,i),s=this.subtract(e,o.reshape(a)),c=this.exp(s),l=this.sum(c,i).reshape(a);return this.realDivide(c,l)},n.prototype.subtract=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(e,t,dn(e.dtype,t.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,t){return Y([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,t,i,o){Y([e,t],"matMul");for(var a=i?e.shape[1]:e.shape[2],s=i?e.shape[2]:e.shape[1],c=o?t.shape[1]:t.shape[2],l=e.shape[0],d=this.readSync(e.dataId),u=this.readSync(t.dataId),h=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=h[0],p=h[1],m=h[2],g=o?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=g[0],_=g[1],y=g[2],b=s*c,x=Ke([l,s,c],e.dtype),C=x.values,k=this.blockSize,I=0;I<l;I++)for(var S=0;S<s;S+=k)for(var D=0;D<c;D+=k)for(var R=0;R<a;R+=k)for(var M=Math.min(S+k,s),B=Math.min(D+k,c),V=Math.min(R+k,a),z=S;z<M;z++)for(var G=D;G<B;G++){for(var W=0,j=R;j<V;j++)W+=d[I*f+z*p+j*m]*u[j*v+G*_+I*y];C[I*b+(z*c+G)]+=W}return x.toTensor()},n.prototype.fusedBatchMatMul=function(e){var t=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=this.batchMatMul(t,i,o,a);return s&&(d=this.add(d,s)),c&&(d=Ng(this,d,c,l)),d},n.prototype.multiply=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(e,t,dn(e.dtype,t.dtype),function(i,o){return i*o})},n.prototype.realDivide=function(e,t){return Y([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(i,o){return i/o})},n.prototype.floorDiv=function(e,t){return Y([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,t){Y(e,"sum"),Gn("sum",t,e.rank);for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,dn(e.dtype,"int32")),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=0,p=0;p<c;++p)f+=d[h+p];l[u]=f}return s},n.prototype.prod=function(e,t){Y(e,"sum");for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,dn(e.dtype,"int32")),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=1,p=0;p<c;++p)f*=d[h+p];l[u]=f}return s},n.prototype.unsortedSegmentSum=function(e,t,i){Y(e,"unsortedSegmentSum");for(var o=[],a=e.rank-t.rank,s=0;s<a;++s)t=t.expandDims(s+1);for(s=0;s<i;++s){var c=re(s,"int32"),l=KC(c,t).asType("float32").mul(e).sum(0);o.push(l)}return Cn(o)},n.prototype.argMin=function(e,t){Y(e,"argMin");var i=[t];Gn("argMin",i,e.rank);for(var o=xn(e.shape,i),a=o[0],s=o[1],c=It(a,"int32"),l=ve(s),d=this.readSync(c.dataId),u=this.readSync(e.dataId),h=0;h<d.length;++h){for(var f=h*l,p=u[f],m=0,g=0;g<l;++g){var v=u[f+g];v<p&&(p=v,m=g)}d[h]=m}return c},n.prototype.argMax=function(e,t){Y(e,"argMax");var i=[t];Gn("argMax",i,e.rank);for(var o=xn(e.shape,i),a=o[0],s=o[1],c=It(a,"int32"),l=ve(s),d=this.readSync(c.dataId),u=this.readSync(e.dataId),h=0;h<d.length;++h){for(var f=h*l,p=u[f],m=0,g=0;g<l;++g){var v=u[f+g];v>p&&(p=v,m=g)}d[h]=m}return c},n.prototype.cumsum=function(e,t,i,o){if(Y(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=dn(e.dtype,"int32"),s=It(e.shape,a),c=this.readSync(s.dataId),l=this.readSync(e.dataId),d=e.shape[e.rank-1],u=o?function(g,v){return g+d-v-1}:function(g,v){return g+v},h=0;h<l.length;h+=d)for(var f=0;f<d;f++){var p=u(h,f);if(f===0)c[p]=i?0:l[p];else{var m=u(h,f-1);c[p]=i?l[m]+c[m]:l[p]+c[m]}}return s},n.prototype.equal=function(e,t){return Y([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,t){return Y([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,t){return Y([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,t){return Y([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,t){return Y([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,t){return Y([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){Y(e,"logicalNot");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)i[o]=t[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,t){return Y([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,t){return Y([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i||o})},n.prototype.select=function(e,t,i){Y([e,t,i],"select");for(var o=this.readSync(e.dataId),a=this.readSync(t.dataId),s=this.readSync(i.dataId),c=It(t.shape,dn(t.dtype,i.dtype)),l=this.readSync(c.dataId),d=0,u=e.rank===0||e.rank>1||t.rank===1?1:ve(t.shape.slice(1)),h=0;h<o.length;h++)for(var f=0;f<u;f++)o[h]===1?l[d++]=a[h]:l[d++]=s[h];return c},n.prototype.where=function(e){Y([e],"where");var t=this.readSync(e.dataId);return Rv(e.shape,t)},n.prototype.topk=function(e,t,i){return Y(e,"topk"),dC(this.readSync(e.dataId),e.shape,e.dtype,t)},n.prototype.min=function(e,t){Y(e,"min"),Gn("min",t,e.rank);for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,e.dtype),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];m<f&&(f=m)}l[u]=f}return s},n.prototype.minimum=function(e,t){return Y([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,t){return Y([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},n.prototype.max=function(e,t){Y(e,"max"),Gn("max",t,e.rank);for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,e.dtype),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];m>f&&(f=m)}l[u]=f}return s},n.prototype.maximum=function(e,t){return Y([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,t){Y(e,"all"),Gn("all",t,e.rank);for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,e.dtype),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];f=f&&m}l[u]=f}return s},n.prototype.any=function(e,t){Y(e,"any"),Gn("any",t,e.rank);for(var i=xn(e.shape,t),o=i[0],a=i[1],s=It(o,e.dtype),c=ve(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];f=f||m}l[u]=f}return s},n.prototype.squaredDifference=function(e,t){return Y([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){var a=i-o;return a*a})},n.prototype.ceil=function(e){Y(e,"ceil");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.ceil(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){Y(e,"floor");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.floor(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){Y(e,"x");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)t[o]<0?i[o]=-1:t[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){Y(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Number.isNaN(t[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){Y(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Math.abs(t[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){Y(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Number.isFinite(t[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){Y(e,"round");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=Math.floor(t[o]);t[o]-a<.5?i[o]=Math.floor(t[o]):t[o]-a>.5?i[o]=Math.ceil(t[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){Y(e,"exp");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.exp(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){Y(e,"expm1");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.expm1(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){Y(e,"log");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.log(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){Y(e,"log1p");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.log1p(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){Y(e,"sqrt");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){Y(e,"rsqrt");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){Y(e,"reciprocal");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=1/t[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){Y(e,"relu");for(var t=It(e.shape,e.dtype),i=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return t},n.prototype.relu6=function(e){Y(e,"relu");for(var t=It(e.shape,e.dtype),i=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return t},n.prototype.prelu=function(e,t){return Y([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){Y(e,"elu");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];t[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},n.prototype.eluDer=function(e,t){Y([e,t],"eluDer");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),a=this.readSync(e.dataId),s=0;s<o.length;++s){var c=o[s];i[s]=c>=1?a[s]:a[s]*(c+1)}return this.makeOutput(i,t.shape,"float32")},n.prototype.selu=function(e){Y(e,"selu");for(var t=Fv,i=Ov,o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var c=a[s];o[s]=c>=0?i*c:t*(Math.exp(c)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,t,i){Y(e,"clip");for(var o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var c=a[s];o[s]=c>i?i:c<t?t:c}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.abs(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var a=i[2*o],s=i[2*o+1];t[o]=Math.hypot(a,s)}return this.makeOutput(t,e.shape,"float32")},n.prototype.int=function(e){Y(e,"int");for(var t=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=i[o];return this.makeOutput(t,e.shape,"int32")},n.prototype.sigmoid=function(e){Y(e,"sigmoid");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(t,e.shape,"float32")},n.prototype.softplus=function(e){Y(e,"softplus");for(var t=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a]>-t,c=o[a]<t,l=Math.exp(o[a]),d=void 0;d=c?l:s?o[a]:Math.log(1+l),i[a]=d}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){Y(e,"sin");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.sin(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.cos=function(e){Y(e,"cos");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.cos(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.tan=function(e){Y(e,"tan");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.tan(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.asin=function(e){Y(e,"asin");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.asin(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.acos=function(e){Y(e,"acos");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.acos(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atan=function(e){Y(e,"atan");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.atan(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atan2=function(e,t){return Y([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){Y(e,"sinh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.sinh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.cosh=function(e){Y(e,"cosh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.cosh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.tanh=function(e){Y(e,"tanh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=i1(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.asinh=function(e){Y(e,"asinh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.asinh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.acosh=function(e){Y(e,"acosh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.acosh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atanh=function(e){Y(e,"atanh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.atanh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.erf=function(e){Y(e,"erf");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),c=1/(1+.3275911*s);t[o]=a*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-s*s))}return this.makeOutput(t,e.shape,"float32")},n.prototype.step=function(e,t){t===void 0&&(t=0),Y(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:t}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights,l=this.conv2d(t,i,o);return a&&(l=this.add(l,a)),s&&(l=Ng(this,l,s,c)),l},n.prototype.conv2d=function(e,t,i){Y([e,t],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,c=i.dilationWidth,l=i.padInfo.left,d=i.padInfo.top,u=i.dataFormat==="channelsLast",h=Ke(i.outShape,e.dtype),f=e.strides[0],p=u?e.strides[1]:e.strides[2],m=u?e.strides[2]:1,g=u?1:e.strides[1],v=h.strides[0],_=u?h.strides[1]:h.strides[2],y=u?h.strides[2]:1,b=u?1:h.strides[1],x=this.readSync(e.dataId),C=this.readSync(t.dataId),k=h.values,I=0;I<i.batchSize;++I)for(var S=I*f,D=I*v,R=0;R<i.outHeight;++R)for(var M=D+R*_,B=R*i.strideHeight-d,V=0;V<o;V++){var z=B+V*s;if(!(z<0||z>=i.inHeight))for(var G=V*t.strides[0],W=S+z*p,j=0;j<i.outWidth;++j)for(var q=M+j*y,K=j*i.strideWidth-l,ie=0;ie<a;ie++){var ce=K+ie*c;if(!(ce<0||ce>=i.inWidth))for(var pe=W+ce*m,Ne=G+ie*t.strides[1],De=0;De<i.inChannels;++De){for(var Ee=x[pe+De*g],Ue=0;Ue<i.outChannels;++Ue)k[q+Ue*b]+=Ee*C[Ne+Ue];Ne+=i.outChannels}}}return h.toTensor()},n.prototype.conv3d=function(e,t,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,c=i.dilationDepth,l=i.dilationHeight,d=i.dilationWidth,u=i.padInfo.front,h=i.padInfo.left,f=i.padInfo.top,p=Ke(i.outShape,e.dtype),m=this.readSync(e.dataId),g=this.readSync(t.dataId),v=p.values,_=0;_<i.batchSize;++_)for(var y=_*e.strides[0],b=_*p.strides[0],x=0;x<i.outDepth;++x)for(var C=b+x*p.strides[1],k=x*i.strideDepth-u,I=0;I<o;I++){var S=k+I*c;if(!(S<0||S>=i.inDepth))for(var D=I*t.strides[0],R=y+S*e.strides[1],M=0;M<i.outHeight;++M)for(var B=C+M*p.strides[2],V=M*i.strideHeight-f,z=0;z<a;z++){var G=V+z*l;if(!(G<0||G>=i.inHeight))for(var W=D+z*t.strides[1],j=R+G*e.strides[2],q=0;q<i.outWidth;++q)for(var K=B+q*i.outChannels,ie=q*i.strideWidth-h,ce=0;ce<s;ce++){var pe=ie+ce*d;if(!(pe<0||pe>=i.inWidth))for(var Ne=W+ce*t.strides[2],De=j+pe*i.inChannels,Ee=Ne,Ue=0;Ue<i.inChannels;++Ue){for(var Ye=m[De+Ue],Xe=0;Xe<i.outChannels;++Xe)v[K+Xe]+=Ye*g[Ee+Xe];Ee+=i.outChannels}}}}return p.toTensor()},n.prototype.conv2dDerInput=function(e,t,i){Y([e,t],"conv2dDerInput");for(var o=Ke(i.inShape,"float32"),a=o.values,s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=t.strides,d=l[0],u=l[1],h=l[2],f=i.batchSize,p=i.filterHeight,m=i.filterWidth,g=i.inChannels,v=i.inHeight,_=i.inWidth,y=i.outChannels,b=i.outHeight,x=i.outWidth,C=i.strideHeight,k=i.strideWidth,I=i.dataFormat,S=p-1-i.padInfo.top,D=m-1-i.padInfo.left,R=I==="channelsLast",M=o.strides[0],B=R?o.strides[1]:o.strides[2],V=R?o.strides[2]:1,z=R?1:o.strides[1],G=e.strides[0],W=R?e.strides[1]:e.strides[2],j=R?e.strides[2]:1,q=R?1:e.strides[1],K=0;K<f;++K)for(var ie=0;ie<g;++ie)for(var ce=0;ce<v;++ce)for(var pe=ce-S,Ne=Math.max(0,Math.ceil(pe/C)),De=Math.min(b,(p+pe)/C),Ee=0;Ee<_;++Ee){for(var Ue=Ee-D,Ye=Math.max(0,Math.ceil(Ue/k)),Xe=Math.min(x,(m+Ue)/k),st=0,be=Ne;be<De;++be)for(var Se=be*C-pe,qe=Ye;qe<Xe;++qe)for(var ct=G*K+W*be+j*qe,kt=d*(p-1-Se)+u*(m-1-(qe*k-Ue))+h*ie,Lt=0;Lt<y;++Lt)st+=s[ct+q*Lt]*c[kt+Lt];a[M*K+B*ce+V*Ee+z*ie]=st}return o.toTensor()},n.prototype.conv3dDerInput=function(e,t,i){for(var o=Ke(i.inShape,"float32"),a=o.values,s=o.strides,c=s[0],l=s[1],d=s[2],u=s[3],h=this.readSync(e.dataId),f=e.strides,p=f[0],m=f[1],g=f[2],v=f[3],_=this.readSync(t.dataId),y=t.strides,b=y[0],x=y[1],C=y[2],k=y[3],I=i.batchSize,S=i.filterDepth,D=i.filterHeight,R=i.filterWidth,M=i.inChannels,B=i.inDepth,V=i.inHeight,z=i.inWidth,G=i.outChannels,W=i.outDepth,j=i.outHeight,q=i.outWidth,K=i.strideDepth,ie=i.strideHeight,ce=i.strideWidth,pe=S-1-i.padInfo.front,Ne=D-1-i.padInfo.top,De=R-1-i.padInfo.left,Ee=0;Ee<I;++Ee)for(var Ue=0;Ue<M;++Ue)for(var Ye=0;Ye<B;++Ye)for(var Xe=Ye-pe,st=Math.max(0,Math.ceil(Xe/K)),be=Math.min(W,(S+Xe)/K),Se=0;Se<V;++Se)for(var qe=Se-Ne,ct=Math.max(0,Math.ceil(qe/ie)),kt=Math.min(j,(D+qe)/ie),Lt=0;Lt<z;++Lt){for(var Hr=Lt-De,Gr=Math.max(0,Math.ceil(Hr/ce)),Kn=Math.min(q,(R+Hr)/ce),Ra=0,ui=st;ui<be;++ui)for(var Yi=ui*K-Xe,hi=ct;hi<kt;++hi)for(var Ta=hi*ie-qe,fi=Gr;fi<Kn;++fi)for(var Lf=p*Ee+m*ui+g*hi+v*fi,Fa=b*(S-1-Yi)+x*(D-1-Ta)+C*(R-1-(fi*ce-Hr))+k*Ue,qr=0;qr<G;++qr)Ra+=h[Lf+qr]*_[Fa+qr];a[c*Ee+l*Ye+d*Se+u*Lt+Ue]=Ra}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,t,i){Y([e,t],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=i.dataFormat==="channelsLast",d=Ke(i.filterShape,"float32"),u=i.padInfo.left,h=i.padInfo.top,f=this.bufferSync(e),p=this.bufferSync(t),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((h-m)/o)),v=Math.min(i.outHeight,(i.inHeight+h-m)/o),_=0;_<c;++_)for(var y=Math.max(0,Math.ceil((u-_)/a)),b=Math.min(i.outWidth,(i.inWidth+u-_)/a),x=0;x<i.inChannels;++x)for(var C=0;C<i.outChannels;++C){for(var k=0,I=0;I<i.batchSize;++I)for(var S=g;S<v;++S)for(var D=m+S*o-h,R=y;R<b;++R){var M=_+R*a-u;k+=l?f.get(I,D,M,x)*p.get(I,S,R,C):f.get(I,x,D,M)*p.get(I,C,S,R)}d.set(k,m,_,x,C)}return d.toTensor()},n.prototype.conv3dDerFilter=function(e,t,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,c=i.filterDepth,l=i.filterHeight,d=i.filterWidth,u=Ke(i.filterShape,"float32"),h=u.values,f=u.strides,p=f[0],m=f[1],g=f[2],v=f[3],_=this.readSync(t.dataId),y=t.strides,b=y[0],x=y[1],C=y[2],k=y[3],I=this.readSync(e.dataId),S=e.strides,D=S[0],R=S[1],M=S[2],B=S[3],V=i.padInfo.front,z=i.padInfo.left,G=i.padInfo.top,W=0;W<c;++W)for(var j=Math.max(0,Math.ceil((V-W)/o)),q=Math.min(i.outDepth,(i.inDepth+V-W)/o),K=W*p,ie=0;ie<l;++ie)for(var ce=Math.max(0,Math.ceil((G-ie)/a)),pe=Math.min(i.outHeight,(i.inHeight+G-ie)/a),Ne=ie*m+K,De=0;De<d;++De)for(var Ee=Math.max(0,Math.ceil((z-De)/s)),Ue=Math.min(i.outWidth,(i.inWidth+z-De)/s),Ye=De*g+Ne,Xe=0;Xe<i.inChannels;++Xe)for(var st=Xe*v+Ye,be=0;be<i.outChannels;++be){for(var Se=0,qe=0;qe<i.batchSize;++qe)for(var ct=qe*D,kt=qe*b,Lt=j;Lt<q;++Lt)for(var Hr=(W+Lt*o-V)*R+ct,Gr=Lt*x+kt,Kn=ce;Kn<pe;++Kn)for(var Ra=(ie+Kn*a-G)*M+Hr,ui=Kn*C+Gr,Yi=Ee;Yi<Ue;++Yi){var hi=Yi*k+ui;Se+=I[(De+Yi*s-z)*B+Ra+Xe]*_[hi+be]}h[st+be]=Se}return u.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights,l=this.depthwiseConv2D(t,i,o);return a&&(l=this.add(l,a)),s&&(l=Ng(this,l,s,c)),l},n.prototype.depthwiseConv2D=function(e,t,i){Y([e,t],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,c=i.dilationWidth,l=i.padInfo.left,d=i.padInfo.top,u=i.outChannels/i.inChannels,h=Ke(i.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=h.values,g=0;g<i.batchSize;++g)for(var v=g*e.strides[0],_=g*h.strides[0],y=0;y<i.outHeight;++y)for(var b=_+y*h.strides[1],x=y*i.strideHeight-l,C=0;C<o;++C){var k=x+C*s;if(!(k<0||k>=i.inHeight))for(var I=C*t.strides[0],S=v+k*e.strides[1],D=0;D<i.outWidth;++D)for(var R=b+D*h.strides[2],M=D*i.strideWidth-d,B=0;B<a;++B){var V=M+B*c;if(!(V<0||V>=i.inWidth))for(var z=I+B*t.strides[1],G=S+V*i.inChannels,W=R,j=z,q=0;q<i.inChannels;++q){for(var K=f[G+q],ie=0;ie<u;++ie)m[W+ie]+=K*p[j+ie];W+=u,j+=u}}}return h.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,t,i){Y([e,t],"depthwiseConv2DDerInput");for(var o=Ke(i.inShape,"float32"),a=o.values,s=o.strides,c=s[0],l=s[1],d=s[2],u=this.readSync(e.dataId),h=e.strides,f=h[0],p=h[1],m=h[2],g=this.readSync(t.dataId),v=t.strides,_=v[0],y=v[1],b=v[2],x=i.batchSize,C=i.filterHeight,k=i.filterWidth,I=i.inChannels,S=i.inHeight,D=i.inWidth,R=i.outChannels,M=i.outHeight,B=i.outWidth,V=i.strideHeight,z=i.strideWidth,G=C-1-i.padInfo.top,W=k-1-i.padInfo.left,j=R/I,q=0;q<x;++q)for(var K=0;K<I;++K)for(var ie=0;ie<S;++ie)for(var ce=ie-G,pe=Math.max(0,Math.ceil(ce/V)),Ne=Math.min(M,(C+ce)/V),De=0;De<D;++De){for(var Ee=De-W,Ue=Math.max(0,Math.ceil(Ee/z)),Ye=Math.min(B,(k+Ee)/z),Xe=0,st=pe;st<Ne;++st)for(var be=st*V-ce,Se=Ue;Se<Ye;++Se)for(var qe=f*q+p*st+m*Se,ct=_*(C-1-be)+y*(k-1-(Se*z-Ee))+b*K,kt=0;kt<j;++kt)Xe+=u[qe+(K*j+kt)]*g[ct+kt];a[c*q+l*ie+d*De+K]=Xe}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,t,i){Y([e,t],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=Ke(i.filterShape,"float32"),d=i.padInfo.left,u=i.padInfo.top,h=i.outChannels/i.inChannels,f=this.bufferSync(e),p=this.bufferSync(t),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),v=Math.min(i.outHeight,(i.inHeight+u-m)/o),_=0;_<c;++_)for(var y=Math.max(0,Math.ceil((d-_)/a)),b=Math.min(i.outWidth,(i.inWidth+d-_)/a),x=0;x<i.outChannels;++x){for(var C=Math.trunc(x/h),k=x%h,I=0,S=0;S<i.batchSize;++S)for(var D=g;D<v;++D)for(var R=m+D*o-u,M=y;M<b;++M){var B=_+M*a-d;I+=f.get(S,R,B,C)*p.get(S,D,M,x)}l.set(I,m,_,C,k)}return l.toTensor()},n.prototype.tile=function(e,t){return Y(e,"tile"),lC(this.bufferSync(e),t)},n.prototype.pad=function(e,t,i){Y(e,"pad");var o=t.map(function(h,f){return h[0]+e.shape[f]+h[1]}),a=t.map(function(h){return h[0]}),s=this.bufferSync(e),c=Ke(o,e.dtype);i!==0&&c.values.fill(i);for(var l=0;l<e.size;l++){var d=s.indexToLoc(l),u=d.map(function(h,f){return h+a[f]});c.set.apply(c,[s.get.apply(s,d)].concat(u))}return c.toTensor()},n.prototype.transpose=function(e,t){Y(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[t[o]];var a=this.readSync(e.dataId),s=Ke(i,e.dtype),c=this.bufferSync(e);for(o=0;o<e.size;++o){for(var l=c.indexToLoc(o),d=new Array(l.length),u=0;u<d.length;u++)d[u]=l[t[u]];var h=s.locToIndex(d);s.values[h]=a[o]}return s.toTensor()},n.prototype.gather=function(e,t,i){Y([e,t],"gather");var o=e.shape.slice(),a=this.readSync(t.dataId);o[i]=a.length;for(var s=Ke(o,e.dtype),c=this.bufferSync(e),l=0;l<s.size;++l){var d=s.indexToLoc(l),u=d.slice();u[i]=a[d[i]];var h=c.locToIndex(u);s.values[l]=c.values[h]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,t,i){Y([e],"batchToSpaceND");var o=t.reduce(function(u,h){return u*h}),a=Ph(e.shape,t,o),s=Lh(a.length,t.length),c=Bh(e.shape,t,o),l=Z1(i,t.length),d=J1(c,i,t.length);return e.reshape(a).transpose(s).reshape(c).slice(l,d)},n.prototype.spaceToBatchND=function(e,t,i){Y([e],"spaceToBatchND");var o=t.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,i);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var c=e.pad(a),l=Ph(c.shape,t,o,!1),d=Lh(l.length,t.length,!1),u=Bh(c.shape,t,o,!1);return c.reshape(l).transpose(d).reshape(u)},n.prototype.pool=function(e,t,i){Y(e,"pool");for(var o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,u=t.padInfo.top,h=t.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(e.dataId),m=Ke(t.outShape,e.dtype),g=m.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],_=t.outShape[2]*t.outShape[3],y=t.outShape[3],b=0;b<t.batchSize;++b)for(var x=b*v,C=b*e.strides[0],k=0;k<t.inChannels;++k)for(var I=0;I<t.outHeight;++I)for(var S=I*o-u,D=Math.max(0,S),R=Math.min(t.inHeight,l+S),M=x+I*_,B=0;B<t.outWidth;++B){for(var V=B*a-h,z=Math.max(0,V),G=Math.min(t.inWidth,d+V),W=f,j=0,q=0,K=D;K<R;K+=s){for(var ie=C+K*e.strides[1],ce=z;ce<G;ce+=c){var pe=p[ie+ce*e.strides[2]+k];i==="max"&&pe>W?W=pe:i==="avg"&&(j+=pe,q++)}if(isNaN(W))break}g[M+B*y+k]=i==="avg"?j/q:W}return m.toTensor()},n.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},n.prototype.maxPoolPositions=function(e,t){for(var i=Ke(t.outShape,"int32"),o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,u=t.padInfo.top,h=t.padInfo.left,f=this.bufferSync(e),p=0;p<t.batchSize;++p)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outHeight;++g){for(var v=g*o-u,_=v;_<0;)_+=s;for(var y=Math.min(t.inHeight,l+v),b=0;b<t.outWidth;++b){for(var x=b*a-h,C=x;C<0;)C+=c;for(var k=Math.min(t.inWidth,d+x),I=Number.NEGATIVE_INFINITY,S=-1,D=_;D<y;D+=s)for(var R=D-v,M=C;M<k;M+=c){var B=M-x,V=f.get(p,D,M,m);V>I&&(I=V,S=R*d+B)}i.set(S,p,g,b,m)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(e,t,i,o){Y([t,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,o),s=o.strideHeight,c=o.strideWidth,l=o.dilationHeight,d=o.dilationWidth,u=o.effectiveFilterHeight,h=o.effectiveFilterWidth,f=h-1-o.padInfo.left,p=u-1-o.padInfo.top,m=Ke(t.shape,"float32"),g=this.bufferSync(a),v=this.bufferSync(e),_=0;_<o.batchSize;++_)for(var y=0;y<o.inChannels;++y)for(var b=0;b<o.inHeight;++b)for(var x=0;x<o.inWidth;++x){for(var C=b-p,k=x-f,I=0,S=0;S<u;S+=l){var D=(C+S)/s;if(!(D<0||D>=o.outHeight||Math.floor(D)!==D))for(var R=0;R<h;R+=d){var M=(k+R)/c;if(!(M<0||M>=o.outWidth||Math.floor(M)!==M)){var B=u*h-1-g.get(_,D,M,y)===S*h+R?1:0;B!==0&&(I+=v.get(_,D,M,y)*B)}}}m.set(I,_,b,x,y)}return m.toTensor()},n.prototype.avgPoolBackprop=function(e,t,i){Y([e,t],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=i.dilationHeight,d=i.dilationWidth,u=i.effectiveFilterHeight,h=i.effectiveFilterWidth,f=h-1-i.padInfo.left,p=u-1-i.padInfo.top,m=Ke(t.shape,"float32"),g=1/(s*c),v=this.bufferSync(e),_=0;_<i.batchSize;++_)for(var y=0;y<i.inChannels;++y)for(var b=0;b<i.inHeight;++b)for(var x=0;x<i.inWidth;++x){for(var C=b-p,k=x-f,I=0,S=0;S<u;S+=l){var D=(C+S)/o;if(!(D<0||D>=i.outHeight||Math.floor(D)!==D))for(var R=0;R<h;R+=d){var M=(k+R)/a;M<0||M>=i.outWidth||Math.floor(M)!==M||(I+=v.get(_,D,M,y))}}m.set(I*g,_,b,x,y)}return m.toTensor()},n.prototype.pool3d=function(e,t,i){Y(e,"pool3d");for(var o=t.strideDepth,a=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(e.dataId),y=Ke(t.outShape,e.dtype),b=y.values,x=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],C=t.outShape[2]*t.outShape[3]*t.outShape[4],k=t.outShape[3]*t.outShape[4],I=t.outShape[4],S=0;S<t.batchSize;++S)for(var D=S*x,R=S*e.strides[0],M=0;M<t.inChannels;++M)for(var B=0;B<t.outDepth;++B){for(var V=B*o-p,z=V;z<0;)z+=c;for(var G=Math.min(t.inDepth,u+V),W=D+B*C,j=0;j<t.outHeight;++j){for(var q=j*a-m,K=q;K<0;)K+=l;for(var ie=Math.min(t.inHeight,h+q),ce=W+j*k,pe=0;pe<t.outWidth;++pe){for(var Ne=pe*s-g,De=Ne;De<0;)De+=d;for(var Ee=Math.min(t.inWidth,f+Ne),Ue=ce+pe*I,Ye=v,Xe=0,st=0,be=z;be<G;be+=c){for(var Se=R+be*e.strides[1],qe=K;qe<ie;qe+=l){for(var ct=Se+qe*e.strides[2],kt=De;kt<Ee;kt+=d){var Lt=_[ct+kt*e.strides[3]+M];if(i==="max"&&Lt>Ye?Ye=Lt:i==="avg"&&(Xe+=Lt,st++),isNaN(Ye))break}if(isNaN(Ye))break}if(isNaN(Ye))break}b[Ue+M]=i==="avg"?Xe/st:Ye}}}return y.toTensor()},n.prototype.avgPool3d=function(e,t){return Y(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,t,i){Y([e,t],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,c=i.filterDepth,l=i.filterHeight,d=i.filterWidth,u=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,g=i.effectiveFilterWidth,v=p-1-i.padInfo.front,_=g-1-i.padInfo.left,y=m-1-i.padInfo.top,b=Ke(t.shape,"float32"),x=1/(c*l*d),C=this.bufferSync(e),k=0;k<i.batchSize;++k)for(var I=0;I<i.inChannels;++I)for(var S=0;S<i.inDepth;++S)for(var D=0;D<i.inHeight;++D)for(var R=0;R<i.inWidth;++R){for(var M=S-v,B=D-y,V=R-_,z=0,G=0;G<p;G+=u){var W=(M+G)/o;if(!(W<0||W>=i.outDepth||Math.floor(W)!==W))for(var j=0;j<m;j+=h){var q=(B+j)/a;if(!(q<0||q>=i.outHeight||Math.floor(q)!==q))for(var K=0;K<g;K+=f){var ie=(V+K)/s;ie<0||ie>=i.outWidth||Math.floor(ie)!==ie||(z+=C.get(k,W,q,ie,I))}}}b.set(z*x,k,S,D,R,I)}return b.toTensor()},n.prototype.maxPool3d=function(e,t){return Y(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,t){for(var i=Ke(t.outShape,"int32"),o=t.strideDepth,a=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left,v=this.bufferSync(e),_=0;_<t.batchSize;++_)for(var y=0;y<t.inChannels;++y)for(var b=0;b<t.outDepth;++b){for(var x=b*o-p,C=x;C<0;)C+=c;for(var k=Math.min(t.inDepth,u+x),I=0;I<t.outHeight;++I){for(var S=I*a-m,D=S;D<0;)D+=l;for(var R=Math.min(t.inHeight,h+S),M=0;M<t.outWidth;++M){for(var B=M*s-g,V=B;V<0;)V+=d;for(var z=Math.min(t.inWidth,f+B),G=Number.NEGATIVE_INFINITY,W=-1,j=C;j<k;j+=c)for(var q=j-x,K=D;K<R;K+=l)for(var ie=K-S,ce=V;ce<z;ce+=d){var pe=ce-B,Ne=v.get(_,j,K,ce,y);Ne>=G&&(G=Ne,W=q*h*f+ie*h+pe)}i.set(W,_,b,I,M,y)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,t,i,o){Y([t,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,o),s=o.strideDepth,c=o.strideHeight,l=o.strideWidth,d=o.dilationDepth,u=o.dilationHeight,h=o.dilationWidth,f=o.effectiveFilterDepth,p=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=f-1-o.padInfo.front,v=m-1-o.padInfo.left,_=p-1-o.padInfo.top,y=Ke(t.shape,"float32"),b=this.bufferSync(a),x=this.bufferSync(e),C=0;C<o.batchSize;++C)for(var k=0;k<o.inChannels;++k)for(var I=0;I<o.inDepth;++I)for(var S=0;S<o.inHeight;++S)for(var D=0;D<o.inWidth;++D){for(var R=I-g,M=S-_,B=D-v,V=0,z=0;z<f;z+=d){var G=(R+z)/s;if(!(G<0||G>=o.outDepth||Math.floor(G)!==G))for(var W=0;W<p;W+=u){var j=(M+W)/c;if(!(j<0||j>=o.outHeight||Math.floor(j)!==j))for(var q=0;q<m;q+=h){var K=(B+q)/l;if(!(K<0||K>=o.outWidth||Math.floor(K)!==K)){var ie=f*p*m-1-b.get(C,G,j,K,k)===z*p*m+W*m+q?1:0;ie!==0&&(V+=x.get(C,G,j,K,k)*ie)}}}}y.set(V,C,I,S,D,k)}return y.toTensor()},n.prototype.cast=function(e,t){return Av(e,t,this)},n.prototype.reshape=function(e,t){return zh(e,t)},n.prototype.avgPool=function(e,t){return Y(e,"avgPool"),this.pool(e,t,"avg").toFloat()},n.prototype.resizeBilinear=function(e,t,i,o){Y(e,"resizeBilinear");for(var a=e.shape,s=a[0],c=a[1],l=a[2],d=a[3],u=this.readSync(e.dataId),h=new Float32Array(ve([s,t,i,d])),f=[o&&t>1?c-1:c,o&&i>1?l-1:l],p=[o&&t>1?t-1:t,o&&i>1?i-1:i],m=0,g=f[0]/p[0],v=f[1]/p[1],_=0;_<s;_++)for(var y=0;y<t;y++)for(var b=g*y,x=Math.floor(b),C=b-x,k=Math.min(c-1,Math.ceil(b)),I=_*e.strides[0]+x*e.strides[1],S=_*e.strides[0]+k*e.strides[1],D=0;D<i;D++)for(var R=v*D,M=Math.floor(R),B=R-M,V=Math.min(l-1,Math.ceil(R)),z=I+M*e.strides[2],G=S+M*e.strides[2],W=I+V*e.strides[2],j=S+V*e.strides[2],q=0;q<d;q++){var K=u[z+q],ie=u[G+q],ce=K+(u[W+q]-K)*B,pe=ce+(ie+(u[j+q]-ie)*B-ce)*C;h[m++]=pe}return un(h,[s,t,i,d])},n.prototype.resizeBilinearBackprop=function(e,t,i){Y([e,t],"resizeBilinearBackprop");for(var o=t.shape,a=o[0],s=o[1],c=o[2],l=o[3],d=e.shape,u=d[1],h=d[2],f=new Float32Array(a*s*c*l),p=[i&&u>1?s-1:s,i&&h>1?c-1:c],m=[i&&u>1?u-1:u,i&&h>1?h-1:h],g=p[0]/m[0],v=p[1]/m[1],_=this.readSync(e.dataId),y=0,b=0;b<a;b++)for(var x=b*t.strides[0],C=0;C<u;C++)for(var k=C*g,I=Math.floor(k),S=Math.min(Math.ceil(k),s-1),D=x+I*t.strides[1],R=x+S*t.strides[1],M=k-I,B=1-M,V=0;V<h;V++)for(var z=V*v,G=Math.floor(z),W=Math.min(Math.ceil(z),c-1),j=z-G,q=1-j,K=D+G*t.strides[2],ie=D+W*t.strides[2],ce=R+G*t.strides[2],pe=R+W*t.strides[2],Ne=B*q,De=B*j,Ee=M*q,Ue=M*j,Ye=0;Ye<l;Ye++){var Xe=_[y++];f[K+Ye]+=Xe*Ne,f[ie+Ye]+=Xe*De,f[ce+Ye]+=Xe*Ee,f[pe+Ye]+=Xe*Ue}return an(f,[a,c,s,l],t.dtype)},n.prototype.resizeNearestNeighbor=function(e,t,i,o){Y(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],c=a[1],l=a[2],d=a[3],u=this.readSync(e.dataId),h=new Float32Array(s*t*i*d),f=[o&&t>1?c-1:c,o&&i>1?l-1:l],p=[o&&t>1?t-1:t,o&&i>1?i-1:i],m=f[0]/p[0],g=f[1]/p[1],v=0,_=0;_<s;_++)for(var y=_*e.strides[0],b=0;b<t;b++)for(var x=m*b,C=y+Math.min(c-1,o?Math.round(x):Math.floor(x))*e.strides[1],k=0;k<i;k++)for(var I=g*k,S=C+Math.min(l-1,o?Math.round(I):Math.floor(I))*e.strides[2],D=0;D<d;D++){var R=u[S+D];h[v++]=R}return un(h,[s,t,i,d],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,t,i){Y([e,t],"resizeNearestNeighborBackprop");for(var o=t.shape,a=o[0],s=o[1],c=o[2],l=o[3],d=e.shape,u=d[1],h=d[2],f=new Float32Array(a*s*c*l),p=this.readSync(e.dataId),m=[i&&u>1?s-1:s,i&&h>1?c-1:c],g=[i&&u>1?u-1:u,i&&h>1?h-1:h],v=m[0]/g[0],_=m[1]/g[1],y=1/v,b=1/_,x=2*Math.ceil(y)+2,C=2*Math.ceil(b)+2,k=0;k<a;k++)for(var I=k*t.strides[0],S=0;S<s;S++)for(var D=I+S*t.strides[1],R=Math.floor(S*y),M=Math.floor(R-x/2),B=0;B<c;B++)for(var V=D+B*t.strides[2],z=Math.floor(B*b),G=Math.floor(z-C/2),W=0;W<l;W++){for(var j=0,q=0;q<x;q++){var K=q+M;if(!(K<0||K>=u)){var ie=I+K*e.strides[1],ce=K*v;if(S===Math.min(s-1,i?Math.round(ce):Math.floor(ce)))for(var pe=0;pe<C;pe++){var Ne=pe+G;if(!(Ne<0||Ne>=h)){var De=ie+Ne*e.strides[2],Ee=Ne*_;B===Math.min(c-1,i?Math.round(Ee):Math.floor(Ee))&&(j+=p[De+W])}}}}f[V+W]=j}return an(f,t.shape,t.dtype)},n.prototype.batchNormalization=function(e,t,i,o,a,s){Y([e,t,i,a,s],"batchNorm");for(var c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=this.readSync(i.dataId),u=a?this.readSync(a.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),f=new Float32Array(c.length),p=h.length,m=u.length,g=d.length,v=l.length,_=0,y=0,b=0,x=0,C=0;C<c.length;++C)f[C]=h[_++]+(c[C]-l[y++])*u[b++]/Math.sqrt(d[x++]+o),_>=p&&(_=0),y>=v&&(y=0),b>=m&&(b=0),x>=g&&(x=0);return an(f,e.shape)},n.prototype.localResponseNormalization4D=function(e,t,i,o,a){Y(e,"localResponseNormalization4D");var s=e.shape[3],c=s-1,l=this.readSync(e.dataId),d=e.size,u=new Float32Array(d);function h(g){for(var v=g%s,_=g-v+Math.max(0,v-t),y=g-v+Math.min(v+t,c),b=0;_<=y;_++){var x=l[_];b+=x*x}return b}for(var f=0;f<d;f++){var p=h(f),m=l[f]*Math.pow(i+o*p,-a);u[f]=m}return an(u,e.shape)},n.prototype.LRNGrad=function(e,t,i,o,a,s,c){Y(e,"LRNGrad");for(var l=e.shape[3],d=this.readSync(e.dataId),u=this.readSync(t.dataId),h=this.readSync(i.dataId),f=new Float32Array(e.size),p=e.size,m=0;m<p;m++){for(var g=m%l,v=m-g+Math.max(0,g-o),_=m-g+Math.min(l,g+o+1),y=0,b=v;b<_;b++)y+=Math.pow(u[b],2);for(y=s*y+a,b=v;b<_;b++){var x=-2*s*c*u[b]*h[m]/y;m===b&&(x+=Math.pow(y,-c)),x*=d[m],f[b]+=x}}return an(f,e.shape)},n.prototype.multinomial=function(e,t,i,o){Y(e,"multinomial");for(var a=t?e:zn(e),s=a.shape[0],c=a.shape[1],l=It([s,i],"int32"),d=this.readSync(l.dataId),u=this.readSync(a.dataId),h=0;h<s;++h){var f=h*c,p=new Float32Array(c-1);p[0]=u[f];for(var m=1;m<p.length;++m)p[m]=p[m-1]+u[f+m];for(var g=Yh(o.toString()),v=h*i,_=0;_<i;++_){var y=g();d[v+_]=p.length;for(var b=0;b<p.length;b++)if(y<p[b]){d[v+_]=b;break}}}return l},n.prototype.oneHot=function(e,t,i,o){Y(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(o);for(var s=this.readSync(e.dataId),c=0;c<e.size;++c)s[c]>=0&&s[c]<t&&(a[c*t+s[c]]=i);return ii(a,[e.size,t],"int32")},n.prototype.nonMaxSuppression=function(e,t,i,o,a){return Y(e,"nonMaxSuppression"),Iv(this.readSync(e.dataId),this.readSync(t.dataId),i,o,a)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,t){for(var i=e.shape[0],o=e.shape[1],a=Ke(e.shape,"float32"),s=Ke(e.shape,"float32"),c=_r(e).as2D(i,o),l=ri(e).as2D(i,o),d=0;d<i;d++)for(var u=c.slice([d,0],[1,o]),h=l.slice([d,0],[1,o]),f=yn(u,h),p=this.readSync(this.fftImpl(f,t).dataId),m=0;m<o;m++){var g=xw(p,m);a.values[d*o+m]=g.real,s.values[d*o+m]=g.imag}return yn(a.toTensor(),s.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,t){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,t).as2D(e.shape[0],e.shape[1]);return t&&(a=yn(_r(a).div(re(o)),ri(a).div(re(o)))),a}var s=this.readSync(e.dataId),c=function(l){for(var d=new Float32Array(l.length/2),u=new Float32Array(l.length/2),h=0;h<l.length;h+=2)d[h/2]=l[h],u[h/2]=l[h+1];return{real:d,imag:u}}(this.fourierTransformByMatmul(s,o,t));return yn(c.real,c.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,t,i){if(t===1)return e;var o=this.readSync(e.dataId),a=t/2,s=function(v){for(var _=Math.ceil(v.length/4),y=new Float32Array(_),b=new Float32Array(_),x=0;x<v.length;x+=4)y[Math.floor(x/4)]=v[x],b[Math.floor(x/4)]=v[x+1];return{real:y,imag:b}}(o),c=yn(s.real,s.imag).as1D(),l=function(v){for(var _=Math.floor(v.length/4),y=new Float32Array(_),b=new Float32Array(_),x=2;x<v.length;x+=4)y[Math.floor(x/4)]=v[x],b[Math.floor(x/4)]=v[x+1];return{real:y,imag:b}}(o),d=yn(l.real,l.imag).as1D();c=this.fftRadix2(c,a,i),d=this.fftRadix2(d,a,i);var u=function(v,_){for(var y=new Float32Array(v/2),b=new Float32Array(v/2),x=0;x<Math.ceil(v/2);x++){var C=(_?2:-2)*Math.PI*(x/v);y[x]=Math.cos(C),b[x]=Math.sin(C)}return{real:y,imag:b}}(t,i),h=yn(u.real,u.imag).mul(d),f=c.add(h),p=c.sub(h),m=_r(f).concat(_r(p)),g=ri(f).concat(ri(p));return yn(m,g).as1D()},n.prototype.fourierTransformByMatmul=function(e,t,i){for(var o=new Float32Array(2*t),a=0;a<t;a++){for(var s=0,c=0,l=0;l<t;l++){var d=UT(a*l,t,i),u=xw(e,l);s+=u.real*d.real-u.imag*d.imag,c+=u.real*d.imag+u.imag*d.real}i&&(s/=t,c/=t),zT(o,s,c,a)}return o},n.prototype.depthToSpace=function(e,t,i){A(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),A(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var o=e.shape[0],a=e.shape[1],s=e.shape[2],c=e.shape[3],l=a*t,d=s*t,u=c/(t*t),h=this.readSync(e.dataId),f=new Float32Array(o*l*d*u),p=0,m=0;m<o;++m)for(var g=0;g<l;++g)for(var v=Math.floor(g/t),_=g%t,y=0;y<d;++y)for(var b=Math.floor(y/t),x=(_*t+y%t)*u,C=0;C<u;++C){var k=C+x+c*(b+s*(v+a*m));f[p++]=h[k]}return an(f,[o,l,d,u])},n.prototype.broadcastedBinaryOp=function(e,t,i,o){var a=rt(e.shape,t.shape),s=Ke(a,i),c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=Pi(e.shape,a),u=Pi(t.shape,a),h=s.values;if(d.length+u.length===0)for(var f=0;f<h.length;++f)h[f]=o(c[f%c.length],l[f%l.length]);else{var p=this.bufferSync(e),m=this.bufferSync(t),g=function(v){var _=s.indexToLoc(v),y=_.slice(-e.rank);d.forEach(function(k){return y[k]=0});var b=p.locToIndex(y),x=_.slice(-t.rank);u.forEach(function(k){return x[k]=0});var C=m.locToIndex(x);h[v]=o(c[b],l[C])};for(f=0;f<h.length;++f)g(f)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,t,i){var o=rt(e.shape,t.shape),a=Ke(o,"float32"),s=Ke(o,"float32"),c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=Pi(e.shape,o),u=Pi(t.shape,o),h=a.values,f=s.values;if(d.length+u.length===0)for(var p=0;p<h.length;p++){var m=p%c.length,g=p%l.length,v=i(c[2*m],c[2*m+1],l[2*g],l[2*g+1]);h[p]=v.real,f[p]=v.imag}else{var _=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=this.bufferSync(this.data.get(t.dataId).complexTensors.real),b=function(x){var C=a.indexToLoc(x),k=C.slice(-e.rank);d.forEach(function(M){return k[M]=0});var I=_.locToIndex(k),S=C.slice(-t.rank);u.forEach(function(M){return S[M]=0});var D=y.locToIndex(S),R=i(c[2*I],c[2*I+1],l[2*D],l[2*D+1]);h[x]=R.real,f[x]=R.imag};for(p=0;p<h.length;p++)b(p)}return this.complex(a.toTensor(),s.toTensor())},n.prototype.split=function(e,t,i){return cC(e,t,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,t,i,o,a,s){for(var c=e.shape,l=c[0],d=c[1],u=c[2],h=c[3],f=t.shape[0],p=o[0],m=o[1],g=Ke([f,p,m,h],"float32"),v=this.readSync(t.dataId),_=this.readSync(i.dataId),y=this.readSync(e.dataId),b=e.strides,x=g.strides,C=0;C<f;C++){var k=4*C,I=v[k],S=v[k+1],D=v[k+2],R=v[k+3],M=_[C];if(!(M>=l))for(var B=p>1?(D-I)*(d-1)/(p-1):0,V=m>1?(R-S)*(u-1)/(m-1):0,z=0;z<p;z++){var G=p>1?I*(d-1)+z*B:.5*(I+D)*(d-1);if(G<0||G>d-1)for(var W=0;W<m;W++)for(var j=0;j<h;j++){var q=j+W*x[2]+z*x[1]+C*x[0];g.values[q]=s}else if(a==="bilinear"){var K=Math.floor(G),ie=Math.ceil(G),ce=G-K;for(W=0;W<m;W++)if((be=m>1?S*(u-1)+W*V:.5*(S+R)*(u-1))<0||be>u-1)for(j=0;j<h;j++)q=j+W*x[2]+z*x[1]+C*x[0],g.values[q]=s;else{var pe=Math.floor(be),Ne=Math.ceil(be),De=be-pe;for(j=0;j<h;j++){var Ee=y[q=j+pe*b[2]+K*b[1]+M*b[0]],Ue=y[q=j+Ne*b[2]+K*b[1]+M*b[0]],Ye=y[q=j+pe*b[2]+ie*b[1]+M*b[0]],Xe=Ee+(Ue-Ee)*De,st=Ye+(y[q=j+Ne*b[2]+ie*b[1]+M*b[0]]-Ye)*De;q=j+W*x[2]+z*x[1]+C*x[0],g.values[q]=Xe+(st-Xe)*ce}}}else for(W=0;W<m;++W){var be;if((be=m>1?S*(u-1)+W*V:.5*(S+R)*(u-1))<0||be>u-1)for(j=0;j<h;j++)q=j+W*x[2]+z*x[1]+C*x[0],g.values[q]=s;else{var Se=Math.round(be),qe=Math.round(G);for(j=0;j<h;j++){var ct=j+Se*b[2]+qe*b[1]+M*b[0],kt=j+W*x[2]+z*x[1]+C*x[0];g.values[kt]=y[ct]}}}}}return g.toTensor()},n.prototype.sparseToDense=function(e,t,i,o){var a=Bl(0,e,i),s=a.sliceRank,c=a.numUpdates,l=a.sliceSize,d=a.strides,u=a.outputSize;return this.scatter(e,t,i,u,l,c,s,d,o,!1)},n.prototype.gatherND=function(e,t){var i=t.shape,o=i[i.length-1],a=wv(e,t),s=a[0],c=a[1],l=a[2],d=a[3];if(c===0)return un([],s,e.dtype);for(var u=new Ol([c,l],e.dtype),h=this.readSync(t.dataId),f=this.readSync(e.dataId),p=0;p<c;p++){for(var m=[],g=0,v=0;v<o;v++){var _=h[p*o+v];g+=_*d[v],m.push(_)}if(g<0||g>=e.size/l)throw new Error("Invalid indices: "+m+" does not index into "+e.shape);for(var y=0;y<l;y++)u.values[p*l+y]=f[g*l+y]}return u.toTensor().reshape(s)},n.prototype.scatterND=function(e,t,i){var o=Bl(0,e,i),a=o.sliceRank,s=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,u=re(0);return this.scatter(e,t,i,d,c,s,a,l,u,!0)},n.prototype.fill=function(e,t,i){var o=Tl(i=i||Ys(t),ve(e));return o.fill(t),O.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var t=Tl(e.dtype,ve(e.shape));return this.makeOutput(t,e.shape,e.dtype)},n.prototype.linspace=function(e,t,i){return kv(e,t,i)},n.prototype.scatter=function(e,t,i,o,a,s,c,l,d,u){var h=[o/a,a],f=this.readSync(e.dataId),p=this.readSync(t.dataId);if(o===0)return un([],i,t.dtype);var m=new Ol(h,t.dtype);m.values.fill(this.readSync(d.dataId)[0]);for(var g=0;g<s;g++){for(var v=[],_=0,y=0;y<c;y++){var b=f[g*c+y];v.push(b),_+=b*l[y]}if(_<0||_>=o/a)throw new Error("Invalid indices: "+v+" does not index into "+i);for(var x=0;x<a;x++)u?m.values[_*a+x]+=p[g*a+x]:m.values[_*a+x]=t.rank===0?p[0]:p[g*a+x]}return m.toTensor().reshape(i)},n}(aC);O.registerBackend("cpu",function(){return new HP},1);for(bh=0,Pg=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs,i=n,o=i.boxes,a=i.scores,s=t,c=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,u=s.softNmsSigma,h=e;Y(o,"NonMaxSuppressionWithScore");var f=Mv(h.data.get(o.dataId).values,h.data.get(a.dataId).values,c,l,d,u);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n.x,i=e;Y(t,"square");for(var o=i.data.get(t.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var c=o[s];a[s]=c*c}return{dataId:i.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}},{kernelName:Ul,backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n,i=t.a,o=t.b,a=e;Y([i,o],Ul);var s=a.data.get(i.dataId).values,c=a.data.get(o.dataId).values,l=function(h,f,p,m,g,v){var _=rt(h,f),y=_.length,b=Lr(_),x=Gs(g,ve(_)),C=h.length,k=f.length,I=Lr(h),S=Lr(f),D=Pi(h,_),R=Pi(f,_);if(D.length+R.length===0)for(var M=0;M<x.length;++M)x[M]=v(p[M%p.length],m[M%m.length]);else{var B=function(V){var z=f1(V,y,b),G=z.slice(-C);D.forEach(function(K){return G[K]=0});var W=$g(G,C,I),j=z.slice(-k);R.forEach(function(K){return j[K]=0});var q=$g(j,k,S);x[V]=v(p[W],m[q])};for(M=0;M<x.length;++M)B(M)}return[x,_]}(i.shape,o.shape,s,c,i.dtype,function(h,f){var p=h-f;return p*p}),d=l[0],u=l[1];return{dataId:a.write(d,u,i.dtype),shape:u,dtype:i.dtype}}}];bh<Pg.length;bh++)t1(Pg[bh]);var bh,Pg,Ns,GP=function(r){this.variableNames=["A"];var n=Rn(),e=r[0],t=r[1];this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+t+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},qP=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Rn(),e=r[0],t=r[1];this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+t+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(_h=0,Lg=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs,i=n.pixels,o=t.numChannels,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,c=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=c[0],d=c[1],u=[d,l],h=[d,l,o];(s||a)&&(Ns==null&&(Ns=document.createElement("canvas").getContext("2d")),Ns.canvas.width=l,Ns.canvas.height=d,Ns.drawImage(i,0,0,l,d),i=Ns.canvas);var f=e.makeTensorInfo(u,"int32");e.texData.get(f.dataId).usage=or.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(f.dataId),i);var p=U().getBool("WEBGL_PACK")?new qP(h):new GP(h),m=e.runWebGLProgram(p,[f],"int32");return e.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs;Fh("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=n,o=i.boxes,a=i.scores,s=t,c=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,u=s.softNmsSigma,h=e,f=Mv(h.readSync(o.dataId),h.readSync(a.dataId),c,l,d,u);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n.x,i=e,o=new Je(t.shape,"return x * x;");return i.runWebGLProgram(o,[t],t.dtype)}},{kernelName:Ul,backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n,i=t.a,o=t.b,a=e,s=U().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi("return (a - b) * (a - b);",i.shape,o.shape):new Gt("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}}];_h<Lg.length;_h++)t1(Lg[_h]);var _h,Lg;for(yh=0,Bg=[{kernelName:"Square",gradFunc:function(r,n){var e=n[0];return{x:function(){return r.mul(e.toFloat().mul(2))}}}},{kernelName:Ul,gradFunc:function(r,n){var e=n[0],t=n[1],i=re(2);return{a:function(){return Bt(r,Bt(i,wt(e,t)))},b:function(){return Bt(r,Bt(i,wt(t,e)))}}}}];yh<Bg.length;yh++)KR(Bg[yh]);var yh,Bg,YP=function(){function r(){}return r.prototype.fetch=function(n,e){return fetch(n,e)},r.prototype.now=function(){return performance.now()},r.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},r.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},r}();U().get("IS_BROWSER")&&U().setPlatform("browser",new YP);var Vg,$P=function(){return fw()},KP=function(){function r(){this.util=pw(),this.textEncoder=new this.util.TextEncoder}return r.prototype.fetch=function(n,e){return U().global.fetch!=null?U().global.fetch(n,e):(Vg==null&&(Vg=$P()),Vg(n,e))},r.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},r.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},r.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},r}();U().get("IS_NODE")&&U().setPlatform("node",new KP);var sv={float32:4,int32:4,uint16:2,uint8:1,bool:1},Wh=4;function mD(r,n){for(var e={},t=0,i=function(s){var c=s.name,l=s.dtype,d=s.shape,u=ve(d),h=void 0;if("quantization"in s){var f=s.quantization;if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+f.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=sv[f.dtype],m=r.slice(t,t+u*p),g=f.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")h=Float32Array.from(g,function(C){return C*f.scale+f.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+l);h=Int32Array.from(g,function(C){return Math.round(C*f.scale+f.min)})}t+=u*p}else if(l==="string"){var v=ve(s.shape);h=[];for(var _=0;_<v;_++){var y=new Uint32Array(r.slice(t,t+Wh))[0];t+=Wh;var b=new Uint8Array(r.slice(t,t+y));h.push(b),t+=y}}else{var x=sv[l];if(m=r.slice(t,t+u*x),l==="float32")h=new Float32Array(m);else if(l==="int32")h=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+l);h=new Uint8Array(m)}t+=u*x}e[c]=un(h,d,l)},o=0,a=n;o<a.length;o++)i(a[o]);return e}function XP(r){if(r===null)throw new Error("Invalid input value: "+JSON.stringify(r));var n=0,e=[];r.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var t=new Uint8Array(n),i=0;return e.forEach(function(o){t.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),t.buffer}var cv=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ww(r){return cv?Buffer.byteLength(r):new Blob([r]).size}function Kv(r){var n=0;r.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),t=0;return r.forEach(function(i){e.set(new Uint8Array(i),t),t+=i.byteLength}),e.buffer}function Hw(r){for(r=r.trim();r.endsWith("/");)r=r.slice(0,r.length-1);var n=r.split("/");return n[n.length-1]}function Ql(r){if(r.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:r.modelTopology==null?0:Ww(JSON.stringify(r.modelTopology)),weightSpecsBytes:r.weightSpecs==null?0:Ww(JSON.stringify(r.weightSpecs)),weightDataBytes:r.weightData==null?0:r.weightData.byteLength}}var sr=function(){function r(){this.saveRouters=[],this.loadRouters=[]}return r.getInstance=function(){return r.instance==null&&(r.instance=new r),r.instance},r.registerSaveRouter=function(n){r.getInstance().saveRouters.push(n)},r.registerLoadRouter=function(n){r.getInstance().loadRouters.push(n)},r.getSaveHandlers=function(n){return r.getHandlers(n,"save")},r.getLoadHandlers=function(n,e){return r.getHandlers(n,"load",e)},r.getHandlers=function(n,e,t){var i=[];return(e==="load"?r.getInstance().loadRouters:r.getInstance().saveRouters).forEach(function(o){var a=o(n,t);a!==null&&i.push(a)}),i},r}(),js="://",Eo=function(){function r(){this.managers={}}return r.getInstance=function(){return r.instance==null&&(r.instance=new r),r.instance},r.registerManager=function(n,e){A(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(js)&&(n=n.slice(0,n.indexOf(js))),A(n.length>0,function(){return"scheme must not be an empty string."});var t=r.getInstance();A(t.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),t.managers[n]=e},r.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},r.getSchemes=function(){return Object.keys(this.getInstance().managers)},r}();function Ah(r){if(r.indexOf(js)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Eo.getSchemes().join(","));return{scheme:r.split(js)[0],path:r.split(js)[1]}}function Gw(r,n,e){return e===void 0&&(e=!1),me(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u;return ge(this,function(h){switch(h.label){case 0:return A(r!==n,function(){return"Old path and new path are the same: '"+r+"'"}),A((t=sr.getLoadHandlers(r)).length>0,function(){return"Copying failed because no load handler is found for source URL "+r+"."}),A(t.length<2,function(){return"Copying failed because more than one ("+t.length+") load handlers for source URL "+r+"."}),i=t[0],A((o=sr.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),A(o.length<2,function(){return"Copying failed because more than one ("+t.length+") save handlers for destination URL "+n+"."}),a=o[0],s=Ah(r).scheme,c=Ah(r).path,l=s===Ah(r).scheme,[4,i.load()];case 1:return d=h.sent(),e&&l?[4,Eo.getManager(s).removeModel(c)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(d)];case 4:return u=h.sent(),!e||l?[3,6]:[4,Eo.getManager(s).removeModel(c)];case 5:h.sent(),h.label=6;case 6:return[2,u.modelArtifactsInfo]}})})}var da="models_store",Do="model_info_store";function gD(){if(!U().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var r=window||self,n=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB||r.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function lv(r){var n=r.result;n.createObjectStore(da,{keyPath:"modelPath"}),n.createObjectStore(Do,{keyPath:"modelPath"})}var Ws=function(){function r(n){if(this.indexedDB=gD(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return r.prototype.save=function(n){return me(this,void 0,void 0,function(){return ge(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},r.prototype.load=function(){return me(this,void 0,void 0,function(){return ge(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},r.prototype.databaseAction=function(n,e){var t=this;return new Promise(function(i,o){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return lv(a)},a.onsuccess=function(){var s=a.result;if(e==null){var c=s.transaction(da,"readonly"),l=c.objectStore(da).get(t.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+t.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),o(l.error)},c.oncomplete=function(){return s.close()}}else{var d,u=Ql(e),h=s.transaction(Do,"readwrite"),f=h.objectStore(Do),p=f.put({modelPath:t.modelPath,modelArtifactsInfo:u});p.onsuccess=function(){var m=(d=s.transaction(da,"readwrite")).objectStore(da).put({modelPath:t.modelPath,modelArtifacts:e,modelArtifactsInfo:u});m.onsuccess=function(){return i({modelArtifactsInfo:u})},m.onerror=function(g){var v=(f=h.objectStore(Do)).delete(t.modelPath);v.onsuccess=function(){return s.close(),o(m.error)},v.onerror=function(_){return s.close(),o(m.error)}}},p.onerror=function(m){return s.close(),o(p.error)},h.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},r.URL_SCHEME="indexeddb://",r}(),qw=function(r){return U().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(Ws.URL_SCHEME)?(n=r.slice(Ws.URL_SCHEME.length),new Ws(n)):null;var n};sr.registerSaveRouter(qw),sr.registerLoadRouter(qw);var QP=function(){function r(){this.indexedDB=gD()}return r.prototype.listModels=function(){return me(this,void 0,void 0,function(){var n=this;return ge(this,function(e){return[2,new Promise(function(t,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return lv(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(Do,"readonly"),c=s.objectStore(Do).getAll();c.onsuccess=function(){for(var l={},d=0,u=c.result;d<u.length;d++){var h=u[d];l[h.modelPath]=h.modelArtifactsInfo}t(l)},c.onerror=function(l){return a.close(),i(c.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},r.prototype.removeModel=function(n){return me(this,void 0,void 0,function(){var e=this;return ge(this,function(t){var i;return n=(i=n).startsWith(Ws.URL_SCHEME)?i.slice(Ws.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return lv(s)},s.onsuccess=function(){var c,l=s.result,d=l.transaction(Do,"readwrite"),u=d.objectStore(Do),h=u.get(n);h.onsuccess=function(){if(h.result==null)return l.close(),a(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var f=u.delete(n),p=function(){var m=(c=l.transaction(da,"readwrite")).objectStore(da).delete(n);m.onsuccess=function(){return o(h.result.modelArtifactsInfo)},m.onerror=function(g){return a(h.error)}};f.onsuccess=p,f.onerror=function(m){return p(),l.close(),a(h.error)}},h.onerror=function(f){return l.close(),a(h.error)},d.oncomplete=function(){c==null?l.close():c.oncomplete=function(){return l.close()}}},s.onerror=function(c){return a(s.error)}})]})})},r}();if(U().getBool("IS_BROWSER"))try{Eo.registerManager(Ws.URL_SCHEME,new QP)}catch{}var Ni="/",zs="tensorflowjs_models",vD="info",ZP="model_topology",JP="weight_specs",eL="weight_data",tL="model_metadata";function bD(r){return{info:[zs,r,vD].join(Ni),topology:[zs,r,ZP].join(Ni),weightSpecs:[zs,r,JP].join(Ni),weightData:[zs,r,eL].join(Ni),modelMetadata:[zs,r,tL].join(Ni)}}function nL(r){var n=r.split(Ni);if(n.length<3)throw new Error("Invalid key format: "+r);return n.slice(1,n.length-1).join(Ni)}var Hs=function(){function r(n){if(!U().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=bD(this.modelPath)}return r.prototype.save=function(n){return me(this,void 0,void 0,function(){var e,t,i;return ge(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),t=JSON.stringify(n.weightSpecs),i=Ql(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,t),this.LS.setItem(this.keys.weightData,function(a){if(cv)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),c="",l=0,d=s.length;l<d;l++)c+=String.fromCharCode(s[l]);return btoa(c)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},r.prototype.load=function(){return me(this,void 0,void 0,function(){var n,e,t,i,o,a,s;return ge(this,function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(t=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=t,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy,e.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(l){if(cv){var d=Buffer.from(l,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var u=atob(l),h=new Uint8Array(u.length),f=0;f<u.length;++f)h.set([u.charCodeAt(f)],f);return h.buffer}(s),[2,e]})})},r.URL_SCHEME="localstorage://",r}(),Yw=function(r){return U().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(Hs.URL_SCHEME)?(n=r.slice(Hs.URL_SCHEME.length),new Hs(n)):null;var n};sr.registerSaveRouter(Yw),sr.registerLoadRouter(Yw);var rL=function(){function r(){A(U().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),A(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return r.prototype.listModels=function(){return me(this,void 0,void 0,function(){var n,e,t,i,o,a;return ge(this,function(s){for(n={},e=zs+Ni,t=Ni+vD,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(t)&&(a=nL(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},r.prototype.removeModel=function(n){return me(this,void 0,void 0,function(){var e,t;return ge(this,function(i){var o;if(n=(o=n).startsWith(Hs.URL_SCHEME)?o.slice(Hs.URL_SCHEME.length):o,e=bD(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return t=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,t]})})},r}();if(U().getBool("IS_BROWSER"))try{Eo.registerManager(Hs.URL_SCHEME,new rL)}catch{}var iL="model",oL=".json",aL=".weights.bin";function $w(r){return new Promise(function(n){return setTimeout(n)}).then(r)}var zg=function(){function r(n){if(!U().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(r.URL_SCHEME)&&(n=n.slice(r.URL_SCHEME.length)),n!=null&&n.length!==0||(n=iL),this.modelTopologyFileName=n+oL,this.weightDataFileName=n+aL}return r.prototype.save=function(n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s;return ge(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return t=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:t},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,$w(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,$w(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Ql(n)}]}})})},r.URL_SCHEME="downloads://",r}(),sL=function(){function r(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return r.prototype.load=function(){return me(this,void 0,void 0,function(){var n,e,t=this;return ge(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(c){var l=JSON.parse(c.target.result),d=l.modelTopology;if(d!=null){e.length===0&&o({modelTopology:d});var u=l.weightsManifest;if(u!=null){var h;try{h=t.checkManifestAndWeightFiles(u,e)}catch(g){return void a(g)}var f=[],p=[],m=[];u.forEach(function(g){g.paths.forEach(function(v){p.push(v),m.push(null)}),f.push.apply(f,g.weights)}),u.forEach(function(g){g.paths.forEach(function(v){var _=new FileReader;_.onload=function(y){var b=y.target.result,x=p.indexOf(v);m[x]=b,m.indexOf(null)===-1&&o({modelTopology:d,weightSpecs:f,weightData:Kv(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},_.onerror=function(y){return a("Failed to weights data from file of path '"+v+"'.")},_.readAsArrayBuffer(h[v])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(c){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},r.prototype.checkManifestAndWeightFiles=function(n,e){for(var t=[],i=e.map(function(c){return Hw(c.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(c){var l=Hw(c);if(t.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(t.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[c]=e[i.indexOf(l)]});if(t.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+t.length+") and the number of weight files provided ("+e.length+").");return o},r}();function Kw(r,n,e,t){(function(o){A(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(r),function(o,a){A(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),A(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),A(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,t=t??1);var i=0;return Promise.all(r.map(function(o){return o.then(function(a){var s=e+ ++i/r.length*(t-e);return n(s),a}),o}))}function _D(r,n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d;return ge(this,function(u){switch(u.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?U().platform.fetch:n.fetchFunc,t=r.map(function(h){return e(h,n.requestInit,{isBinary:!0})}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(t)];case 1:return a=u.sent(),[3,4];case 2:return[4,Kw(t,n.onProgress,i,o)];case 3:a=u.sent(),u.label=4;case 4:return s=a.map(function(h){return h.arrayBuffer()}),c=.5,l=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=u.sent(),[3,8];case 6:return[4,Kw(s,n.onProgress,c,l)];case 7:d=u.sent(),u.label=8;case 8:return[2,d]}})})}function Xw(r){var n=this;return function(e,t,i){return t===void 0&&(t=""),me(n,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p;return ge(this,function(m){switch(m.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],c=[],e.forEach(function(g,v){var _=0;g.weights.forEach(function(y){var b="quantization"in y?y.quantization.dtype:y.dtype,x=sv[b]*ve(y.shape),C=function(){o[v]=!0,a[v]==null&&(a[v]=[]),a[v].push({manifestEntry:y,groupOffset:_,sizeBytes:x})};i!=null?i.forEach(function(k,I){k===y.name&&(C(),s[I]=!0)}):C(),c.push(y.name),_+=x})}),!s.every(function(g){return g}))throw l=i.filter(function(g,v){return!s[v]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=o.reduce(function(g,v,_){return v&&g.push(_),g},[]),u=[],d.forEach(function(g){e[g].paths.forEach(function(v){var _=t+(t.endsWith("/")?"":"/")+v;u.push(_)})}),[4,r(u)];case 1:return h=m.sent(),f={},p=0,d.forEach(function(g){for(var v=e[g].paths.length,_=0,y=0;y<v;y++)_+=h[p+y].byteLength;for(var b=new ArrayBuffer(_),x=new Uint8Array(b),C=0,k=0;k<v;k++){var I=new Uint8Array(h[p+k]);x.set(I,C),C+=I.byteLength}a[g].forEach(function(S){var D=mD(b.slice(S.groupOffset,S.groupOffset+S.sizeBytes),[S.manifestEntry]);for(var R in D)f[R]=D[R]}),p+=v}),[2,f]}})})}}sr.registerSaveRouter(function(r){return U().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(zg.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new zg(n)}(r.slice(zg.URL_SCHEME.length)):null});var yD=function(){function r(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(A(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=U().platform.fetch,A(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&A(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return r.prototype.save=function(n){return me(this,void 0,void 0,function(){var e,t,i,o;return ge(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,t=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:t},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Ql(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},r.prototype.load=function(){return me(this,void 0,void 0,function(){var n,e,t,i,o,a,s,c,l,d,u,h;return ge(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=f.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");f.label=2;case 2:return f.trys.push([2,4,,5]),[4,n.json()];case 3:return e=f.sent(),[3,5];case 4:throw f.sent(),t="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t);case 5:if(i=e.modelTopology,o=e.weightsManifest,a=e.generatedBy,s=e.convertedBy,c=e.format,l=e.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:h=f.sent(),d=h[0],u=h[1],f.label=7;case 7:return[2,{modelTopology:i,weightSpecs:d,weightData:u,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:c}]}})})},r.prototype.loadWeights=function(n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u,h;return ge(this,function(f){switch(f.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,t=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),v=p.substring(0,m),_=g>m?p.substring(g):"";return[v+"/",_]}(e),i=t[0],o=t[1],a=this.weightPathPrefix||i,s=[],c=0,l=n;c<l.length;c++)d=l[c],s.push.apply(s,d.weights);return u=[],n.forEach(function(p){p.paths.forEach(function(m){u.push(a+m+o)})}),[4,_D(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=f.sent(),[2,[s,Kv(h)]]}})})},r.URL_SCHEME_REGEX=/^https?:\/\//,r}();function dv(r){return r.match(yD.URL_SCHEME_REGEX)!=null}var Qw=function(r,n){return typeof fetch>"u"?null:(Array.isArray(r)?r.every(function(e){return dv(e)}):dv(r))?uv(r,{onProgress:n}):null};function uv(r,n){return new yD(r,n)}sr.registerSaveRouter(Qw),sr.registerLoadRouter(Qw);var Ug=function(){function r(n){this.modelArtifacts=n}return r.prototype.load=function(){return me(this,void 0,void 0,function(){return ge(this,function(n){return[2,this.modelArtifacts]})})},r}(),cL=function(){function r(n){this.saveHandler=n}return r.prototype.save=function(n){return me(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.saveHandler(n)]})})},r}(),tf=Object.freeze({browserFiles:function(r){return new sL(r)},browserHTTPRequest:function(r,n){return uv(r,n)},concatenateArrayBuffers:Kv,decodeWeights:mD,encodeWeights:function(r,n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s=this;return ge(this,function(c){switch(c.label){case 0:for(e=[],t=[],i=Array.isArray(r)?r.map(function(l){return l.name}):Object.keys(r),o=function(l){var d=i[l],u=Array.isArray(r)?r[l].tensor:r[d];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+u.dtype);var h={name:d,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){var f=new Promise(function(p){return me(s,void 0,void 0,function(){var m,g,v,_,y,b,x;return ge(this,function(C){switch(C.label){case 0:return[4,u.bytes()];case 1:for(m=C.sent(),g=m.reduce(function(k,I){return k+I.length},0)+Wh*m.length,v=new Uint8Array(g),_=0,y=0;y<m.length;y++)b=m[y],x=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(x,_),_+=Wh,v.set(b,_),_+=b.length;return p(v),[2]}})})});t.push(f)}else t.push(u.data());n!=null&&(h.group=n),e.push(h)},a=0;a<i.length;++a)o(a);return[4,Promise.all(t)];case 1:return[2,{data:XP(c.sent()),specs:e}]}})})},fromMemory:function(r,n,e,t){return arguments.length===1?r.modelTopology!=null||r.weightSpecs!=null?new Ug(r):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ug({modelTopology:r})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ug({modelTopology:r,weightSpecs:n,weightData:e,trainingConfig:t}))},getLoadHandlers:function(r,n){return sr.getLoadHandlers(r,n)},getModelArtifactsInfoForJSON:Ql,getSaveHandlers:function(r){return sr.getSaveHandlers(r)},http:uv,isHTTPScheme:dv,loadWeights:function(r,n,e,t){return n===void 0&&(n=""),me(this,void 0,void 0,function(){return ge(this,function(i){return[2,Xw(function(o){return _D(o,{requestInit:t})})(r,n,e)]})})},registerLoadRouter:function(r){return sr.registerLoadRouter(r)},registerSaveRouter:function(r){return sr.registerSaveRouter(r)},weightsLoaderFactory:Xw,withSaveHandler:function(r){return new cL(r)},copyModel:function(r,n){return me(this,void 0,void 0,function(){return ge(this,function(e){return[2,Gw(r,n,!1)]})})},listModels:function(){return me(this,void 0,void 0,function(){var r,n,e,t,i,o,a;return ge(this,function(s){switch(s.label){case 0:r=Eo.getSchemes(),n={},e=0,t=r,s.label=1;case 1:return e<t.length?(i=t[e],[4,Eo.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+js+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(r,n){return me(this,void 0,void 0,function(){return ge(this,function(e){return[2,Gw(r,n,!0)]})})},removeModel:function(r){return me(this,void 0,void 0,function(){var n;return ge(this,function(e){return n=Ah(r),[2,Eo.getManager(n.scheme).removeModel(n.path)]})})}}),Ps,lL=T({confusionMatrix_:function(r,n,e){var t=E(r,"labels","confusionMatrix"),i=E(n,"predictions","confusionMatrix");A(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),A(t.rank===1,function(){return"Expected the rank of labels to be 1, but got "+t.rank}),A(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),A(t.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+t.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),A(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=rv(t.asType("int32"),e),a=rv(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}}),N5=Object.freeze({confusionMatrix:lL}),dL=T({fromPixels_:function(r,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(r==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,t=!1,i=!1,o=!1,a=!1;if(r.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&r instanceof ImageData)t=!0;else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement)o=!0;else{if(r.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+r.constructor.name);a=!0}if(i&&i&&r.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(e1("FromPixels",O.backendName)!=null)return O.runKernel("FromPixels",{pixels:r},{numChannels:n});var s,c,l=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],d=l[0],u=l[1];if(a?s=r.getContext("2d").getImageData(0,0,d,u).data:t||e?s=r.data:(o||i)&&(Ps==null&&(Ps=document.createElement("canvas").getContext("2d")),Ps.canvas.width=d,Ps.canvas.height=u,Ps.drawImage(r,0,0,d,u),s=Ps.getImageData(0,0,d,u).data),n===4)c=new Int32Array(s);else{var h=d*u;c=new Int32Array(h*n);for(var f=0;f<h;f++)for(var p=0;p<n;++p)c[f*n+p]=s[4*f+p]}return qh(c,[u,d,n],"int32")}}),Qs=Object.freeze({toPixels:function(r,n){return me(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,x,C,k,I;return ge(this,function(S){switch(S.label){case 0:if(e=E(r,"img","toPixels"),r instanceof xt||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(t=e.shape.slice(0,2),i=t[0],o=t[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.data()];case 1:return s=S.sent(),c=e.min(),l=e.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(d=S.sent(),u=d[0],h=d[1],f=u[0],p=h[0],c.dispose(),l.dispose(),e.dtype==="float32"){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m=e.dtype==="float32"?255:1,g=new Uint8ClampedArray(o*i*4),v=0;v<i*o;++v)_=void 0,y=void 0,b=void 0,x=void 0,a===1?(_=s[v]*m,y=s[v]*m,b=s[v]*m,x=255):a===3?(_=s[3*v]*m,y=s[3*v+1]*m,b=s[3*v+2]*m,x=255):a===4&&(_=s[4*v]*m,y=s[4*v+1]*m,b=s[4*v+2]*m,x=s[4*v+3]*m),g[(C=4*v)+0]=Math.round(_),g[C+1]=Math.round(y),g[C+2]=Math.round(b),g[C+3]=Math.round(x);return n!=null&&(n.width=o,n.height=i,k=n.getContext("2d"),I=new ImageData(g,o,i),k.putImageData(I,0,0)),e!==r&&e.dispose(),[2,g]}})})},fromPixels:dL}),xD=function(){function r(){}return r.prototype.getClassName=function(){return this.constructor.className},r.fromConfig=function(n,e){return new n(e)},r}(),wD=function(){function r(){this.classNameMap={}}return r.getMap=function(){return r.instance==null&&(r.instance=new r),r.instance},r.register=function(n){r.getMap().classNameMap[n.className]=[n,n.fromConfig]},r}();function ko(r){A(r.className!=null,function(){return"Class being registered does not have the static className property defined."}),A(typeof r.className=="string",function(){return"className is required to be a string, but got type "+typeof r.className}),A(r.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),wD.register(r)}var P5=Object.freeze({Serializable:xD,SerializationMap:wD,registerClass:ko}),uL=.001,CD=.1;function jg(){return O.backend.floatPrecision()===32?uL:CD}function Wg(r,n,e){var t=!0;if((wn(r)||wn(n))&&(t=!1),wn(r)&&wn(n)&&(t=!0),t){var i=r.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(r)&&Array.isArray(n)){var a=oi(r),s=oi(n);if(!Jt(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var c=wn(r)?r:Li(r),l=wn(n)?n:Li(n);if(c.length!==l.length)throw new Error("Arrays have different lengths actual: "+c.length+" vs expected: "+l.length+`.
Actual:   `+c+`.
Expected: `+l+".");for(var d=0;d<l.length;++d){var u=c[d],h=l[d];if(!e(u,h))throw new Error("Arrays differ: actual["+d+"] = "+u+", expected["+d+"] = "+h+`.
Actual:   `+c+`.
Expected: `+l+".")}}function Hg(r,n,e){return!isFinite(r)&&!isFinite(n)||!(isNaN(r)||isNaN(n)||Math.abs(r-n)>e)}var L5=Object.freeze({TEST_EPSILON_FLOAT16:CD,expectArraysClose:function(r,n,e){return e==null&&(e=jg()),Wg(r,n,function(t,i){return Hg(t,i,e)})},testEpsilon:jg,expectPromiseToFail:function(r,n){r().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(r,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return Co(r)||Co(r[0])||Co(n)||Co(n[0])?Wg(r,e,function(t,i){return t==i}):Wg(r,n,function(t,i){return Hg(t,i,0)})},expectNumbersClose:function(r,n,e){if(e==null&&(e=jg()),!Hg(r,n,e))throw new Error("Numbers differ: actual === "+r+", expected === "+n)},expectValuesInRange:function(r,n,e){for(var t=0;t<r.length;t++)if(r[t]<n||r[t]>e)throw new Error("Value out of range:"+r[t]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(r,n){expect(new Float32Array(r)).toEqual(new Float32Array(n))}});var B5=Object.freeze({gpgpu_util:OF,webgl_util:iT,forceHalfFloat:function(){U().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:VC,setWebGLContext:b1,GPGPUContext:TC}),ya=function(r){function n(){return r!==null&&r.apply(this,arguments)||this}return Vr(n,r),n.prototype.minimize=function(e,t,i){t===void 0&&(t=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;if(i!=null){var c=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(c)}else this.applyGradients(s);return Yn(s),t?a:(a.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,t){return BT(e,t)},n.prototype.dispose=function(){this.iterations_!=null&&Yn(this.iterations_)},n.prototype.saveIterations=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:re(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return me(this,void 0,void 0,function(){var t;return ge(this,function(i){switch(i.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}(xD);Object.defineProperty(ya,Symbol.hasInstance,{value:function(r){return r.minimize!=null&&r.computeGradients!=null&&r.applyGradients!=null}});var DD=function(r){function n(e,t,i){i===void 0&&(i=null);var o=r.call(this)||this;return o.learningRate=e,o.rho=t,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=O.backend.epsilon()),o}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=O.registeredVariables[i];t.accumulatedGrads[o]==null&&(t.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:$(function(){return at(a).variable(!1)})}),t.accumulatedUpdates[o]==null&&(t.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:$(function(){return at(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedGrads[o].variable,l=t.accumulatedUpdates[o].variable;$(function(){var d=c.mul(t.rho).add(s.square().mul(1-t.rho)),u=l.add(t.epsilon).sqrt().div(c.add(t.epsilon).sqrt()).mul(s),h=l.mul(t.rho).add(u.square().mul(1-t.rho));c.assign(d),l.assign(h);var f=u.mul(-t.learningRate).add(a);a.assign(f)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Yn(this.accumulatedGrads.map(function(e){return e.variable})),Yn(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){var e;return ge(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){var t;return ge(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},n.className="Adadelta",n}(ya);ko(DD);var ED=function(r){function n(e,t){t===void 0&&(t=.1);var i=r.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=t,i.accumulatedGrads=[],i}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=O.registeredVariables[i];t.accumulatedGrads[o]==null&&(t.accumulatedGrads[o]={originalName:i+"/accumulator",variable:$(function(){return cr(a.shape,t.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedGrads[o].variable;$(function(){var l=c.add(s.square());c.assign(l);var d=s.div(l.add(O.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(d)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&Yn(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},n.className="Adagrad",n}(ya);ko(ED);var SD=function(r){function n(e,t,i,o){o===void 0&&(o=null);var a=r.call(this)||this;return a.learningRate=e,a.beta1=t,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],$(function(){a.accBeta1=re(t).variable(),a.accBeta2=re(i).variable()}),o==null&&(a.epsilon=O.backend.epsilon()),a}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);$(function(){var o=wt(1,t.accBeta1),a=wt(1,t.accBeta2);i.forEach(function(s,c){var l=O.registeredVariables[s];t.accumulatedFirstMoment[c]==null&&(t.accumulatedFirstMoment[c]={originalName:s+"/m",variable:$(function(){return at(l).variable(!1)})}),t.accumulatedSecondMoment[c]==null&&(t.accumulatedSecondMoment[c]={originalName:s+"/v",variable:$(function(){return at(l).variable(!1)})});var d=Array.isArray(e)?e[c].tensor:e[s];if(d!=null){var u=t.accumulatedFirstMoment[c].variable,h=t.accumulatedSecondMoment[c].variable,f=u.mul(t.beta1).add(d.mul(1-t.beta1)),p=h.mul(t.beta2).add(d.square().mul(1-t.beta2)),m=f.div(o),g=p.div(a);u.assign(f),h.assign(p);var v=m.div(g.sqrt().add(t.epsilon)).mul(-t.learningRate).add(l);l.assign(v)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Yn(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&Yn(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){var e;return ge(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){var t,i=this;return ge(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),$(function(){i.accBeta1.assign(Uh(i.beta1,i.iterations_+1)),i.accBeta2.assign(Uh(i.beta2,i.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},n.className="Adam",n}(ya);ko(SD);var AD=function(r){function n(e,t,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=r.call(this)||this;return s.learningRate=e,s.beta1=t,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],$(function(){s.iteration=re(0).variable(),s.accBeta1=re(t).variable()}),o==null&&(s.epsilon=O.backend.epsilon()),s}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);$(function(){var o=wt(1,t.accBeta1),a=yr(-t.learningRate,t.iteration.mul(t.decay).add(1));i.forEach(function(s,c){var l=O.registeredVariables[s];t.accumulatedFirstMoment[c]==null&&(t.accumulatedFirstMoment[c]={originalName:s+"/m",variable:at(l).variable(!1)}),t.accumulatedWeightedInfNorm[c]==null&&(t.accumulatedWeightedInfNorm[c]={originalName:s+"/v",variable:at(l).variable(!1)});var d=Array.isArray(e)?e[c].tensor:e[s];if(d!=null){var u=t.accumulatedFirstMoment[c].variable,h=t.accumulatedWeightedInfNorm[c].variable,f=u.mul(t.beta1).add(d.mul(1-t.beta1)),p=h.mul(t.beta2),m=d.abs(),g=p.maximum(m);u.assign(f),h.assign(g);var v=a.div(o).mul(f.div(g.add(t.epsilon))).add(l);l.assign(v)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Yn(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&Yn(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},n.className="Adamax",n}(ya);ko(AD);var Xv=function(r){function n(e){var t=r.call(this)||this;return t.learningRate=e,t.setLearningRate(e),t}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var s=O.registeredVariables[i];$(function(){var c=t.c.mul(a).add(s);s.assign(c)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=oT(re(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=t.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,t){return new e(t.learningRate)},n.className="SGD",n}(ya);ko(Xv);var kD=function(r){function n(e,t,i){i===void 0&&(i=!1);var o=r.call(this,e)||this;return o.learningRate=e,o.momentum=t,o.useNesterov=i,o.accumulations=[],o.m=re(o.momentum),o}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=O.registeredVariables[i];t.accumulations[o]==null&&(t.accumulations[o]={originalName:i+"/momentum",variable:$(function(){return at(a).variable(!1)})});var s=t.accumulations[o].variable,c=Array.isArray(e)?e[o].tensor:e[i];c!=null&&$(function(){var l,d=t.m.mul(s).add(c);l=t.useNesterov?t.c.mul(c.add(d.mul(t.m))).add(a):t.c.mul(d).add(a),s.assign(d),a.assign(l)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Yn(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){return ge(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},n.className="Momentum",n}(Xv);ko(kD);var ID=function(r){function n(e,t,i,o,a){t===void 0&&(t=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=r.call(this)||this;if(s.learningRate=e,s.decay=t,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=O.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Vr(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=O.registeredVariables[i];t.accumulatedMeanSquares[o]==null&&(t.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:$(function(){return at(a).variable(!1)})}),t.accumulatedMoments[o]==null&&(t.accumulatedMoments[o]={originalName:i+"/momentum",variable:$(function(){return at(a).variable(!1)})}),t.accumulatedMeanGrads[o]==null&&t.centered&&(t.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:$(function(){return at(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedMeanSquares[o].variable,l=t.accumulatedMoments[o].variable;$(function(){var d=c.mul(t.decay).add(s.square().mul(1-t.decay));if(t.centered){var u=t.accumulatedMeanGrads[o].variable,h=u.mul(t.decay).add(s.mul(1-t.decay)),f=l.mul(t.momentum).add(s.mul(t.learningRate).div(d.sub(h.square().add(t.epsilon)).sqrt()));c.assign(d),u.assign(h),l.assign(f);var p=a.sub(f);a.assign(p)}else{var m=c.mul(t.decay).add(s.square().mul(1-t.decay));f=l.mul(t.momentum).add(s.mul(t.learningRate).div(m.add(t.epsilon).sqrt())),c.assign(m),l.assign(f),p=a.sub(f),a.assign(p)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Yn(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Yn(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&Yn(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return me(this,void 0,void 0,function(){var e;return ge(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return me(this,void 0,void 0,function(){var t;return ge(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},n.className="RMSProp",n}(ya);ko(ID);var aa=function(){function r(){}return r.sgd=function(n){return new Xv(n)},r.momentum=function(n,e,t){return t===void 0&&(t=!1),new kD(n,e,t)},r.rmsprop=function(n,e,t,i,o){return e===void 0&&(e=.9),t===void 0&&(t=0),i===void 0&&(i=null),o===void 0&&(o=!1),new ID(n,e,t,i,o)},r.adam=function(n,e,t,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),t===void 0&&(t=.999),i===void 0&&(i=null),new SD(n,e,t,i)},r.adadelta=function(n,e,t){return n===void 0&&(n=.001),e===void 0&&(e=.95),t===void 0&&(t=null),new DD(n,e,t)},r.adamax=function(n,e,t,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),t===void 0&&(t=.999),i===void 0&&(i=null),o===void 0&&(o=0),new AD(n,e,t,i,o)},r.adagrad=function(n,e){return e===void 0&&(e=.1),new ED(n,e)},r}(),V5={sgd:aa.sgd,momentum:aa.momentum,adadelta:aa.adadelta,adagrad:aa.adagrad,rmsprop:aa.rmsprop,adamax:aa.adamax,adam:aa.adam};xt.prototype.squaredDifference=function(r){return zC(this,r)},L=WP;function Io(r,n,e){if(e===void 0&&(e=!1),r.beginPath(),n.slice(1).forEach(function(o,a){var s=o.x,c=o.y,l=n[a];r.moveTo(l.x,l.y),r.lineTo(s,c)}),e){var t=n[n.length-1],i=n[0];if(!t||!i)return;r.moveTo(t.x,t.y),r.lineTo(i.x,i.y)}r.stroke()}var Qv=function(r,n){return Qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},Qv(r,n)};function oe(r,n){Qv(r,n);function e(){this.constructor=r}r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var nn=function(){return nn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},nn.apply(this,arguments)};function ee(r,n,e,t){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{l(t.next(d))}catch(u){a(u)}}function c(d){try{l(t.throw(d))}catch(u){a(u)}}function l(d){d.done?o(d.value):i(d.value).then(s,c)}l((t=t.apply(r,n||[])).next())})}function te(r,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(d){return c([l,d])}}function c(l){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(r,e)}catch(d){l=[6,d],i=0}finally{t=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xa(){for(var r=0,n=0,e=arguments.length;n<e;n++)r+=arguments[n].length;for(var t=Array(r),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)t[i]=o[a];return t}var wr=function(){function r(n,e){if(!si(n)||!si(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),r.prototype.reverse=function(){return new r(1/this.width,1/this.height)},r}();function Zl(r,n){return r instanceof xt&&r.shape.length===n}function MD(r){return Zl(r,2)}function Mo(r){return Zl(r,3)}function Cr(r){return Zl(r,4)}function RD(r){return r%1!==0}function Zv(r){return r%2===0}function nf(r,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(r*e)/e}function Jv(r){return r&&r.width&&r.height}function TD(r,n){var e=r.width,t=r.height,i=n/Math.max(t,e);return new wr(Math.round(e*i),Math.round(t*i))}function Zs(r){return r.reduce(function(n,e){return n.add(e)},new et(0,0)).div(new et(r.length,r.length))}function ji(r,n,e){return Array(r).fill(0).map(function(t,i){return n+i*e})}function si(r){return!!r&&r!==1/0&&r!==-1/0&&!isNaN(r)||r===0}function rf(r){return si(r)&&0<=r&&r<=1}var et=function(){function r(n,e){this._x=n,this._y=e}return Object.defineProperty(r.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),r.prototype.add=function(n){return new r(this.x+n.x,this.y+n.y)},r.prototype.sub=function(n){return new r(this.x-n.x,this.y-n.y)},r.prototype.mul=function(n){return new r(this.x*n.x,this.y*n.y)},r.prototype.div=function(n){return new r(this.x/n.x,this.y/n.y)},r.prototype.abs=function(){return new r(Math.abs(this.x),Math.abs(this.y))},r.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},r.prototype.floor=function(){return new r(Math.floor(this.x),Math.floor(this.y))},r}();var Dn=function(){function r(n,e){e===void 0&&(e=!0);var t=n||{},i=[t.left,t.top,t.right,t.bottom].every(si),o=[t.x,t.y,t.width,t.height].every(si);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(t));var a=o?[t.x,t.y,t.width,t.height]:[t.left,t.top,t.right-t.left,t.bottom-t.top],s=a[0],c=a[1],l=a[2],d=a[3];r.assertIsValidBox({x:s,y:c,width:l,height:d},"Box.constructor",e),this._x=s,this._y=c,this._width=l,this._height=d}return r.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(si)},r.assertIsValidBox=function(n,e,t){if(t===void 0&&(t=!1),!r.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!t&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new et(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topRight",{get:function(){return new et(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomLeft",{get:function(){return new et(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new et(this.right,this.bottom)},enumerable:!0,configurable:!0}),r.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),e=n[0],t=n[1],i=n[2],o=n[3];return new r({x:e,y:t,width:i,height:o})},r.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),e=n[0],t=n[1],i=n[2],o=n[3];return new r({x:e,y:t,width:i,height:o})},r.prototype.toSquare=function(){var n=this,e=n.x,t=n.y,i=n.width,o=n.height,a=Math.abs(i-o);return i<o&&(e-=a/2,i+=a),o<i&&(t-=a/2,o+=a),new r({x:e,y:t,width:i,height:o})},r.prototype.rescale=function(n){var e=Jv(n)?n.width:n,t=Jv(n)?n.height:n;return new r({x:this.x*e,y:this.y*t,width:this.width*e,height:this.height*t})},r.prototype.pad=function(n,e){var t=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],i=t[0],o=t[1],a=t[2],s=t[3];return new r({x:i,y:o,width:a,height:s})},r.prototype.clipAtImageBorders=function(n,e){var t=this,i=t.x,o=t.y,a=t.right,s=t.bottom,c=Math.max(i,0),l=Math.max(o,0),d=a-c,u=s-l,h=Math.min(d,n-c),f=Math.min(u,e-l);return new r({x:c,y:l,width:h,height:f}).floor()},r.prototype.shift=function(n,e){var t=this,i=t.width,o=t.height,a=this.x+n,s=this.y+e;return new r({x:a,y:s,width:i,height:o})},r.prototype.padAtBorders=function(n,e){var t=this.width+1,i=this.height+1,o=1,a=1,s=t,c=i,l=this.left,d=this.top,u=this.right,h=this.bottom;return u>e&&(s=-u+e+t,u=e),h>n&&(c=-h+n+i,h=n),l<1&&(c=2-l,l=1),d<1&&(c=2-d,d=1),{dy:a,edy:c,dx:o,edx:s,y:d,ey:h,x:l,ex:u,w:t,h:i}},r.prototype.calibrate=function(n){return new r({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},r}();var wa=function(r){oe(n,r);function n(e,t,i,o,a){return a===void 0&&(a=!1),r.call(this,{left:e,top:t,right:i,bottom:o},a)||this}return n}(Dn);var of=function(){function r(n,e,t,i,o){this._imageDims=new wr(o.width,o.height),this._score=n,this._classScore=e,this._className=t,this._box=new Dn(i).rescale(this._imageDims)}return Object.defineProperty(r.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"relativeBox",{get:function(){return new Dn(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),r.prototype.forSize=function(n,e){return new r(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},r}();var qt=function(r){oe(n,r);function n(e,t,i){return r.call(this,e,e,"",t,i)||this}return n.prototype.forSize=function(e,t){var i=r.prototype.forSize.call(this,e,t),o=i.score,a=i.relativeBox,s=i.imageDims;return new n(o,a,s)},n}(of);function FD(r,n,e){e===void 0&&(e=!0);var t=Math.max(0,Math.min(r.right,n.right)-Math.max(r.left,n.left)),i=Math.max(0,Math.min(r.bottom,n.bottom)-Math.max(r.top,n.top)),o=t*i;return e?o/(r.area+n.area-o):o/Math.min(r.area,n.area)}function OD(r){var n=r.map(function(s){return s.x}),e=r.map(function(s){return s.y}),t=n.reduce(function(s,c){return c<s?c:s},1/0),i=e.reduce(function(s,c){return c<s?c:s},1/0),o=n.reduce(function(s,c){return s<c?c:s},0),a=e.reduce(function(s,c){return s<c?c:s},0);return new wa(t,i,o,a)}function Wi(r,n,e,t){t===void 0&&(t=!0);for(var i=n.map(function(s,c){return{score:s,boxIndex:c}}).sort(function(s,c){return s.score-c.score}).map(function(s){return s.boxIndex}),o=[],a=function(){var s=i.pop();o.push(s);for(var c=i,l=[],d=0;d<c.length;d++){var u=c[d],h=r[s],f=r[u];l.push(FD(h,f,t))}i=i.filter(function(p,m){return l[m]<=e})};i.length>0;)a();return o}function ci(r,n){return $(function(){var e=n[0],t=n[1],i=n[2],o=cr(xa(r.shape.slice(0,3),[1]),e),a=cr(xa(r.shape.slice(0,3),[1]),t),s=cr(xa(r.shape.slice(0,3),[1]),i),c=Ft([o,a,s],3);return wt(r,c)})}function ND(r,n){return n===void 0&&(n=!1),$(function(){var e=r.shape.slice(1),t=e[0],i=e[1];if(t===i)return r;var o=Math.abs(t-i),a=Math.round(o*(n?.5:1)),s=t>i?2:1,c=function(f){var p=r.shape.slice();return p[s]=f,cr(p,0)},l=c(a),d=o-l.shape[s],u=n&&d?c(d):null,h=[u,r,l].filter(function(f){return!!f}).map(function(f){return f.toFloat()});return Ft(h,s)})}function af(r){return 1/(1+Math.exp(-r))}var Js=function(r){oe(n,r);function n(e,t,i,o,a){return a===void 0&&(a=!1),r.call(this,{x:e,y:t,width:i,height:o},a)||this}return n}(Dn);var fL=.5,pL=.43,mL=.45,li=function(){function r(n,e,t){t===void 0&&(t=new et(0,0));var i=e.width,o=e.height;this._imgDims=new wr(i,o),this._shift=t,this._positions=n.map(function(a){return a.mul(new et(i,o)).add(t)})}return Object.defineProperty(r.prototype,"shift",{get:function(){return new et(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new et(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),r.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},r.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new et(n,e))},r.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},r.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var t=n instanceof qt?n.box.floor():new Dn(n);return this.shiftBy(t.x,t.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},r.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],t=n[1],i=n[2],o=function(u){return i.sub(u).magnitude()},a=(o(e)+o(t))/2,s=Math.floor(a/mL),c=Zs(n),l=Math.floor(Math.max(0,c.x-fL*s)),d=Math.floor(Math.max(0,c.y-pL*s));return new Js(l,d,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+d))},r.prototype.alignMinBbox=function(n){var e=OD(this.positions);return e.pad(e.width*n,e.height*n)},r.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},r}();var PD=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Zs([e[3],e[4]])]},n}(li);var sf=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Zs)},n}(li);var eb=function(){function r(n,e){this._label=n,this._distance=e}return Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),r.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+nf(this.distance)+")":"")},r}();var tb=function(r){oe(n,r);function n(e,t){var i=r.call(this,e)||this;return i._label=t,i}return n.assertIsValidLabeledBox=function(e,t){if(Dn.assertIsValidBox(e,t),!si(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(Dn);var Jl=function(){function r(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(t){return!(t instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),r.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},r.fromJSON=function(n){var e=n.descriptors.map(function(t){return new Float32Array(t)});return new r(n.label,e)},r}();var XH=function(r){oe(n,r);function n(e,t,i,o){var a=r.call(this,e,t)||this;return a._score=i,a._classScore=o,a}return n.assertIsValidPredictedBox=function(e,t){if(tb.assertIsValidLabeledBox(e,t),!rf(e.score)||!rf(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n}(tb);function ec(r){return r.detection instanceof qt}function Ro(r,n){var e={detection:n};return Object.assign({},r,e)}function nb(){var r=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:r,readFile:n}}function cf(r){var n="";if(!r)try{r=jf("fs")}catch(t){n=t.toString()}var e=r?function(t){return new Promise(function(i,o){r.readFile(t,function(a,s){return a?o(a):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function rb(){var r=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(r)return new r;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},t=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=cf();return nn({Canvas:r||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:n||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:e,createImageElement:t,fetch:i},o)}function ib(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function ob(){return typeof global=="object"&&typeof jf=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var sn;function gL(){if(!sn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return sn}function ab(r){sn=r}function sb(){ib()&&ab(nb()),ob()&&ab(rb())}function vL(r){if(sn||sb(),!sn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=r.Canvas,e=n===void 0?sn.Canvas:n,t=r.Image,i=t===void 0?sn.Image:t;sn.Canvas=e,sn.Image=i,sn.createCanvasElement=r.createCanvasElement||function(){return new e},sn.createImageElement=r.createImageElement||function(){return new i},sn.ImageData=r.ImageData||sn.ImageData,sn.Video=r.Video||sn.Video,sn.fetch=r.fetch||sn.fetch,sn.readFile=r.readFile||sn.readFile}var ht={getEnv:gL,setEnv:ab,initialize:sb,createBrowserEnv:nb,createFileSystem:cf,createNodejsEnv:rb,monkeyPatch:vL,isBrowser:ib,isNodejs:ob};sb();function tc(r){return!ht.isNodejs()&&typeof r=="string"?document.getElementById(r):r}function En(r){var n=ht.getEnv(),e=n.Canvas,t=n.CanvasRenderingContext2D;if(r instanceof t)return r;var i=tc(r);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var To=function(r){return r.TOP_LEFT="TOP_LEFT",r.TOP_RIGHT="TOP_RIGHT",r.BOTTOM_LEFT="BOTTOM_LEFT",r.BOTTOM_RIGHT="BOTTOM_RIGHT",r}(To||{}),cb=function(){function r(n){n===void 0&&(n={});var e=n.anchorPosition,t=n.backgroundColor,i=n.fontColor,o=n.fontSize,a=n.fontStyle,s=n.padding;this.anchorPosition=e||To.TOP_LEFT,this.backgroundColor=t||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=s||4}return r}();var lb=function(){function r(n,e,t){t===void 0&&(t={}),this.text=typeof n=="string"?[n]:n instanceof r?n.text:n,this.anchor=e,this.options=new cb(t)}return r.prototype.measureWidth=function(n){var e=this.options.padding;return this.text.map(function(t){return n.measureText(t).width}).reduce(function(t,i){return t<i?i:t},0)+2*e},r.prototype.measureHeight=function(){var n=this.options,e=n.fontSize,t=n.padding;return this.text.length*e+2*t},r.prototype.getUpperLeft=function(n,e){var t=this.options.anchorPosition,i=t===To.BOTTOM_RIGHT||t===To.TOP_RIGHT,o=t===To.BOTTOM_LEFT||t===To.BOTTOM_RIGHT,a=this.measureWidth(n),s=this.measureHeight(),c=i?this.anchor.x-a:this.anchor.x,l=o?this.anchor.y-s:this.anchor.y;if(e){var d=e.width,u=e.height,h=Math.max(Math.min(c,d-a),0),f=Math.max(Math.min(l,u-s),0);return{x:h,y:f}}return{x:c,y:l}},r.prototype.draw=function(n){var e=tc(n),t=En(e),i=this.options,o=i.backgroundColor,a=i.fontColor,s=i.fontSize,c=i.fontStyle,l=i.padding;t.font=s+"px "+c;var d=this.measureWidth(t),u=this.measureHeight();t.fillStyle=o;var h=this.getUpperLeft(t,e);t.fillRect(h.x,h.y,d,u),t.fillStyle=a,this.text.forEach(function(f,p){var m=l+h.x,g=l+h.y+(p+1)*s;t.fillText(f,m,g)})},r}();var bL=function(){function r(n){n===void 0&&(n={});var e=n.boxColor,t=n.lineWidth,i=n.label,o=n.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=t||2,this.label=i;var a={anchorPosition:To.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new cb(Object.assign({},a,o))}return r}();var _L=function(){function r(n,e){e===void 0&&(e={}),this.box=new Dn(n),this.options=new bL(e)}return r.prototype.draw=function(n){var e=En(n),t=this.options,i=t.boxColor,o=t.lineWidth,a=this.box,s=a.x,c=a.y,l=a.width,d=a.height;e.strokeStyle=i,e.lineWidth=o,e.strokeRect(s,c,l,d);var u=this.options.label;u&&new lb([u],{x:s-o/2,y:c},this.options.drawLabelOptions).draw(n)},r}();function lf(r){var n=ht.getEnv(),e=n.Image,t=n.Video;return r instanceof e&&r.complete||r instanceof t&&r.readyState>=3}function LD(r){return new Promise(function(n,e){if(r instanceof ht.getEnv().Canvas||lf(r))return n();function t(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",t),o.currentTarget.removeEventListener("error",i),n(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",t),o.currentTarget.removeEventListener("error",i),e(o))}r.addEventListener("load",t),r.addEventListener("error",i)})}function nc(r){var n=ht.getEnv(),e=n.Image,t=n.Video;return r instanceof e?new wr(r.naturalWidth,r.naturalHeight):r instanceof t?new wr(r.videoWidth,r.videoHeight):new wr(r.width,r.height)}function Ca(r){var n=r.width,e=r.height,t=ht.getEnv().createCanvasElement,i=t();return i.width=n,i.height=e,i}function rc(r,n){var e=ht.getEnv().ImageData;if(!(r instanceof e)&&!lf(r))throw new Error("createCanvasFromMedia - media has not finished loading yet");var t=n||nc(r),i=t.width,o=t.height,a=Ca({width:i,height:o});return r instanceof e?En(a).putImageData(r,0,0):En(a).drawImage(r,0,0,i,o),a}function BD(r,n){return ee(this,void 0,void 0,function(){var e,t,i,o,a,s;return te(this,function(c){switch(c.label){case 0:return e=n||ht.getEnv().createCanvasElement(),t=r.shape.slice(Cr(r)?1:0),i=t[0],o=t[1],a=t[2],s=$(function(){return r.as3D(i,o,a).toInt()}),[4,Qs.toPixels(s,e)];case 1:return c.sent(),s.dispose(),[2,e]}})})}function db(r){var n=ht.getEnv(),e=n.Image,t=n.Canvas,i=n.Video;return r instanceof e||r instanceof t||r instanceof i}function VD(r,n,e){e===void 0&&(e=!1);var t=ht.getEnv(),i=t.Image,o=t.Canvas;if(!(r instanceof i||r instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=nc(r),s=n/Math.max(a.height,a.width),c=s*a.width,l=s*a.height,d=Ca({width:n,height:n}),u=r instanceof o?r:rc(r),h=Math.abs(c-l)/2,f=e&&c<l?h:0,p=e&&l<c?h:0;return En(d).drawImage(u,f,p,c,l),d}var Da=function(){function r(n,e){var t=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(i,o){if(Mo(i)){t._imageTensors[o]=i,t._inputDimensions[o]=i.shape;return}if(Cr(i)){var a=i.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");t._imageTensors[o]=i,t._inputDimensions[o]=i.shape.slice(1);return}var s=i instanceof ht.getEnv().Canvas?i:rc(i);t._canvases[o]=s,t._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(r.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"reshapedInputDimensions",{get:function(){var n=this;return ji(this.batchSize,0,1).map(function(e,t){return n.getReshapedInputDimensions(t)})},enumerable:!0,configurable:!0}),r.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},r.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},r.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},r.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},r.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),t=this.getInputHeight(n);return TD({width:e,height:t},this.inputSize)},r.prototype.toBatchTensor=function(n,e){var t=this;return e===void 0&&(e=!0),this._inputSize=n,$(function(){var i=ji(t.batchSize,0,1).map(function(a){var s=t.getInput(a);if(s instanceof xt){var c=Cr(s)?s:s.expandDims();return c=ND(c,e),(c.shape[1]!==n||c.shape[2]!==n)&&(c=Xl.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(s instanceof ht.getEnv().Canvas)return Qs.fromPixels(VD(s,n,e));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=Cn(i.map(function(a){return a.toFloat()})).as4D(t.batchSize,n,n,3);return o})},r}();function _t(r){return ee(this,void 0,void 0,function(){var n,e,t;return te(this,function(i){switch(i.label){case 0:if(r instanceof Da)return[2,r];if(n=Array.isArray(r)?r:[r],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(r)?" at input index "+o+":":""},t=n.map(tc),t.forEach(function(o,a){if(!db(o)&&!Mo(o)&&!Cr(o))throw typeof n[a]=="string"?new Error("toNetInput -"+e(a)+" string passed, but could not resolve HTMLElement for element id "+n[a]):new Error("toNetInput -"+e(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Cr(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+e(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(t.map(function(o){return db(o)&&LD(o)}))];case 1:return i.sent(),[2,new Da(t,Array.isArray(r))]}})})}function ed(r,n){return ee(this,void 0,void 0,function(){var e,t,i,o,a,s,c;return te(this,function(l){switch(l.label){case 0:return e=ht.getEnv().Canvas,t=r,r instanceof e?[3,5]:[4,_t(r)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof e?(a=o,[3,4]):[3,2];case 2:return[4,BD(o)];case 3:a=l.sent(),l.label=4;case 4:t=a,l.label=5;case 5:return s=En(t),c=n.map(function(d){return d instanceof qt?d.forSize(t.width,t.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(t.width,t.height)}),[2,c.map(function(d){var u=d.x,h=d.y,f=d.width,p=d.height,m=Ca({width:f,height:p});return En(m).putImageData(s.getImageData(u,h,f,p),0,0),m})]}})})}function td(r,n){return ee(this,void 0,void 0,function(){return te(this,function(e){if(!Mo(r)&&!Cr(r))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Cr(r)&&r.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,$(function(){var t=r.shape.slice(Cr(r)?1:0),i=t[0],o=t[1],a=t[2],s=n.map(function(l){return l instanceof qt?l.forSize(o,i).box:l}).map(function(l){return l.clipAtImageBorders(o,i)}),c=s.map(function(l){var d=l.x,u=l.y,h=l.width,f=l.height;return zv(r.as3D(i,o,a),[u,d,0],[f,h,a])});return c})]})})}function df(r,n){return ee(this,void 0,void 0,function(){var e,t;return te(this,function(i){switch(i.label){case 0:return e=ht.getEnv().fetch,[4,e(r,n)];case 1:if(t=i.sent(),!(t.status<400))throw new Error("failed to fetch: ("+t.status+") "+t.statusText+", from url: "+t.url);return[2,t]}})})}function zD(r){return ee(this,void 0,void 0,function(){return te(this,function(n){switch(n.label){case 0:return[4,df(r)];case 1:return[2,n.sent().json()]}})})}function uf(r,n){var e=n+"-weights_manifest.json";if(!r)return{modelBaseUri:"",manifestUri:e};if(r==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var t=r.startsWith("http://")?"http://":r.startsWith("https://")?"https://":"";r=r.replace(t,"");var i=r.split("/").filter(function(s){return s}),o=r.endsWith(".json")?i[i.length-1]:e,a=t+(r.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=r.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+o:a+"/"+o}}function UD(r,n){return ee(this,void 0,void 0,function(){var e,t,i,o;return te(this,function(a){switch(a.label){case 0:return e=uf(r,n),t=e.manifestUri,i=e.modelBaseUri,[4,zD(t)];case 1:return o=a.sent(),[2,tf.loadWeights(o,i)]}})})}function jD(r,n,e){e===void 0&&(e=!1);var t=e?nc(n):n,i=t.width,o=t.height;return r.width=i,r.height=o,{width:i,height:o}}var fn=function(){function r(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(r.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),r.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),t=e.obj,i=e.objProp;return t[i]},r.prototype.reassignParamFromPath=function(n,e){var t=this.traversePropertyPath(n),i=t.obj,o=t.objProp;i[o].dispose(),i[o]=e},r.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var t=e.paramPath;return{path:t,tensor:n.getParamFromPath(t)}})},r.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof fa})},r.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof fa)})},r.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var t=e.path,i=e.tensor;n.reassignParamFromPath(t,i.variable())})},r.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var t=e.path,i=e.tensor,o=un(i.dataSync());i.dispose(),n.reassignParamFromPath(t,o)})},r.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},r.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},r.prototype.load=function(n){return ee(this,void 0,void 0,function(){return te(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},r.prototype.loadFromUri=function(n){return ee(this,void 0,void 0,function(){var e;return te(this,function(t){switch(t.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,UD(n,this.getDefaultModelName())];case 1:return e=t.sent(),this.loadFromWeightMap(e),[2]}})})},r.prototype.loadFromDisk=function(n){return ee(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u;return te(this,function(h){switch(h.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=ht.getEnv().readFile,t=uf(n,this.getDefaultModelName()),i=t.manifestUri,o=t.modelBaseUri,a=function(f){return Promise.all(f.map(function(p){return e(p).then(function(m){return m.buffer})}))},s=tf.weightsLoaderFactory(a),d=(l=JSON).parse,[4,e(i)];case 1:return c=d.apply(l,[h.sent().toString()]),[4,s(c,o)];case 2:return u=h.sent(),this.loadFromWeightMap(u),[2]}})})},r.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),t=e.paramMappings,i=e.params;this._paramMappings=t,this._params=i},r.prototype.extractWeights=function(n){var e=this.extractParams(n),t=e.paramMappings,i=e.params;this._paramMappings=t,this._params=i},r.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,a){if(!o.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+n);return{obj:o.nextObj,objProp:a,nextObj:o.nextObj[a]}},{nextObj:this.params}),t=e.obj,i=e.objProp;if(!t||!i||!(t[i]instanceof xt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:t,objProp:i}},r}();function Un(r,n,e){return $(function(){var t=$l(r,n.depthwise_filter,n.pointwise_filter,e,"same");return t=Oe(t,n.bias),t})}function hf(r,n,e){return e===void 0&&(e=!1),$(function(){var t=pt(e?Oe(hn(r,n.conv0.filters,[2,2],"same"),n.conv0.bias):Un(r,n.conv0,[2,2])),i=Un(t,n.conv1,[1,1]),o=pt(Oe(t,i)),a=Un(o,n.conv2,[1,1]);return pt(Oe(t,Oe(i,a)))})}function nd(r,n,e,t){return e===void 0&&(e=!1),t===void 0&&(t=!0),$(function(){var i=pt(e?Oe(hn(r,n.conv0.filters,t?[2,2]:[1,1],"same"),n.conv0.bias):Un(r,n.conv0,t?[2,2]:[1,1])),o=Un(i,n.conv1,[1,1]),a=pt(Oe(i,o)),s=Un(a,n.conv2,[1,1]),c=pt(Oe(i,Oe(o,s))),l=Un(c,n.conv3,[1,1]);return pt(Oe(i,Oe(o,Oe(s,l))))})}function Fn(r,n,e,t){return e===void 0&&(e="same"),t===void 0&&(t=!1),$(function(){var i=Oe(hn(r,n.filters,[1,1],e),n.bias);return t?pt(i):i})}function pn(r,n){Object.keys(r).forEach(function(e){n.some(function(t){return t.originalPath===e})||r[e].dispose()})}function Fo(r,n){return function(e,t,i,o){var a=an(r(e*t*i*i),[i,i,e,t]),s=At(r(t));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function ic(r,n){return function(e,t,i){var o=ii(r(e*t),[e,t]),a=At(r(t));return n.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var ub=function(){function r(n,e,t){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=t}return r}();function oc(r,n){return function(e,t,i){var o=an(r(9*e),[3,3,e,1]),a=an(r(e*t),[1,1,e,t]),s=At(r(t));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new ub(o,a,s)}}function ac(r){return function(n){var e=r(n+"/depthwise_filter",4),t=r(n+"/pointwise_filter",4),i=r(n+"/bias",1);return new ub(e,t,i)}}function On(r,n){return function(e,t,i){var o=r[e];if(!Zl(o,t))throw new Error("expected weightMap["+e+"] to be a Tensor"+t+"D, instead have "+o);return n.push({originalPath:e,paramPath:i||e}),o}}function mn(r){var n=r;function e(i){var o=n.slice(0,i);return n=n.slice(i),o}function t(){return n}return{extractWeights:e,getRemainingWeights:t}}function ff(r,n){var e=Fo(r,n),t=oc(r,n);function i(a,s,c,l){l===void 0&&(l=!1);var d=l?e(a,s,3,c+"/conv0"):t(a,s,c+"/conv0"),u=t(s,s,c+"/conv1"),h=t(s,s,c+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(a,s,c,l){l===void 0&&(l=!1);var d=i(a,s,c,l),u=d.conv0,h=d.conv1,f=d.conv2,p=t(s,s,c+"/conv3");return{conv0:u,conv1:h,conv2:f,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function WD(r){var n=[],e=mn(r),t=e.extractWeights,i=e.getRemainingWeights,o=ff(t,n).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2"),l=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:c,dense3:l}}}function pf(r){return function(n){var e=r(n+"/filters",4),t=r(n+"/bias",1);return{filters:e,bias:t}}}function mf(r,n){var e=On(r,n),t=pf(e),i=ac(e);function o(s,c){c===void 0&&(c=!1);var l=c?t(s+"/conv0"):i(s+"/conv0"),d=i(s+"/conv1"),u=i(s+"/conv2");return{conv0:l,conv1:d,conv2:u}}function a(s,c){c===void 0&&(c=!1);var l=c?t(s+"/conv0"):i(s+"/conv0"),d=i(s+"/conv1"),u=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:d,conv2:u,conv3:h}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function HD(r){var n=[],e=mf(r,n).extractDenseBlock4Params,t={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return pn(r,n),{params:t,paramMappings:n}}var gf=function(r){oe(n,r);function n(){return r.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return $(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=ci(i,o).div(re(255)),s=nd(a,t.dense0,!0);return s=nd(s,t.dense1),s=nd(s,t.dense2),s=nd(s,t.dense3),s=zi(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return HD(e)},n.prototype.extractParams=function(e){return WD(e)},n}(fn);function $n(r,n){return $(function(){return Oe(Xs(r,n.weights),n.bias)})}function GD(r,n,e){var t=[],i=mn(r),o=i.extractWeights,a=i.getRemainingWeights,s=ic(o,t),c=s(n,e,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:c}}}function qD(r){var n=[],e=On(r,n);function t(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:t("fc")};return pn(r,n),{params:i,paramMappings:n}}function vf(r){var n={},e={};return Object.keys(r).forEach(function(t){var i=t.startsWith("fc")?e:n;i[t]=r[t]}),{featureExtractorMap:n,classifierMap:e}}var bf=function(r){oe(n,r);function n(e,t){var i=r.call(this,e)||this;return i._faceFeatureExtractor=t,i}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var t=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $(function(){var o=e instanceof Da?t.faceFeatureExtractor.forwardInput(e):e;return $n(o.as2D(o.shape[0],-1),i.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),r.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),i=t.params,o=t.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return GD(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var t=vf(e),i=t.featureExtractorMap,o=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),qD(o)},n.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*t+i,a=e.slice(0,e.length-o),s=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},n}(fn);var YD=["neutral","happy","sad","angry","fearful","disgusted","surprised"],_f=function(){function r(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);YD.forEach(function(t,i){e[t]=n[i]})}return r.prototype.asSortedArray=function(){var n=this;return YD.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,t){return t.probability-e.probability})},r}();var $D=function(r){oe(n,r);function n(e){return e===void 0&&(e=new gf),r.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var t=this;return $(function(){return zn(t.runNet(e))})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.predictExpressions=function(e){return ee(this,void 0,void 0,function(){var t,i,o,a,s=this;return te(this,function(c){switch(c.label){case 0:return[4,_t(e)];case 1:return t=c.sent(),[4,this.forwardInput(t)];case 2:return i=c.sent(),[4,Promise.all(bt(i).map(function(l){return ee(s,void 0,void 0,function(){var d;return te(this,function(u){switch(u.label){case 0:return[4,l.data()];case 1:return d=u.sent(),l.dispose(),[2,d]}})})}))];case 3:return o=c.sent(),i.dispose(),a=o.map(function(l){return new _f(l)}),[2,t.isBatchInput?a:a[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(bf);function hb(r,n){var e={expressions:n};return Object.assign({},r,e)}function rd(r){return ec(r)&&r.landmarks instanceof li&&r.unshiftedLandmarks instanceof li&&r.alignedRect instanceof qt}function Ea(r,n){var e=r.detection.box,t=n.shiftBy(e.x,e.y),i=t.align(),o=r.detection.imageDims,a=new qt(r.detection.score,i.rescale(o.reverse()),o),s={landmarks:t,unshiftedLandmarks:n,alignedRect:a};return Object.assign({},r,s)}var yL=function(){function r(n){n===void 0&&(n={});var e=n.drawLines,t=e===void 0?!0:e,i=n.drawPoints,o=i===void 0?!0:i,a=n.lineWidth,s=n.lineColor,c=n.pointSize,l=n.pointColor;this.drawLines=t,this.drawPoints=o,this.lineWidth=a||1,this.pointSize=c||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"}return r}();var pY=function(){function r(n,e){e===void 0&&(e={}),this.faceLandmarks=n,this.options=new yL(e)}return r.prototype.draw=function(n){var e=En(n),t=this.options,i=t.drawLines,o=t.drawPoints,a=t.lineWidth,s=t.lineColor,c=t.pointSize,l=t.pointColor;if(i&&this.faceLandmarks instanceof sf&&(e.strokeStyle=s,e.lineWidth=a,Io(e,this.faceLandmarks.getJawOutline()),Io(e,this.faceLandmarks.getLeftEyeBrow()),Io(e,this.faceLandmarks.getRightEyeBrow()),Io(e,this.faceLandmarks.getNose()),Io(e,this.faceLandmarks.getLeftEye(),!0),Io(e,this.faceLandmarks.getRightEye(),!0),Io(e,this.faceLandmarks.getMouth(),!0)),o){e.strokeStyle=l,e.fillStyle=l;var d=function(u){e.beginPath(),e.arc(u.x,u.y,c,0,2*Math.PI),e.fill()};this.faceLandmarks.positions.forEach(d)}},r}();function wL(r,n){var e=Fo(r,n),t=oc(r,n);function i(a,s,c){var l=t(a,s,c+"/separable_conv0"),d=t(s,s,c+"/separable_conv1"),u=e(a,s,1,c+"/expansion_conv");return{separable_conv0:l,separable_conv1:d,expansion_conv:u}}function o(a,s){var c=t(a,a,s+"/separable_conv0"),l=t(a,a,s+"/separable_conv1"),d=t(a,a,s+"/separable_conv2");return{separable_conv0:c,separable_conv1:l,separable_conv2:d}}return{extractConvParams:e,extractSeparableConvParams:t,extractReductionBlockParams:i,extractMainBlockParams:o}}function KD(r,n){var e=[],t=mn(r),i=t.extractWeights,o=t.getRemainingWeights,a=wL(i,e),s=a.extractConvParams,c=a.extractSeparableConvParams,l=a.extractReductionBlockParams,d=a.extractMainBlockParams,u=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),f=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:u,reduction_block_0:h,reduction_block_1:f},m={};ji(n,0,1).forEach(function(y){m["main_block_"+y]=d(128,"middle_flow/main_block_"+y)});var g=l(128,256,"exit_flow/reduction_block"),v=c(256,512,"exit_flow/separable_conv"),_={reduction_block:g,separable_conv:v};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:p,middle_flow:m,exit_flow:_}}}function CL(r,n){var e=On(r,n),t=pf(e),i=ac(e);function o(s){var c=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),d=t(s+"/expansion_conv");return{separable_conv0:c,separable_conv1:l,expansion_conv:d}}function a(s){var c=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),d=i(s+"/separable_conv2");return{separable_conv0:c,separable_conv1:l,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}}function XD(r,n){var e=[],t=CL(r,e),i=t.extractConvParams,o=t.extractSeparableConvParams,a=t.extractReductionBlockParams,s=t.extractMainBlockParams,c=i("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),d=a("entry_flow/reduction_block_1"),u={conv_in:c,reduction_block_0:l,reduction_block_1:d},h={};ji(n,0,1).forEach(function(g){h["main_block_"+g]=s("middle_flow/main_block_"+g)});var f=a("exit_flow/reduction_block"),p=o("exit_flow/separable_conv"),m={reduction_block:f,separable_conv:p};return pn(r,e),{params:{entry_flow:u,middle_flow:h,exit_flow:m},paramMappings:e}}function QD(r,n,e){return Oe(hn(r,n.filters,e,"same"),n.bias)}function fb(r,n,e){e===void 0&&(e=!0);var t=e?pt(r):r;return t=Un(t,n.separable_conv0,[1,1]),t=Un(pt(t),n.separable_conv1,[1,1]),t=zt(t,[3,3],[2,2],"same"),t=Oe(t,QD(r,n.expansion_conv,[2,2])),t}function DL(r,n){var e=Un(pt(r),n.separable_conv0,[1,1]);return e=Un(pt(e),n.separable_conv1,[1,1]),e=Un(pt(e),n.separable_conv2,[1,1]),e=Oe(e,r),e}var ZD=function(r){oe(n,r);function n(e){var t=r.call(this,"TinyXception")||this;return t._numMainBlocks=e,t}return n.prototype.forwardInput=function(e){var t=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return $(function(){var o=e.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=ci(o,a).div(re(256)),c=pt(QD(s,i.entry_flow.conv_in,[2,2]));return c=fb(c,i.entry_flow.reduction_block_0,!1),c=fb(c,i.entry_flow.reduction_block_1),ji(t._numMainBlocks,0,1).forEach(function(l){c=DL(c,i.middle_flow["main_block_"+l])}),c=fb(c,i.exit_flow.reduction_block),c=pt(Un(c,i.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return XD(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return KD(e,this._numMainBlocks)},n}(fn);function JD(r){var n=[],e=mn(r),t=e.extractWeights,i=e.getRemainingWeights,o=ic(t,n),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{fc:{age:a,gender:s}}}}function eE(r){var n=[],e=On(r,n);function t(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:{age:t("fc/age"),gender:t("fc/gender")}};return pn(r,n),{params:i,paramMappings:n}}var id=function(r){return r.FEMALE="female",r.MALE="male",r}(id||{});var tE=function(r){oe(n,r);function n(e){e===void 0&&(e=new ZD(2));var t=r.call(this,"AgeGenderNet")||this;return t._faceFeatureExtractor=e,t}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var t=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $(function(){var o=e instanceof Da?t.faceFeatureExtractor.forwardInput(e):e,a=zi(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=$n(a,i.fc.age).as1D(),c=$n(a,i.fc.gender);return{age:s,gender:c}})},n.prototype.forwardInput=function(e){var t=this;return $(function(){var i=t.runNet(e),o=i.age,a=i.gender;return{age:o,gender:zn(a)}})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return ee(this,void 0,void 0,function(){var t,i,o,a,s,c,l=this;return te(this,function(d){switch(d.label){case 0:return[4,_t(e)];case 1:return t=d.sent(),[4,this.forwardInput(t)];case 2:return i=d.sent(),o=bt(i.age),a=bt(i.gender),s=o.map(function(u,h){return{ageTensor:u,genderTensor:a[h]}}),[4,Promise.all(s.map(function(u){var h=u.ageTensor,f=u.genderTensor;return ee(l,void 0,void 0,function(){var p,m,g,v,_;return te(this,function(y){switch(y.label){case 0:return[4,h.data()];case 1:return p=y.sent()[0],[4,f.data()];case 2:return m=y.sent()[0],g=m>.5,v=g?id.MALE:id.FEMALE,_=g?m:1-m,h.dispose(),f.dispose(),[2,{age:p,gender:v,genderProbability:_}]}})})}))];case 3:return c=d.sent(),i.age.dispose(),i.gender.dispose(),[2,t.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),r.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),i=t.params,o=t.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return JD(e)},n.prototype.extractParamsFromWeigthMap=function(e){var t=vf(e),i=t.featureExtractorMap,o=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),eE(o)},n.prototype.extractParams=function(e){var t=1539,i=e.slice(0,e.length-t),o=e.slice(e.length-t);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},n}(fn);var yf=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.postProcess=function(e,t,i){var o=i.map(function(s){var c=s.width,l=s.height,d=t/Math.max(l,c);return{width:c*d,height:l*d}}),a=o.length;return $(function(){var s=function(h,f){return Cn([cr([68],h),cr([68],f)],1).as2D(1,136).as1D()},c=function(h,f){var p=o[h],m=p.width,g=p.height;return f(m,g)?Math.abs(m-g)/2:0},l=function(h){return c(h,function(f,p){return f<p})},d=function(h){return c(h,function(f,p){return p<f})},u=e.mul(cr([a,136],t)).sub(Cn(Array.from(Array(a),function(h,f){return s(l(f),d(f))}))).div(Cn(Array.from(Array(a),function(h,f){return s(o[f].width,o[f].height)})));return u})},n.prototype.forwardInput=function(e){var t=this;return $(function(){var i=t.runNet(e);return t.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){var a=o[0],s=o[1];return{height:a,width:s}}))})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.detectLandmarks=function(e){return ee(this,void 0,void 0,function(){var t,i,o,a=this;return te(this,function(s){switch(s.label){case 0:return[4,_t(e)];case 1:return t=s.sent(),i=$(function(){return bt(a.forwardInput(t))}),[4,Promise.all(i.map(function(c,l){return ee(a,void 0,void 0,function(){var d,u,h,f,p;return te(this,function(m){switch(m.label){case 0:return h=(u=Array).from,[4,c.data()];case 1:return d=h.apply(u,[m.sent()]),f=d.filter(function(g,v){return Zv(v)}),p=d.filter(function(g,v){return!Zv(v)}),[2,new sf(Array(68).fill(0).map(function(g,v){return new et(f[v],p[v])}),{height:t.getInputHeight(l),width:t.getInputWidth(l)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(c){return c.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(bf);var xf=function(r){oe(n,r);function n(e){return e===void 0&&(e=new gf),r.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(yf);function nE(r){var n=[],e=mf(r,n).extractDenseBlock3Params,t={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return pn(r,n),{params:t,paramMappings:n}}function rE(r){var n=[],e=mn(r),t=e.extractWeights,i=e.getRemainingWeights,o=ff(t,n).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:c}}}var iE=function(r){oe(n,r);function n(){return r.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return $(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=ci(i,o).div(re(255)),s=hf(a,t.dense0,!0);return s=hf(s,t.dense1),s=hf(s,t.dense2),s=zi(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return nE(e)},n.prototype.extractParams=function(e){return rE(e)},n}(fn);var oE=function(r){oe(n,r);function n(e){return e===void 0&&(e=new iE),r.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(yf);var F9=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(xf);function aE(r,n){return Oe(Bt(r,n.weights),n.biases)}function pb(r,n,e,t,i){i===void 0&&(i="same");var o=n.conv,a=o.filters,s=o.bias,c=hn(r,a,e,i);return c=Oe(c,s),c=aE(c,n.scale),t?pt(c):c}function sE(r,n){return pb(r,n,[1,1],!0)}function mb(r,n){return pb(r,n,[1,1],!1)}function wf(r,n){return pb(r,n,[2,2],!0,"valid")}function EL(r,n){function e(s,c,l){var d=r(s),u=d.length/(c*l*l);if(RD(u))throw new Error("depth has to be an integer: "+u+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+l);return $(function(){return xr(an(d,[c,u,l,l]),[2,3,1,0])})}function t(s,c,l,d){var u=e(s,c,l),h=At(r(c));return n.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:u,bias:h}}function i(s,c){var l=At(r(s)),d=At(r(s));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:l,biases:d}}function o(s,c,l,d){var u=t(s,c,l,d+"/conv"),h=i(c,d+"/scale");return{conv:u,scale:h}}function a(s,c,l,d,u){u===void 0&&(u=!1);var h=o((u?.5:1)*s,c,l,d+"/conv1"),f=o(s,c,l,d+"/conv2");return{conv1:h,conv2:f}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function cE(r){var n=mn(r),e=n.extractWeights,t=n.getRemainingWeights,i=[],o=EL(e,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,c=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),d=s(9216,32,3,"conv32_2"),u=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),_=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),k=$(function(){return xr(ii(e(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),t().length!==0)throw new Error("weights remaing after extract: "+t().length);var I={conv32_down:c,conv32_1:l,conv32_2:d,conv32_3:u,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:_,conv256_down:y,conv256_1:b,conv256_2:x,conv256_down_out:C,fc:k};return{params:I,paramMappings:i}}function SL(r,n){var e=On(r,n);function t(a){var s=e(a+"/scale/weights",1),c=e(a+"/scale/biases",1);return{weights:s,biases:c}}function i(a){var s=e(a+"/conv/filters",4),c=e(a+"/conv/bias",1),l=t(a);return{conv:{filters:s,bias:c},scale:l}}function o(a){return{conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function lE(r){var n=[],e=SL(r,n),t=e.extractConvLayerParams,i=e.extractResidualLayerParams,o=t("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),c=i("conv32_3"),l=i("conv64_down"),d=i("conv64_1"),u=i("conv64_2"),h=i("conv64_3"),f=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),_=i("conv256_2"),y=i("conv256_down_out"),b=r.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!MD(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var x={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:c,conv64_down:l,conv64_1:d,conv64_2:u,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:_,conv256_down_out:y,fc:b};return pn(r,n),{params:x,paramMappings:n}}function Wr(r,n){var e=sE(r,n.conv1);return e=mb(e,n.conv2),e=Oe(e,r),e=pt(e),e}function od(r,n){var e=wf(r,n.conv1);e=mb(e,n.conv2);var t=zi(r,2,2,"valid"),i=It(t.shape),o=t.shape[3]!==e.shape[3],a=t.shape[1]!==e.shape[1]||t.shape[2]!==e.shape[2];if(a){var s=xa(e.shape);s[1]=1;var c=It(s);e=Ft([e,c],1);var l=xa(e.shape);l[2]=1;var d=It(l);e=Ft([e,d],2)}return t=o?Ft([t,i],3):t,e=Oe(t,e),e=pt(e),e}var gb=function(r){oe(n,r);function n(){return r.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return $(function(){var i=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],a=ci(i,o).div(re(256)),s=wf(a,t.conv32_down);s=zt(s,3,2,"valid"),s=Wr(s,t.conv32_1),s=Wr(s,t.conv32_2),s=Wr(s,t.conv32_3),s=od(s,t.conv64_down),s=Wr(s,t.conv64_1),s=Wr(s,t.conv64_2),s=Wr(s,t.conv64_3),s=od(s,t.conv128_down),s=Wr(s,t.conv128_1),s=Wr(s,t.conv128_2),s=od(s,t.conv256_down),s=Wr(s,t.conv256_1),s=Wr(s,t.conv256_2),s=od(s,t.conv256_down_out);var c=s.mean([1,2]),l=Xs(c,t.fc);return l})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return ee(this,void 0,void 0,function(){var t,i,o,a=this;return te(this,function(s){switch(s.label){case 0:return[4,_t(e)];case 1:return t=s.sent(),i=$(function(){return bt(a.forwardInput(t))}),[4,Promise.all(i.map(function(c){return c.data()}))];case 2:return o=s.sent(),i.forEach(function(c){return c.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return lE(e)},n.prototype.extractParams=function(e){return cE(e)},n}(fn);function vb(r,n){var e={descriptor:n};return Object.assign({},r,e)}function bb(r,n){var e={age:n};return Object.assign({},r,e)}function _b(r,n,e){var t={gender:n,genderProbability:e};return Object.assign({},r,t)}var ad=function(){function r(n){var e=n===void 0?{}:n,t=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,a=e.scoreThresholds,s=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=t||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(r.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),r}();function AL(r,n){function e(c,l){var d=an(r(9*c),[3,3,c,1]),u=At(r(c)),h=At(r(c)),f=At(r(c)),p=At(r(c));return n.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:d,batch_norm_scale:u,batch_norm_offset:h,batch_norm_mean:f,batch_norm_variance:p}}function t(c,l,d,u,h){var f=an(r(c*l*d*d),[d,d,c,l]),p=At(r(l));return n.push({paramPath:u+"/filters"},{paramPath:u+"/"+(h?"batch_norm_offset":"bias")}),{filters:f,bias:p}}function i(c,l,d,u){var h=t(c,l,d,u,!0),f=h.filters,p=h.bias;return{filters:f,batch_norm_offset:p}}function o(c,l,d){var u=e(c,d+"/depthwise_conv"),h=i(c,l,1,d+"/pointwise_conv");return{depthwise_conv:u,pointwise_conv:h}}function a(){var c=i(3,32,3,"mobilenetv1/conv_0"),l=o(32,64,"mobilenetv1/conv_1"),d=o(64,128,"mobilenetv1/conv_2"),u=o(128,128,"mobilenetv1/conv_3"),h=o(128,256,"mobilenetv1/conv_4"),f=o(256,256,"mobilenetv1/conv_5"),p=o(256,512,"mobilenetv1/conv_6"),m=o(512,512,"mobilenetv1/conv_7"),g=o(512,512,"mobilenetv1/conv_8"),v=o(512,512,"mobilenetv1/conv_9"),_=o(512,512,"mobilenetv1/conv_10"),y=o(512,512,"mobilenetv1/conv_11"),b=o(512,1024,"mobilenetv1/conv_12"),x=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:l,conv_2:d,conv_3:u,conv_4:h,conv_5:f,conv_6:p,conv_7:m,conv_8:g,conv_9:v,conv_10:_,conv_11:y,conv_12:b,conv_13:x}}function s(){var c=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),d=i(512,128,1,"prediction_layer/conv_2"),u=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),f=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),g=t(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=t(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),_=t(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=t(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=t(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),x=t(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=t(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),k=t(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),I=t(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),S=t(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),D=t(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),R=t(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),M={box_encoding_predictor:g,class_predictor:v},B={box_encoding_predictor:_,class_predictor:y},V={box_encoding_predictor:b,class_predictor:x},z={box_encoding_predictor:C,class_predictor:k},G={box_encoding_predictor:I,class_predictor:S},W={box_encoding_predictor:D,class_predictor:R};return{conv_0:c,conv_1:l,conv_2:d,conv_3:u,conv_4:h,conv_5:f,conv_6:p,conv_7:m,box_predictor_0:M,box_predictor_1:B,box_predictor_2:V,box_predictor_3:z,box_predictor_4:G,box_predictor_5:W}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function dE(r){var n=[],e=mn(r),t=e.extractWeights,i=e.getRemainingWeights,o=AL(t,n),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,c=a(),l=s(),d=qh(t(5118*4),[1,5118,4]),u={extra_dim:d};if(n.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:c,prediction_layer:l,output_layer:u},paramMappings:n}}function kL(r,n){var e=On(r,n);function t(l,d,u){var h=e(l+"/Conv2d_"+d+"_pointwise/weights",4,u+"/filters"),f=e(l+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,u+"/batch_norm_offset");return{filters:h,batch_norm_offset:f}}function i(l){var d="mobilenetv1/conv_"+l,u="MobilenetV1/Conv2d_"+l+"_depthwise",h=d+"/depthwise_conv",f=d+"/pointwise_conv",p=e(u+"/depthwise_weights",4,h+"/filters"),m=e(u+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),g=e(u+"/BatchNorm/beta",1,h+"/batch_norm_offset"),v=e(u+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),_=e(u+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:_},pointwise_conv:t("MobilenetV1",l,f)}}function o(){return{conv_0:t("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function a(l,d){var u=e(l+"/weights",4,d+"/filters"),h=e(l+"/biases",1,d+"/bias");return{filters:u,bias:h}}function s(l){var d=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),u=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:d,class_predictor:u}}function c(){return{conv_0:t("Prediction",0,"prediction_layer/conv_0"),conv_1:t("Prediction",1,"prediction_layer/conv_1"),conv_2:t("Prediction",2,"prediction_layer/conv_2"),conv_3:t("Prediction",3,"prediction_layer/conv_3"),conv_4:t("Prediction",4,"prediction_layer/conv_4"),conv_5:t("Prediction",5,"prediction_layer/conv_5"),conv_6:t("Prediction",6,"prediction_layer/conv_6"),conv_7:t("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function uE(r){var n=[],e=kL(r,n),t=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=r["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Mo(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:t(),prediction_layer:i(),output_layer:{extra_dim:o}};return pn(r,n),{params:a,paramMappings:n}}function Dr(r,n,e){return $(function(){var t=hn(r,n.filters,e,"same");return t=Oe(t,n.batch_norm_offset),Hl(t,0,6)})}var IL=.0010000000474974513;function ML(r,n,e){return $(function(){var t=Yl(r,n.filters,e,"same");return t=Pv(t,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,IL),Hl(t,0,6)})}function RL(r){return[2,4,6,12].some(function(n){return n===r})?[2,2]:[1,1]}function hE(r,n){return $(function(){var e=null,t=Dr(r,n.conv_0,[2,2]),i=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(i.forEach(function(o,a){var s=a+1,c=RL(s);t=ML(t,o.depthwise_conv,c),t=Dr(t,o.pointwise_conv,[1,1]),s===11&&(e=t)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:t,conv11:e}})}function fE(r,n,e,t,i){var o=r.shape[0],a=Math.min(e,o),s=n.map(function(d,u){return{score:d,boxIndex:u}}).filter(function(d){return d.score>i}).sort(function(d,u){return u.score-d.score}),c=function(d){return d<=t?1:0},l=[];return s.forEach(function(d){if(!(l.length>=a)){for(var u=d.score,h=l.length-1;h>=0;--h){var f=TL(r,d.boxIndex,l[h]);if(f!==0&&(d.score*=c(f),d.score<=i))break}u===d.score&&l.push(d.boxIndex)}}),l}function TL(r,n,e){var t=r.arraySync(),i=Math.min(t[n][0],t[n][2]),o=Math.min(t[n][1],t[n][3]),a=Math.max(t[n][0],t[n][2]),s=Math.max(t[n][1],t[n][3]),c=Math.min(t[e][0],t[e][2]),l=Math.min(t[e][1],t[e][3]),d=Math.max(t[e][0],t[e][2]),u=Math.max(t[e][1],t[e][3]),h=(a-i)*(s-o),f=(d-c)*(u-l);if(h<=0||f<=0)return 0;var p=Math.max(i,c),m=Math.max(o,l),g=Math.min(a,d),v=Math.min(s,u),_=Math.max(g-p,0)*Math.max(v-m,0);return _/(h+f-_)}function FL(r){var n=bt(xr(r,[1,0])),e=[wt(n[2],n[0]),wt(n[3],n[1])],t=[Oe(n[0],yr(e[0],re(2))),Oe(n[1],yr(e[1],re(2)))];return{sizes:e,centers:t}}function OL(r,n){var e=FL(r),t=e.sizes,i=e.centers,o=bt(xr(n,[1,0])),a=yr(Bt(Qh(yr(o[2],re(5))),t[0]),re(2)),s=Oe(Bt(yr(o[0],re(10)),t[0]),i[0]),c=yr(Bt(Qh(yr(o[3],re(5))),t[1]),re(2)),l=Oe(Bt(yr(o[1],re(10)),t[1]),i[1]);return xr(Cn([wt(s,a),wt(l,c),Oe(s,a),Oe(l,c)]),[1,0])}function pE(r,n,e){return $(function(){var t=r.shape[0],i=OL(Vn(ha(e.extra_dim,[t,1,1]),[-1,4]),Vn(r,[-1,4]));i=Vn(i,[t,i.shape[0]/t,4]);var o=Nv(Br(n,[0,0,1],[-1,-1,-1])),a=Br(o,[0,0,0],[-1,-1,1]);a=Vn(a,[t,a.shape[1]]);var s=bt(i),c=bt(a);return{boxes:s,scores:c}})}function Sa(r,n){return $(function(){var e=r.shape[0],t=Vn(Fn(r,n.box_encoding_predictor),[e,-1,1,4]),i=Vn(Fn(r,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:t,classPrediction:i}})}function mE(r,n,e){return $(function(){var t=Dr(r,e.conv_0,[1,1]),i=Dr(t,e.conv_1,[2,2]),o=Dr(i,e.conv_2,[1,1]),a=Dr(o,e.conv_3,[2,2]),s=Dr(a,e.conv_4,[1,1]),c=Dr(s,e.conv_5,[2,2]),l=Dr(c,e.conv_6,[1,1]),d=Dr(l,e.conv_7,[2,2]),u=Sa(n,e.box_predictor_0),h=Sa(r,e.box_predictor_1),f=Sa(i,e.box_predictor_2),p=Sa(a,e.box_predictor_3),m=Sa(c,e.box_predictor_4),g=Sa(d,e.box_predictor_5),v=Ft([u.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),_=Ft([u.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:_}})}var Oo=function(){function r(n){var e=n===void 0?{}:n,t=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=t||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(r.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),r}();var Cf=function(r){oe(n,r);function n(){return r.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return $(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=wt(Bt(i,re(.007843137718737125)),re(1)),a=hE(o,t.mobilenetv1),s=mE(a.out,a.conv11,t.prediction_layer),c=s.boxPredictions,l=s.classPredictions;return pE(c,l,t.output_layer)})},n.prototype.forward=function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,_t(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.locateFaces=function(e,t){return t===void 0&&(t={}),ee(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,x,C,k,I;return te(this,function(S){switch(S.label){case 0:return i=new Oo(t),o=i.maxResults,a=i.minConfidence,[4,_t(e)];case 1:for(s=S.sent(),c=this.forwardInput(s),l=c.boxes,d=c.scores,u=l[0],h=d[0],f=1;f<l.length;f++)l[f].dispose(),d[f].dispose();return g=(m=Array).from,[4,h.data()];case 2:return p=g.apply(m,[S.sent()]),v=.5,_=fE(u,p,o,v,a),y=s.getReshapedInputDimensions(0),b=s.inputSize,x=b/y.width,C=b/y.height,k=u.arraySync(),I=_.map(function(D){var R=[Math.max(0,k[D][0]),Math.min(1,k[D][2])].map(function(W){return W*C}),M=R[0],B=R[1],V=[Math.max(0,k[D][1]),Math.min(1,k[D][3])].map(function(W){return W*x}),z=V[0],G=V[1];return new qt(p[D],new Js(z,M,G-z,B-M),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),u.dispose(),h.dispose(),[2,I]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return uE(e)},n.prototype.extractParams=function(e){return dE(e)},n}(fn);var Q$=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(Cf);var gE=.4,vE=[new et(.738768,.874946),new et(2.42204,2.65704),new et(4.30971,7.04493),new et(10.246,4.59428),new et(12.6868,11.8741)],bE=[new et(1.603231,2.094468),new et(6.041143,7.080126),new et(2.882459,3.518061),new et(4.266906,5.178857),new et(9.041765,10.66308)],_E=[117.001,114.697,97.404],yE="tiny_yolov2_model",xE="tiny_yolov2_separable_conv_model";var Df=function(r){return typeof r=="number"};function wE(r){if(!r)throw new Error("invalid config: "+r);if(typeof r.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+r.withSeparableConvs);if(!Df(r.iouThreshold)||r.iouThreshold<0||r.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+r.iouThreshold);if(!Array.isArray(r.classes)||!r.classes.length||!r.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(r.classes));if(!Array.isArray(r.anchors)||!r.anchors.length||!r.anchors.map(function(n){return n||{}}).every(function(n){return Df(n.x)&&Df(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(r.anchors));if(r.meanRgb&&(!Array.isArray(r.meanRgb)||r.meanRgb.length!==3||!r.meanRgb.every(Df)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(r.meanRgb))}function sc(r){return $(function(){var n=Bt(r,re(.10000000149011612));return Oe(pt(wt(r,n)),n)})}function Hi(r,n){return $(function(){var e=Vi(r,[[0,0],[1,1],[1,1],[0,0]]);return e=hn(e,n.conv.filters,[1,1],"valid"),e=wt(e,n.bn.sub),e=Bt(e,n.bn.truediv),e=Oe(e,n.conv.bias),sc(e)})}function Gi(r,n){return $(function(){var e=Vi(r,[[0,0],[1,1],[1,1],[0,0]]);return e=$l(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=Oe(e,n.bias),sc(e)})}function NL(r,n){var e=Fo(r,n);function t(a,s){var c=At(r(a)),l=At(r(a));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:c,truediv:l}}function i(a,s,c){var l=e(a,s,3,c+"/conv"),d=t(s,c+"/bn");return{conv:l,bn:d}}var o=oc(r,n);return{extractConvParams:e,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function CE(r,n,e,t){var i=mn(r),o=i.extractWeights,a=i.getRemainingWeights,s=[],c=NL(o,s),l=c.extractConvParams,d=c.extractConvWithBatchNormParams,u=c.extractSeparableConvParams,h;if(n.withSeparableConvs){var f=t[0],p=t[1],m=t[2],g=t[3],v=t[4],_=t[5],y=t[6],b=t[7],x=t[8],C=n.isFirstLayerConv2d?l(f,p,3,"conv0"):u(f,p,"conv0"),k=u(p,m,"conv1"),I=u(m,g,"conv2"),S=u(g,v,"conv3"),D=u(v,_,"conv4"),R=u(_,y,"conv5"),M=b?u(y,b,"conv6"):void 0,B=x?u(b,x,"conv7"):void 0,V=l(x||b||y,5*e,1,"conv8");h={conv0:C,conv1:k,conv2:I,conv3:S,conv4:D,conv5:R,conv6:M,conv7:B,conv8:V}}else{var f=t[0],p=t[1],m=t[2],g=t[3],v=t[4],_=t[5],y=t[6],b=t[7],x=t[8],C=d(f,p,"conv0"),k=d(p,m,"conv1"),I=d(m,g,"conv2"),S=d(g,v,"conv3"),D=d(v,_,"conv4"),R=d(_,y,"conv5"),M=d(y,b,"conv6"),B=d(b,x,"conv7"),V=l(x,5*e,1,"conv8");h={conv0:C,conv1:k,conv2:I,conv3:S,conv4:D,conv5:R,conv6:M,conv7:B,conv8:V}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:h,paramMappings:s}}function PL(r,n){var e=On(r,n);function t(s){var c=e(s+"/sub",1),l=e(s+"/truediv",1);return{sub:c,truediv:l}}function i(s){var c=e(s+"/filters",4),l=e(s+"/bias",1);return{filters:c,bias:l}}function o(s){var c=i(s+"/conv"),l=t(s+"/bn");return{conv:c,bn:l}}var a=ac(e);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function DE(r,n){var e=[],t=PL(r,e),i=t.extractConvParams,o=t.extractConvWithBatchNormParams,a=t.extractSeparableConvParams,s;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:c>7?a("conv6"):void 0,conv7:c>8?a("conv7"):void 0,conv8:i("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return pn(r,e),{params:s,paramMappings:e}}var Aa=function(){function r(n){var e=n===void 0?{}:n,t=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=t||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(r.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),r}();var Ef=function(r){oe(n,r);function n(e){var t=r.call(this,"TinyYolov2")||this;return wE(e),t._config=e,t}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,t){var i=Hi(e,t.conv0);return i=zt(i,[2,2],[2,2],"same"),i=Hi(i,t.conv1),i=zt(i,[2,2],[2,2],"same"),i=Hi(i,t.conv2),i=zt(i,[2,2],[2,2],"same"),i=Hi(i,t.conv3),i=zt(i,[2,2],[2,2],"same"),i=Hi(i,t.conv4),i=zt(i,[2,2],[2,2],"same"),i=Hi(i,t.conv5),i=zt(i,[2,2],[1,1],"same"),i=Hi(i,t.conv6),i=Hi(i,t.conv7),Fn(i,t.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,t){var i=this.config.isFirstLayerConv2d?sc(Fn(e,t.conv0,"valid",!1)):Gi(e,t.conv0);return i=zt(i,[2,2],[2,2],"same"),i=Gi(i,t.conv1),i=zt(i,[2,2],[2,2],"same"),i=Gi(i,t.conv2),i=zt(i,[2,2],[2,2],"same"),i=Gi(i,t.conv3),i=zt(i,[2,2],[2,2],"same"),i=Gi(i,t.conv4),i=zt(i,[2,2],[2,2],"same"),i=Gi(i,t.conv5),i=zt(i,[2,2],[1,1],"same"),i=t.conv6?Gi(i,t.conv6):i,i=t.conv7?Gi(i,t.conv7):i,Fn(i,t.conv8,"valid",!1)},n.prototype.forwardInput=function(e,t){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return $(function(){var a=e.toBatchTensor(t,!1).toFloat();return a=i.config.meanRgb?ci(a,i.config.meanRgb):a,a=a.div(re(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},n.prototype.forward=function(e,t){return ee(this,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,_t(e)];case 1:return[4,i.apply(this,[o.sent(),t])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,t){return t===void 0&&(t={}),ee(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_=this;return te(this,function(y){switch(y.label){case 0:return i=new Aa(t),o=i.inputSize,a=i.scoreThreshold,[4,_t(e)];case 1:return s=y.sent(),[4,this.forwardInput(s,o)];case 2:return c=y.sent(),l=$(function(){return bt(c)[0].expandDims()}),d={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return u=y.sent(),c.dispose(),l.dispose(),h=u.map(function(b){return b.box}),f=u.map(function(b){return b.score}),p=u.map(function(b){return b.classScore}),m=u.map(function(b){return _.config.classes[b.label]}),g=Wi(h.map(function(b){return b.rescale(o)}),f,this.config.iouThreshold,!0),v=g.map(function(b){return new of(f[b],p[b],m[b],h[b],d)}),[2,v]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return DE(e,this.config)},n.prototype.extractParams=function(e){var t=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,i=t?t.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return CE(e,this.config,this.boxEncodingSize,t)},n.prototype.extractBoxes=function(e,t,i){return ee(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,x,C,k,I,S,D,R,M,B,V,z,G,W,j=this;return te(this,function(q){switch(q.label){case 0:return o=t.width,a=t.height,s=Math.max(o,a),c=s/o,l=s/a,d=e.shape[1],u=this.config.anchors.length,h=$(function(){var K=e.reshape([d,d,u,j.boxEncodingSize]),ie=K.slice([0,0,0,0],[d,d,u,4]),ce=K.slice([0,0,0,4],[d,d,u,1]),pe=j.withClassScores?zn(K.slice([0,0,0,5],[d,d,u,j.config.classes.length]),3):re(0);return[ie,ce,pe]}),f=h[0],p=h[1],m=h[2],g=[],[4,p.array()];case 1:return v=q.sent(),[4,f.array()];case 2:_=q.sent(),y=0,q.label=3;case 3:if(!(y<d))return[3,12];b=0,q.label=4;case 4:if(!(b<d))return[3,11];x=0,q.label=5;case 5:return x<u?(C=af(v[y][b][x][0]),!i||C>i?(k=(b+af(_[y][b][x][0]))/d*c,I=(y+af(_[y][b][x][1]))/d*l,S=Math.exp(_[y][b][x][2])*this.config.anchors[x].x/d*c,D=Math.exp(_[y][b][x][3])*this.config.anchors[x].y/d*l,R=k-S/2,M=I-D/2,B={row:y,col:b,anchor:x},this.withClassScores?[4,this.extractPredictedClass(m,B)]:[3,7]):[3,9]):[3,10];case 6:return W=q.sent(),[3,8];case 7:W={classScore:1,label:0},q.label=8;case 8:V=W,z=V.classScore,G=V.label,g.push(nn({box:new wa(R,M,R+S,M+D),score:C,classScore:C*z,label:G},B)),q.label=9;case 9:return x++,[3,5];case 10:return b++,[3,4];case 11:return y++,[3,3];case 12:return f.dispose(),p.dispose(),m.dispose(),[2,g]}})})},n.prototype.extractPredictedClass=function(e,t){return ee(this,void 0,void 0,function(){var i,o,a,s;return te(this,function(c){switch(c.label){case 0:return i=t.row,o=t.col,a=t.anchor,[4,e.array()];case 1:return s=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,d){return s[i][o][a][d]}).map(function(l,d){return{classScore:l,label:d}}).reduce(function(l,d){return l.classScore>d.classScore?l:d})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(fn);var yb=function(r){oe(n,r);function n(e){e===void 0&&(e=!0);var t=this,i=Object.assign({},{withSeparableConvs:e,iouThreshold:gE,classes:["face"]},e?{anchors:bE,meanRgb:_E}:{anchors:vE,withClassScores:!0});return t=r.call(this,i)||this,t}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,t){return ee(this,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return[4,this.detect(e,t)];case 1:return i=o.sent(),[2,i.map(function(a){return new qt(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?xE:yE},n.prototype.extractParamsFromWeigthMap=function(e){return r.prototype.extractParamsFromWeigthMap.call(this,e)},n}(Ef);var cc=function(r){oe(n,r);function n(){var e=r!==null&&r.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n}(Aa);var di=function(){function r(){}return r.prototype.then=function(n){return ee(this,void 0,void 0,function(){var e;return te(this,function(t){switch(t.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},r.prototype.run=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},r}();function ka(r,n,e,t,i){return i===void 0&&(i=function(o){var a=o.alignedRect;return a}),ee(this,void 0,void 0,function(){var o,a,s,c,l;return te(this,function(d){switch(d.label){case 0:return o=r.map(function(u){return rd(u)?i(u):u.detection}),s=t,s?[3,5]:n instanceof xt?[4,td(n,o)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,ed(n,o)];case 3:c=d.sent(),d.label=4;case 4:s=c,d.label=5;case 5:return a=s,[4,e(a)];case 6:return l=d.sent(),a.forEach(function(u){return u instanceof xt&&u.dispose()}),[2,l]}})})}function lc(r,n,e,t,i){return ee(this,void 0,void 0,function(){var o=this;return te(this,function(a){return[2,ka([r],n,function(s){return ee(o,void 0,void 0,function(){return te(this,function(c){return[2,e(s[0])]})})},t,i)]})})}function EE(r){return $(function(){return Cn(bt(r,3).reverse(),3)})}var sd=2,Ia=12;function LL(r,n){var e=Fo(r,n),t=ic(r,n);function i(l,d){var u=At(r(l));return n.push({paramPath:d}),u}function o(l,d,u){u===void 0&&(u=!1);var h=e(l[0],l[1],3,d+"/conv1"),f=i(l[1],d+"/prelu1_alpha"),p=e(l[1],l[2],3,d+"/conv2"),m=i(l[2],d+"/prelu2_alpha"),g=e(l[2],l[3],u?2:3,d+"/conv3"),v=i(l[3],d+"/prelu3_alpha");return{conv1:h,prelu1_alpha:f,conv2:p,prelu2_alpha:m,conv3:g,prelu3_alpha:v}}function a(){var l=o([3,10,16,32],"pnet"),d=e(32,2,1,"pnet/conv4_1"),u=e(32,4,1,"pnet/conv4_2");return nn(nn({},l),{conv4_1:d,conv4_2:u})}function s(){var l=o([3,28,48,64],"rnet",!0),d=t(576,128,"rnet/fc1"),u=i(128,"rnet/prelu4_alpha"),h=t(128,2,"rnet/fc2_1"),f=t(128,4,"rnet/fc2_2");return nn(nn({},l),{fc1:d,prelu4_alpha:u,fc2_1:h,fc2_2:f})}function c(){var l=o([3,32,64,64],"onet"),d=e(64,128,2,"onet/conv4"),u=i(128,"onet/prelu4_alpha"),h=t(1152,256,"onet/fc1"),f=i(256,"onet/prelu5_alpha"),p=t(256,2,"onet/fc2_1"),m=t(256,4,"onet/fc2_2"),g=t(256,10,"onet/fc2_3");return nn(nn({},l),{conv4:d,prelu4_alpha:u,fc1:h,prelu5_alpha:f,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:c}}function SE(r){var n=mn(r),e=n.extractWeights,t=n.getRemainingWeights,i=[],o=LL(e,i),a=o.extractPNetParams,s=o.extractRNetParams,c=o.extractONetParams,l=a(),d=s(),u=c();if(t().length!==0)throw new Error("weights remaing after extract: "+t().length);return{params:{pnet:l,rnet:d,onet:u},paramMappings:i}}function BL(r,n){var e=On(r,n);function t(d){var u=e(d+"/weights",4,d+"/filters"),h=e(d+"/bias",1);return{filters:u,bias:h}}function i(d){var u=e(d+"/weights",2),h=e(d+"/bias",1);return{weights:u,bias:h}}function o(d){return e(d,1)}function a(d){var u=t(d+"/conv1"),h=o(d+"/prelu1_alpha"),f=t(d+"/conv2"),p=o(d+"/prelu2_alpha"),m=t(d+"/conv3"),g=o(d+"/prelu3_alpha");return{conv1:u,prelu1_alpha:h,conv2:f,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function s(){var d=a("pnet"),u=t("pnet/conv4_1"),h=t("pnet/conv4_2");return nn(nn({},d),{conv4_1:u,conv4_2:h})}function c(){var d=a("rnet"),u=i("rnet/fc1"),h=o("rnet/prelu4_alpha"),f=i("rnet/fc2_1"),p=i("rnet/fc2_2");return nn(nn({},d),{fc1:u,prelu4_alpha:h,fc2_1:f,fc2_2:p})}function l(){var d=a("onet"),u=t("onet/conv4"),h=o("onet/prelu4_alpha"),f=i("onet/fc1"),p=o("onet/prelu5_alpha"),m=i("onet/fc2_1"),g=i("onet/fc2_2"),v=i("onet/fc2_3");return nn(nn({},d),{conv4:u,prelu4_alpha:h,fc1:f,prelu5_alpha:p,fc2_1:m,fc2_2:g,fc2_3:v})}return{extractPNetParams:s,extractRNetParams:c,extractONetParams:l}}function AE(r){var n=[],e=BL(r,n),t=e.extractPNetParams,i=e.extractRNetParams,o=e.extractONetParams,a=t(),s=i(),c=o();return pn(r,n),{params:{pnet:a,rnet:s,onet:c},paramMappings:n}}function cd(r,n){var e=n[0],t=n[1];return{height:Math.floor(e*r),width:Math.floor(t*r)}}function kE(r,n,e){for(var t=e[0],i=e[1],o=Ia/r,a=[],s=Math.min(t,i)*o,c=0;s>=12;)a.push(o*Math.pow(n,c)),s=s*n,c+=1;return a}var dc=function(r){oe(n,r);function n(e,t,i,o){return r.call(this,{left:e,top:t,right:i,bottom:o},!0)||this}return n}(Dn);function Sf(r){return $(function(){return Bt(wt(r,re(127.5)),re(.0078125))})}function qi(r,n){return $(function(){return Oe(pt(r),Bt(n,Gl(pt(Gl(r)))))})}function uc(r,n,e){return e===void 0&&(e=!1),$(function(){var t=Fn(r,n.conv1,"valid");return t=qi(t,n.prelu1_alpha),t=zt(t,e?[2,2]:[3,3],[2,2],"same"),t=Fn(t,n.conv2,"valid"),t=qi(t,n.prelu2_alpha),t=e?t:zt(t,[3,3],[2,2],"valid"),t=Fn(t,n.conv3,"valid"),t=qi(t,n.prelu3_alpha),t})}function IE(r,n){return $(function(){var e=uc(r,n,!0),t=Fn(e,n.conv4_1,"valid"),i=Mn(_a(t,3),3),o=zn(wt(t,i),3),a=Fn(e,n.conv4_2,"valid");return{prob:o,regions:a}})}function VL(r,n){return $(function(){var e=cd(n,r.shape.slice(1)),t=e.height,i=e.width,o=Xl.resizeBilinear(r,[t,i]),a=Sf(o);return xr(a,[0,2,1,3])})}function zL(r,n,e,t){for(var i=[],o=r.arraySync(),a=0;a<r.shape[0];a++)for(var s=0;s<r.shape[1];s++)o[a][s]>=t&&i.push(new et(s,a));var c=i.map(function(l){var d=new wa(Math.round((l.y*sd+1)/e),Math.round((l.x*sd+1)/e),Math.round((l.y*sd+Ia)/e),Math.round((l.x*sd+Ia)/e)),u=o[l.y][l.x],h=n.arraySync(),f=new dc(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:d,score:u,region:f}});return c}function ME(r,n,e,t,i){i.stage1=[];var o=n.map(function(h){return $(function(){var f={scale:h},p=VL(r,h),m=Date.now(),g=IE(p,t),v=g.prob,_=g.regions;f.pnet=Date.now()-m;var y=bt(bt(v,3)[1])[0],b=bt(_)[0];return{scoresTensor:y,regionsTensor:b,scale:h,statsForScale:f}})}),a=o.map(function(h){var f=h.scoresTensor,p=h.regionsTensor,m=h.scale,g=h.statsForScale,v=zL(f,p,m,e);if(f.dispose(),p.dispose(),!v.length)return i.stage1.push(g),[];var _=Date.now(),y=Wi(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return g.nms=Date.now()-_,g.numBoxes=y.length,i.stage1.push(g),y.map(function(b){return v[b]})}),s=a.reduce(function(h,f){return h.concat(f)},[]),c=[],l=[];if(s.length>0){var d=Date.now(),u=Wi(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-d,l=u.map(function(h){return s[h].score}),c=u.map(function(h){return s[h]}).map(function(h){var f=h.cell,p=h.region;return new wa(f.left+p.left*f.width,f.top+p.top*f.height,f.right+p.right*f.width,f.bottom+p.bottom*f.height).toSquare().round()})}return{boxes:c,scores:l}}function Af(r,n,e){var t=e.width,i=e.height;return ee(this,void 0,void 0,function(){var o,a,s,c=this;return te(this,function(l){switch(l.label){case 0:return o=En(r),[4,Promise.all(n.map(function(d){return ee(c,void 0,void 0,function(){var u,h,f,p,m,g,v,_;return te(this,function(y){return u=d.padAtBorders(r.height,r.width),h=u.y,f=u.ey,p=u.x,m=u.ex,g=p-1,v=h-1,_=o.getImageData(g,v,m-g,f-v),[2,ht.isNodejs()?rc(_):createImageBitmap(_)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(d){var u=Ca({width:t,height:i}),h=En(u);h.drawImage(d,0,0,t,i);for(var f=h.getImageData(0,0,t,i).data,p=[],m=0;m<f.length;m+=4)p.push(f[m+2]),p.push(f[m+1]),p.push(f[m]);s.push(p)}),[2,s.map(function(d){var u=$(function(){var h=xr(an(d,[1,t,i,3]),[0,2,1,3]).toFloat();return Sf(h)});return u})]}})})}function RE(r,n){return $(function(){var e=uc(r,n),t=Vn(e,[e.shape[0],n.fc1.weights.shape[0]]),i=$n(t,n.fc1),o=qi(i,n.prelu4_alpha),a=$n(o,n.fc2_1),s=Mn(_a(a,1),1),c=zn(wt(a,s),1),l=$n(o,n.fc2_2),d=bt(c,1)[1];return{scores:d,regions:l}})}function TE(r,n,e,t,i){return ee(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_;return te(this,function(y){switch(y.label){case 0:return o=Date.now(),[4,Af(r,n,{width:24,height:24})];case 1:return a=y.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(b){var x=RE(b,t);return b.dispose(),x}),i.stage2_rnet=Date.now()-o,c=s.length>1?Ft(s.map(function(b){return b.scores})):s[0].scores,u=(d=Array).from,[4,c.data()];case 2:return l=u.apply(d,[y.sent()]),c.dispose(),h=l.map(function(b,x){return{score:b,idx:x}}).filter(function(b){return b.score>e}).map(function(b){var x=b.idx;return x}),f=h.map(function(b){return n[b]}),p=h.map(function(b){return l[b]}),m=[],g=[],f.length>0&&(o=Date.now(),v=Wi(f,p,.7),i.stage2_nms=Date.now()-o,_=v.map(function(b){var x=s[h[b]].regions.arraySync();return new dc(x[0][0],x[0][1],x[0][2],x[0][3])}),g=v.map(function(b){return p[b]}),m=v.map(function(b,x){return f[b].calibrate(_[x])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function FE(r,n){return $(function(){var e=uc(r,n);e=zt(e,[2,2],[2,2],"same"),e=Fn(e,n.conv4,"valid"),e=qi(e,n.prelu4_alpha);var t=Vn(e,[e.shape[0],n.fc1.weights.shape[0]]),i=$n(t,n.fc1),o=qi(i,n.prelu5_alpha),a=$n(o,n.fc2_1),s=Mn(_a(a,1),1),c=zn(wt(a,s),1),l=$n(o,n.fc2_2),d=$n(o,n.fc2_3),u=bt(c,1)[1];return{scores:u,regions:l,points:d}})}function OE(r,n,e,t,i){return ee(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_,y;return te(this,function(b){switch(b.label){case 0:return o=Date.now(),[4,Af(r,n,{width:48,height:48})];case 1:return a=b.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(x){var C=FE(x,t);return x.dispose(),C}),i.stage3_onet=Date.now()-o,c=s.length>1?Ft(s.map(function(x){return x.scores})):s[0].scores,u=(d=Array).from,[4,c.data()];case 2:return l=u.apply(d,[b.sent()]),c.dispose(),h=l.map(function(x,C){return{score:x,idx:C}}).filter(function(x){return x.score>e}).map(function(x){var C=x.idx;return C}),f=h.map(function(x){var C=s[x].regions.arraySync();return new dc(C[0][0],C[0][1],C[0][2],C[0][3])}),p=h.map(function(x,C){return n[x].calibrate(f[C])}),m=h.map(function(x){return l[x]}),g=[],v=[],_=[],p.length>0&&(o=Date.now(),y=Wi(p,m,.7,!1),i.stage3_nms=Date.now()-o,g=y.map(function(x){return p[x]}),v=y.map(function(x){return m[x]}),_=y.map(function(x,C){return Array(5).fill(0).map(function(k,I){var S=s[x].points.arraySync();return new et(S[0][I]*(g[C].width+1)+g[C].left,S[0][I+5]*(g[C].height+1)+g[C].top)})})),s.forEach(function(x){x.regions.dispose(),x.scores.dispose(),x.points.dispose()}),[2,{boxes:g,scores:v,points:_}]}})})}var xb=function(r){oe(n,r);function n(){return r.call(this,"Mtcnn")||this}return n.prototype.load=function(e){return ee(this,void 0,void 0,function(){return te(this,function(t){return console.warn("mtcnn is deprecated and will be removed soon"),[2,r.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return ee(this,void 0,void 0,function(){return te(this,function(t){return console.warn("mtcnn is deprecated and will be removed soon"),[2,r.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,t){return t===void 0&&(t={}),ee(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,x,C,k,I;return te(this,function(S){switch(S.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),c=$(function(){return EE(Mn(Qs.fromPixels(o)).toFloat())}),l=function(D){return c.dispose(),a.total=Date.now()-s,D},d=c.shape.slice(1),u=d[0],h=d[1],f=new ad(t),p=f.minFaceSize,m=f.scaleFactor,g=f.maxNumScales,v=f.scoreThresholds,_=f.scaleSteps,y=(_||kE(p,m,[u,h])).filter(function(D){var R=cd(D,[u,h]);return Math.min(R.width,R.height)>Ia}).slice(0,g),a.scales=y,a.pyramid=y.map(function(D){return cd(D,[u,h])}),b=Date.now(),[4,ME(c,y,v[0],i.pnet,a)];case 1:return x=S.sent(),a.total_stage1=Date.now()-b,x.boxes.length?(a.stage2_numInputBoxes=x.boxes.length,b=Date.now(),[4,TE(o,x.boxes,v[1],i.rnet,a)]):[2,l({results:[],stats:a})];case 2:return C=S.sent(),a.total_stage2=Date.now()-b,C.boxes.length?(a.stage3_numInputBoxes=C.boxes.length,b=Date.now(),[4,OE(o,C.boxes,v[2],i.onet,a)]):[2,l({results:[],stats:a})];case 3:return k=S.sent(),a.total_stage3=Date.now()-b,I=k.boxes.map(function(D,R){return Ea(Ro({},new qt(k.scores[R],new Js(D.left/h,D.top/u,D.width/h,D.height/u),{height:u,width:h})),new PD(k.points[R].map(function(M){return M.sub(new et(D.left,D.top)).div(new et(D.width,D.height))}),{width:D.width,height:D.height}))}),[2,l({results:I,stats:a})]}})})},n.prototype.forward=function(e,t){return t===void 0&&(t={}),ee(this,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,_t(e)];case 1:return[4,i.apply(this,[o.sent(),t])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,t){return t===void 0&&(t={}),ee(this,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,_t(e)];case 1:return[2,i.apply(this,[o.sent(),t])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return AE(e)},n.prototype.extractParams=function(e){return SE(e)},n}(fn);var NE=.4,PE=[new et(1.603231,2.094468),new et(6.041143,7.080126),new et(2.882459,3.518061),new et(4.266906,5.178857),new et(9.041765,10.66308)],LE=[117.001,114.697,97.404];var wb=function(r){oe(n,r);function n(){var e=this,t={withSeparableConvs:!0,iouThreshold:NE,classes:["face"],anchors:PE,meanRgb:LE,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=r.call(this,t)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,t){return ee(this,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return[4,this.detect(e,t)];case 1:return i=o.sent(),[2,i.map(function(a){return new qt(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return r.prototype.extractParamsFromWeigthMap.call(this,e)},n}(Ef);var rn={ssdMobilenetv1:new Cf,tinyFaceDetector:new wb,tinyYolov2:new yb,mtcnn:new xb,faceLandmark68Net:new xf,faceLandmark68TinyNet:new oE,faceRecognitionNet:new gb,faceExpressionNet:new $D,ageGenderNet:new tE};var BE=function(r){oe(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.extractedFaces=i,o}return n}(di);var ld=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i=this;return te(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,ka(e,this.input,function(a){return ee(i,void 0,void 0,function(){return te(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(c){return rn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return t=o.sent(),[2,e.map(function(a,s){return hb(a,t[s])})]}})})},n.prototype.withAgeAndGender=function(){return new ud(this,this.input)},n}(BE);var dd=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t;return te(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,lc(e,this.input,function(o){return rn.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return t=i.sent(),[2,hb(e,t)]}})})},n.prototype.withAgeAndGender=function(){return new hd(this,this.input)},n}(BE);var hc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new pc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new gc(this,this.input)},n}(ld);var fc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new mc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new vc(this,this.input)},n}(dd);var VE=function(r){oe(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.extractedFaces=i,o}return n}(di);var ud=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i=this;return te(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,ka(e,this.input,function(a){return ee(i,void 0,void 0,function(){return te(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(c){return rn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return t=o.sent(),[2,e.map(function(a,s){var c=t[s],l=c.age,d=c.gender,u=c.genderProbability;return bb(_b(a,d,u),l)})]}})})},n.prototype.withFaceExpressions=function(){return new ld(this,this.input)},n}(VE);var hd=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i,o,a;return te(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?[4,lc(e,this.input,function(c){return rn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return t=s.sent(),i=t.age,o=t.gender,a=t.genderProbability,[2,bb(_b(e,o,a),i)]}})})},n.prototype.withFaceExpressions=function(){return new dd(this,this.input)},n}(VE);var pc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new hc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new gc(this,this.input)},n}(ud);var mc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new fc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new vc(this,this.input)},n}(hd);var zE=function(r){oe(n,r);function n(e,t){var i=r.call(this)||this;return i.parentTask=e,i.input=t,i}return n}(di);var gc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t;return te(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),[4,ka(e,this.input,function(o){return Promise.all(o.map(function(a){return rn.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return t=i.sent(),[2,t.map(function(o,a){return vb(e[a],o)})]}})})},n.prototype.withFaceExpressions=function(){return new hc(this,this.input)},n.prototype.withAgeAndGender=function(){return new pc(this,this.input)},n}(zE);var vc=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t;return te(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,lc(e,this.input,function(o){return rn.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=i.sent(),[2,vb(e,t)]}})})},n.prototype.withFaceExpressions=function(){return new fc(this,this.input)},n.prototype.withAgeAndGender=function(){return new mc(this,this.input)},n}(zE);var UE=function(r){oe(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.useTinyLandmarkNet=i,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?rn.faceLandmark68TinyNet:rn.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(di);var jE=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i,o,a,s=this;return te(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return e=c.sent(),t=e.map(function(l){return l.detection}),this.input instanceof xt?[4,td(this.input,t)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,ed(this.input,t)];case 4:o=c.sent(),c.label=5;case 5:return i=o,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=c.sent(),i.forEach(function(l){return l instanceof xt&&l.dispose()}),[2,e.map(function(l,d){return Ea(l,a[d])})]}})})},n.prototype.withFaceExpressions=function(){return new hc(this,this.input)},n.prototype.withAgeAndGender=function(){return new pc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new gc(this,this.input)},n}(UE);var WE=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i,o,a;return te(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?(t=e.detection,this.input instanceof xt?[4,td(this.input,[t])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,ed(this.input,[t])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(c){return c instanceof xt&&c.dispose()}),[2,Ea(e,a)]}})})},n.prototype.withFaceExpressions=function(){return new fc(this,this.input)},n.prototype.withAgeAndGender=function(){return new mc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new vc(this,this.input)},n}(UE);var HE=function(r){oe(n,r);function n(e,t){t===void 0&&(t=new Oo);var i=r.call(this)||this;return i.input=e,i.options=t,i}return n}(di);var Cb=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t,i,o;return te(this,function(a){switch(a.label){case 0:return e=this,t=e.input,i=e.options,i instanceof ad?[4,rn.mtcnn.forward(t,i)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(o=i instanceof cc?function(s){return rn.tinyFaceDetector.locateFaces(s,i)}:i instanceof Oo?function(s){return rn.ssdMobilenetv1.locateFaces(s,i)}:i instanceof Aa?function(s){return rn.tinyYolov2.locateFaces(s,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(t)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return ee(e,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,t(i.map(function(a){return Ro({},a)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new jE(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new ld(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new ud(this.runAndExtendWithFaceDetections(),this.input)},n}(HE);var UL=function(r){oe(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ee(this,void 0,void 0,function(){var e,t;return te(this,function(i){switch(i.label){case 0:return[4,new Cb(this.input,this.options)];case 1:return e=i.sent(),t=e[0],e.forEach(function(o){o.score>t.score&&(t=o)}),[2,t]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return ee(e,void 0,void 0,function(){var i;return te(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,t(i?Ro({},i):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new WE(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new dd(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new hd(this.runAndExtendWithFaceDetection(),this.input)},n}(HE);function fd(r,n){return n===void 0&&(n=new Oo),new Cb(r,n)}function GE(r,n){if(r.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(r),t=Array.from(n);return Math.sqrt(e.map(function(i,o){return i-t[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}var UQ=function(){function r(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var t=Array.isArray(n)?n:[n];if(!t.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=t.map(function(a){if(a instanceof Jl)return a;if(a instanceof Float32Array)return new Jl(o(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Jl(o(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(r.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),r.prototype.computeMeanDistance=function(n,e){return e.map(function(t){return GE(t,n)}).reduce(function(t,i){return t+i},0)/(e.length||1)},r.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(t){var i=t.descriptors,o=t.label;return new eb(o,e.computeMeanDistance(n,i))}).reduce(function(t,i){return t.distance<i.distance?t:i})},r.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new eb("unknown",e.distance)},r.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},r.fromJSON=function(n){var e=n.labeledDescriptors.map(function(t){return Jl.fromJSON(t)});return new r(e,n.distanceThreshold)},r}();function Db(r,n){var e=new wr(n.width,n.height),t=e.width,i=e.height;if(t<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:t,height:i}));if(Array.isArray(r))return r.map(function(s){return Db(s,{width:t,height:i})});if(rd(r)){var o=r.detection.forSize(t,i),a=r.unshiftedLandmarks.forSize(o.box.width,o.box.height);return Ea(Ro(r,o),a)}return ec(r)?Ro(r,r.detection.forSize(t,i)):r instanceof li||r instanceof qt?r.forSize(t,i):r}var jL=["trigger"],WL=["panel"],HL=[[["mat-select-trigger"]],"*"],GL=["mat-select-trigger","*"];function qL(r,n){if(r&1&&(F(0,"span",4),J(1),N()),r&2){let e=de();H(),Wt(e.placeholder)}}function YL(r,n){r&1&&tt(0)}function $L(r,n){if(r&1&&(F(0,"span",11),J(1),N()),r&2){let e=de(2);H(),Wt(e.triggerValue)}}function KL(r,n){if(r&1&&(F(0,"span",5),Pe(1,YL,1,0)(2,$L,2,1,"span",11),N()),r&2){let e=de();H(),ze(e.customTrigger?1:2)}}function XL(r,n){if(r&1){let e=vt();F(0,"div",12,1),ae("@transformPanel.done",function(i){Ae(e);let o=de();return ke(o._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){Ae(e);let o=de();return ke(o._handleKeydown(i))}),tt(2,1),N()}if(r&2){let e=de();Zb("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Ce("ngClass",e.panelClass)("@transformPanel","showing"),$e("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var QL={transformPanelWrap:eo("transformPanelWrap",[Mr("* => void",x_("@transformPanel",[y_()],{optional:!0}))]),transformPanel:eo("transformPanel",[Ho("void",Pn({opacity:0,transform:"scale(1, 0.8)"})),Mr("void => showing",Xr("120ms cubic-bezier(0, 0, 0.2, 1)",Pn({opacity:1,transform:"scale(1, 1)"}))),Mr("* => void",Xr("100ms linear",Pn({opacity:0})))])};var YE=new ne("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=w(_n);return()=>r.scrollStrategies.reposition()}});function ZL(r){return()=>r.scrollStrategies.reposition()}var JL=new ne("MAT_SELECT_CONFIG"),e3={provide:YE,deps:[_n],useFactory:ZL},t3=new ne("MatSelectTrigger"),Eb=class{source;value;constructor(n,e){this.source=n,this.value=e}},$E=(()=>{class r{_viewportRuler=w(sl);_changeDetectorRef=w(St);_elementRef=w(Ve);_dir=w(bn,{optional:!0});_idGenerator=w(Tt);_parentFormField=w(ia,{optional:!0});ngControl=w(ti,{self:!0,optional:!0});_liveAnnouncer=w(n0);_defaultOptions=w(JL,{optional:!0});options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let t=this.options.toArray()[e];if(t){let i=this.panel.nativeElement,o=f0(e,this.options,this.optionGroups),a=t._getHostElement();e===0&&o===1?i.scrollTop=0:i.scrollTop=p0(a.offsetTop,a.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Eb(this,e)}_scrollStrategyFactory=w(YE);_panelOpen=!1;_compareWith=(e,t)=>e===t;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new he;_errorStateTracker;stateChanges=new he;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new he;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Ht.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";_initialized=new he;optionSelectionChanges=pi(()=>{let e=this.options;return e?e.changes.pipe(cn(e),vn(()=>jn(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(vn(()=>this.optionSelectionChanges))});openedChange=new le;_openedStream=this.openedChange.pipe(mt(e=>e),Be(()=>{}));_closedStream=this.openedChange.pipe(mt(e=>!e),Be(()=>{}));selectionChange=new le;valueChange=new le;constructor(){let e=w(il),t=w(ys,{optional:!0}),i=w(vr,{optional:!0}),o=w(new mi("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new Zo(e,this.ngControl,i,t,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Fu(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(_c(),Ut(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Ut(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Ut(this._destroy)).subscribe(e=>{e.added.forEach(t=>t.select()),e.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(cn(null),Ut(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),t=this.ngControl;if(e!==this._triggerAriaLabelledBy){let i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}t&&(this._previousControl!==t.control&&(this._previousControl!==void 0&&t.disabled!==null&&t.disabled!==this.disabled&&(this.disabled=t.disabled),this._previousControl=t.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=`${this.id}-panel`;this._trackedModal&&xu(this._trackedModal,"aria-owns",t),vm(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;xu(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let t=e.keyCode,i=t===40||t===38||t===37||t===39,o=t===13||t===32,a=this._keyManager;if(!a.isTyping()&&o&&!Zt(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){let s=this.selected;a.onKeydown(e);let c=this.selected;c&&s!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(e){let t=this._keyManager,i=e.keyCode,o=i===40||i===38,a=t.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!a&&(i===13||i===32)&&t.activeItem&&!Zt(e))e.preventDefault(),t.activeItem._selectViaInteraction();else if(!a&&this._multiple&&i===65&&e.ctrlKey){e.preventDefault();let s=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(s?c.select():c.deselect())})}else{let s=t.activeItemIndex;t.onKeydown(e),this._multiple&&o&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==s&&t.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(on(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(t=>t.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(t=>this._selectOptionByValue(t)),this._sortValues();else{let t=this._selectOptionByValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let t=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return i.value!=null&&this._compareWith(i.value,e)}catch{return!1}});return t&&this._selectionModel.select(t),t}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof dl?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new yu(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=jn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ut(e)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),jn(...this.options.map(t=>t._stateChanges)).pipe(Ut(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,t){let i=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((t,i)=>this.sortComparator?this.sortComparator(t,i,e):e.indexOf(t)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let t;this.multiple?t=this.selected.map(i=>i.value):t=this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let t=0;t<this.options.length;t++)if(!this.options.get(t).disabled){e=t;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),t=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(t+=" "+this.ariaLabelledby),t}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-select"]],contentQueries:function(t,i,o){if(t&1&&(An(o,t3,5),An(o,Su,5),An(o,Rm,5)),t&2){let a;je(a=We())&&(i.customTrigger=a.first),je(a=We())&&(i.options=a),je(a=We())&&(i.optionGroups=a)}},viewQuery:function(t,i){if(t&1&&(it(jL,5),it(WL,5),it(Gm,5)),t&2){let o;je(o=We())&&(i.trigger=o.first),je(o=We())&&(i.panel=o.first),je(o=We())&&(i._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(t,i){t&1&&ae("keydown",function(a){return i._handleKeydown(a)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),t&2&&($e("id",i.id)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),Te("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Fe],disableRipple:[2,"disableRipple","disableRipple",Fe],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:kr(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Fe],placeholder:"placeholder",required:[2,"required","required",Fe],multiple:[2,"multiple","multiple",Fe],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Fe],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",kr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[Et([{provide:Ds,useExisting:r},{provide:Mm,useExisting:r}]),lt,jt],ngContentSelectors:GL,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(t,i){if(t&1){let o=vt();Ot(HL),F(0,"div",2,0),ae("click",function(){return Ae(o),ke(i.open())}),F(3,"div",3),Pe(4,qL,2,1,"span",4)(5,KL,3,1,"span",5),N(),F(6,"div",6)(7,"div",7),Sr(),F(8,"svg",8),Z(9,"path",9),N()()()(),Pe(10,XL,3,9,"ng-template",10),ae("backdropClick",function(){return Ae(o),ke(i.close())})("attach",function(){return Ae(o),ke(i._onAttached())})("detach",function(){return Ae(o),ke(i.close())})}if(t&2){let o=bi(1);H(3),$e("id",i._valueId),H(),ze(i.empty?4:5),H(6),Ce("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||o)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[dl,Gm,Pd],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[QL.transformPanel]},changeDetection:0})}return r})();var KE=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({providers:[e3],imports:[mo,Tm,Ze,ds,Ti,Tm,Ze]})}return r})();var Ma=class r{constructor(n,e){this.storage=n;this.http=e}api=Tu.api;getLocation(){let n=`${this.api}/location`,e=this.storage.get("token"),t=new Xt({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""});return this.http.get(n,{headers:t})}getDefualt(n=null){let e=`${this.api}/attendance`,t=this.storage.get("token"),i=new Xt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}addAttendance(){let n=`${this.api}/attendance`,e=this.storage.get("token"),t=new Xt({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""});return this.http.put(n,{},{headers:t})}getAllStudent(n){let e=`${this.api}/attendance`,t=this.storage.get("token"),i=new Xt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}getStudentByface(n){let e=`${this.api}/attendance/face`,t=this.storage.get("token"),i=new Xt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}),o={image:n};return this.http.post(`${this.api}/attendance/face`,o,{headers:i})}sendHaven(n){let e=`${this.api}/attendance/comeHaven`,t=this.storage.get("token"),i=new Xt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}),o={id:n};return this.http.post(`${e}`,o,{headers:i})}addClass(n){let e=`${this.api}/classes`,t=n,i={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.post(e,t,{headers:i})}getAll(){let n=`${this.api}/classes`,e={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.get(n,{headers:e})}static \u0275fac=function(e){return new(e||r)(ye(Hn),ye(xi))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var kf=class r{modelsLoaded=!1;loadModels(){return Rt(this,null,function*(){try{yield rn.tinyFaceDetector.loadFromUri("/models"),yield rn.faceLandmark68Net.loadFromUri("/models"),this.modelsLoaded=!0,console.log("Models loaded successfully")}catch(n){console.error("Error loading face recognition models:",n)}})}detectBestFace(n){return Rt(this,null,function*(){if(!this.modelsLoaded)return console.warn("Models are not loaded yet. Please wait."),null;let e=new cc({inputSize:128,scoreThreshold:.5}),t=yield fd(n,e).withFaceLandmarks();if(t.length===0)return null;let i=t.reduce((o,a)=>a.detection.box.width*a.detection.box.height>o.detection.box.width*o.detection.box.height?a:o);return{box:i.detection.box,landmarks:i.landmarks.positions}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var i3=["video"],o3=["overlay"];function a3(r,n){if(r&1&&(F(0,"mat-option",8),J(1),N()),r&2){let e=n.$implicit;Ce("value",e.value),H(),Wt(e.lable)}}function s3(r,n){if(r&1&&(F(0,"mat-option",8),J(1),N()),r&2){let e=n.$implicit;Ce("value",e.value),H(),Wt(e.lable)}}function c3(r,n){if(r&1){let e=vt();F(0,"div",4)(1,"mat-form-field")(2,"mat-label"),J(3,"Date"),N(),F(4,"input",5),ae("dateChange",function(i){Ae(e);let o=de();return ke(o.onDateChange(i.value))}),N(),Z(5,"mat-datepicker-toggle",6)(6,"mat-datepicker",null,0),N(),F(8,"mat-form-field")(9,"mat-label"),J(10,"Semester"),N(),F(11,"mat-select",7),ae("selectionChange",function(i){Ae(e);let o=de();return ke(o.selectSem(i.value))}),jo(12,a3,2,2,"mat-option",8,np),N()(),F(14,"mat-form-field")(15,"mat-label"),J(16,"Stream"),N(),F(17,"mat-select",7),ae("selectionChange",function(i){Ae(e);let o=de();return ke(o.selectStream(i.value))}),jo(18,s3,2,2,"mat-option",8,np),N()()(),F(20,"div",9),Z(21,"div",10),N()}if(r&2){let e=bi(7),t=de();H(4),Ce("matDatepicker",e),H(),Ce("for",e),H(7),Wo(t.semester),H(6),Wo(t.stream)}}function l3(r,n){r&1&&Z(0,"video",17,2)}function d3(r,n){if(r&1){let e=vt();F(0,"button",24),ae("click",function(){Ae(e);let i=de(2);return ke(i.reset())}),Z(1,"i",25),N()}}function u3(r,n){if(r&1){let e=vt();F(0,"div",20)(1,"div",26)(2,"div",27),Z(3,"img",28),N()(),F(4,"div")(5,"div",29),J(6),N(),F(7,"div",30),J(8),N()(),F(9,"div",31)(10,"button",32)(11,"i",33),ae("click",function(){Ae(e);let i=de(2);return ke(i.giveTOHaven())}),N()()()()}if(r&2){let e=de(2);H(3),Ce("src",e.giveUser.img,Dd),H(3),Wt(e.giveUser.name),H(2),Wt(e.giveUser.roll)}}function h3(r,n){if(r&1){let e=vt();F(0,"div",11)(1,"button",12),ae("click",function(){Ae(e);let i=de();return ke(i.back())}),Sr(),F(2,"svg",13),Z(3,"path",14),N()()(),Bo(),F(4,"div",3)(5,"div",15)(6,"div",16),ae("click",function(){Ae(e);let i=de();return ke(i.enableScan())}),Pe(7,l3,2,0,"video",17),Z(8,"canvas",18,1),N(),Pe(10,d3,2,0,"button",19)(11,u3,12,3,"div",20),F(12,"div",21)(13,"button",22),ae("click",function(){Ae(e);let i=de();return ke(i.attend())}),Z(14,"i",23),J(15),N()()()()}if(r&2){let e=de();H(7),ze(e.scan?7:-1),H(3),ze(e.alradyDetected?10:-1),H(),ze(e.giveUser?11:-1),H(2),Ce("disabled",!e.attAble),H(2),Wt(e.attAble?"Give Attendance":"Attendance alrady given")}}var If=class r{constructor(n,e,t,i,o){this.service=n;this.location=e;this.attService=t;this.faceRecognitionService=i;this.alertService=o}videoRef;overlayRef;detectionInterval;success=!1;user=localStorage.getItem("info");lable;storedLocation={lat:0,lng:0};attAble=!1;months;selectedDate="0";semester;selectedsem="0";stream=void 0;selectedstream="0";msg="";distent;alradyDetected=!1;enableReset=!1;currentStream;giveUser=void 0;usersList;scan=!1;ngOnDestroy(){clearInterval(this.detectionInterval),this.releaseStream()}ngOnInit(){return Rt(this,null,function*(){if(yield this.faceRecognitionService.loadModels(),this.months=[{lable:"January",value:1},{lable:"February",value:2},{lable:"March",value:3},{lable:"April",value:4},{lable:"May",value:5},{lable:"June",value:6},{lable:"July",value:7},{lable:"August",value:8},{lable:"Septembe",value:9},{lable:"October",value:10},{lable:"November",value:11},{lable:"December",value:12}],this.semester=[{lable:"First sem",value:1},{lable:"Second sem",value:2},{lable:"Third sem",value:3},{lable:"Fourth sem",value:4},{lable:"Fifth sem",value:5},{lable:"six sem",value:6},{lable:"Seven sem",value:7},{lable:"Eight sem",value:8}],this.stream=[{lable:"BCA",value:3},{lable:"BBA",value:1},{lable:"BHM",value:2},{lable:"MSC",value:4}],this.user&&(this.user=JSON.parse(this.user),this.lable=localStorage.getItem("lable"),this.lable==3)){let n=localStorage.getItem("presentDate");if(n!=null){let e=new Date(n),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0),t.getTime()!==e.getTime()&&(this.attAble=!0)}else this.attAble=!0}})}ngAfterViewInit(){}enableScan(){this.scan=!0,this.startVideo()}startVideo(){this.releaseStream(),navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{this.videoRef.nativeElement.srcObject=n,this.startDetection(),this.currentStream=n}).catch(n=>{console.log(n)})}releaseStream(){this.currentStream&&(this.currentStream.getTracks().forEach(n=>n.stop()),this.videoRef.nativeElement.srcObject=null,this.currentStream=null)}startDetection(){return Rt(this,null,function*(){let n=this.videoRef.nativeElement,e=this.overlayRef.nativeElement,t={width:n.width,height:n.height};jD(e,t),this.detectionInterval=setInterval(()=>Rt(this,null,function*(){let i=yield fd(n,new cc).withFaceLandmarks(),o=e.getContext("2d");if(o){o.clearRect(0,0,e.width,e.height);let a=Db(i,t);if(i.length>0){let s=i[0];this.alradyDetected||(this.alradyDetected=!0,this.captureFaceImage(n),clearInterval(this.detectionInterval))}}}),100)})}captureFaceImage(n){let e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight;let t=e.getContext("2d");if(t){t.drawImage(n,0,0,e.width,e.height);let i=e.toDataURL("image/jpeg").split(",")[1];this.sendImageToBackend(i)}}sendImageToBackend(n){return Rt(this,null,function*(){yield Nn(this.attService.getStudentByface(n).pipe(nt(e=>{e&&(this.giveUser=e)},e=>{this.alertService.showErrorAlert(e.error.massage),this.back()})))})}getAllStudents(){return Rt(this,null,function*(){if(this.selectedDate=="0"||this.selectedsem=="0"||this.selectedstream=="0")return;let n={sem:this.selectedsem,stream:this.selectedstream,month:this.selectedDate};this.service.getAllStudent(n).subscribe(e=>{e.attendance&&(this.usersList=e.attendance)})})}selectSem(n){this.selectedsem=n,this.getAllStudents()}selectStream(n){this.selectedstream=n,this.getAllStudents()}back(){this.location.back()}attend(){return Rt(this,null,function*(){yield Nn(this.service.getDefualt().pipe(nt(n=>Rt(this,null,function*(){if(n&&n.record)if(n.record.length<1)yield Nn(this.attService.getLocation().pipe(nt(e=>{this.storedLocation={lat:e.locations.lat,lng:e.locations.lon},this.distent=e.locations.distend,console.log(this.distent)}))),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude},i=this.calculateDistance(t,this.storedLocation);this.distent!=null&&i<=String(this.distent)?this.add():this.alertService.showErrorAlert("You are too far from the collage location.")},e=>{switch(e.code){case e.PERMISSION_DENIED:this.msg="Permission denied. Please allow location access.";break;case e.POSITION_UNAVAILABLE:this.msg="Location information is unavailable.";break;case e.TIMEOUT:this.msg="Location request timed out.";break;default:this.msg="An unknown error occurred.";break}this.alertService.showErrorAlert(this.msg)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):this.alertService.showWarningAlert("Geolocation is not supported by this browser.");else{let e=new Date;localStorage.setItem("presentDate",e.toISOString()),this.attAble=!1}}))))})}add(){return Rt(this,null,function*(){try{let n=yield Nn(this.attService.addAttendance().pipe(nt(e=>{if(!e.message){this.alertService.showSuccessAlert("Attendees Update successfully!");let t=new Date;localStorage.setItem("presentDate",t.toISOString()),this.attAble=!1}})))}catch{this.alertService.showErrorAlert("Error updating attendance. Please try again.")}})}calculateDistance(n,e){let t=h=>h*Math.PI/180,o=t(n.lat),a=t(e.lat),s=t(e.lat-n.lat),c=t(e.lng-n.lng),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2),u=6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)));return u>=1e3?(u/1e3).toFixed(2)+" km":u.toFixed(2)+" meters"}reset(){this.alradyDetected=!1,this.startDetection()}giveTOHaven(){return Rt(this,null,function*(){this.giveUser.user_id!=null&&(navigator.geolocation?(yield Nn(this.attService.getLocation().pipe(nt(n=>{this.storedLocation={lat:n.locations.lat,lng:n.locations.lon},this.distent=n.locations.distend}))),navigator.geolocation.getCurrentPosition(n=>Rt(this,null,function*(){let e={lat:n.coords.latitude,lng:n.coords.longitude},t=this.calculateDistance(e,this.storedLocation);if(this.distent!=null&&t<=String(this.distent)){let i=new Date;localStorage.setItem("presentDate",i.toISOString()),yield Nn(this.attService.sendHaven(this.giveUser.user_id).pipe(nt(o=>{o.message?(this.alertService.showSuccessAlert(o.message),this.giveUser=void 0):this.alertService.showErrorAlert("Error updating attendance. Please try again.")},o=>{this.alertService.showErrorAlert("Error updating attendance. Please try again.")})))}else this.alertService.showErrorAlert("You are too far from the collage location.")}),n=>{switch(n.code){case n.PERMISSION_DENIED:this.msg="Permission denied. Please allow location access.";break;case n.POSITION_UNAVAILABLE:this.msg="Location information is unavailable.";break;case n.TIMEOUT:this.msg="Location request timed out.";break;default:this.msg="An unknown error occurred.";break}this.alertService.showWarningAlert(this.msg)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):this.alertService.showWarningAlert("Geolocation is not supported by this browser."))})}onDateChange(n){this.selectedDate=n.getMonth().toString(),this.getAllStudents()}static \u0275fac=function(e){return new(e||r)(Ie(Ma),Ie(yi),Ie(Ma),Ie(kf),Ie(gr))};static \u0275cmp=se({type:r,selectors:[["app-attendance"]],viewQuery:function(e,t){if(e&1&&(it(i3,5),it(o3,5)),e&2){let i;je(i=We())&&(t.videoRef=i.first),je(i=We())&&(t.overlayRef=i.first)}},features:[Et([Eu()])],decls:3,vars:2,consts:[["picker",""],["overlay",""],["video",""],[1,"root"],[1,"w-full","h-[10%]","absolute","bottom-0","flex","items-center","justify-center"],["matInput","",3,"dateChange","matDatepicker"],["matIconSuffix","",3,"for"],[3,"selectionChange"],[3,"value"],[1,"w-full","h-[90%]","overflow-x-scroll","bg-red-400","absolute","top-0"],[1,"h-full","w-full","relative"],[1,"w-full","h-[54px]","absolute","top-0","flex","items-center","pl-2"],["mat-button","",1,"btn","btn-circle","bg-transparent","outline-none","hover:bg-blue-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","w-full","h-full","flex-col","justify-center","items-center"],["id","scan-box",1,"w-52","h-52","bg-black","place-items-center","rounded-box","my_shdow","overflow-hidden","outline","outline-[#647bfd7a]","relative",3,"click"],["autoplay","","width","100%","height","100%",1,"rounded-box"],[2,"position","absolute","top","0","left","0","bottom","0","right","0","height","100%","width","100%"],[1,"btn","btn-outline","btn-info","m-4"],[1,"flex","gap-3","items-center","bg-[#ffffff2c]","px-6","rounded-md","m-5"],[1,"m-14"],["mat-flat-button","","extended","",1,"btn","btn-outline","btn-info","disabled",3,"click","disabled"],[1,"bi","bi-person-raised-hand","text-2xl"],[1,"btn","btn-outline","btn-info","m-4",3,"click"],[1,"bi","bi-arrow-clockwise","text-2xl"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],["alt","Avatar Tailwind CSS Component",3,"src"],[1,"font-bold","text-white"],[1,"text-sm","opacity-50","text-white"],["data-tip","Give Attendance",1,"tooltip","my-6","ml-4","text-white"],[1,"btn","btn-outline","btn-info"],[1,"bi","bi-person-check","text-2xl",3,"click"]],template:function(e,t){e&1&&(F(0,"div",3),Pe(1,c3,22,2)(2,h3,16,5),N()),e&2&&(H(),ze(t.lable==1||t.lable==2?1:-1),H(),ze(t.lable==3?2:-1))},dependencies:[In,nr,dh,lh,Ts,wl,Ti,Es,yo,nh,As,Ss,KE,$E,Su],styles:[".holder[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background:linear-gradient(to right,#f0f4f8,#c9e2f4)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0003;padding:20px;text-align:center;width:350px;max-width:100%;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 16px #0000004d}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-top:20px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:16px;margin:10px 0}.my_shdow[_ngcontent-%COMP%]{box-shadow:#107af30d 0 0 0 1px,#015ce48a 0 0 0 1px inset}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}#scan-box[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-image:url(/img/face-scan.png);background-size:contain}"]})};var Mf=class r{constructor(n,e){this.storage=n;this.http=e}api=rh.api;getPost(n){}postPost(n){let e=this.storage.get("token"),t=new Xt({Authorization:e?`Bearer ${e}`:""}),i=new FormData;return i.append("file",n),this.http.post(this.api+"/posts",i,{headers:t})}static \u0275fac=function(e){return new(e||r)(ye(Hn),ye(xi))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function p3(r,n){r&1&&(F(0,"div",6)(1,"div",8)(2,"div",9),Z(3,"input",10),F(4,"div",11),J(5,"All Classes"),N(),Z(6,"input",12),F(7,"div",11),J(8,"My Classes"),N()()(),F(9,"div",13)(10,"div",14)(11,"div",15)(12,"button",16),J(13,"\xAB"),N(),F(14,"button",16),J(15,"Page 1"),N(),F(16,"button",16),J(17,"\xBB"),N()()()()())}function m3(r,n){if(r&1&&(F(0,"div",24)(1,"div",25),J(2),N()()),r&2){let e=de(4);H(2),ur(" ",e.progress.value,"% ")}}function g3(r,n){if(r&1&&(F(0,"div",19)(1,"div",22),Z(2,"i",23),Pe(3,m3,3,1,"div",24),N()()),r&2){let e=de(3);H(3),ze(e.progress?3:-1)}}function v3(r,n){r&1&&Z(0,"div",18)}function b3(r,n){if(r&1){let e=vt();F(0,"form",26),ae("ngSubmit",function(){Ae(e);let i=de(3);return ke(i.onSubmit())}),F(1,"label",27),Z(2,"input",28),N(),F(3,"label",27),Z(4,"input",29),N(),F(5,"label",27),Z(6,"input",30),N(),Z(7,"textarea",31),F(8,"div",32)(9,"button",33),J(10,"Submit"),N()()()}if(r&2){let e=de(3);Ce("formGroup",e.calssForm)}}function _3(r,n){if(r&1){let e=vt();F(0,"div",7)(1,"h1",17),J(2," Create Class"),N(),Z(3,"div",18),Pe(4,g3,4,1,"div",19)(5,v3,1,0,"div",18),F(6,"input",20),ae("change",function(i){Ae(e);let o=de(2);return ke(o.onFileSelected(i))}),N(),Pe(7,b3,11,1,"form",21),N()}if(r&2){let e=de(2);H(4),ze(e.selectedFile?4:-1),H(),ze(e.selectedFile?5:-1),H(2),ze(e.calssForm?7:-1)}}function y3(r,n){if(r&1){let e=vt();F(0,"div",0)(1,"div",1)(2,"button",2),Z(3,"i",3),N(),F(4,"button",4),ae("click",function(){Ae(e);let i=de();return ke(i.createClass())}),Z(5,"i",5),J(6," Create Class "),N()(),Pe(7,p3,18,0,"div",6)(8,_3,8,3,"div",7),N()}if(r&2){let e=de();H(7),ze(e.createClassView?7:-1),H(),ze(e.createClassView?8:-1)}}function x3(r,n){r&1&&(F(0,"div")(1,"h1"),J(2,"IT is your"),N()())}var Rf=class r{constructor(n,e,t,i){this.postService=n;this.fb=e;this.service=t;this.alertService=i}allClassesView=!1;createClassView=!1;selectedFile=null;uploadId=0;progress;label=localStorage.getItem("lable");calssForm;ngOnInit(){this.fetchClasses()}fetchClasses(){return Rt(this,null,function*(){yield Nn(this.service.getAll().pipe(nt(n=>{n&&console.log(n)},n=>{this.alertService.showWarningAlert(n.error.message)})))})}createClass(){this.calssForm=this.fb.group({content_id:[""],title:["",Ht.required],stream:["",Ht.required],semester:["",Ht.required],description:[""]}),this.createClassView=!this.createClassView,this.createClassView||this.fetchClasses()}onFileSelected(n){let e=n.target;e.files&&e.files[0]&&(this.selectedFile=e.files[0],this.uploadFile())}uploadFile(){return Rt(this,null,function*(){this.selectedFile&&(yield Nn(this.postService.postPost(this.selectedFile).pipe(nt(n=>{n.post_id&&(this.uploadId=n.post_id)},n=>{console.log(n),this.alertService.showWarningAlert(n.error.message)}))))})}onSubmit(){return Rt(this,null,function*(){this.calssForm?.patchValue({content_id:this.uploadId}),this.calssForm?.valid?yield Nn(this.service.addClass(this.calssForm.value).pipe(nt(n=>{this.alertService.showSuccessAlert(n.message)},n=>{this.alertService.showWarningAlert(n.error.message)}))):this.alertService.showWarningAlert("Please fill all the fields")})}static \u0275fac=function(e){return new(e||r)(Ie(Mf),Ie(ws),Ie(Ma),Ie(gr))};static \u0275cmp=se({type:r,selectors:[["app-classes"]],decls:2,vars:2,consts:[[1,"flex","flex-wrap","h-full","w-full",2,"justify-content","center"],[1,"fixed","navbar","h-[57px]","bg-slate-500","hover:bg-blue-500","w-full","z-10"],[1,"btn","btn-square","btn-ghost","bg-transparent","border-none"],["routerLink","/",1,"bi","bi-box-arrow-left","text-white","text-3xl"],[1,"btn","bg-white","absolute","right-3","text-blue-500",3,"click"],[1,"bi","bi-patch-plus-fill","text-blue-500","text-3xl"],[1,"w-full","absolute","top-[70px]","p-4","h-full"],[1,"w-full","absolute","top-[70px]","p-4","flex","flex-col","itc"],[1,"divider","divider-primary","text-center"],["role","tablist",1,"tabs","tabs-bordered"],["type","radio","name","my_tabs_1","role","tab","aria-label","All Classes","checked","",1,"tab"],["role","tabpanel",1,"tab-content","p-10"],["type","radio","name","my_tabs_1","role","tab","aria-label","My Classes",1,"tab"],[1,"w-full","h-full","pt-2","relative","overflow-scroll"],[1,"w-full","flex","justify-center"],[1,"join","mt-2"],[1,"join-item","btn"],[1,"text-center"],[1,"divider","divider-primary"],[1,"w-full","m-3","flex","justify-center","items-center","relative"],["type","file","extensions","pdf,xlsx,mp4,doc",1,"file-input","file-input-bordered","w-full","max-w-xs","m-3",3,"change"],[3,"formGroup"],[1,"w-full","h-full","rounded-lg","relative","min-h-[300px]","flex","justify-center","items-center"],[1,"bi","bi-cloud-arrow-up-fill","text-5xl"],[1,"w-full","h-full","absolute","flex","justify-center","items-center","bg-[#ffffff1c]"],["role","progressbar",1,"radial-progress","text-primary",2,"--value","70"],[3,"ngSubmit","formGroup"],[1,"input","input-bordered","flex","items-center","gap-2","m-3"],["type","text","formControlName","title","placeholder","Title or Class name",1,"grow"],["type","text","formControlName","stream","placeholder","stream",1,"grow"],["type","text","formControlName","semester","placeholder","semester",1,"grow"],["type","password","formControlName","description","placeholder","description",1,"textarea","textarea-bordered","grow","gap-2","m-3","w-[99%]"],[1,"w-full","text-center"],["type","submit",1,"btn","btn-primary"]],template:function(e,t){e&1&&Pe(0,y3,9,2,"div",0)(1,x3,3,0,"div"),e&2&&(ze(t.label=="2"||t.label=="1"?0:-1),H(),ze(t.label=="3"?1:-1))},dependencies:[Cs,xs,_o,bs,_s,vr,ra],styles:[".card-css[_ngcontent-%COMP%]{box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px}"]})};var Tf=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=se({type:r,selectors:[["app-feedback"]],decls:2,vars:0,template:function(e,t){e&1&&(F(0,"p"),J(1,"feedback works!"),N())},encapsulation:2})};var Ff=class r{constructor(n){this.router=n}ngOnInit(){localStorage.getItem("token")&&localStorage.removeItem("token"),localStorage.getItem("PInfo")&&localStorage.removeItem("PInfo")}logout(){localStorage.clear(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||r)(Ie(Qt))};static \u0275cmp=se({type:r,selectors:[["app-logout"]],decls:8,vars:1,consts:[[1,"root","flex-col"],[1,"w-72","h-72"],["src","/img/verified_7641727.png",1,"w-full"],[1,"text-center"],["type","button",1,"w-50","mt-3","select-none","rounded-lg","bg-blue-500","py-3","px-6","text-center","align-middle","font-sans","text-xs","font-bold","uppercase","text-white","shadow-md","shadow-blue-500/20","transition-all","hover:shadow-lg","hover:shadow-blue-500/40","focus:opacity-[0.85]","focus:shadow-none","active:opacity-[0.85]","active:shadow-none","disabled:pointer-events-none","disabled:opacity-50","disabled:shadow-none",3,"click"]],template:function(e,t){e&1&&(F(0,"div",0)(1,"div",1),Z(2,"img",2),N(),F(3,"div",3)(4,"h1"),J(5,"Successfully Logout!"),N(),F(6,"button",4),ae("click",function(){return t.logout()}),J(7," Login Again "),N()()()),e&2&&(H(),Ce("@bounceUp",void 0))},encapsulation:2})};var QE=[{path:"",component:Uu,canActivate:[Mi]},{path:"welcome",component:oh},{path:"login",component:ih},{path:"me_data",component:uh,canActivate:[Mi]},{path:"college/attendance",component:If,canActivate:[Mi]},{path:"college/class",component:Rf,canActivate:[Mi]},{path:"college/feedback",component:Tf,canActivate:[Mi]},{path:"logout",component:Ff,canActivate:[Mi]}];var w3="@",C3=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=w(Bb,{optional:!0});loadingSchedulerFn=w(D3,{optional:!0});_engine;constructor(e,t,i,o,a){this.doc=e,this.delegate=t,this.zone=i,this.animationType=o,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-47ZNNX2N.js").then(i=>i),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(i=>{throw new gt(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let o=new Sb(i);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(e,t);o.use(s),this.scheduler?.notify(11)}).catch(a=>{o.use(i)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(t){Ba()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Sb=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,t,i){this.delegate.insertBefore(n,e,t,i)}removeChild(n,e,t){this.delegate.removeChild(n,e,t)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,t,i){this.delegate.setAttribute(n,e,t,i)}removeAttribute(n,e,t){this.delegate.removeAttribute(n,e,t)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,t,i){this.delegate.setStyle(n,e,t,i)}removeStyle(n,e,t){this.delegate.removeStyle(n,e,t)}setProperty(n,e,t){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(n,e,t)),this.delegate.setProperty(n,e,t)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,t){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(n,e,t)),this.delegate.listen(n,e,t)}shouldReplay(n){return this.replay!==null&&n.startsWith(w3)}},D3=new ne("");function ZE(r="animations"){return Zf("NgAsyncAnimations"),Lo([{provide:Ed,useFactory:(n,e,t)=>new C3(n,e,t,r),deps:[He,Gd,Re]},{provide:Kt,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ab={providers:[a_({eventCoalescing:!0}),Oy(QE),ZE()]};var JE=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze,Ze]})}return r})();function E3(r,n){r&1&&Z(0,"div",2)}var S3=new ne("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var tS=(()=>{class r{_elementRef=w(Ve);_ngZone=w(Re);_changeDetectorRef=w(St);_animationMode=w(Kt,{optional:!0});constructor(){let e=w(S3,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=eS(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=eS(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new le;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(t){return new(t||r)};static \u0275cmp=se({type:r,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(t,i){t&2&&($e("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),Zn("mat-"+i.color),Te("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",kr],bufferValue:[2,"bufferValue","bufferValue",kr],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[lt],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(t,i){t&1&&(F(0,"div",0),Z(1,"div",1),Pe(2,E3,1,0,"div",2),N(),F(3,"div",3),Z(4,"span",4),N(),F(5,"div",5),Z(6,"span",4),N()),t&2&&(H(),Ji("flex-basis",i._getBufferBarFlexBasis()),H(),ze(i.mode==="buffer"?2:-1),H(),Ji("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return r})();function eS(r,n=0,e=100){return Math.max(n,Math.min(e,r))}var nS=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=xe({type:r});static \u0275inj=_e({imports:[Ze]})}return r})();var Of=class r{loadingSubject=new Sn(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function I3(r,n){r&1&&Z(0,"mat-progress-bar",0)}var Nf=class r{constructor(n){this.loadingService=n}isLoading;ngOnInit(){this.isLoading=this.loadingService.loading$}static \u0275fac=function(e){return new(e||r)(Ie(Of))};static \u0275cmp=se({type:r,selectors:[["app-loading"]],decls:2,vars:3,consts:[["mode","indeterminate","color","primary"]],template:function(e,t){e&1&&(Pe(0,I3,1,0,"mat-progress-bar",0),r_(1,"async")),e&2&&ze(i_(1,1,t.isLoading)?0:-1)},dependencies:[nS,tS,op,g_],styles:["mat-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}"]})};var iS=cS(rS());var Pf=class r{title="timt";ngOnInit(){iS.init({duration:1e3,easing:"ease-in-out",once:!0})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=se({type:r,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"w-full","h-full"]],template:function(e,t){e&1&&(Z(0,"app-loading"),F(1,"div",0),Z(2,"router-outlet"),N())},dependencies:[Jp,JE,In,ku,Nf],encapsulation:2})};j_(Pf,ot(Q({},Ab),{providers:[F_(),...Ab.providers||[]]})).catch(r=>console.error(r));

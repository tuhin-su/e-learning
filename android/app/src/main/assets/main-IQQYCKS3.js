import{$ as Dt,$a as P,$b as Ne,$c as vi,A as Wi,Aa as ha,Ab as gi,Ac as mu,B as tu,Ba as G_,Bb as Oe,Bc as gu,C as nu,Ca as Fe,Cb as dr,Cc as vy,D as Zn,Da as $p,Db as oy,Dc as bs,E as Ct,Ea as q_,Eb as me,Ec as by,F as jp,Fa as us,Fb as gs,Fc as _y,G as _o,Ga as Y_,Gb as il,Gc as Ge,H as yo,Ha as Hi,Hb as ur,Hc as yy,I as ru,Ia as tn,Ib as hr,Ic as em,J as Wp,Ja as tl,Jb as I,Jc as xy,K as un,Ka as Kp,Kb as M,Kc as wy,L as L_,La as au,Lb as G,Lc as qi,M as Jc,Ma as On,Mb as pa,Mc as Cy,N as xo,Na as nl,Nb as ma,Nc as vu,O as wo,Oa as hs,Ob as Jn,Oc as bu,P as Hp,Pa as fs,Pb as nt,Pc as Dy,Q as B_,Qa as $_,Qb as jr,Qc as Ey,R as Gp,Ra as K_,Rb as ay,Rc as Sy,S as V_,Sa as X_,Sb as te,Sc as al,T as z_,Ta as Q_,Tb as sy,Tc as ky,U as qp,Ua as Z_,Ub as ee,Uc as Iy,V as iu,Va as J_,Vb as Et,Vc as _u,W as gn,Wa as ey,Wb as je,Wc as Ay,X as En,Xa as lr,Xb as ol,Xc as yu,Y as Pt,Ya as Dr,Yb as vs,Z as U_,Za as ty,Zb as Vt,_ as Ve,_a as rl,_b as lt,_c as Do,a as J,aa as wr,ab as ve,ac as Pe,b as dt,ba as X,bb as ps,bc as cy,bd as Gn,c as Vp,ca as De,cb as Nn,cc as ly,cd as va,da as j_,db as su,dc as Wr,dd as tm,e as Jd,ea as ne,eb as ms,ec as dy,ed as qr,f as Sk,fa as Yp,fb as Hn,fc as j,fd as Ry,g as at,ga as Ae,gb as fa,gc as ht,gd as My,h as Tt,ha as x,hb as mi,hc as Xt,i as N_,ia as la,ib as ny,ic as Jp,j as fi,ja as el,jb as Xp,jc as uu,k as zp,ka as da,kb as ry,kc as hu,l as Zc,la as W_,lb as Qp,lc as fu,m as _e,ma as zr,mb as re,mc as Ke,n as mn,na as Cr,nb as Ee,nc as uy,o as pi,oa as At,ob as ae,oc as hy,p as Dn,pa as le,pb as Qe,pc as fy,q as be,qa as de,qb as iy,qc as pu,r as sa,ra as Sn,rb as st,rc as py,s as ca,sa as ua,sb as he,sc as my,t as P_,ta as gt,tb as cu,tc as St,u as _t,ua as yt,ub as lu,uc as ga,v as He,va as Ur,vb as Zp,vc as gy,w as ds,wa as H_,wb as du,wc as Se,x as cr,xa as ou,xb as Co,xc as Hr,y as Up,ya as fe,yb as Ze,yc as Gi,z as eu,za as Le,zb as pe,zc as Gr}from"./chunk-ZSGFVX2F.js";var fC=Jd(()=>{"use strict"});var mC=Jd((uc,pC)=>{"use strict";pC.exports=uc=window.fetch;uc.default=window.fetch.bind(window);uc.Headers=window.Headers;uc.Request=window.Request;uc.Response=window.Response});var gC=Jd(()=>{"use strict"});var xk=Jd((Zd,O_)=>{"use strict";(function(r,n){typeof Zd=="object"&&typeof O_=="object"?O_.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Zd=="object"?Zd.AOS=n():r.AOS=n()})(Zd,function(){return function(r){function n(t){if(e[t])return e[t].exports;var i=e[t]={exports:{},id:t,loaded:!1};return r[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=r,n.c=e,n.p="dist/",n(0)}([function(r,n,e){"use strict";function t(T){return T&&T.__esModule?T:{default:T}}var i=Object.assign||function(T){for(var V=1;V<arguments.length;V++){var z=arguments[V];for(var U in z)Object.prototype.hasOwnProperty.call(z,U)&&(T[U]=z[U])}return T},o=e(1),a=(t(o),e(6)),s=t(a),c=e(7),l=t(c),d=e(8),u=t(d),h=e(9),f=t(h),p=e(10),m=t(p),g=e(11),v=t(g),_=e(14),y=t(_),b=[],w=!1,C={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},A=function(){var T=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(T&&(w=!0),w)return b=(0,v.default)(b,C),(0,m.default)(b,C.once),b},R=function(){b=(0,y.default)(),A()},S=function(){b.forEach(function(T,V){T.node.removeAttribute("data-aos"),T.node.removeAttribute("data-aos-easing"),T.node.removeAttribute("data-aos-duration"),T.node.removeAttribute("data-aos-delay")})},D=function(T){return T===!0||T==="mobile"&&f.default.mobile()||T==="phone"&&f.default.phone()||T==="tablet"&&f.default.tablet()||typeof T=="function"&&T()===!0},F=function(T){C=i(C,T),b=(0,y.default)();var V=document.all&&!window.atob;return D(C.disable)||V?S():(C.disableMutationObserver||u.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),C.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",C.easing),document.querySelector("body").setAttribute("data-aos-duration",C.duration),document.querySelector("body").setAttribute("data-aos-delay",C.delay),C.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?A(!0):C.startEvent==="load"?window.addEventListener(C.startEvent,function(){A(!0)}):document.addEventListener(C.startEvent,function(){A(!0)}),window.addEventListener("resize",(0,l.default)(A,C.debounceDelay,!0)),window.addEventListener("orientationchange",(0,l.default)(A,C.debounceDelay,!0)),window.addEventListener("scroll",(0,s.default)(function(){(0,m.default)(b,C.once)},C.throttleDelay)),C.disableMutationObserver||u.default.ready("[data-aos]",R),b)};r.exports={init:F,refresh:A,refreshHard:R}},function(r,n){},,,,,function(r,n){(function(e){"use strict";function t(D,F,T){function V(Te){var $e=ge,mt=xe;return ge=xe=void 0,Xe=Te,Re=D.apply(mt,$e)}function z(Te){return Xe=Te,Me=setTimeout(q,F),tt?V(Te):Re}function U(Te){var $e=Te-qe,mt=Te-Xe,Nt=F-$e;return pt?R(Nt,We-mt):Nt}function Y(Te){var $e=Te-qe,mt=Te-Xe;return qe===void 0||$e>=F||$e<0||pt&&mt>=We}function q(){var Te=S();return Y(Te)?H(Te):void(Me=setTimeout(q,U(Te)))}function H(Te){return Me=void 0,Ie&&ge?V(Te):(ge=xe=void 0,Re)}function $(){Me!==void 0&&clearTimeout(Me),Xe=0,ge=qe=xe=Me=void 0}function Z(){return Me===void 0?Re:H(S())}function ce(){var Te=S(),$e=Y(Te);if(ge=arguments,xe=this,qe=Te,$e){if(Me===void 0)return z(qe);if(pt)return Me=setTimeout(q,F),V(qe)}return Me===void 0&&(Me=setTimeout(q,F)),Re}var ge,xe,We,Re,Me,qe,Xe=0,tt=!1,pt=!1,Ie=!0;if(typeof D!="function")throw new TypeError(d);return F=c(F)||0,o(T)&&(tt=!!T.leading,pt="maxWait"in T,We=pt?A(c(T.maxWait)||0,F):We,Ie="trailing"in T?!!T.trailing:Ie),ce.cancel=$,ce.flush=Z,ce}function i(D,F,T){var V=!0,z=!0;if(typeof D!="function")throw new TypeError(d);return o(T)&&(V="leading"in T?!!T.leading:V,z="trailing"in T?!!T.trailing:z),t(D,F,{leading:V,maxWait:F,trailing:z})}function o(D){var F=typeof D>"u"?"undefined":l(D);return!!D&&(F=="object"||F=="function")}function a(D){return!!D&&(typeof D>"u"?"undefined":l(D))=="object"}function s(D){return(typeof D>"u"?"undefined":l(D))=="symbol"||a(D)&&C.call(D)==h}function c(D){if(typeof D=="number")return D;if(s(D))return u;if(o(D)){var F=typeof D.valueOf=="function"?D.valueOf():D;D=o(F)?F+"":F}if(typeof D!="string")return D===0?D:+D;D=D.replace(f,"");var T=m.test(D);return T||g.test(D)?v(D.slice(2),T?2:8):p.test(D)?u:+D}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},d="Expected a function",u=NaN,h="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,g=/^0o[0-7]+$/i,v=parseInt,_=(typeof e>"u"?"undefined":l(e))=="object"&&e&&e.Object===Object&&e,y=(typeof self>"u"?"undefined":l(self))=="object"&&self&&self.Object===Object&&self,b=_||y||Function("return this")(),w=Object.prototype,C=w.toString,A=Math.max,R=Math.min,S=function(){return b.Date.now()};r.exports=i}).call(n,function(){return this}())},function(r,n){(function(e){"use strict";function t(S,D,F){function T(Ie){var Te=ce,$e=ge;return ce=ge=void 0,qe=Ie,We=S.apply($e,Te)}function V(Ie){return qe=Ie,Re=setTimeout(Y,D),Xe?T(Ie):We}function z(Ie){var Te=Ie-Me,$e=Ie-qe,mt=D-Te;return tt?A(mt,xe-$e):mt}function U(Ie){var Te=Ie-Me,$e=Ie-qe;return Me===void 0||Te>=D||Te<0||tt&&$e>=xe}function Y(){var Ie=R();return U(Ie)?q(Ie):void(Re=setTimeout(Y,z(Ie)))}function q(Ie){return Re=void 0,pt&&ce?T(Ie):(ce=ge=void 0,We)}function H(){Re!==void 0&&clearTimeout(Re),qe=0,ce=Me=ge=Re=void 0}function $(){return Re===void 0?We:q(R())}function Z(){var Ie=R(),Te=U(Ie);if(ce=arguments,ge=this,Me=Ie,Te){if(Re===void 0)return V(Me);if(tt)return Re=setTimeout(Y,D),T(Me)}return Re===void 0&&(Re=setTimeout(Y,D)),We}var ce,ge,xe,We,Re,Me,qe=0,Xe=!1,tt=!1,pt=!0;if(typeof S!="function")throw new TypeError(l);return D=s(D)||0,i(F)&&(Xe=!!F.leading,tt="maxWait"in F,xe=tt?C(s(F.maxWait)||0,D):xe,pt="trailing"in F?!!F.trailing:pt),Z.cancel=H,Z.flush=$,Z}function i(S){var D=typeof S>"u"?"undefined":c(S);return!!S&&(D=="object"||D=="function")}function o(S){return!!S&&(typeof S>"u"?"undefined":c(S))=="object"}function a(S){return(typeof S>"u"?"undefined":c(S))=="symbol"||o(S)&&w.call(S)==u}function s(S){if(typeof S=="number")return S;if(a(S))return d;if(i(S)){var D=typeof S.valueOf=="function"?S.valueOf():S;S=i(D)?D+"":D}if(typeof S!="string")return S===0?S:+S;S=S.replace(h,"");var F=p.test(S);return F||m.test(S)?g(S.slice(2),F?2:8):f.test(S)?d:+S}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},l="Expected a function",d=NaN,u="[object Symbol]",h=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=parseInt,v=(typeof e>"u"?"undefined":c(e))=="object"&&e&&e.Object===Object&&e,_=(typeof self>"u"?"undefined":c(self))=="object"&&self&&self.Object===Object&&self,y=v||_||Function("return this")(),b=Object.prototype,w=b.toString,C=Math.max,A=Math.min,R=function(){return y.Date.now()};r.exports=t}).call(n,function(){return this}())},function(r,n){"use strict";function e(c){var l=void 0,d=void 0,u=void 0;for(l=0;l<c.length;l+=1)if(d=c[l],d.dataset&&d.dataset.aos||(u=d.children&&e(d.children)))return!0;return!1}function t(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function i(){return!!t()}function o(c,l){var d=window.document,u=t(),h=new u(a);s=l,h.observe(d.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function a(c){c&&c.forEach(function(l){var d=Array.prototype.slice.call(l.addedNodes),u=Array.prototype.slice.call(l.removedNodes),h=d.concat(u);if(e(h))return s()})}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){};n.default={isSupported:i,ready:o}},function(r,n){"use strict";function e(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function t(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function d(u,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,h,f){return h&&d(u.prototype,h),f&&d(u,f),u}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,l=function(){function d(){e(this,d)}return i(d,[{key:"phone",value:function(){var u=t();return!(!o.test(u)&&!a.test(u.substr(0,4)))}},{key:"mobile",value:function(){var u=t();return!(!s.test(u)&&!c.test(u.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),d}();n.default=new l},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(i,o,a){var s=i.node.getAttribute("data-aos-once");o>i.position?i.node.classList.add("aos-animate"):typeof s<"u"&&(s==="false"||!a&&s!=="true")&&i.node.classList.remove("aos-animate")},t=function(i,o){var a=window.pageYOffset,s=window.innerHeight;i.forEach(function(c,l){e(c,s+a,o)})};n.default=t},function(r,n,e){"use strict";function t(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(12),o=t(i),a=function(s,c){return s.forEach(function(l,d){l.node.classList.add("aos-init"),l.position=(0,o.default)(l.node,c.offset)}),s};n.default=a},function(r,n,e){"use strict";function t(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(13),o=t(i),a=function(s,c){var l=0,d=0,u=window.innerHeight,h={offset:s.getAttribute("data-aos-offset"),anchor:s.getAttribute("data-aos-anchor"),anchorPlacement:s.getAttribute("data-aos-anchor-placement")};switch(h.offset&&!isNaN(h.offset)&&(d=parseInt(h.offset)),h.anchor&&document.querySelectorAll(h.anchor)&&(s=document.querySelectorAll(h.anchor)[0]),l=(0,o.default)(s).top,h.anchorPlacement){case"top-bottom":break;case"center-bottom":l+=s.offsetHeight/2;break;case"bottom-bottom":l+=s.offsetHeight;break;case"top-center":l+=u/2;break;case"bottom-center":l+=u/2+s.offsetHeight;break;case"center-center":l+=u/2+s.offsetHeight/2;break;case"top-top":l+=u;break;case"bottom-top":l+=s.offsetHeight+u;break;case"center-top":l+=s.offsetHeight/2+u}return h.anchorPlacement||h.offset||isNaN(c)||(d=c),l+d};n.default=a},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){for(var i=0,o=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetLeft-(t.tagName!="BODY"?t.scrollLeft:0),o+=t.offsetTop-(t.tagName!="BODY"?t.scrollTop:0),t=t.offsetParent;return{top:o,left:i}};n.default=e},function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){return t=t||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(t,function(i){return{node:i}})};n.default=e}])})});var cl=class{},wu=class{},Jt=class r{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let t=e.indexOf(":");if(t>0){let i=e.slice(0,t),o=e.slice(t+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,t)=>{this.addHeaderEntry(t,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,t])=>{this.setHeaderEntries(e,t)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let t=n.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...t),this.headers.set(e,i);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}addHeaderEntry(n,e){let t=n.toLowerCase();this.maybeSetNormalizedName(n,t),this.headers.has(t)?this.headers.get(t).push(e):this.headers.set(t,[e])}setHeaderEntries(n,e){let t=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,t),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var rm=class{encodeKey(n){return Ty(n)}encodeValue(n){return Ty(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function Ik(r,n){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],c=e.get(a)||[];c.push(s),e.set(a,c)}),e}var Ak=/%(\d[a-f0-9])/gi,Rk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ty(r){return encodeURIComponent(r).replace(Ak,(n,e)=>Rk[e]??n)}function xu(r){return`${r}`}var So=class r{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new rm,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Ik(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let t=n.fromObject[e],i=Array.isArray(t)?t.map(xu):[xu(t)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(t=>{let i=n[t];Array.isArray(i)?i.forEach(o=>{e.push({param:t,value:o,op:"a"})}):e.push({param:t,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(xu(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let t=this.map.get(n.param)||[],i=t.indexOf(xu(n.value));i!==-1&&t.splice(i,1),t.length>0?this.map.set(n.param,t):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var im=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function Mk(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Fy(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function Oy(r){return typeof Blob<"u"&&r instanceof Blob}function Ny(r){return typeof FormData<"u"&&r instanceof FormData}function Tk(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var sl=class r{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,t,i){this.url=e,this.method=n.toUpperCase();let o;if(Mk(this.method)||i?(this.body=t!==void 0?t:null,o=i):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Jt,this.context??=new im,!this.params)this.params=new So,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),c=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+c+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Fy(this.body)||Oy(this.body)||Ny(this.body)||Tk(this.body)?this.body:this.body instanceof So?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ny(this.body)?null:Oy(this.body)?this.body.type||null:Fy(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof So?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let e=n.method||this.method,t=n.url||this.url,i=n.responseType||this.responseType,o=n.transferCache??this.transferCache,a=n.body!==void 0?n.body:this.body,s=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress,l=n.headers||this.headers,d=n.params||this.params,u=n.context??this.context;return n.setHeaders!==void 0&&(l=Object.keys(n.setHeaders).reduce((h,f)=>h.set(f,n.setHeaders[f]),l)),n.setParams&&(d=Object.keys(n.setParams).reduce((h,f)=>h.set(f,n.setParams[f]),d)),new r(e,t,a,{params:d,headers:l,context:u,reportProgress:c,responseType:i,withCredentials:s,transferCache:o})}},ko=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(ko||{}),ll=class{headers;status;statusText;url;ok;type;constructor(n,e=200,t="OK"){this.headers=n.headers||new Jt,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||t,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Cu=class r extends ll{constructor(n={}){super(n)}type=ko.ResponseHeader;clone(n={}){return new r({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},dl=class r extends ll{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=ko.Response;clone(n={}){return new r({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Eo=class extends ll{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},zy=200,Fk=204;function nm(r,n){return{body:n,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var Yi=(()=>{class r{handler;constructor(e){this.handler=e}request(e,t,i={}){let o;if(e instanceof sl)o=e;else{let c;i.headers instanceof Jt?c=i.headers:c=new Jt(i.headers);let l;i.params&&(i.params instanceof So?l=i.params:l=new So({fromObject:i.params})),o=new sl(e,t,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=be(o).pipe(yo(c=>this.handler.handle(c)));if(e instanceof sl||i.observe==="events")return a;let s=a.pipe(Ct(c=>c instanceof dl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(He(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return s.pipe(He(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return s.pipe(He(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return s.pipe(He(c=>c.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:new So().append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,i={}){return this.request("PATCH",e,nm(i,t))}post(e,t,i={}){return this.request("POST",e,nm(i,t))}put(e,t,i={}){return this.request("PUT",e,nm(i,t))}static \u0275fac=function(t){return new(t||r)(Ae(cl))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Ok=/^\)\]\}',?\n/,Nk="X-Request-URL";function Py(r){if(r.url)return r.url;let n=Nk.toLocaleLowerCase();return r.headers.get(n)}var Pk=(()=>{class r{fetchImpl=x(om,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=x(Le);handle(e){return new fi(t=>{let i=new AbortController;return this.doRequest(e,i.signal,t).then(am,o=>t.error(new Eo({error:o}))),()=>i.abort()})}doRequest(e,t,i){return at(this,null,function*(){let o=this.createRequestInit(e),a;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,J({signal:t},o)));Lk(f),i.next({type:ko.Sent}),a=yield f}catch(f){i.error(new Eo({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}));return}let s=new Jt(a.headers),c=a.statusText,l=Py(a)??e.urlWithParams,d=a.status,u=null;if(e.reportProgress&&i.next(new Cu({headers:s,status:d,statusText:c,url:l})),a.body){let f=a.headers.get("content-length"),p=[],m=a.body.getReader(),g=0,v,_,y=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>at(this,null,function*(){for(;;){let{done:w,value:C}=yield m.read();if(w)break;if(p.push(C),g+=C.length,e.reportProgress){_=e.responseType==="text"?(_??"")+(v??=new TextDecoder).decode(C,{stream:!0}):void 0;let A=()=>i.next({type:ko.DownloadProgress,total:f?+f:void 0,loaded:g,partialText:_});y?y.run(A):A()}}}));let b=this.concatChunks(p,g);try{let w=a.headers.get("Content-Type")??"";u=this.parseBody(e,b,w)}catch(w){i.error(new Eo({error:w,headers:new Jt(a.headers),status:a.status,statusText:a.statusText,url:Py(a)??e.urlWithParams}));return}}d===0&&(d=u?zy:0),d>=200&&d<300?(i.next(new dl({body:u,headers:s,status:d,statusText:c,url:l})),i.complete()):i.error(new Eo({error:u,headers:s,status:d,statusText:c,url:l}))})}parseBody(e,t,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(t).replace(Ok,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(t);case"blob":return new Blob([t],{type:i});case"arraybuffer":return t.buffer}}createRequestInit(e){let t={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,a)=>t[o]=a.join(",")),e.headers.has("Accept")||(t.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(t["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:t,credentials:i}}concatChunks(e,t){let i=new Uint8Array(t),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),om=class{};function am(){}function Lk(r){r.then(am,am)}function Bk(r,n){return n(r)}function Vk(r,n,e){return(t,i)=>Cr(e,()=>n(t,o=>r(o,i)))}var Uy=new ne(""),zk=new ne(""),Uk=new ne("",{providedIn:"root",factory:()=>!0});var Ly=(()=>{class r extends cl{backend;injector;chain=null;pendingTasks=x(ou);contributeToStability=x(Uk);constructor(e,t){super(),this.backend=e,this.injector=t}handle(e){if(this.chain===null){let t=Array.from(new Set([...this.injector.get(Uy),...this.injector.get(zk,[])]));this.chain=t.reduceRight((i,o)=>Vk(i,o,this.injector),Bk)}if(this.contributeToStability){let t=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(xo(()=>this.pendingTasks.remove(t)))}else return this.chain(e,t=>this.backend.handle(t))}static \u0275fac=function(t){return new(t||r)(Ae(wu),Ae(zr))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();var jk=/^\)\]\}',?\n/;function Wk(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var By=(()=>{class r{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Dt(-2800,!1);let t=this.xhrFactory;return(t.\u0275loadImpl?Dn(t.\u0275loadImpl()):be(null)).pipe(En(()=>new fi(o=>{let a=t.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((m,g)=>a.setRequestHeader(m,g.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let m=e.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(e.responseType){let m=e.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let s=e.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",g=new Jt(a.getAllResponseHeaders()),v=Wk(a)||e.url;return c=new Cu({headers:g,status:a.status,statusText:m,url:v}),c},d=()=>{let{headers:m,status:g,statusText:v,url:_}=l(),y=null;g!==Fk&&(y=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=y?zy:0);let b=g>=200&&g<300;if(e.responseType==="json"&&typeof y=="string"){let w=y;y=y.replace(jk,"");try{y=y!==""?JSON.parse(y):null}catch(C){y=w,b&&(b=!1,y={error:C,text:y})}}b?(o.next(new dl({body:y,headers:m,status:g,statusText:v,url:_||void 0})),o.complete()):o.error(new Eo({error:y,headers:m,status:g,statusText:v,url:_||void 0}))},u=m=>{let{url:g}=l(),v=new Eo({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});o.error(v)},h=!1,f=m=>{h||(o.next(l()),h=!0);let g={type:ko.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),o.next(g)},p=m=>{let g={type:ko.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),o.next(g)};return a.addEventListener("load",d),a.addEventListener("error",u),a.addEventListener("timeout",u),a.addEventListener("abort",u),e.reportProgress&&(a.addEventListener("progress",f),s!==null&&a.upload&&a.upload.addEventListener("progress",p)),a.send(s),o.next({type:ko.Sent}),()=>{a.removeEventListener("error",u),a.removeEventListener("abort",u),a.removeEventListener("load",d),a.removeEventListener("timeout",u),e.reportProgress&&(a.removeEventListener("progress",f),s!==null&&a.upload&&a.upload.removeEventListener("progress",p)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(t){return new(t||r)(Ae(yu))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),jy=new ne(""),Hk="XSRF-TOKEN",Gk=new ne("",{providedIn:"root",factory:()=>Hk}),qk="X-XSRF-TOKEN",Yk=new ne("",{providedIn:"root",factory:()=>qk}),Du=class{},$k=(()=>{class r{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,t,i){this.doc=e,this.platform=t,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=vu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(t){return new(t||r)(Ae(Ge),Ae(Hi),Ae(Gk))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function Kk(r,n){let e=r.url.toLowerCase();if(!x(jy)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(r);let t=x(Du).getToken(),i=x(Yk);return t!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,t)})),n(r)}function Wy(...r){let n=[Yi,By,Ly,{provide:cl,useExisting:Ly},{provide:wu,useFactory:()=>x(Pk,{optional:!0})??x(By)},{provide:Uy,useValue:Kk,multi:!0},{provide:jy,useValue:!0},{provide:Du,useClass:$k}];for(let e of r)n.push(...e.\u0275providers);return da(n)}var cm=class extends _y{supportsDOMEvents=!0},lm=class r extends cm{static makeCurrent(){by(new r)}onAndCancel(n,e,t){return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Qk();return e==null?null:Zk(e)}resetBaseElement(){ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return vu(document.cookie,n)}},ul=null;function Qk(){return ul=ul||document.querySelector("base"),ul?ul.getAttribute("href"):null}function Zk(r){return new URL(r,document.baseURI).pathname}var Jk=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),dm=new ne(""),$y=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,t){this._zone=t,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,t,i){return this._findPluginFor(t).addEventListener(e,t,i)}getZone(){return this._zone}_findPluginFor(e){let t=this._eventNameToPlugin.get(e);if(t)return t;if(t=this._plugins.find(o=>o.supports(e)),!t)throw new Dt(5101,!1);return this._eventNameToPlugin.set(e,t),t}static \u0275fac=function(t){return new(t||r)(Ae(dm),Ae(Le))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Su=class{_doc;constructor(n){this._doc=n}manager},um="ng-app-id";function Hy(r){for(let n of r)n.remove()}function Gy(r,n){let e=n.createElement("style");return e.textContent=r,e}function eI(r,n,e){let t=r.head?.querySelectorAll(`style[${um}="${n}"]`);if(t)for(let i of t)i.textContent&&(i.removeAttribute(um),e.set(i.textContent,{usage:0,elements:[i]}))}function hm(r,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var Ky=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,t,i,o={}){this.doc=e,this.appId=t,this.nonce=i,this.isServer=_u(o),eI(e,t,this.inline),this.hosts.add(e.head)}addStyles(e,t){for(let i of e)this.addUsage(i,this.inline,Gy);t?.forEach(i=>this.addUsage(i,this.external,hm))}removeStyles(e,t){for(let i of e)this.removeUsage(i,this.inline);t?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,t,i){let o=t.get(e);o?o.usage++:t.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(e,this.doc)))})}removeUsage(e,t){let i=t.get(e);i&&(i.usage--,i.usage<=0&&(Hy(i.elements),t.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Hy(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[t,{elements:i}]of this.inline)i.push(this.addElement(e,Gy(t,this.doc)));for(let[t,{elements:i}]of this.external)i.push(this.addElement(e,hm(t,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,t){return this.nonce&&t.setAttribute("nonce",this.nonce),this.isServer&&t.setAttribute(um,this.appId),e.appendChild(t)}static \u0275fac=function(t){return new(t||r)(Ae(Ge),Ae(us),Ae(tl,8),Ae(Hi))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),sm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mm=/%COMP%/g,Xy="%COMP%",tI=`_nghost-${Xy}`,nI=`_ngcontent-${Xy}`,rI=!0,iI=new ne("",{providedIn:"root",factory:()=>rI});function oI(r){return nI.replace(mm,r)}function aI(r){return tI.replace(mm,r)}function Qy(r,n){return n.map(e=>e.replace(mm,r))}var ku=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,t,i,o,a,s,c,l=null){this.eventManager=e,this.sharedStylesHost=t,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=c,this.nonce=l,this.platformIsServer=_u(s),this.defaultRenderer=new hl(e,a,c,this.platformIsServer)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;this.platformIsServer&&t.encapsulation===nl.ShadowDom&&(t=dt(J({},t),{encapsulation:nl.Emulated}));let i=this.getOrCreateRenderer(e,t);return i instanceof Iu?i.applyToHost(e):i instanceof fl&&i.applyStyles(),i}getOrCreateRenderer(e,t){let i=this.rendererByCompId,o=i.get(t.id);if(!o){let a=this.doc,s=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(t.encapsulation){case nl.Emulated:o=new Iu(c,l,t,this.appId,d,a,s,u);break;case nl.ShadowDom:return new fm(c,l,e,t,a,s,this.nonce,u);default:o=new fl(c,l,t,d,a,s,u);break}i.set(t.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(t){return new(t||r)(Ae($y),Ae(Ky),Ae(us),Ae(iI),Ae(Ge),Ae(Hi),Ae(Le),Ae(tl))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),hl=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,t,i){this.eventManager=n,this.doc=e,this.ngZone=t,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(sm[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(qy(n)?n.content:n).appendChild(e)}insertBefore(n,e,t){n&&(qy(n)?n.content:n).insertBefore(e,t)}removeChild(n,e){e.remove()}selectRootElement(n,e){let t=typeof n=="string"?this.doc.querySelector(n):n;if(!t)throw new Dt(-5104,!1);return e||(t.textContent=""),t}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,t,i){if(i){e=i+":"+e;let o=sm[i];o?n.setAttributeNS(o,e,t):n.setAttribute(e,t)}else n.setAttribute(e,t)}removeAttribute(n,e,t){if(t){let i=sm[t];i?n.removeAttributeNS(i,e):n.removeAttribute(`${t}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,t,i){i&(rl.DashCase|rl.Important)?n.style.setProperty(e,t,i&rl.Important?"important":""):n.style[e]=t}removeStyle(n,e,t){t&rl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,t){n!=null&&(n[e]=t)}setValue(n,e){n.nodeValue=e}listen(n,e,t){if(typeof n=="string"&&(n=bs().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(t))}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function qy(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var fm=class extends hl{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,t,i,o,a,s,c){super(n,o,a,c),this.sharedStylesHost=e,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Qy(i.id,i.styles);for(let u of l){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=u,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let u of d){let h=hm(u,o);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,t){return super.insertBefore(this.nodeOrShadowRoot(n),e,t)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fl=class extends hl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,t,i,o,a,s,c){super(n,o,a,s),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=c?Qy(c,t.styles):t.styles,this.styleUrls=t.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Iu=class extends fl{contentAttr;hostAttr;constructor(n,e,t,i,o,a,s,c){let l=i+"-"+t.id;super(n,e,t,o,a,s,c,l),this.contentAttr=oI(l),this.hostAttr=aI(l)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let t=super.createElement(n,e);return super.setAttribute(t,this.contentAttr,""),t}},sI=(()=>{class r extends Su{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,i){return e.addEventListener(t,i,!1),()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,i){return e.removeEventListener(t,i)}static \u0275fac=function(t){return new(t||r)(Ae(Ge))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),Yy=["alt","control","meta","shift"],cI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lI={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},dI=(()=>{class r extends Su{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,t,i){let o=r.parseEventName(t),a=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bs().onAndCancel(e,o.domEventName,a))}static parseEventName(e){let t=e.toLowerCase().split("."),i=t.shift();if(t.length===0||!(i==="keydown"||i==="keyup"))return null;let o=r._normalizeKey(t.pop()),a="",s=t.indexOf("code");if(s>-1&&(t.splice(s,1),a="code."),Yy.forEach(l=>{let d=t.indexOf(l);d>-1&&(t.splice(d,1),a+=l+".")}),a+=o,t.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(e,t){let i=cI[e.key]||e.key,o="";return t.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yy.forEach(a=>{if(a!==i){let s=lI[a];s(e)&&(o+=a+".")}}),o+=i,o===t)}static eventCallback(e,t,i){return o=>{r.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>t(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(t){return new(t||r)(Ae(Ge))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function Zy(r,n){return gy(J({rootComponent:r},uI(n)))}function uI(r){return{appProviders:[...gI,...r?.providers??[]],platformProviders:mI}}function hI(){lm.makeCurrent()}function fI(){return new ha}function pI(){return q_(document),document}var mI=[{provide:Hi,useValue:ky},{provide:Y_,useValue:hI,multi:!0},{provide:Ge,useFactory:pI,deps:[]}];var gI=[{provide:W_,useValue:"root"},{provide:ha,useFactory:fI,deps:[]},{provide:dm,useClass:sI,multi:!0,deps:[Ge,Le,Hi]},{provide:dm,useClass:dI,multi:!0,deps:[Ge]},ku,Ky,$y,{provide:su,useExisting:ku},{provide:yu,useClass:Jk,deps:[]},[]];var Jy=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(t){return new(t||r)(Ae(Ge))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var gm=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:function(t){let i=null;return t?i=new(t||r):i=Ae(vI),i},providedIn:"root"})}return r})(),vI=(()=>{class r extends gm{_doc;constructor(e){super(),this._doc=e}sanitize(e,t){if(t==null)return null;switch(e){case lr.NONE:return t;case lr.HTML:return fs(t,"HTML")?hs(t):ey(this._doc,String(t)).toString();case lr.STYLE:return fs(t,"Style")?hs(t):t;case lr.SCRIPT:if(fs(t,"Script"))return hs(t);throw new Dt(5200,!1);case lr.URL:return fs(t,"URL")?hs(t):J_(String(t));case lr.RESOURCE_URL:if(fs(t,"ResourceURL"))return hs(t);throw new Dt(5201,!1);default:throw new Dt(5202,!1)}}bypassSecurityTrustHtml(e){return $_(e)}bypassSecurityTrustStyle(e){return K_(e)}bypassSecurityTrustScript(e){return X_(e)}bypassSecurityTrustUrl(e){return Q_(e)}bypassSecurityTrustResourceUrl(e){return Z_(e)}static \u0275fac=function(t){return new(t||r)(Ae(Ge))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var rt="primary",Al=Symbol("RouteTitle"),xm=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ds(r){return new xm(r)}function bI(r,n,e){let t=e.path.split("/");if(t.length>r.length||e.pathMatch==="full"&&(n.hasChildren()||t.length<r.length))return null;let i={};for(let o=0;o<t.length;o++){let a=t[o],s=r[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:r.slice(0,t.length),posParams:i}}function _I(r,n){if(r.length!==n.length)return!1;for(let e=0;e<r.length;++e)if(!bi(r[e],n[e]))return!1;return!0}function bi(r,n){let e=r?wm(r):void 0,t=n?wm(n):void 0;if(!e||!t||e.length!=t.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!u0(r[i],n[i]))return!1;return!0}function wm(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function u0(r,n){if(Array.isArray(r)&&Array.isArray(n)){if(r.length!==n.length)return!1;let e=[...r].sort(),t=[...n].sort();return e.every((i,o)=>t[o]===i)}else return r===n}function h0(r){return r.length>0?r[r.length-1]:null}function Ao(r){return ca(r)?r:lu(r)?Dn(Promise.resolve(r)):be(r)}var yI={exact:p0,subset:m0},f0={exact:xI,subset:wI,ignored:()=>!0};function t0(r,n,e){return yI[e.paths](r.root,n.root,e.matrixParams)&&f0[e.queryParams](r.queryParams,n.queryParams)&&!(e.fragment==="exact"&&r.fragment!==n.fragment)}function xI(r,n){return bi(r,n)}function p0(r,n,e){if(!_a(r.segments,n.segments)||!Mu(r.segments,n.segments,e)||r.numberOfChildren!==n.numberOfChildren)return!1;for(let t in n.children)if(!r.children[t]||!p0(r.children[t],n.children[t],e))return!1;return!0}function wI(r,n){return Object.keys(n).length<=Object.keys(r).length&&Object.keys(n).every(e=>u0(r[e],n[e]))}function m0(r,n,e){return g0(r,n,n.segments,e)}function g0(r,n,e,t){if(r.segments.length>e.length){let i=r.segments.slice(0,e.length);return!(!_a(i,e)||n.hasChildren()||!Mu(i,e,t))}else if(r.segments.length===e.length){if(!_a(r.segments,e)||!Mu(r.segments,e,t))return!1;for(let i in n.children)if(!r.children[i]||!m0(r.children[i],n.children[i],t))return!1;return!0}else{let i=e.slice(0,r.segments.length),o=e.slice(r.segments.length);return!_a(r.segments,i)||!Mu(r.segments,i,t)||!r.children[rt]?!1:g0(r.children[rt],n,o,t)}}function Mu(r,n,e){return n.every((t,i)=>f0[e](r[i].parameters,t.parameters))}var Ki=class{root;queryParams;fragment;_queryParamMap;constructor(n=new xt([],{}),e={},t=null){this.root=n,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){return EI.serialize(this)}},xt=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tu(this)}},ba=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Ds(this.parameters),this._parameterMap}toString(){return b0(this)}};function CI(r,n){return _a(r,n)&&r.every((e,t)=>bi(e.parameters,n[t].parameters))}function _a(r,n){return r.length!==n.length?!1:r.every((e,t)=>e.path===n[t].path)}function DI(r,n){let e=[];return Object.entries(r.children).forEach(([t,i])=>{t===rt&&(e=e.concat(n(i,t)))}),Object.entries(r.children).forEach(([t,i])=>{t!==rt&&(e=e.concat(n(i,t)))}),e}var Rl=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>new Es,providedIn:"root"})}return r})(),Es=class{parse(n){let e=new Dm(n);return new Ki(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${pl(n.root,!0)}`,t=II(n.queryParams),i=typeof n.fragment=="string"?`#${SI(n.fragment)}`:"";return`${e}${t}${i}`}},EI=new Es;function Tu(r){return r.segments.map(n=>b0(n)).join("/")}function pl(r,n){if(!r.hasChildren())return Tu(r);if(n){let e=r.children[rt]?pl(r.children[rt],!1):"",t=[];return Object.entries(r.children).forEach(([i,o])=>{i!==rt&&t.push(`${i}:${pl(o,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=DI(r,(t,i)=>i===rt?[pl(r.children[rt],!1)]:[`${i}:${pl(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[rt]!=null?`${Tu(r)}/${e[0]}`:`${Tu(r)}/(${e.join("//")})`}}function v0(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Au(r){return v0(r).replace(/%3B/gi,";")}function SI(r){return encodeURI(r)}function Cm(r){return v0(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fu(r){return decodeURIComponent(r)}function n0(r){return Fu(r.replace(/\+/g,"%20"))}function b0(r){return`${Cm(r.path)}${kI(r.parameters)}`}function kI(r){return Object.entries(r).map(([n,e])=>`;${Cm(n)}=${Cm(e)}`).join("")}function II(r){let n=Object.entries(r).map(([e,t])=>Array.isArray(t)?t.map(i=>`${Au(e)}=${Au(i)}`).join("&"):`${Au(e)}=${Au(t)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var AI=/^[^\/()?;#]+/;function vm(r){let n=r.match(AI);return n?n[0]:""}var RI=/^[^\/()?;=#]+/;function MI(r){let n=r.match(RI);return n?n[0]:""}var TI=/^[^=?&#]+/;function FI(r){let n=r.match(TI);return n?n[0]:""}var OI=/^[^&#]+/;function NI(r){let n=r.match(OI);return n?n[0]:""}var Dm=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(t[rt]=new xt(n,e)),t}parseSegment(){let n=vm(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Dt(4009,!1);return this.capture(n),new ba(Fu(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=MI(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let i=vm(this.remaining);i&&(t=i,this.capture(t))}n[Fu(e)]=Fu(t)}parseQueryParam(n){let e=FI(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let a=NI(this.remaining);a&&(t=a,this.capture(t))}let i=n0(e),o=n0(t);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=vm(this.remaining),i=this.remaining[t.length];if(i!=="/"&&i!==")"&&i!==";")throw new Dt(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=rt);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[rt]:new xt([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Dt(4011,!1)}};function _0(r){return r.segments.length>0?new xt([],{[rt]:r}):r}function y0(r){let n={};for(let[t,i]of Object.entries(r.children)){let o=y0(i);if(t===rt&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[t]=o)}let e=new xt(r.segments,n);return PI(e)}function PI(r){if(r.numberOfChildren===1&&r.children[rt]){let n=r.children[rt];return new xt(r.segments.concat(n.segments),n.children)}return r}function yl(r){return r instanceof Ki}function LI(r,n,e=null,t=null){let i=x0(r);return w0(i,n,e,t)}function x0(r){let n;function e(o){let a={};for(let c of o.children){let l=e(c);a[c.outlet]=l}let s=new xt(o.url,a);return o===r&&(n=s),s}let t=e(r.root),i=_0(t);return n??i}function w0(r,n,e,t){let i=r;for(;i.parent;)i=i.parent;if(n.length===0)return bm(i,i,i,e,t);let o=BI(n);if(o.toRoot())return bm(i,i,new xt([],{}),e,t);let a=VI(o,i,r),s=a.processChildren?vl(a.segmentGroup,a.index,o.commands):D0(a.segmentGroup,a.index,o.commands);return bm(i,a.segmentGroup,s,e,t)}function Ou(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function xl(r){return typeof r=="object"&&r!=null&&r.outlets}function bm(r,n,e,t,i){let o={};t&&Object.entries(t).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let a;r===n?a=e:a=C0(r,n,e);let s=_0(y0(a));return new Ki(s,o,i)}function C0(r,n,e){let t={};return Object.entries(r.children).forEach(([i,o])=>{o===n?t[i]=e:t[i]=C0(o,n,e)}),new xt(r.segments,t)}var Nu=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,t){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=t,n&&t.length>0&&Ou(t[0]))throw new Dt(4003,!1);let i=t.find(xl);if(i&&i!==h0(t))throw new Dt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BI(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Nu(!0,0,r);let n=0,e=!1,t=r.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?e=!0:s===".."?n++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new Nu(e,n,t)}var xs=class{segmentGroup;processChildren;index;constructor(n,e,t){this.segmentGroup=n,this.processChildren=e,this.index=t}};function VI(r,n,e){if(r.isAbsolute)return new xs(n,!0,0);if(!e)return new xs(n,!1,NaN);if(e.parent===null)return new xs(e,!0,0);let t=Ou(r.commands[0])?0:1,i=e.segments.length-1+t;return zI(e,i,r.numberOfDoubleDots)}function zI(r,n,e){let t=r,i=n,o=e;for(;o>i;){if(o-=i,t=t.parent,!t)throw new Dt(4005,!1);i=t.segments.length}return new xs(t,!1,i-o)}function UI(r){return xl(r[0])?r[0].outlets:{[rt]:r}}function D0(r,n,e){if(r??=new xt([],{}),r.segments.length===0&&r.hasChildren())return vl(r,n,e);let t=jI(r,n,e),i=e.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let o=new xt(r.segments.slice(0,t.pathIndex),{});return o.children[rt]=new xt(r.segments.slice(t.pathIndex),r.children),vl(o,0,i)}else return t.match&&i.length===0?new xt(r.segments,{}):t.match&&!r.hasChildren()?Em(r,n,e):t.match?vl(r,0,i):Em(r,n,e)}function vl(r,n,e){if(e.length===0)return new xt(r.segments,{});{let t=UI(e),i={};if(Object.keys(t).some(o=>o!==rt)&&r.children[rt]&&r.numberOfChildren===1&&r.children[rt].segments.length===0){let o=vl(r.children[rt],n,e);return new xt(r.segments,o.children)}return Object.entries(t).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=D0(r.children[o],n,a))}),Object.entries(r.children).forEach(([o,a])=>{t[o]===void 0&&(i[o]=a)}),new xt(r.segments,i)}}function jI(r,n,e){let t=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(t>=e.length)return o;let a=r.segments[i],s=e[t];if(xl(s))break;let c=`${s}`,l=t<e.length-1?e[t+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!i0(c,l,a))return o;t+=2}else{if(!i0(c,{},a))return o;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}function Em(r,n,e){let t=r.segments.slice(0,n),i=0;for(;i<e.length;){let o=e[i];if(xl(o)){let c=WI(o.outlets);return new xt(t,c)}if(i===0&&Ou(e[0])){let c=r.segments[n];t.push(new ba(c.path,r0(e[0]))),i++;continue}let a=xl(o)?o.outlets[rt]:`${o}`,s=i<e.length-1?e[i+1]:null;a&&s&&Ou(s)?(t.push(new ba(a,r0(s))),i+=2):(t.push(new ba(a,{})),i++)}return new xt(t,{})}function WI(r){let n={};return Object.entries(r).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(n[e]=Em(new xt([],{}),0,t))}),n}function r0(r){let n={};return Object.entries(r).forEach(([e,t])=>n[e]=`${t}`),n}function i0(r,n,e){return r==e.path&&bi(n,e.parameters)}var bl="imperative",vn=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(vn||{}),Er=class{id;url;constructor(n,e){this.id=n,this.url=e}},Ss=class extends Er{type=vn.NavigationStart;navigationTrigger;restoredState;constructor(n,e,t="imperative",i=null){super(n,e),this.navigationTrigger=t,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xi=class extends Er{urlAfterRedirects;type=vn.NavigationEnd;constructor(n,e,t){super(n,e),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pr=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(pr||{}),Pu=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(Pu||{}),$i=class extends Er{reason;code;type=vn.NavigationCancel;constructor(n,e,t,i){super(n,e),this.reason=t,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Io=class extends Er{reason;code;type=vn.NavigationSkipped;constructor(n,e,t,i){super(n,e),this.reason=t,this.code=i}},wl=class extends Er{error;target;type=vn.NavigationError;constructor(n,e,t,i){super(n,e),this.error=t,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lu=class extends Er{urlAfterRedirects;state;type=vn.RoutesRecognized;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends Er{urlAfterRedirects;state;type=vn.GuardsCheckStart;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},km=class extends Er{urlAfterRedirects;state;shouldActivate;type=vn.GuardsCheckEnd;constructor(n,e,t,i,o){super(n,e),this.urlAfterRedirects=t,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Im=class extends Er{urlAfterRedirects;state;type=vn.ResolveStart;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class extends Er{urlAfterRedirects;state;type=vn.ResolveEnd;constructor(n,e,t,i){super(n,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rm=class{route;type=vn.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mm=class{route;type=vn.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tm=class{snapshot;type=vn.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fm=class{snapshot;type=vn.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{snapshot;type=vn.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{snapshot;type=vn.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bu=class{routerEvent;position;anchor;type=vn.Scroll;constructor(n,e,t){this.routerEvent=n,this.position=e,this.anchor=t}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Cl=class{},ks=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function HI(r,n){return r.providers&&!r._injector&&(r._injector=Qp(r.providers,n,`Route: ${r.path}`)),r._injector??n}function Yr(r){return r.outlet||rt}function GI(r,n){let e=r.filter(t=>Yr(t)===n);return e.push(...r.filter(t=>Yr(t)!==n)),e}function Ml(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let n=r.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Pm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ml(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Tl(this.rootInjector)}},Tl=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,t){let i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Pm(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(t){return new(t||r)(Ae(zr))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Vu=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=Lm(n,this._root);return e?e.children.map(t=>t.value):[]}firstChild(n){let e=Lm(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=Bm(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Bm(n,this._root).map(e=>e.value)}};function Lm(r,n){if(r===n.value)return n;for(let e of n.children){let t=Lm(r,e);if(t)return t}return null}function Bm(r,n){if(r===n.value)return[n];for(let e of n.children){let t=Bm(r,e);if(t.length)return t.unshift(n),t}return[]}var fr=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function ys(r){let n={};return r&&r.children.forEach(e=>n[e.value.outlet]=e),n}var zu=class extends Vu{snapshot;constructor(n,e){super(n),this.snapshot=e,Ym(this,n)}toString(){return this.snapshot.toString()}};function E0(r){let n=qI(r),e=new mn([new ba("",{})]),t=new mn({}),i=new mn({}),o=new mn({}),a=new mn(""),s=new ya(e,t,o,a,i,rt,r,n.root);return s.snapshot=n.root,new zu(new fr(s,[]),n)}function qI(r){let n={},e={},t={},i="",o=new ws([],n,t,i,e,rt,r,null,{});return new ju("",new fr(o,[]))}var ya=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,t,i,o,a,s,c){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(He(l=>l[Al]))??be(void 0),this.url=n,this.params=e,this.queryParams=t,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(He(n=>Ds(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(He(n=>Ds(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Uu(r,n,e="emptyOnly"){let t,{routeConfig:i}=r;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?t={params:J(J({},n.params),r.params),data:J(J({},n.data),r.data),resolve:J(J(J(J({},r.data),n.data),i?.data),r._resolvedData)}:t={params:J({},r.params),data:J({},r.data),resolve:J(J({},r.data),r._resolvedData??{})},i&&k0(i)&&(t.resolve[Al]=i.title),t}var ws=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Al]}constructor(n,e,t,i,o,a,s,c,l){this.url=n,this.params=e,this.queryParams=t,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ds(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},ju=class extends Vu{url;constructor(n,e){super(e),this.url=n,Ym(this,e)}toString(){return S0(this._root)}};function Ym(r,n){n.value._routerState=r,n.children.forEach(e=>Ym(r,e))}function S0(r){let n=r.children.length>0?` { ${r.children.map(S0).join(", ")} } `:"";return`${r.value}${n}`}function _m(r){if(r.snapshot){let n=r.snapshot,e=r._futureSnapshot;r.snapshot=e,bi(n.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),bi(n.params,e.params)||r.paramsSubject.next(e.params),_I(n.url,e.url)||r.urlSubject.next(e.url),bi(n.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Vm(r,n){let e=bi(r.params,n.params)&&CI(r.url,n.url),t=!r.parent!=!n.parent;return e&&!t&&(!r.parent||Vm(r.parent,n.parent))}function k0(r){return typeof r.title=="string"||r.title===null}var YI=new ne(""),$m=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=rt;activateEvents=new fe;deactivateEvents=new fe;attachEvents=new fe;detachEvents=new fe;routerOutletData=G_(void 0);parentContexts=x(Tl);location=x(Hn);changeDetector=x(St);inputBinder=x(qu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:i}=e.name;if(t)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Dt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Dt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Dt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Dt(4013,!1);this._activatedRoute=e;let i=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new zm(e,s,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[At]})}return r})(),zm=class r{route;childContexts;parent;outletData;__ngOutletInjector(n){return new r(this.route,this.childContexts,n,this.outletData)}constructor(n,e,t,i){this.route=n,this.childContexts=e,this.parent=t,this.outletData=i}get(n,e){return n===ya?this.route:n===Tl?this.childContexts:n===YI?this.outletData:this.parent.get(n,e)}},qu=new ne(""),o0=(()=>{class r{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:t}=e,i=ds([t.queryParams,t.params,t.data]).pipe(En(([o,a,s],c)=>(s=J(J(J({},o),a),s),c===0?be(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==t||t.component===null){this.unsubscribeFromRouteData(e);return}let a=vy(t.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function $I(r,n,e){let t=Dl(r,n._root,e?e._root:void 0);return new zu(t,n)}function Dl(r,n,e){if(e&&r.shouldReuseRoute(n.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=n.value;let i=KI(r,n,e);return new fr(t,i)}else{if(r.shouldAttach(n.value)){let o=r.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>Dl(r,s)),a}}let t=XI(n.value),i=n.children.map(o=>Dl(r,o));return new fr(t,i)}}function KI(r,n,e){return n.children.map(t=>{for(let i of e.children)if(r.shouldReuseRoute(t.value,i.value.snapshot))return Dl(r,t,i);return Dl(r,t)})}function XI(r){return new ya(new mn(r.url),new mn(r.params),new mn(r.queryParams),new mn(r.fragment),new mn(r.data),r.outlet,r.component,r)}var El=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},I0="ngNavigationCancelingError";function Wu(r,n){let{redirectTo:e,navigationBehaviorOptions:t}=yl(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=A0(!1,pr.Redirect);return i.url=e,i.navigationBehaviorOptions=t,i}function A0(r,n){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[I0]=!0,e.cancellationCode=n,e}function QI(r){return R0(r)&&yl(r.url)}function R0(r){return!!r&&r[I0]}var ZI=(r,n,e,t)=>He(i=>(new Um(n,i.targetRouterState,i.currentRouterState,e,t).activate(r),i)),Um=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,t,i,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=t,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,n),_m(this.futureState.root),this.activateChildRoutes(e,t,n)}deactivateChildRoutes(n,e,t){let i=ys(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],t),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(n,e,t){let i=n.value,o=e?e.value:null;if(i===o)if(i.component){let a=t.getContext(i.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,t);else o&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let t=e.getContext(n.value.outlet),i=t&&n.value.component?t.children:e,o=ys(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(t&&t.outlet){let a=t.outlet.detach(),s=t.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let t=e.getContext(n.value.outlet),i=t&&n.value.component?t.children:e,o=ys(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(n,e,t){let i=ys(e);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],t),this.forwardEvent(new Nm(o.value.snapshot))}),n.children.length&&this.forwardEvent(new Fm(n.value.snapshot))}activateRoutes(n,e,t){let i=n.value,o=e?e.value:null;if(_m(i),i===o)if(i.component){let a=t.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,t);else if(i.component){let a=t.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),_m(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,t)}},Hu=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Cs=class{component;route;constructor(n,e){this.component=n,this.route=e}};function JI(r,n,e){let t=r._root,i=n?n._root:null;return ml(t,i,e,[t.value])}function e2(r){let n=r.routeConfig?r.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:r,guards:n}}function As(r,n){let e=Symbol(),t=n.get(r,e);return t===e?typeof r=="function"&&!j_(r)?r:n.get(r):t}function ml(r,n,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ys(n);return r.children.forEach(a=>{t2(a,o[a.value.outlet],e,t.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>_l(s,e.getContext(a),i)),i}function t2(r,n,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,a=n?n.value:null,s=e?e.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=n2(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Hu(t)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?ml(r,n,s?s.children:null,t,i):ml(r,n,e,t,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Cs(s.outlet.component,a))}else a&&_l(n,s,i),i.canActivateChecks.push(new Hu(t)),o.component?ml(r,null,s?s.children:null,t,i):ml(r,null,e,t,i);return i}function n2(r,n,e){if(typeof e=="function")return e(r,n);switch(e){case"pathParamsChange":return!_a(r.url,n.url);case"pathParamsOrQueryParamsChange":return!_a(r.url,n.url)||!bi(r.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vm(r,n)||!bi(r.queryParams,n.queryParams);case"paramsChange":default:return!Vm(r,n)}}function _l(r,n,e){let t=ys(r),i=r.value;Object.entries(t).forEach(([o,a])=>{i.component?n?_l(a,n.children.getContext(o),e):_l(a,null,e):_l(a,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Cs(n.outlet.component,i)):e.canDeactivateChecks.push(new Cs(null,i)):e.canDeactivateChecks.push(new Cs(null,i))}function Fl(r){return typeof r=="function"}function r2(r){return typeof r=="boolean"}function i2(r){return r&&Fl(r.canLoad)}function o2(r){return r&&Fl(r.canActivate)}function a2(r){return r&&Fl(r.canActivateChild)}function s2(r){return r&&Fl(r.canDeactivate)}function c2(r){return r&&Fl(r.canMatch)}function M0(r){return r instanceof P_||r?.name==="EmptyError"}var Ru=Symbol("INITIAL_VALUE");function Is(){return En(r=>ds(r.map(n=>n.pipe(un(1),gn(Ru)))).pipe(He(n=>{for(let e of n)if(e!==!0){if(e===Ru)return Ru;if(e===!1||l2(e))return e}return!0}),Ct(n=>n!==Ru),un(1)))}function l2(r){return yl(r)||r instanceof El}function d2(r,n){return cr(e=>{let{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?be(dt(J({},e),{guardsResult:!0})):u2(a,t,i,r).pipe(cr(s=>s&&r2(s)?h2(t,o,r,n):be(s)),He(s=>dt(J({},e),{guardsResult:s})))})}function u2(r,n,e,t){return Dn(r).pipe(cr(i=>v2(i.component,i.route,e,n,t)),wo(i=>i!==!0,!0))}function h2(r,n,e,t){return Dn(n).pipe(yo(i=>eu(p2(i.route.parent,t),f2(i.route,t),g2(r,i.path,e),m2(r,i.route,e))),wo(i=>i!==!0,!0))}function f2(r,n){return r!==null&&n&&n(new Om(r)),be(!0)}function p2(r,n){return r!==null&&n&&n(new Tm(r)),be(!0)}function m2(r,n,e){let t=n.routeConfig?n.routeConfig.canActivate:null;if(!t||t.length===0)return be(!0);let i=t.map(o=>Wi(()=>{let a=Ml(n)??e,s=As(o,a),c=o2(s)?s.canActivate(n,r):Cr(a,()=>s(n,r));return Ao(c).pipe(wo())}));return be(i).pipe(Is())}function g2(r,n,e){let t=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>e2(a)).filter(a=>a!==null).map(a=>Wi(()=>{let s=a.guards.map(c=>{let l=Ml(a.node)??e,d=As(c,l),u=a2(d)?d.canActivateChild(t,r):Cr(l,()=>d(t,r));return Ao(u).pipe(wo())});return be(s).pipe(Is())}));return be(o).pipe(Is())}function v2(r,n,e,t,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return be(!0);let a=o.map(s=>{let c=Ml(n)??i,l=As(s,c),d=s2(l)?l.canDeactivate(r,n,e,t):Cr(c,()=>l(r,n,e,t));return Ao(d).pipe(wo())});return be(a).pipe(Is())}function b2(r,n,e,t){let i=n.canLoad;if(i===void 0||i.length===0)return be(!0);let o=i.map(a=>{let s=As(a,r),c=i2(s)?s.canLoad(n,e):Cr(r,()=>s(n,e));return Ao(c)});return be(o).pipe(Is(),T0(t))}function T0(r){return N_(Ve(n=>{if(typeof n!="boolean")throw Wu(r,n)}),He(n=>n===!0))}function _2(r,n,e,t){let i=n.canMatch;if(!i||i.length===0)return be(!0);let o=i.map(a=>{let s=As(a,r),c=c2(s)?s.canMatch(n,e):Cr(r,()=>s(n,e));return Ao(c)});return be(o).pipe(Is(),T0(t))}var Sl=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},kl=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function _s(r){return sa(new Sl(r))}function y2(r){return sa(new Dt(4e3,!1))}function x2(r){return sa(A0(!1,pr.GuardRejected))}var jm=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let t=[],i=e.root;for(;;){if(t=t.concat(i.segments),i.numberOfChildren===0)return be(t);if(i.numberOfChildren>1||!i.children[rt])return y2(`${n.redirectTo}`);i=i.children[rt]}}applyRedirectCommands(n,e,t,i,o){if(typeof e!="string"){let s=e,{queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,params:f,data:p,title:m}=i,g=Cr(o,()=>s({params:f,data:p,queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,title:m}));if(g instanceof Ki)throw new kl(g);e=g}let a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,t);if(e[0]==="/")throw new kl(a);return a}applyRedirectCreateUrlTree(n,e,t,i){let o=this.createSegmentGroup(n,e.root,t,i);return new Ki(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let t={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);t[i]=e[s]}else t[i]=o}),t}createSegmentGroup(n,e,t,i){let o=this.createSegments(n,e.segments,t,i),a={};return Object.entries(e.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(n,c,t,i)}),new xt(o,a)}createSegments(n,e,t,i){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,t))}findPosParam(n,e,t){let i=t[e.path.substring(1)];if(!i)throw new Dt(4001,!1);return i}findOrReturn(n,e){let t=0;for(let i of e){if(i.path===n.path)return e.splice(t),i;t++}return n}},Wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function w2(r,n,e,t,i){let o=F0(r,n,e);return o.matched?(t=HI(n,t),_2(t,n,e,i).pipe(He(a=>a===!0?o:J({},Wm)))):be(o)}function F0(r,n,e){if(n.path==="**")return C2(e);if(n.path==="")return n.pathMatch==="full"&&(r.hasChildren()||e.length>0)?J({},Wm):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||bI)(e,r,n);if(!i)return J({},Wm);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?J(J({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function C2(r){return{matched:!0,parameters:r.length>0?h0(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function a0(r,n,e,t){return e.length>0&&S2(r,e,t)?{segmentGroup:new xt(n,E2(t,new xt(e,r.children))),slicedSegments:[]}:e.length===0&&k2(r,e,t)?{segmentGroup:new xt(r.segments,D2(r,e,t,r.children)),slicedSegments:e}:{segmentGroup:new xt(r.segments,r.children),slicedSegments:e}}function D2(r,n,e,t){let i={};for(let o of e)if(Yu(r,n,o)&&!t[Yr(o)]){let a=new xt([],{});i[Yr(o)]=a}return J(J({},t),i)}function E2(r,n){let e={};e[rt]=n;for(let t of r)if(t.path===""&&Yr(t)!==rt){let i=new xt([],{});e[Yr(t)]=i}return e}function S2(r,n,e){return e.some(t=>Yu(r,n,t)&&Yr(t)!==rt)}function k2(r,n,e){return e.some(t=>Yu(r,n,t))}function Yu(r,n,e){return(r.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function I2(r,n,e){return n.length===0&&!r.children[e]}var Hm=class{};function A2(r,n,e,t,i,o,a="emptyOnly"){return new Gm(r,n,e,t,i,a,o).recognize()}var R2=31,Gm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,t,i,o,a,s){this.injector=n,this.configLoader=e,this.rootComponentType=t,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new jm(this.urlSerializer,this.urlTree)}noMatchError(n){return new Dt(4002,`'${n.segmentGroup}'`)}recognize(){let n=a0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(He(({children:e,rootSnapshot:t})=>{let i=new fr(t,e),o=new ju("",i),a=LI(t,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(n){let e=new ws([],Object.freeze({}),Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),rt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,rt,e).pipe(He(t=>({children:t,rootSnapshot:e})),_o(t=>{if(t instanceof kl)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof Sl?this.noMatchError(t):t}))}processSegmentGroup(n,e,t,i,o){return t.segments.length===0&&t.hasChildren()?this.processChildren(n,e,t,o):this.processSegment(n,e,t,t.segments,i,!0,o).pipe(He(a=>a instanceof fr?[a]:[]))}processChildren(n,e,t,i){let o=[];for(let a of Object.keys(t.children))a==="primary"?o.unshift(a):o.push(a);return Dn(o).pipe(yo(a=>{let s=t.children[a],c=GI(e,a);return this.processSegmentGroup(n,c,s,a,i)}),V_((a,s)=>(a.push(...s),a)),Wp(null),B_(),cr(a=>{if(a===null)return _s(t);let s=O0(a);return M2(s),be(s)}))}processSegment(n,e,t,i,o,a,s){return Dn(e).pipe(yo(c=>this.processSegmentAgainstRoute(c._injector??n,e,c,t,i,o,a,s).pipe(_o(l=>{if(l instanceof Sl)return be(null);throw l}))),wo(c=>!!c),_o(c=>{if(M0(c))return I2(t,i,o)?be(new Hm):_s(t);throw c}))}processSegmentAgainstRoute(n,e,t,i,o,a,s,c){return Yr(t)!==a&&(a===rt||!Yu(i,o,t))?_s(i):t.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,t,o,a,c):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,t,o,a,c):_s(i)}expandSegmentAgainstRouteUsingRedirect(n,e,t,i,o,a,s){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=F0(e,i,o);if(!c)return _s(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>R2&&(this.allowRedirects=!1));let f=new ws(o,l,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,s0(i),Yr(i),i.component??i._loadedComponent??null,i,c0(i)),p=Uu(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,u,f,n);return this.applyRedirects.lineralizeSegments(i,m).pipe(cr(g=>this.processSegment(n,t,e,g.concat(h),a,!1,s)))}matchSegmentAgainstRoute(n,e,t,i,o,a){let s=w2(e,t,i,n,this.urlSerializer);return t.path==="**"&&(e.children={}),s.pipe(En(c=>c.matched?(n=t._injector??n,this.getChildConfig(n,t,i).pipe(En(({routes:l})=>{let d=t._loadedInjector??n,{parameters:u,consumedSegments:h,remainingSegments:f}=c,p=new ws(h,u,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,s0(t),Yr(t),t.component??t._loadedComponent??null,t,c0(t)),m=Uu(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=a0(e,h,f,l);if(v.length===0&&g.hasChildren())return this.processChildren(d,l,g,p).pipe(He(y=>new fr(p,y)));if(l.length===0&&v.length===0)return be(new fr(p,[]));let _=Yr(t)===o;return this.processSegment(d,l,g,v,_?rt:o,!0,p).pipe(He(y=>new fr(p,y instanceof fr?[y]:[])))}))):_s(e)))}getChildConfig(n,e,t){return e.children?be({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?be({routes:e._loadedRoutes,injector:e._loadedInjector}):b2(n,e,t,this.urlSerializer).pipe(cr(i=>i?this.configLoader.loadChildren(n,e).pipe(Ve(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):x2(e))):be({routes:[],injector:n})}};function M2(r){r.sort((n,e)=>n.value.outlet===rt?-1:e.value.outlet===rt?1:n.value.outlet.localeCompare(e.value.outlet))}function T2(r){let n=r.value.routeConfig;return n&&n.path===""}function O0(r){let n=[],e=new Set;for(let t of r){if(!T2(t)){n.push(t);continue}let i=n.find(o=>t.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...t.children),e.add(i)):n.push(t)}for(let t of e){let i=O0(t.children);n.push(new fr(t.value,i))}return n.filter(t=>!e.has(t))}function s0(r){return r.data||{}}function c0(r){return r.resolve||{}}function F2(r,n,e,t,i,o){return cr(a=>A2(r,n,e,t,a.extractedUrl,i,o).pipe(He(({state:s,tree:c})=>dt(J({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function O2(r,n){return cr(e=>{let{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return be(e);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of N0(c))a.add(l);let s=0;return Dn(a).pipe(yo(c=>o.has(c)?N2(c,t,r,n):(c.data=Uu(c,c.parent,r).resolve,be(void 0))),Ve(()=>s++),Hp(1),cr(c=>s===a.size?be(e):pi))})}function N0(r){let n=r.children.map(e=>N0(e)).flat();return[r,...n]}function N2(r,n,e,t){let i=r.routeConfig,o=r._resolve;return i?.title!==void 0&&!k0(i)&&(o[Al]=i.title),P2(o,r,n,t).pipe(He(a=>(r._resolvedData=a,r.data=Uu(r,r.parent,e).resolve,null)))}function P2(r,n,e,t){let i=wm(r);if(i.length===0)return be({});let o={};return Dn(i).pipe(cr(a=>L2(r[a],n,e,t).pipe(wo(),Ve(s=>{if(s instanceof El)throw Wu(new Es,s);o[a]=s}))),Hp(1),L_(o),_o(a=>M0(a)?pi:sa(a)))}function L2(r,n,e,t){let i=Ml(n)??t,o=As(r,i),a=o.resolve?o.resolve(n,e):Cr(i,()=>o(n,e));return Ao(a)}function ym(r){return En(n=>{let e=r(n);return e?Dn(e).pipe(He(()=>n)):be(n)})}var P0=(()=>{class r{buildTitle(e){let t,i=e.root;for(;i!==void 0;)t=this.getResolvedTitleForRoute(i)??t,i=i.children.find(o=>o.outlet===rt);return t}getResolvedTitleForRoute(e){return e.data[Al]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>x(B2),providedIn:"root"})}return r})(),B2=(()=>{class r extends P0{title;constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static \u0275fac=function(t){return new(t||r)(Ae(Jy))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ol=new ne("",{providedIn:"root",factory:()=>({})}),V2=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){t&1&&G(0,"router-outlet")},dependencies:[$m],encapsulation:2})}return r})();function Km(r){let n=r.children&&r.children.map(Km),e=n?dt(J({},r),{children:n}):J({},r);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==rt&&(e.component=V2),e}var Il=new ne(""),Xm=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(pu);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return be(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=Ao(e.loadComponent()).pipe(He(L0),Ve(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),xo(()=>{this.componentLoaders.delete(e)})),i=new Zc(t,()=>new _e).pipe(zp());return this.componentLoaders.set(e,i),i}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return be({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let o=z2(t,this.compiler,e,this.onLoadEndListener).pipe(xo(()=>{this.childrenLoaders.delete(t)})),a=new Zc(o,()=>new _e).pipe(zp());return this.childrenLoaders.set(t,a),a}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function z2(r,n,e,t){return Ao(r.loadChildren()).pipe(He(L0),cr(i=>i instanceof ry||Array.isArray(i)?be(i):Dn(n.compileModuleAsync(i))),He(i=>{t&&t(r);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(e).injector,a=o.get(Il,[],{optional:!0,self:!0}).flat()),{routes:a.map(Km),injector:o}}))}function U2(r){return r&&typeof r=="object"&&"default"in r}function L0(r){return U2(r)?r.default:r}var Qm=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>x(j2),providedIn:"root"})}return r})(),j2=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),B0=new ne(""),V0=new ne("");function W2(r,n,e){let t=r.get(V0),i=r.get(Ge);return r.get(Le).runOutsideAngular(()=>{if(!i.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),H2(r))),{onViewTransitionCreated:c}=t;return c&&Cr(r,()=>c({transition:s,from:n,to:e})),a})}function H2(r){return new Promise(n=>{On({read:()=>setTimeout(n)},{injector:r})})}var z0=new ne(""),Zm=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new _e;transitionAbortSubject=new _e;configLoader=x(Xm);environmentInjector=x(zr);urlSerializer=x(Rl);rootContexts=x(Tl);location=x(qi);inputBindingEnabled=x(qu,{optional:!0})!==null;titleStrategy=x(P0);options=x(Ol,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Qm);createViewTransition=x(B0,{optional:!0});navigationErrorHandler=x(z0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>be(void 0);rootComponentType=null;constructor(){let e=i=>this.events.next(new Rm(i)),t=i=>this.events.next(new Mm(i));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(dt(J(J({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,i){return this.transitions=new mn({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(o=>o.id!==0),He(o=>dt(J({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),En(o=>{let a=!1,s=!1;return be(o).pipe(En(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",pr.SupersededByNewNavigation),pi;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?dt(J({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new Io(c.id,this.urlSerializer.serialize(c.rawUrl),u,Pu.IgnoredSameUrlNavigation)),c.resolve(!1),pi}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return be(c).pipe(En(u=>{let h=this.transitions?.getValue();return this.events.next(new Ss(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?pi:Promise.resolve(u)}),F2(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=dt(J({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Lu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:f,restoredState:p,extras:m}=c,g=new Ss(u,this.urlSerializer.serialize(h),f,p);this.events.next(g);let v=E0(this.rootComponentType).snapshot;return this.currentTransition=o=dt(J({},c),{targetSnapshot:v,urlAfterRedirects:h,extras:dt(J({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,be(o)}else{let u="";return this.events.next(new Io(c.id,this.urlSerializer.serialize(c.extractedUrl),u,Pu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),pi}}),Ve(c=>{let l=new Sm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),He(c=>(this.currentTransition=o=dt(J({},c),{guards:JI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),d2(this.environmentInjector,c=>this.events.next(c)),Ve(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Wu(this.urlSerializer,c.guardsResult);let l=new km(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ct(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",pr.GuardRejected),!1)),ym(c=>{if(c.guards.canActivateChecks.length)return be(c).pipe(Ve(l=>{let d=new Im(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),En(l=>{let d=!1;return be(l).pipe(O2(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",pr.NoDataFromResolver)}}))}),Ve(l=>{let d=new Am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),ym(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ve(h=>{d.component=h}),He(()=>{})));for(let h of d.children)u.push(...l(h));return u};return ds(l(c.targetSnapshot.root)).pipe(Wp(null),un(1))}),ym(()=>this.afterPreactivation()),En(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Dn(d).pipe(He(()=>o)):be(o)}),He(c=>{let l=$I(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=dt(J({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ve(()=>{this.events.next(new Cl)}),ZI(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),un(1),Ve({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Pt(this.transitionAbortSubject.pipe(Ve(c=>{throw c}))),xo(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",pr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_o(c=>{if(s=!0,R0(c))this.events.next(new $i(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),QI(c)?this.events.next(new ks(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new wl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Cr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof El){let{message:u,cancellationCode:h}=Wu(this.urlSerializer,d);this.events.next(new $i(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new ks(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return pi}))}))}cancelNavigationTransition(e,t,i){let o=new $i(e.id,this.urlSerializer.serialize(e.extractedUrl),t,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==t?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function G2(r){return r!==bl}var q2=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>x(Y2),providedIn:"root"})}return r})(),qm=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},Y2=(()=>{class r extends qm{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),U0=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:()=>x($2),providedIn:"root"})}return r})(),$2=(()=>{class r extends U0{location=x(qi);urlSerializer=x(Rl);options=x(Ol,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=x(Qm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ki;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=E0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof Ss)this.stateMemento=this.createStateMemento();else if(e instanceof Io)this.rawUrlTree=t.initialUrl;else if(e instanceof Lu){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(t.targetBrowserUrl??i,t)}}else e instanceof Cl?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(t.targetBrowserUrl??this.rawUrlTree,t)):e instanceof $i&&(e.code===pr.GuardRejected||e.code===pr.NoDataFromResolver)?this.restoreHistory(t):e instanceof wl?this.restoreHistory(t,!0):e instanceof Xi&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let i=e instanceof Ki?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||t.extras.replaceUrl){let o=this.browserPageId,a=J(J({},t.extras.state),this.generateNgRouterState(t.id,o));this.location.replaceState(i,"",a)}else{let o=J(J({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),gl=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(gl||{});function j0(r,n){r.events.pipe(Ct(e=>e instanceof Xi||e instanceof $i||e instanceof wl||e instanceof Io),He(e=>e instanceof Xi||e instanceof Io?gl.COMPLETE:(e instanceof $i?e.code===pr.Redirect||e.code===pr.SupersededByNewNavigation:!1)?gl.REDIRECTING:gl.FAILED),Ct(e=>e!==gl.REDIRECTING),un(1)).subscribe(()=>{n()})}var K2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nn=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(cu);stateManager=x(U0);options=x(Ol,{optional:!0})||{};pendingTasks=x(ou);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(Zm);urlSerializer=x(Rl);location=x(qi);urlHandlingStrategy=x(Qm);_events=new _e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(q2);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(Il,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(qu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Tt;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(t,o),t instanceof $i&&t.code!==pr.Redirect&&t.code!==pr.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof Xi)this.navigated=!0;else if(t instanceof ks){let a=t.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(t.url,i.currentRawUrl),c=J({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||G2(i.source)},a);this.scheduleNavigation(s,bl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Z2(t)&&this._events.next(t)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let c=J({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let s=this.parseUrl(e);this.scheduleNavigation(s,t,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Km),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:c}=t,l=c?this.currentUrlTree.fragment:a,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d=J(J({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=i?i.snapshot:this.routerState.snapshot.root;u=x0(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),u=this.currentUrlTree.root}return w0(u,e,d,l??null)}navigateByUrl(e,t={skipLocationChange:!1}){let i=yl(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,bl,null,t)}navigate(e,t={skipLocationChange:!1}){return Q2(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let i;if(t===!0?i=J({},K2):t===!1?i=J({},X2):i=t,yl(e))return t0(this.currentUrlTree,e,i);let o=this.parseUrl(e);return t0(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((t,[i,o])=>(o!=null&&(t[i]=o),t),{})}scheduleNavigation(e,t,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,c,l;a?(s=a.resolve,c=a.reject,l=a.promise):l=new Promise((u,h)=>{s=u,c=h});let d=this.pendingTasks.add();return j0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Q2(r){for(let n=0;n<r.length;n++)if(r[n]==null)throw new Dt(4008,!1)}function Z2(r){return!(r instanceof Cl)&&!(r instanceof ks)}var Gu=class{};var J2=(()=>{class r{router;injector;preloadingStrategy;loader;subscription;constructor(e,t,i,o,a){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(e=>e instanceof Xi),yo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){let i=[];for(let o of t){o.providers&&!o._injector&&(o._injector=Qp(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return Dn(i).pipe(Up())}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{let i;t.loadChildren&&t.canLoad===void 0?i=this.loader.loadChildren(e,t):i=be(null);let o=i.pipe(cr(a=>a===null?be(void 0):(t._loadedRoutes=a.routes,t._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(t.loadComponent&&!t._loadedComponent){let a=this.loader.loadComponent(t);return Dn([o,a]).pipe(Up())}else return o})}static \u0275fac=function(t){return new(t||r)(Ae(nn),Ae(pu),Ae(zr),Ae(Gu),Ae(Xm))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),W0=new ne(""),eA=(()=>{class r{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,t,i,o,a={}){this.urlSerializer=e,this.transitions=t,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ss?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Xi?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Io&&e.code===Pu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Bu&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bu(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,t))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(t){ps()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function H0(r,...n){return da([{provide:Il,multi:!0,useValue:r},[],{provide:ya,useFactory:G0,deps:[nn]},{provide:du,multi:!0,useFactory:q0},n.map(e=>e.\u0275providers)])}function G0(r){return r.routerState.root}function Nl(r,n){return{\u0275kind:r,\u0275providers:n}}function q0(){let r=x(yt);return n=>{let e=r.get(Co);if(n!==e.components[0])return;let t=r.get(nn),i=r.get(Y0);r.get(Jm)===1&&t.initialNavigation(),r.get($0,null,Yp.Optional)?.setUpPreloading(),r.get(W0,null,Yp.Optional)?.init(),t.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Y0=new ne("",{factory:()=>new _e}),Jm=new ne("",{providedIn:"root",factory:()=>1});function tA(){return Nl(2,[{provide:Jm,useValue:0},{provide:Zp,multi:!0,deps:[yt],useFactory:n=>{let e=n.get(yy,Promise.resolve());return()=>e.then(()=>new Promise(t=>{let i=n.get(nn),o=n.get(Y0);j0(i,()=>{t(!0)}),n.get(Zm).afterPreactivation=()=>(t(!0),o.closed?be(void 0):o),i.initialNavigation()}))}}])}function nA(){return Nl(3,[{provide:Zp,multi:!0,useFactory:()=>{let n=x(nn);return()=>{n.setUpLocationChangeListener()}}},{provide:Jm,useValue:2}])}var $0=new ne("");function rA(r){return Nl(0,[{provide:$0,useExisting:J2},{provide:Gu,useExisting:r}])}function iA(){return Nl(8,[o0,{provide:qu,useExisting:o0}])}function oA(r){let n=[{provide:B0,useValue:W2},{provide:V0,useValue:J({skipNextTransition:!!r?.skipInitialTransition},r)}];return Nl(9,n)}var l0=new ne("ROUTER_FORROOT_GUARD"),aA=[qi,{provide:Rl,useClass:Es},nn,Tl,{provide:ya,useFactory:G0,deps:[nn]},Xm,[]],K0=(()=>{class r{constructor(e){}static forRoot(e,t){return{ngModule:r,providers:[aA,[],{provide:Il,multi:!0,useValue:e},{provide:l0,useFactory:dA,deps:[[nn,new la,new el]]},t?.errorHandler?{provide:z0,useValue:t.errorHandler}:[],{provide:Ol,useValue:t||{}},t?.useHash?cA():lA(),sA(),t?.preloadingStrategy?rA(t.preloadingStrategy).\u0275providers:[],t?.initialNavigation?uA(t):[],t?.bindToComponentInputs?iA().\u0275providers:[],t?.enableViewTransitions?oA().\u0275providers:[],hA()]}}static forChild(e){return{ngModule:r,providers:[{provide:Il,multi:!0,useValue:e}]}}static \u0275fac=function(t){return new(t||r)(Ae(l0,8))};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})();function sA(){return{provide:W0,useFactory:()=>{let r=x(Ay),n=x(Le),e=x(Ol),t=x(Zm),i=x(Rl);return e.scrollOffset&&r.setOffset(e.scrollOffset),new eA(i,t,r,n,e)}}}function cA(){return{provide:em,useClass:wy}}function lA(){return{provide:em,useClass:xy}}function dA(r){return"guarded"}function uA(r){return[r.initialNavigation==="disabled"?nA().\u0275providers:[],r.initialNavigation==="enabledBlocking"?tA().\u0275providers:[]]}var d0=new ne("");function hA(){return[{provide:d0,useFactory:q0},{provide:du,multi:!0,useExisting:d0}]}function Qi(r){return r!=null&&`${r}`!="false"}function Pl(r,n=0){return fA(r)?Number(r):arguments.length===2?n:0}function fA(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function Ms(r){return Array.isArray(r)?r:[r]}function en(r){return r==null?"":typeof r=="string"?r:`${r}px`}function Sr(r){return r instanceof Fe?r.nativeElement:r}function X0(r,n=/\s+/){let e=[];if(r!=null){let t=Array.isArray(r)?r:`${r}`.split(n);for(let i of t){let o=`${i}`.trim();o&&e.push(o)}}return e}var tg;try{tg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{tg=!1}var ft=(()=>{class r{_platformId=x(Hi);isBrowser=this._platformId?Iy(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||tg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ts,Q0=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ng(){if(Ts)return Ts;if(typeof document!="object"||!document)return Ts=new Set(Q0),Ts;let r=document.createElement("input");return Ts=new Set(Q0.filter(n=>(r.setAttribute("type",n),r.type===n))),Ts}var Ll;function pA(){if(Ll==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ll=!0}))}finally{Ll=Ll||!1}return Ll}function kr(r){return pA()?r:!!r.capture}var $r=function(r){return r[r.NORMAL=0]="NORMAL",r[r.NEGATED=1]="NEGATED",r[r.INVERTED=2]="INVERTED",r}($r||{}),$u,xa;function Ku(){if(xa==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return xa=!1,xa;if("scrollBehavior"in document.documentElement.style)xa=!0;else{let r=Element.prototype.scrollTo;r?xa=!/\{\s*\[native code\]\s*\}/.test(r.toString()):xa=!1}}return xa}function Fs(){if(typeof document!="object"||!document)return $r.NORMAL;if($u==null){let r=document.createElement("div"),n=r.style;r.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";let e=document.createElement("div"),t=e.style;t.width="2px",t.height="1px",r.appendChild(e),document.body.appendChild(r),$u=$r.NORMAL,r.scrollLeft===0&&(r.scrollLeft=1,$u=r.scrollLeft===0?$r.NEGATED:$r.INVERTED),r.remove()}return $u}var eg;function mA(){if(eg==null){let r=typeof document<"u"?document.head:null;eg=!!(r&&(r.createShadowRoot||r.attachShadow))}return eg}function Z0(r){if(mA()){let n=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function Ro(){let r=typeof document<"u"&&document?document.activeElement:null;for(;r&&r.shadowRoot;){let n=r.shadowRoot.activeElement;if(n===r)break;r=n}return r}function mr(r){return r.composedPath?r.composedPath()[0]:r.target}function rg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Xu=new WeakMap,jt=(()=>{class r{_appRef;_injector=x(yt);_environmentInjector=x(zr);load(e){let t=this._appRef=this._appRef||this._injector.get(Co),i=Xu.get(t);i||(i={loaders:new Set,refs:[]},Xu.set(t,i),t.onDestroy(()=>{Xu.get(t)?.refs.forEach(o=>o.destroy()),Xu.delete(t)})),i.loaders.has(e)||(i.loaders.add(e),i.refs.push(gu(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Kr=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(t,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return r})();function rn(r,...n){return n.length?n.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}var gA=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Qu=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[gA]})}return r})();var J0=new Set,wa,vA=(()=>{class r{_platform=x(ft);_nonce=x(tl,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_A}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&bA(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function bA(r,n){if(!J0.has(r))try{wa||(wa=document.createElement("style"),n&&wa.setAttribute("nonce",n),wa.setAttribute("type","text/css"),document.head.appendChild(wa)),wa.sheet&&(wa.sheet.insertRule(`@media ${r} {body{ }}`,0),J0.add(r))}catch(e){console.error(e)}}function _A(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var tx=(()=>{class r{_mediaMatcher=x(vA);_zone=x(Le);_queries=new Map;_destroySubject=new _e;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ex(Ms(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=ex(Ms(e)).map(a=>this._registerQuery(a).observable),o=ds(i);return o=eu(o.pipe(un(1)),o.pipe(iu(1),ru(0))),o.pipe(He(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:l})=>{s.matches=s.matches||c,s.breakpoints[l]=c}),s}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let t=this._mediaMatcher.matchMedia(e),o={observable:new fi(a=>{let s=c=>this._zone.run(()=>a.next(c));return t.addListener(s),()=>{t.removeListener(s)}}).pipe(gn(t),He(({matches:a})=>({query:e,matches:a})),Pt(this._destroySubject)),mql:t};return this._queries.set(e,o),o}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ex(r){return r.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}var ax=" ";function hg(r,n,e){let t=th(r,n);e=e.trim(),!t.some(i=>i.trim()===e)&&(t.push(e),r.setAttribute(n,t.join(ax)))}function rh(r,n,e){let t=th(r,n);e=e.trim();let i=t.filter(o=>o!==e);i.length?r.setAttribute(n,i.join(ax)):r.removeAttribute(n)}function th(r,n){return r.getAttribute(n)?.match(/\S+/g)??[]}var sx="cdk-describedby-message",Zu="cdk-describedby-host",sg=0,cx=(()=>{class r{_platform=x(ft);_document=x(Ge);_messageRegistry=new Map;_messagesContainer=null;_id=`${sg++}`;constructor(){x(jt).load(Kr),this._id=x(us)+"-"+sg++}describe(e,t,i){if(!this._canBeDescribed(e,t))return;let o=ig(t,i);typeof t!="string"?(nx(t,this._id),this._messageRegistry.set(o,{messageElement:t,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(t,i),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,t,i){if(!t||!this._isElementNode(e))return;let o=ig(t,i);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof t=="string"){let a=this._messageRegistry.get(o);a&&a.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${Zu}="${this._id}"]`);for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute(Zu);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,t){let i=this._document.createElement("div");nx(i,this._id),i.textContent=e,t&&i.setAttribute("role",t),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(ig(e,t),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",t=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<t.length;o++)t[o].remove();let i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){let t=th(e,"aria-describedby").filter(i=>i.indexOf(sx)!=0);e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){let i=this._messageRegistry.get(t);hg(e,"aria-describedby",i.messageElement.id),e.setAttribute(Zu,this._id),i.referenceCount++}_removeMessageReference(e,t){let i=this._messageRegistry.get(t);i.referenceCount--,rh(e,"aria-describedby",i.messageElement.id),e.removeAttribute(Zu)}_isElementDescribedByMessage(e,t){let i=th(e,"aria-describedby"),o=this._messageRegistry.get(t),a=o&&o.messageElement.id;return!!a&&i.indexOf(a)!=-1}_canBeDescribed(e,t){if(!this._isElementNode(e))return!1;if(t&&typeof t=="object")return!0;let i=t==null?"":`${t}`.trim(),o=e.getAttribute("aria-label");return i?!o||o.trim()!==i:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ig(r,n){return typeof r=="string"?`${n||""}/${r}`:r}function nx(r,n){r.id||(r.id=`${sx}-${n}-${sg++}`)}var AA=200,cg=class{_letterKeyStream=new _e;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new _e;selectedItem=this._selectedItem;constructor(n,e){let t=typeof e?.debounceInterval=="number"?e.debounceInterval:AA;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(Ve(e=>this._pressedLetters.push(e)),ru(n),Ct(()=>this._pressedLetters.length>0),He(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){let i=(this._selectedItemIndex+t)%this._items.length,o=this._items[i];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},lg=class{_items;_activeItemIndex=-1;_activeItem=mi(null);_wrap=!1;_typeaheadSubscription=Tt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof $p?this._itemChangesSubscription=n.changes.subscribe(t=>this._itemsChanged(t.toArray())):fa(n)&&(this._effectRef=mu(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new _e;change=new _e;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new cg(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:t=>this._skipPredicateFn(t)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(t=>{this.setActiveItem(t)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(i||rn(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),t=typeof n=="number"?n:e.indexOf(n),i=e[t];this._activeItem.set(i??null),this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let t=1;t<=e.length;t++){let i=(this._activeItemIndex+n*t+e.length)%e.length,o=e[i];if(!this._skipPredicateFn(o)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let t=this._getItemsArray();if(t[n]){for(;this._skipPredicateFn(t[n]);)if(n+=e,!t[n])return;this.setActiveItem(n)}}_getItemsArray(){return fa(this._items)?this._items():this._items instanceof $p?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let t=n.indexOf(e);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}},nh=class extends lg{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var zl=(()=>{class r{_platform=x(ft);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return MA(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let t=RA(VA(e));if(t&&(rx(t)===-1||!this.isVisible(t)))return!1;let i=e.nodeName.toLowerCase(),o=rx(e);return e.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!LA(e)?!1:i==="audio"?e.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,t){return BA(e)&&!this.isDisabled(e)&&(t?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function RA(r){try{return r.frameElement}catch{return null}}function MA(r){return!!(r.offsetWidth||r.offsetHeight||typeof r.getClientRects=="function"&&r.getClientRects().length)}function TA(r){let n=r.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function FA(r){return NA(r)&&r.type=="hidden"}function OA(r){return PA(r)&&r.hasAttribute("href")}function NA(r){return r.nodeName.toLowerCase()=="input"}function PA(r){return r.nodeName.toLowerCase()=="a"}function lx(r){if(!r.hasAttribute("tabindex")||r.tabIndex===void 0)return!1;let n=r.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function rx(r){if(!lx(r))return null;let n=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function LA(r){let n=r.nodeName.toLowerCase(),e=n==="input"&&r.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function BA(r){return FA(r)?!1:TA(r)||OA(r)||r.hasAttribute("contenteditable")||lx(r)}function VA(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}var dg=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,t,i,o=!1,a){this._element=n,this._checker=e,this._ngZone=t,this._document=i,this._injector=a,o||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let t=this._getFirstTabbableElement(e);return t?.focus(n),!!t}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let t=0;t<e.length;t++){let i=e[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[t]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let t=e.length-1;t>=0;t--){let i=e[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[t]):null;if(i)return i}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?On(n,{injector:this._injector}):setTimeout(n)}},fg=(()=>{class r{_checker=x(zl);_ngZone=x(Le);_document=x(Ge);_injector=x(yt);constructor(){x(jt).load(Kr)}create(e,t=!1){return new dg(e,this._checker,this._ngZone,this._document,t,this._injector)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),dx=(()=>{class r{_elementRef=x(Fe);_focusTrapFactory=x(fg);focusTrap;_previouslyFocusedElement=null;get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}autoCapture;constructor(){x(ft).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Ro(),this.focusTrap?.focusInitialElementWhenReady()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Se],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Se]},exportAs:["cdkTrapFocus"],features:[st,At]})}return r})();function pg(r){return r.buttons===0||r.detail===0}function mg(r){let n=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var zA=new ne("cdk-input-modality-detector-options"),UA={ignoreKeys:[18,17,224,91,16]},ux=650,Os=kr({passive:!0,capture:!0}),jA=(()=>{class r{_platform=x(ft);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new mn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(t=>t===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=mr(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<ux||(this._modality.next(pg(e)?"keyboard":"mouse"),this._mostRecentTarget=mr(e))};_onTouchstart=e=>{if(mg(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mr(e)};constructor(){let e=x(Le),t=x(Ge),i=x(zA,{optional:!0});this._options=J(J({},UA),i),this.modalityDetected=this._modality.pipe(iu(1)),this.modalityChanged=this.modalityDetected.pipe(Jc()),this._platform.isBrowser&&e.runOutsideAngular(()=>{t.addEventListener("keydown",this._onKeydown,Os),t.addEventListener("mousedown",this._onMousedown,Os),t.addEventListener("touchstart",this._onTouchstart,Os)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Os),document.removeEventListener("mousedown",this._onMousedown,Os),document.removeEventListener("touchstart",this._onTouchstart,Os))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),WA=new ne("liveAnnouncerElement",{providedIn:"root",factory:HA});function HA(){return null}var GA=new ne("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),qA=0,hx=(()=>{class r{_ngZone=x(Le);_defaultOptions=x(GA,{optional:!0});_liveElement;_document=x(Ge);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=x(WA,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...t){let i=this._defaultOptions,o,a;return t.length===1&&typeof t[0]=="number"?a=t[0]:[o,a]=t,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),a==null&&i&&(a=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(s=>this._currentResolve=s)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",t=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let o=0;o<t.length;o++)t[o].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${qA++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(e){let t=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<t.length;i++){let o=t[i],a=o.getAttribute("aria-owns");a?a.indexOf(e)===-1&&o.setAttribute("aria-owns",a+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var eh=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(eh||{}),YA=new ne("cdk-focus-monitor-default-options"),Ju=kr({passive:!0,capture:!0}),Da=(()=>{class r{_ngZone=x(Le);_platform=x(ft);_inputModalityDetector=x(jA);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=x(Ge,{optional:!0});_stopInputModalityDetector=new _e;constructor(){let e=x(YA,{optional:!0});this._detectionMode=e?.detectionMode||eh.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let t=mr(e);for(let i=t;i;i=i.parentElement)e.type==="focus"?this._onFocus(e,i):this._onBlur(e,i)};monitor(e,t=!1){let i=Sr(e);if(!this._platform.isBrowser||i.nodeType!==1)return be();let o=Z0(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return t&&(a.checkChildren=!0),a.subject;let s={checkChildren:t,subject:new _e,rootNode:o};return this._elementInfo.set(i,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){let t=Sr(e),i=this._elementInfo.get(t);i&&(i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(i))}focusVia(e,t,i){let o=Sr(e),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,c])=>this._originChanged(s,t,c)):(this._setOrigin(t),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===eh.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,t){e.classList.toggle("cdk-focused",!!t),e.classList.toggle("cdk-touch-focused",t==="touch"),e.classList.toggle("cdk-keyboard-focused",t==="keyboard"),e.classList.toggle("cdk-mouse-focused",t==="mouse"),e.classList.toggle("cdk-program-focused",t==="program")}_setOrigin(e,t=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&t,this._detectionMode===eh.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?ux:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(e,t){let i=this._elementInfo.get(t),o=mr(e);!i||!i.checkChildren&&t!==o||this._originChanged(t,this._getFocusOrigin(o),i)}_onBlur(e,t){let i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i,null))}_emitOrigin(e,t){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let t=e.rootNode,i=this._rootNodeFocusListenerCount.get(t)||0;i||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ju),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ju)}),this._rootNodeFocusListenerCount.set(t,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){let i=this._rootNodeFocusListenerCount.get(t);i>1?this._rootNodeFocusListenerCount.set(t,i-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ju),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ju),this._rootNodeFocusListenerCount.delete(t))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,t,i){this._setClasses(e,t),this._emitOrigin(i,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){let t=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&t.push([o,i])}),t}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:t,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!t||t===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(t))return!0}return!1}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),fx=(()=>{class r{_elementRef=x(Fe);_focusMonitor=x(Da);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new fe;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(t=>{this._focusOrigin=t,this.cdkFocusChange.emit(t)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return r})(),Ca=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(Ca||{}),ix="cdk-high-contrast-black-on-white",ox="cdk-high-contrast-white-on-black",og="cdk-high-contrast-active",gg=(()=>{class r{_platform=x(ft);_hasCheckedHighContrastMode;_document=x(Ge);_breakpointSubscription;constructor(){this._breakpointSubscription=x(tx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ca.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let t=this._document.defaultView||window,i=t&&t.getComputedStyle?t.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ca.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ca.BLACK_ON_WHITE}return Ca.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(og,ix,ox),this._hasCheckedHighContrastMode=!0;let t=this.getHighContrastMode();t===Ca.BLACK_ON_WHITE?e.add(og,ix):t===Ca.WHITE_ON_BLACK&&e.add(og,ox)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ls=(()=>{class r{constructor(){x(gg)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Qu]})}return r})(),ag={},zt=(()=>{class r{_appId=x(us);getId(e){return this._appId!=="ng"&&(e+=this._appId),ag.hasOwnProperty(e)||(ag[e]=0),`${e}${ag[e]++}`}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var $A=new ne("cdk-dir-doc",{providedIn:"root",factory:KA});function KA(){return x(Ge)}var XA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function QA(r){let n=r?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?XA.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var hn=(()=>{class r{value="ltr";change=new fe;constructor(){let e=x($A,{optional:!0});if(e){let t=e.body?e.body.dir:null,i=e.documentElement?e.documentElement.dir:null;this.value=QA(t||i||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Fo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})();var ZA=["text"],JA=[[["mat-icon"]],"*"],eR=["mat-icon","*"];function tR(r,n){if(r&1&&G(0,"mat-pseudo-checkbox",1),r&2){let e=ee();pe("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function nR(r,n){if(r&1&&G(0,"mat-pseudo-checkbox",3),r&2){let e=ee();pe("disabled",e.disabled)}}function rR(r,n){if(r&1&&(I(0,"span",4),j(1),M()),r&2){let e=ee();P(),Xt("(",e.group.label,")")}}var iR=["mat-internal-form-field",""],oR=["*"];var Je=(()=>{class r{constructor(){x(gg)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Fo,Fo]})}return r})(),Ea=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(n,e,t,i,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=t,this._parentForm=i,this._stateChanges=o}updateErrorState(){let n=this.errorState,e=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,o=t?.isErrorState(i,e)??!1;o!==n&&(this.errorState=o,this._stateChanges.next())}},px=new ne("MAT_DATE_LOCALE",{providedIn:"root",factory:aR});function aR(){return x(my)}var Bs="Method not implemented",Pn=class{locale;_localeChanges=new _e;localeChanges=this._localeChanges;setTime(n,e,t,i){throw new Error(Bs)}getHours(n){throw new Error(Bs)}getMinutes(n){throw new Error(Bs)}getSeconds(n){throw new Error(Bs)}parseTime(n,e){throw new Error(Bs)}addSeconds(n,e){throw new Error(Bs)}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return n==null||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}compareTime(n,e){return this.getHours(n)-this.getHours(e)||this.getMinutes(n)-this.getMinutes(e)||this.getSeconds(n)-this.getSeconds(e)}sameDate(n,e){if(n&&e){let t=this.isValid(n),i=this.isValid(e);return t&&i?!this.compareDate(n,e):t==i}return n==e}sameTime(n,e){if(n&&e){let t=this.isValid(n),i=this.isValid(e);return t&&i?!this.compareTime(n,e):t==i}return n==e}clampDate(n,e,t){return e&&this.compareDate(n,e)<0?e:t&&this.compareDate(n,t)>0?t:n}},Sa=new ne("mat-date-formats"),sR=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,cR=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function vg(r,n){let e=Array(r);for(let t=0;t<r;t++)e[t]=n(t);return e}var lR=(()=>{class r extends Pn{useUtcForDisplay=!1;_matDateLocale=x(px,{optional:!0});constructor(){super();let e=x(px,{optional:!0});e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let t=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return vg(12,i=>this._format(t,new Date(2017,i,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return vg(31,t=>this._format(e,new Date(2017,0,t+1)))}getDayOfWeekNames(e){let t=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return vg(7,i=>this._format(t,new Date(2017,0,i+1)))}getYearName(e){let t=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(t,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),t=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return t===7?0:t}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,t,i){let o=this._createDateWithOverflow(e,t,i);return o.getMonth()!=t,o}today(){return new Date}parse(e,t){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,t){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let i=new Intl.DateTimeFormat(this.locale,dt(J({},t),{timeZone:"utc"}));return this._format(i,e)}addCalendarYears(e,t){return this.addCalendarMonths(e,t*12)}addCalendarMonths(e,t){let i=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+t,this.getDate(e));return this.getMonth(i)!=((this.getMonth(e)+t)%12+12)%12&&(i=this._createDateWithOverflow(this.getYear(i),this.getMonth(i),0)),i}addCalendarDays(e,t){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+t)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(sR.test(e)){let t=new Date(e);if(this.isValid(t))return t}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}setTime(e,t,i,o){let a=this.clone(e);return a.setHours(t,i,o,0),a}getHours(e){return e.getHours()}getMinutes(e){return e.getMinutes()}getSeconds(e){return e.getSeconds()}parseTime(e,t){if(typeof e!="string")return e instanceof Date?new Date(e.getTime()):null;let i=e.trim();if(i.length===0)return null;let o=this._parseTimeString(i);if(o===null){let a=i.replace(/[^0-9:(AM|PM)]/gi,"").trim();a.length>0&&(o=this._parseTimeString(a))}return o||this.invalid()}addSeconds(e,t){return new Date(e.getTime()+t*1e3)}_createDateWithOverflow(e,t,i){let o=new Date;return o.setFullYear(e,t,i),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,t){let i=new Date;return i.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e.format(i)}_parseTimeString(e){let t=e.toUpperCase().match(cR);if(t){let i=parseInt(t[1]),o=parseInt(t[2]),a=t[3]==null?void 0:parseInt(t[3]),s=t[4];if(i===12?i=s==="AM"?0:i:s==="PM"&&(i+=12),bg(i,0,23)&&bg(o,0,59)&&(a==null||bg(a,0,59)))return this.setTime(this.today(),i,o,a||0)}return null}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function bg(r,n,e){return!isNaN(r)&&r>=n&&r<=e}var dR={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};function xi(r=dR){return[{provide:Pn,useClass:lR},{provide:Sa,useValue:r}]}var Ul=(()=>{class r{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ka=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["structural-styles"]],decls:0,vars:0,template:function(t,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return r})();var Ir=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(Ir||{}),xg=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ir.HIDDEN;constructor(n,e,t,i=!1){this._renderer=n,this.element=e,this.config=t,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},mx=kr({passive:!0,capture:!0}),wg=class{_events=new Map;addHandler(n,e,t,i){let o=this._events.get(e);if(o){let a=o.get(t);a?a.add(i):o.set(t,new Set([i]))}else this._events.set(e,new Map([[t,new Set([i])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,mx)})}removeHandler(n,e,t){let i=this._events.get(n);if(!i)return;let o=i.get(e);o&&(o.delete(t),o.size===0&&i.delete(e),i.size===0&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,mx)))}_delegateEventHandler=n=>{let e=mr(n);e&&this._events.get(n.type)?.forEach((t,i)=>{(i===e||i.contains(e))&&t.forEach(o=>o.handleEvent(n))})}},oh={enterDuration:225,exitDuration:150},uR=800,gx=kr({passive:!0,capture:!0}),vx=["mousedown","touchstart"],bx=["mouseup","mouseleave","touchend","touchcancel"],hR=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return r})(),ah=class r{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new wg;constructor(n,e,t,i,o){this._target=n,this._ngZone=e,this._platform=i,i.isBrowser&&(this._containerElement=Sr(t)),o&&o.get(jt).load(hR)}fadeInRipple(n,e,t={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=J(J({},oh),t.animation);t.centered&&(n=i.left+i.width/2,e=i.top+i.height/2);let a=t.radius||fR(n,e,i),s=n-i.left,c=e-i.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${s-a}px`,d.style.top=`${c-a}px`,d.style.height=`${a*2}px`,d.style.width=`${a*2}px`,t.color!=null&&(d.style.backgroundColor=t.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,m=new xg(this,d,t,p);d.style.transform="scale3d(1, 1, 1)",m.state=Ir.FADING_IN,t.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let v=()=>{g&&(g.fallbackTimer=null),clearTimeout(y),this._finishRippleTransition(m)},_=()=>this._destroyRipple(m),y=setTimeout(_,l+100);d.addEventListener("transitionend",v),d.addEventListener("transitioncancel",_),g={onTransitionEnd:v,onTransitionCancel:_,fallbackTimer:y}}),this._activeRipples.set(m,g),(p||!l)&&this._finishRippleTransition(m),m}fadeOutRipple(n){if(n.state===Ir.FADING_OUT||n.state===Ir.HIDDEN)return;let e=n.element,t=J(J({},oh),n.config.animation);e.style.transitionDuration=`${t.exitDuration}ms`,e.style.opacity="0",n.state=Ir.FADING_OUT,(n._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){let e=Sr(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,vx.forEach(t=>{r._eventManager.addHandler(this._ngZone,t,e,this)}))}handleEvent(n){n.type==="mousedown"?this._onMousedown(n):n.type==="touchstart"?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{bx.forEach(e=>{this._triggerElement.addEventListener(e,this,gx)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===Ir.FADING_IN?this._startFadeOutTransition(n):n.state===Ir.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){let e=n===this._mostRecentTransientRipple,{persistent:t}=n.config;n.state=Ir.VISIBLE,!t&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){let e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=Ir.HIDDEN,e!==null&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){let e=pg(n),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+uR;!this._target.rippleDisabled&&!e&&!t&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!mg(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=n.changedTouches;if(e)for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{let e=n.state===Ir.VISIBLE||n.config.terminateOnPointerUp&&n.state===Ir.FADING_IN;!n.config.persistent&&e&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let n=this._triggerElement;n&&(vx.forEach(e=>r._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(bx.forEach(e=>n.removeEventListener(e,this,gx)),this._pointerUpEventsRegistered=!1))}};function fR(r,n,e){let t=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),i=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(t*t+i*i)}var wx=new ne("mat-ripple-global-options"),Dg=(()=>{class r{_elementRef=x(Fe);_animationMode=x(tn,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=x(Le),t=x(ft),i=x(wx,{optional:!0}),o=x(yt);this._globalOptions=i||{},this._rippleRenderer=new ah(this,e,this._elementRef,t,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:J(J(J({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,i){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,t,J(J({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,J(J({},this.rippleConfig),e))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return r})(),jl=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Je]})}return r})(),pR=(()=>{class r{_animationMode=x(tn,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(t,i){t&2&&Oe("mat-pseudo-checkbox-indeterminate",i.state==="indeterminate")("mat-pseudo-checkbox-checked",i.state==="checked")("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal",i.appearance==="minimal")("mat-pseudo-checkbox-full",i.appearance==="full")("_mat-animation-noopable",i._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return r})(),mR=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je]})}return r})(),Eg=new ne("MAT_OPTION_PARENT_COMPONENT"),Sg=new ne("MatOptgroup");var Cg=class{source;isUserInput;constructor(n,e=!1){this.source=n,this.isUserInput=e}},Vs=(()=>{class r{_element=x(Fe);_changeDetectorRef=x(St);_parent=x(Eg,{optional:!0});group=x(Sg,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=x(zt).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new fe;_text;_stateChanges=new _e;constructor(){x(jt).load(ka),x(jt).load(Kr),this._signalDisableRipple=!!this._parent&&fa(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,t){let i=this._getHostElement();typeof i.focus=="function"&&i.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!rn(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Cg(this,e))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-option"]],viewQuery:function(t,i){if(t&1&&lt(ZA,7),t&2){let o;Ne(o=Pe())&&(i._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(t,i){t&1&&te("click",function(){return i._selectViaInteraction()})("keydown",function(a){return i._handleKeydown(a)}),t&2&&(jr("id",i.id),Ze("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Oe("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Se]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[st],ngContentSelectors:eR,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){t&1&&(Et(JA),he(0,tR,1,2,"mat-pseudo-checkbox",1),je(1),I(2,"span",2,0),je(4,1),M(),he(5,nR,1,1,"mat-pseudo-checkbox",3)(6,rR,2,1,"span",4),G(7,"div",5)),t&2&&(me(i.multiple?0:-1),P(5),me(!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator?5:-1),P(),me(i.group&&i.group._inert?6:-1),P(),pe("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[pR,Dg],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();function Cx(r,n,e){if(e.length){let t=n.toArray(),i=e.toArray(),o=0;for(let a=0;a<r+1;a++)t[a].group&&t[a].group===i[o]&&o++;return o}return 0}function Dx(r,n,e,t){return r<e?r:r+n>e+t?Math.max(0,r-t+n):e}var kg=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[jl,Je,mR]})}return r})(),_x={capture:!0},yx=["focus","mousedown","mouseenter","touchstart"],_g="mat-ripple-loader-uninitialized",yg="mat-ripple-loader-class-name",xx="mat-ripple-loader-centered",ih="mat-ripple-loader-disabled",Ex=(()=>{class r{_document=x(Ge,{optional:!0});_animationMode=x(tn,{optional:!0});_globalRippleOptions=x(wx,{optional:!0});_platform=x(ft);_ngZone=x(Le);_injector=x(yt);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let e of yx)this._document?.addEventListener(e,this._onInteraction,_x)})}ngOnDestroy(){let e=this._hosts.keys();for(let t of e)this.destroyRipple(t);for(let t of yx)this._document?.removeEventListener(t,this._onInteraction,_x)}configureRipple(e,t){e.setAttribute(_g,this._globalRippleOptions?.namespace??""),(t.className||!e.hasAttribute(yg))&&e.setAttribute(yg,t.className||""),t.centered&&e.setAttribute(xx,""),t.disabled&&e.setAttribute(ih,"")}setDisabled(e,t){let i=this._hosts.get(e);i?(i.target.rippleDisabled=t,!t&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(e))):t?e.setAttribute(ih,""):e.removeAttribute(ih)}_onInteraction=e=>{let t=mr(e);if(t instanceof HTMLElement){let i=t.closest(`[${_g}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let t=this._document.createElement("span");t.classList.add("mat-ripple",e.getAttribute(yg)),e.append(t);let i=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,a=i?0:o?.animation?.enterDuration??oh.enterDuration,s=i?0:o?.animation?.exitDuration??oh.exitDuration,c={rippleDisabled:i||o?.disabled||e.hasAttribute(ih),rippleConfig:{centered:e.hasAttribute(xx),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:s}}},l=new ah(c,this._ngZone,t,this._platform,this._injector),d=!c.rippleDisabled;d&&l.setupTriggerEvents(e),this._hosts.set(e,{target:c,renderer:l,hasSetUpEvents:d}),e.removeAttribute(_g)}destroyRipple(e){let t=this._hosts.get(e);t&&(t.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Sx=(()=>{class r{labelPosition;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("mdc-form-field--align-end",i.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:iR,ngContentSelectors:oR,decls:1,vars:0,template:function(t,i){t&1&&(Et(),je(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return r})();var zs=(()=>{class r{get vertical(){return this._vertical}set vertical(e){this._vertical=Qi(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=Qi(e)}_inset=!1;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){t&2&&(Ze("aria-orientation",i.vertical?"vertical":"horizontal"),Oe("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return r})(),Us=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Je]})}return r})();var gR=["*"];var vR=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],bR=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],_R=new ne("MAT_CARD_CONFIG"),js=(()=>{class r{appearance;constructor(){let e=x(_R,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){t&2&&Oe("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:gR,decls:1,vars:0,template:function(t,i){t&1&&(Et(),je(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return r})();var Ws=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return r})(),sh=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return r})();var ch=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:bR,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(t,i){t&1&&(Et(vR),je(0),I(1,"div",0),je(2,1),M(),je(3,2))},encapsulation:2,changeDetection:0})}return r})(),lh=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-mdc-card-footer"]})}return r})(),dh=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"]})}return r})();var er=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Je]})}return r})();var yR=["*"],uh;function xR(){if(uh===void 0&&(uh=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&(uh=r.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return uh}function Wl(r){return xR()?.createHTML(r)||r}function Ix(r){return Error(`Unable to find icon with the name "${r}"`)}function wR(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function Ax(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function Rx(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var Zi=class{url;svgText;options;svgElement;constructor(n,e,t){this.url=n,this.svgText=e,this.options=t}},CR=(()=>{class r{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,t,i,o){this._httpClient=e,this._sanitizer=t,this._errorHandler=o,this._document=i}addSvgIcon(e,t,i){return this.addSvgIconInNamespace("",e,t,i)}addSvgIconLiteral(e,t,i){return this.addSvgIconLiteralInNamespace("",e,t,i)}addSvgIconInNamespace(e,t,i,o){return this._addSvgIconConfig(e,t,new Zi(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,i,o){let a=this._sanitizer.sanitize(lr.HTML,i);if(!a)throw Rx(i);let s=Wl(a);return this._addSvgIconConfig(e,t,new Zi("",s,o))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,i){return this._addSvgIconSetConfig(e,new Zi(t,null,i))}addSvgIconSetLiteralInNamespace(e,t,i){let o=this._sanitizer.sanitize(lr.HTML,t);if(!o)throw Rx(t);let a=Wl(o);return this._addSvgIconSetConfig(e,new Zi("",a,i))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let t=this._sanitizer.sanitize(lr.RESOURCE_URL,e);if(!t)throw Ax(e);let i=this._cachedIconsByUrl.get(t);return i?be(hh(i)):this._loadSvgIconFromConfig(new Zi(e,null)).pipe(Ve(o=>this._cachedIconsByUrl.set(t,o)),He(o=>hh(o)))}getNamedSvgIcon(e,t=""){let i=Mx(t,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(t,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(t);return a?this._getSvgFromIconSetConfigs(e,a):sa(Ix(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?be(hh(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(He(t=>hh(t)))}_getSvgFromIconSetConfigs(e,t){let i=this._extractIconWithNameFromAnySet(e,t);if(i)return be(i);let o=t.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(_o(s=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(lr.RESOURCE_URL,a.url)} failed: ${s.message}`;return this._errorHandler.handleError(new Error(l)),be(null)})));return tu(o).pipe(He(()=>{let a=this._extractIconWithNameFromAnySet(e,t);if(!a)throw Ix(e);return a}))}_extractIconWithNameFromAnySet(e,t){for(let i=t.length-1;i>=0;i--){let o=t[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let a=this._svgElementFromConfig(o),s=this._extractSvgIconFromSet(a,e,o.options);if(s)return s}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ve(t=>e.svgText=t),He(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?be(null):this._fetchIcon(e).pipe(Ve(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,i){let o=e.querySelector(`[id="${t}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,i);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),i);let s=this._svgElementFromString(Wl("<svg></svg>"));return s.appendChild(a),this._setSvgAttributes(s,i)}_svgElementFromString(e){let t=this._document.createElement("DIV");t.innerHTML=e;let i=t.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let t=this._svgElementFromString(Wl("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:a,value:s}=i[o];a!=="id"&&t.setAttribute(a,s)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[o].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){let{url:t,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw wR();if(t==null)throw Error(`Cannot fetch icon from URL "${t}".`);let a=this._sanitizer.sanitize(lr.RESOURCE_URL,t);if(!a)throw Ax(t);let s=this._inProgressUrlFetches.get(a);if(s)return s;let c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(He(l=>Wl(l)),xo(()=>this._inProgressUrlFetches.delete(a)),z_());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,t,i){return this._svgIconConfigs.set(Mx(e,t),i),this}_addSvgIconSetConfig(e,t){let i=this._iconSetConfigs.get(e);return i?i.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){let t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](t,e);if(o)return DR(o)?new Zi(o.url,null,o.options):new Zi(o,null)}}static \u0275fac=function(t){return new(t||r)(Ae(Yi,8),Ae(gm),Ae(Ge,8),Ae(ha))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function hh(r){return r.cloneNode(!0)}function Mx(r,n){return r+":"+n}function DR(r){return!!(r.url&&r.options)}var ER=new ne("MAT_ICON_DEFAULT_OPTIONS"),SR=new ne("mat-icon-location",{providedIn:"root",factory:kR});function kR(){let r=x(Ge),n=r?r.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}var Tx=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],IR=Tx.map(r=>`[${r}]`).join(", "),AR=/^url\(['"]?#(.*?)['"]?\)$/,Oo=(()=>{class r{_elementRef=x(Fe);_iconRegistry=x(CR);_location=x(SR);_errorHandler=x(ha);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Tt.EMPTY;constructor(){let e=x(new Ur("aria-hidden"),{optional:!0}),t=x(ER,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),t.fontSet&&(this.fontSet=t.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){let i=e.childNodes[t];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,t=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),t.forEach(i=>e.classList.add(i)),this._previousFontSetClass=t,this.fontIcon!==this._previousFontIconClass&&!t.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let t=this._elementsWithExternalReferences;t&&t.forEach((i,o)=>{i.forEach(a=>{o.setAttribute(a.name,`url('${e}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(e){let t=e.querySelectorAll(IR),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<t.length;o++)Tx.forEach(a=>{let s=t[o],c=s.getAttribute(a),l=c?c.match(AR):null;if(l){let d=i.get(s);d||(d=[],i.set(s,d)),d.push({name:a,value:l[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[t,i]=this._splitIconName(e);t&&(this._svgNamespace=t),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,t).pipe(un(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${t}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(t,i){t&2&&(Ze("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),dr(i.color?"mat-"+i.color:""),Oe("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Se],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[st],ngContentSelectors:yR,decls:1,vars:0,template:function(t,i){t&1&&(Et(),je(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return r})(),No=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Je]})}return r})();var Nx=["mat-button",""],Rg=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Mg=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],RR='.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',Px="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}",MR=["mat-fab",""];var TR=["mat-icon-button",""],FR=["*"];var OR=new ne("MAT_BUTTON_CONFIG");var NR=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],fh=(()=>{class r{_elementRef=x(Fe);_platform=x(ft);_ngZone=x(Le);_animationMode=x(tn,{optional:!0});_focusMonitor=x(Da);_rippleLoader=x(Ex);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){x(jt).load(ka);let e=x(OR,{optional:!0}),t=this._elementRef.nativeElement,i=t.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:a}of NR)t.hasAttribute(o)&&i.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",t){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,t):this._elementRef.nativeElement.focus(t)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Se],disabled:[2,"disabled","disabled",Se],ariaDisabled:[2,"aria-disabled","ariaDisabled",Se],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Se]},features:[st]})}return r})();var PR=(()=>{class r extends fh{tabIndex;ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_haltDisabledEvents=e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())};_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled||null}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,inputs:{tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:Hr(e)]},features:[st,Qe]})}return r})(),qt=(()=>{class r extends fh{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(t,i){t&2&&(Ze("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),dr(i.color?"mat-"+i.color:""),Oe("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Qe],attrs:Nx,ngContentSelectors:Mg,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Et(Rg),G(0,"span",0),je(1),I(2,"span",1),je(3,1),M(),je(4,2),G(5,"span",2)(6,"span",3)),t&2&&Oe("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return r})(),Lx=(()=>{class r extends PR{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(t,i){t&2&&(Ze("disabled",i._getDisabledAttribute())("tabindex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex)("aria-disabled",i._getAriaDisabled()),dr(i.color?"mat-"+i.color:""),Oe("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],features:[Qe],attrs:Nx,ngContentSelectors:Mg,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Et(Rg),G(0,"span",0),je(1),I(2,"span",1),je(3,1),M(),je(4,2),G(5,"span",2)(6,"span",3)),t&2&&Oe("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[RR,Px],encapsulation:2,changeDetection:0})}return r})(),LR=new ne("mat-mdc-fab-default-options",{providedIn:"root",factory:Bx});function Bx(){return{color:"accent"}}var Ox=Bx(),Hs=(()=>{class r extends fh{_options=x(LR,{optional:!0});_isFab=!0;extended;constructor(){super(),this._options=this._options||Ox,this.color=this._options.color||Ox.color}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(t,i){t&2&&(Ze("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),dr(i.color?"mat-"+i.color:""),Oe("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0)("mdc-fab--extended",i.extended)("mat-mdc-extended-fab",i.extended))},inputs:{extended:[2,"extended","extended",Se]},exportAs:["matButton"],features:[st,Qe],attrs:MR,ngContentSelectors:Mg,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Et(Rg),G(0,"span",0),je(1),I(2,"span",1),je(3,1),M(),je(4,2),G(5,"span",2)(6,"span",3)),t&2&&Oe("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-fab-base{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus .mat-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-container-shape, var(--mat-sys-corner-large));color:var(--mat-fab-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display, block)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-small-container-shape, var(--mat-sys-corner-medium));color:var(--mat-fab-small-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-small-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-small-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;height:var(--mdc-extended-fab-container-height, 56px);border-radius:var(--mdc-extended-fab-container-shape, var(--mat-sys-corner-large));font-family:var(--mdc-extended-fab-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-extended-fab-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-extended-fab-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-extended-fab-label-text-tracking, var(--mat-sys-label-large-tracking));box-shadow:var(--mdc-extended-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0})}return r})();var Tg=(()=>{class r extends fh{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(t,i){t&2&&(Ze("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),dr(i.color?"mat-"+i.color:""),Oe("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Qe],attrs:TR,ngContentSelectors:FR,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Et(),G(0,"span",0),je(1),G(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Px],encapsulation:2,changeDetection:0})}return r})();var Wt=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,jl,Je]})}return r})();var Vx="mat-badge-content",BR=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}"],encapsulation:2,changeDetection:0})}return r})(),zx=(()=>{class r{_ngZone=x(Le);_elementRef=x(Fe);_ariaDescriber=x(cx);_renderer=x(ms);_animationMode=x(tn,{optional:!0});_idGenerator=x(zt);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=x(zl);_document=x(Ge);constructor(){x(jt).load(BR),x(jt).load(Kr)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(Vx),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){let t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Vx}`);for(let t of Array.from(e))t!==this._badgeElement&&t.remove()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,i){t&2&&Oe("mat-badge-overlap",i.overlap)("mat-badge-above",i.isAbove())("mat-badge-below",!i.isAbove())("mat-badge-before",!i.isAfter())("mat-badge-after",i.isAfter())("mat-badge-small",i.size==="small")("mat-badge-medium",i.size==="medium")("mat-badge-large",i.size==="large")("mat-badge-hidden",i.hidden||!i.content)("mat-badge-disabled",i.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",Se],disabled:[2,"matBadgeDisabled","disabled",Se],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",Se]},features:[st]})}return r})(),Ux=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Ls,Je,Je]})}return r})();var ph={api:"http://localhost:5000",production:!1};function qn(r){ph.production||console.log(r)}function Ia(r){return r.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}function mh(r){let n=new Date(r),e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}function gh(r){let n=/https:\/\/[^\s]+/g;return r.match(n)||[]}function vh(r){if(!r)return;let n=new Blob([r.content],{type:r.content_type}),e=URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download=r.content_name,t.click(),URL.revokeObjectURL(e)}function bh(r){let n=new Date(r);return Cy(n,"hh:mm a dd/MM/yyyy","en-US")}var on=class r{storage=new Map;constructor(){let n=localStorage.getItem("token");n&&this.set("token",n);let e=localStorage.getItem("info");e&&this.set("info",JSON.parse(e));let t=localStorage.getItem("lable");t&&this.set("lable",t)}set(n,e){this.storage.set(n,e)}get(n){return this.storage.get(n)}delete(n){this.storage.delete(n)}has(n){return this.storage.has(n)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function yh(r){return r&&typeof r.connect=="function"&&!(r instanceof Zc)}var Gs=function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r}(Gs||{}),Hl=new ne("_ViewRepeater"),qs=class{applyChanges(n,e,t,i,o){n.forEachOperation((a,s,c)=>{let l,d;if(a.previousIndex==null){let u=t(a,s,c);l=e.createEmbeddedView(u.templateRef,u.context,u.index),d=Gs.INSERTED}else c==null?(e.remove(s),d=Gs.REMOVED):(l=e.get(s),e.move(l,c),d=Gs.MOVED);o&&o({context:l?.context,operation:d,record:a})})}detach(){}};var _h=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new _e;constructor(n=!1,e,t=!0,i){this._multiple=n,this._emitChanges=t,this.compareWith=i,e&&e.length&&(n?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(t=>this._markSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(t=>this._unmarkSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,t=new Set(n);n.forEach(o=>this._markSelected(o)),e.filter(o=>!t.has(this._getConcreteValue(o,t))).forEach(o=>this._unmarkSelected(o));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let t of e)if(this.compareWith(n,t))return t;return n}else return n}};var jx=(()=>{class r{_listeners=[];notify(e,t){for(let i of this._listeners)i(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var zR=20,Fg=(()=>{class r{_ngZone=x(Le);_platform=x(ft);_document=x(Ge,{optional:!0});constructor(){}_scrolled=new _e;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=zR){return this._platform.isBrowser?new fi(t=>{this._globalSubscription||this._addGlobalListener();let i=e>0?this._scrolled.pipe(jp(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):be()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Ct(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&t.push(o)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let i=Sr(t),o=e.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return nu(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Wx=(()=>{class r{elementRef=x(Fe);scrollDispatcher=x(Fg);ngZone=x(Le);dir=x(hn,{optional:!0});_destroyed=new _e;_elementScrolled=new fi(e=>this.ngZone.runOutsideAngular(()=>nu(this.elementRef.nativeElement,"scroll").pipe(Pt(this._destroyed)).subscribe(e)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let t=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=i?e.end:e.start),e.right==null&&(e.right=i?e.start:e.end),e.bottom!=null&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),i&&Fs()!=$r.NORMAL?(e.left!=null&&(e.right=t.scrollWidth-t.clientWidth-e.left),Fs()==$r.INVERTED?e.left=e.right:Fs()==$r.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let t=this.elementRef.nativeElement;Ku()?t.scrollTo(e):(e.top!=null&&(t.scrollTop=e.top),e.left!=null&&(t.scrollLeft=e.left))}measureScrollOffset(e){let t="left",i="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let a=this.dir&&this.dir.value=="rtl";return e=="start"?e=a?i:t:e=="end"&&(e=a?t:i),a&&Fs()==$r.INVERTED?e==t?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&Fs()==$r.NEGATED?e==t?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==t?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return r})(),UR=20,Aa=(()=>{class r{_platform=x(ft);_viewportSize;_change=new _e;_changeListener=e=>{this._change.next(e)};_document=x(Ge,{optional:!0});constructor(){x(Le).runOutsideAngular(()=>{if(this._platform.isBrowser){let t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect(),a=-o.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,s=-o.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0;return{top:a,left:s}}change(e=UR){return e>0?this._change.pipe(jp(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ys=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})(),Gl=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Fo,Ys,Fo,Ys]})}return r})();var ql=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},eo=class extends ql{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,t,i,o){super(),this.component=n,this.viewContainerRef=e,this.injector=t,this.projectableNodes=o}},Po=class extends ql{templateRef;viewContainerRef;context;injector;constructor(n,e,t,i){super(),this.templateRef=n,this.viewContainerRef=e,this.context=t,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},Og=class extends ql{element;constructor(n){super(),this.element=n instanceof Fe?n.nativeElement:n}},$s=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof eo)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Po)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof Og)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var xh=class extends $s{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,t,i,o){super(),this.outletElement=n,this._appRef=t,this._defaultInjector=i,this._document=o}attachComponentPortal(n){let e;if(n.viewContainerRef){let t=n.injector||n.viewContainerRef.injector,i=t.get(Xp,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:t,ngModuleRef:i,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=gu(n.component,{elementInjector:n.injector||this._defaultInjector||yt.NULL,environmentInjector:this._appRef.injector,projectableNodes:n.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,t=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return t.rootNodes.forEach(i=>this.outletElement.appendChild(i)),t.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(t);i!==-1&&e.remove(i)}),this._attachedPortal=n,t}attachDomPortal=n=>{let e=n.element;e.parentNode;let t=this._document.createComment("dom-portal");e.parentNode.insertBefore(t,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{t.parentNode&&t.parentNode.replaceChild(e,t)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var Lo=(()=>{class r extends $s{_moduleRef=x(Xp,{optional:!0});_document=x(Ge);_viewContainerRef=x(Hn);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new fe;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let t=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,i=t.createComponent(e.component,{index:t.length,injector:e.injector||t.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return t!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);let t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(i,t),this._getRootNode().appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Qe]})}return r})();var to=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})();var Hx=Ku(),Ng=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=en(-this._previousScrollPosition.left),n.style.top=en(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,t=n.style,i=e.style,o=t.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),Hx&&(t.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Hx&&(t.scrollBehavior=o,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}};var Pg=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,t,i){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=t,this._config=i}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(Ct(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},wh=class{enable(){}disable(){}attach(){}};function Lg(r,n){return n.some(e=>{let t=r.bottom<e.top,i=r.top>e.bottom,o=r.right<e.left,a=r.left>e.right;return t||i||o||a})}function Gx(r,n){return n.some(e=>{let t=r.top<e.top,i=r.bottom>e.bottom,o=r.left<e.left,a=r.right>e.right;return t||i||o||a})}var Bg=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,t,i){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=t,this._config=i}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:i}=this._viewportRuler.getViewportSize();Lg(e,[{width:t,height:i,bottom:i,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},WR=(()=>{class r{_scrollDispatcher=x(Fg);_viewportRuler=x(Aa);_ngZone=x(Le);_document=x(Ge);constructor(){}noop=()=>new wh;close=e=>new Pg(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new Ng(this._viewportRuler,this._document);reposition=e=>new Bg(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Bo=class{positionStrategy;scrollStrategy=new wh;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let t of e)n[t]!==void 0&&(this[t]=n[t])}}};var Vg=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var Qx=(()=>{class r{_attachedOverlays=[];_document=x(Ge);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),HR=(()=>{class r extends Qx{_ngZone=x(Le,{optional:!0});add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=e=>{let t=this._attachedOverlays;for(let i=t.length-1;i>-1;i--)if(t[i]._keydownEvents.observers.length>0){let o=t[i]._keydownEvents;this._ngZone?this._ngZone.run(()=>o.next(e)):o.next(e);break}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),GR=(()=>{class r extends Qx{_platform=x(ft);_ngZone=x(Le,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let t=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(t)):this._addEventListeners(t),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=mr(e)};_clickListener=e=>{let t=mr(e),i=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:t;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){let s=o[a];if(s._outsidePointerEvents.observers.length<1||!s.hasAttached())continue;if(qx(s.overlayElement,t)||qx(s.overlayElement,i))break;let c=s._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(e)):c.next(e)}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function qx(r,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,t=n;for(;t;){if(t===r)return!0;t=e&&t instanceof ShadowRoot?t.host:t.parentNode}return!1}var Zx=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return r})(),Ch=(()=>{class r{_platform=x(ft);_containerElement;_document=x(Ge);_styleLoader=x(jt);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||rg()){let i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let t=this._document.createElement("div");t.classList.add(e),rg()?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}_loadStyles(){this._styleLoader.load(Zx)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ks=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new _e;_attachments=new _e;_detachments=new _e;_positionStrategy;_scrollStrategy;_locationChanges=Tt.EMPTY;_backdropClickHandler=n=>this._backdropClick.next(n);_backdropTransitionendHandler=n=>{this._disposeBackdrop(n.target)};_previousHostParent;_keydownEvents=new _e;_outsidePointerEvents=new _e;_renders=new _e;_afterRenderRef;_afterNextRenderRef;constructor(n,e,t,i,o,a,s,c,l,d=!1,u){this._portalOutlet=n,this._host=e,this._pane=t,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._injector=u,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=Gr(()=>au(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=On(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=J(J({},this._config),n),this._updateElementSize()}setDirection(n){this._config=dt(J({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=en(this._config.width),n.height=en(this._config.height),n.minWidth=en(this._config.minWidth),n.minHeight=en(this._config.minHeight),n.maxWidth=en(this._config.maxWidth),n.maxHeight=en(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let n=this._backdropElement;if(n){if(this._animationsDisabled){this._disposeBackdrop(n);return}n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,t){let i=Ms(e||[]).filter(o=>!!o);i.length&&(t?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(Pt(Zn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Yx="cdk-overlay-connected-position-bounding-box",qR=/([A-Za-z%]+)$/,Yl=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new _e;_resizeSubscription=Tt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,t,i,o){this._viewportRuler=e,this._document=t,this._platform=i,this._overlayContainer=o,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(Yx),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,t=this._viewportRect,i=this._containerRect,o=[],a;for(let s of this._preferredPositions){let c=this._getOriginPoint(n,i,s),l=this._getOverlayPoint(c,e,s),d=this._getOverlayFit(l,e,t,s);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(s,c);return}if(this._canFitWithFlexibleDimensions(d,l,t)){o.push({position:s,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,s)});continue}(!a||a.overlayFit.visibleArea<d.visibleArea)&&(a={overlayFit:d,overlayPoint:l,originPoint:c,position:s,overlayRect:e})}if(o.length){let s=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,s=l)}this._isPushed=!1,this._applyPosition(s.position,s.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ra(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Yx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,t){let i;if(t.originX=="center")i=n.left+n.width/2;else{let a=this._isRtl()?n.right:n.left,s=this._isRtl()?n.left:n.right;i=t.originX=="start"?a:s}e.left<0&&(i-=e.left);let o;return t.originY=="center"?o=n.top+n.height/2:o=t.originY=="top"?n.top:n.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(n,e,t){let i;t.overlayX=="center"?i=-e.width/2:t.overlayX==="start"?i=this._isRtl()?-e.width:0:i=this._isRtl()?0:-e.width;let o;return t.overlayY=="center"?o=-e.height/2:o=t.overlayY=="top"?0:-e.height,{x:n.x+i,y:n.y+o}}_getOverlayFit(n,e,t,i){let o=Kx(e),{x:a,y:s}=n,c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(a+=c),l&&(s+=l);let d=0-a,u=a+o.width-t.width,h=0-s,f=s+o.height-t.height,p=this._subtractOverflows(o.width,d,u),m=this._subtractOverflows(o.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:m===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(n,e,t){if(this._hasFlexibleDimensions){let i=t.bottom-e.y,o=t.right-e.x,a=$x(this._overlayRef.getConfig().minHeight),s=$x(this._overlayRef.getConfig().minWidth),c=n.fitsInViewportVertically||a!=null&&a<=i,l=n.fitsInViewportHorizontally||s!=null&&s<=o;return c&&l}return!1}_pushOverlayOnScreen(n,e,t){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let i=Kx(e),o=this._viewportRect,a=Math.max(n.x+i.width-o.width,0),s=Math.max(n.y+i.height-o.height,0),c=Math.max(o.top-t.top-n.y,0),l=Math.max(o.left-t.left-n.x,0),d=0,u=0;return i.width<=o.width?d=l||-a:d=n.x<this._viewportMargin?o.left-t.left-n.x:0,i.height<=o.height?u=c||-s:u=n.y<this._viewportMargin?o.top-t.top-n.y:0,this._previousPushAmount={x:d,y:u},{x:n.x+d,y:n.y+u}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!YR(this._lastScrollVisibility,t)){let i=new Vg(n,t);this._positionChanges.next(i)}this._lastScrollVisibility=t}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,i=n.overlayY;n.overlayX==="center"?t="center":this._isRtl()?t=n.overlayX==="start"?"right":"left":t=n.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${t} ${i}`}_calculateBoundingBoxRect(n,e){let t=this._viewportRect,i=this._isRtl(),o,a,s;if(e.overlayY==="top")a=n.y,o=t.height-a+this._viewportMargin;else if(e.overlayY==="bottom")s=t.height-n.y+this._viewportMargin*2,o=t.height-s+this._viewportMargin;else{let f=Math.min(t.bottom-n.y+t.top,n.y),p=this._lastBoundingBoxSize.height;o=f*2,a=n.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(a=n.y-p/2)}let c=e.overlayX==="start"&&!i||e.overlayX==="end"&&i,l=e.overlayX==="end"&&!i||e.overlayX==="start"&&i,d,u,h;if(l)h=t.width-n.x+this._viewportMargin*2,d=n.x-this._viewportMargin;else if(c)u=n.x,d=t.right-n.x;else{let f=Math.min(t.right-n.x+t.left,n.x),p=this._lastBoundingBoxSize.width;d=f*2,u=n.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=n.x-p/2)}return{top:a,left:u,bottom:s,right:h,width:d,height:o}}_setBoundingBoxStyles(n,e){let t=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=en(t.height),i.top=en(t.top),i.bottom=en(t.bottom),i.width=en(t.width),i.left=en(t.left),i.right=en(t.right),e.overlayX==="center"?i.alignItems="center":i.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?i.justifyContent="center":i.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=en(o)),a&&(i.maxWidth=en(a))}this._lastBoundingBoxSize=t,Ra(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ra(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ra(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let t={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let d=this._viewportRuler.getViewportScrollPosition();Ra(t,this._getExactOverlayY(e,n,d)),Ra(t,this._getExactOverlayX(e,n,d))}else t.position="static";let s="",c=this._getOffset(e,"x"),l=this._getOffset(e,"y");c&&(s+=`translateX(${c}px) `),l&&(s+=`translateY(${l}px)`),t.transform=s.trim(),a.maxHeight&&(i?t.maxHeight=en(a.maxHeight):o&&(t.maxHeight="")),a.maxWidth&&(i?t.maxWidth=en(a.maxWidth):o&&(t.maxWidth="")),Ra(this._pane.style,t)}_getExactOverlayY(n,e,t){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t)),n.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(o.y+this._overlayRect.height)}px`}else i.top=en(o.y);return i}_getExactOverlayX(n,e,t){let i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t));let a;if(this._isRtl()?a=n.overlayX==="end"?"left":"right":a=n.overlayX==="end"?"right":"left",a==="right"){let s=this._document.documentElement.clientWidth;i.right=`${s-(o.x+this._overlayRect.width)}px`}else i.left=en(o.x);return i}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),t=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Gx(n,t),isOriginOutsideView:Lg(n,t),isOverlayClipped:Gx(e,t),isOverlayOutsideView:Lg(e,t)}}_subtractOverflows(n,...e){return e.reduce((t,i)=>t-Math.max(i,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+n-this._viewportMargin,bottom:t.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Ms(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof Fe)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,t=n.height||0;return{top:n.y,bottom:n.y+t,left:n.x,right:n.x+e,height:t,width:e}}};function Ra(r,n){for(let e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r}function $x(r){if(typeof r!="number"&&r!=null){let[n,e]=r.split(qR);return!e||e==="px"?parseFloat(n):null}return r||null}function Kx(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function YR(r,n){return r===n?!0:r.isOriginClipped===n.isOriginClipped&&r.isOriginOutsideView===n.isOriginOutsideView&&r.isOverlayClipped===n.isOverlayClipped&&r.isOverlayOutsideView===n.isOverlayOutsideView}var Xx="cdk-global-overlay-wrapper",zg=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(Xx),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:a,maxHeight:s}=t,c=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),l=(o==="100%"||o==="100vh")&&(!s||s==="100%"||s==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",m="";c?m="flex-start":d==="center"?(m="center",h?p=u:f=u):h?d==="left"||d==="end"?(m="flex-end",f=u):(d==="right"||d==="start")&&(m="flex-start",p=u):d==="left"||d==="start"?(m="flex-start",f=u):(d==="right"||d==="end")&&(m="flex-end",p=u),n.position=this._cssPosition,n.marginLeft=c?"0":f,n.marginTop=l?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=c?"0":p,e.justifyContent=m,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,t=e.style;e.classList.remove(Xx),t.justifyContent=t.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},$R=(()=>{class r{_viewportRuler=x(Aa);_document=x(Ge);_platform=x(ft);_overlayContainer=x(Ch);constructor(){}global(){return new zg}flexibleConnectedTo(e){return new Yl(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),kn=(()=>{class r{scrollStrategies=x(WR);_overlayContainer=x(Ch);_positionBuilder=x($R);_keyboardDispatcher=x(HR);_injector=x(yt);_ngZone=x(Le);_document=x(Ge);_directionality=x(hn);_location=x(qi);_outsideClickDispatcher=x(GR);_animationsModuleType=x(tn,{optional:!0});_idGenerator=x(zt);_appRef;_styleLoader=x(jt);constructor(){}create(e){this._styleLoader.load(Zx);let t=this._createHostElement(),i=this._createPaneElement(t),o=this._createPortalOutlet(i),a=new Bo(e);return a.direction=a.direction||this._directionality.value,new Ks(o,t,i,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(zr))}position(){return this._positionBuilder}_createPaneElement(e){let t=this._document.createElement("div");return t.id=this._idGenerator.getId("cdk-overlay-"),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Co)),new xh(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),KR=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Jx=new ne("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=x(kn);return()=>r.scrollStrategies.reposition()}}),$l=(()=>{class r{elementRef=x(Fe);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return r})(),Ug=(()=>{class r{_overlay=x(kn);_dir=x(hn,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=Tt.EMPTY;_attachSubscription=Tt.EMPTY;_detachSubscription=Tt.EMPTY;_positionSubscription=Tt.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=x(Jx);_disposeOnNavigation=!1;_ngZone=x(Le);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new fe;positionChange=new fe;attach=new fe;detach=new fe;overlayKeydown=new fe;overlayOutsideClick=new fe;constructor(){let e=x(Nn),t=x(Hn);this._templatePortal=new Po(e,t),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=KR);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),t.keyCode===27&&!this.disableClose&&!rn(t)&&(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{let i=this._getOriginElement(),o=mr(t);(!i||i!==o&&!i.contains(o))&&this.overlayOutsideClick.next(t)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new Bo({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(t.width=this.width),(this.height||this.height===0)&&(t.height=this.height),(this.minWidth||this.minWidth===0)&&(t.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){let t=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof $l?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof $l?this.origin.elementRef.nativeElement:this.origin instanceof Fe?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(U_(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Se],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Se],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Se],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Se],push:[2,"cdkConnectedOverlayPush","push",Se],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Se]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[st,At]})}return r})();function XR(r){return()=>r.scrollStrategies.reposition()}var QR={provide:Jx,deps:[kn],useFactory:XR},zo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[kn,QR],imports:[Fo,to,Gl,Gl]})}return r})();function ZR(r,n){}var Uo=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Wg=(()=>{class r extends $s{_elementRef=x(Fe);_focusTrapFactory=x(fg);_config;_interactivityChecker=x(zl);_ngZone=x(Le);_overlayRef=x(Ks);_focusMonitor=x(Da);_platform=x(ft);_document=x(Ge,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=x(St);_injector=x(yt);_isDestroyed=!1;constructor(){super(),this._config=x(Uo,{optional:!0})||new Uo,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let t=this._ariaLabelledByQueue.indexOf(e);t>-1&&(this._ariaLabelledByQueue.splice(t,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),t}attachTemplatePortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),t}attachDomPortal=e=>{this._portalOutlet.hasAttached();let t=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),t};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,t){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(t)}_focusByCssSelector(e,t){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,t)}_trapFocus(){this._isDestroyed||On(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,t=null;if(typeof e=="string"?t=this._document.querySelector(e):typeof e=="boolean"?t=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(t=e),this._config.restoreFocus&&t&&typeof t.focus=="function"){let i=Ro(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,t=Ro();return e===t||e.contains(t)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ro()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(t&1&&lt(Lo,7),t&2){let o;Ne(o=Pe())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){t&2&&Ze("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Qe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){t&1&&he(0,ZR,0,0,"ng-template",0)},dependencies:[Lo],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return r})(),Kl=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new _e;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(t=>{t.keyCode===27&&!this.disableClose&&!rn(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let t=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(n),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},JR=new ne("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=x(kn);return()=>r.scrollStrategies.block()}}),eM=new ne("DialogData"),tM=new ne("DefaultDialogConfig");var Hg=(()=>{class r{_overlay=x(kn);_injector=x(yt);_defaultOptions=x(tM,{optional:!0});_parentDialog=x(r,{optional:!0,skipSelf:!0});_overlayContainer=x(Ch);_idGenerator=x(zt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new _e;_afterOpenedAtThisLevel=new _e;_ariaHiddenElements=new Map;_scrollStrategy=x(JR);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Wi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gn(void 0)));constructor(){}open(e,t){let i=this._defaultOptions||new Uo;t=J(J({},i),t),t.id=t.id||this._idGenerator.getId("cdk-dialog-"),t.id&&this.getDialogById(t.id);let o=this._getOverlayConfig(t),a=this._overlay.create(o),s=new Kl(a,t),c=this._attachContainer(a,s,t);return s.containerInstance=c,this._attachDialogContent(e,s,c,t),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.closed.subscribe(()=>this._removeOpenDialog(s,!0)),this.afterOpened.next(s),s}closeAll(){jg(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){jg(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),jg(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let t=new Bo({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachContainer(e,t,i){let o=i.injector||i.viewContainerRef?.injector,a=[{provide:Uo,useValue:i},{provide:Kl,useValue:t},{provide:Ks,useValue:e}],s;i.container?typeof i.container=="function"?s=i.container:(s=i.container.type,a.push(...i.container.providers(i))):s=Wg;let c=new eo(s,i.viewContainerRef,yt.create({parent:o||this._injector,providers:a}));return e.attach(c).instance}_attachDialogContent(e,t,i,o){if(e instanceof Nn){let a=this._createInjector(o,t,i,void 0),s={$implicit:o.data,dialogRef:t};o.templateContext&&(s=J(J({},s),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new Po(e,null,s,a))}else{let a=this._createInjector(o,t,i,this._injector),s=i.attachComponentPortal(new eo(e,o.viewContainerRef,a));t.componentRef=s,t.componentInstance=s.instance}}_createInjector(e,t,i,o){let a=e.injector||e.viewContainerRef?.injector,s=[{provide:eM,useValue:e.data},{provide:Kl,useValue:t}];return e.providers&&(typeof e.providers=="function"?s.push(...e.providers(t,e,i)):s.push(...e.providers)),e.direction&&(!a||!a.get(hn,null,{optional:!0}))&&s.push({provide:hn,useValue:{value:e.direction,change:be()}}),yt.create({parent:a||o,providers:s})}_removeOpenDialog(e,t){let i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),t&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let t=e.parentElement.children;for(let i=t.length-1;i>-1;i--){let o=t[i];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function jg(r,n){let e=r.length;for(;e--;)n(r[e])}var ew=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[Hg],imports:[zo,to,Ls,to]})}return r})();function nM(r,n){}var Eh=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},Gg="mdc-dialog--open",tw="mdc-dialog--opening",nw="mdc-dialog--closing",rM=150,iM=75,oM=(()=>{class r extends Wg{_animationMode=x(tn,{optional:!0});_animationStateChanged=new fe;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?iw(this._config.enterAnimationDuration)??rM:0;_exitAnimationDuration=this._animationsEnabled?iw(this._config.exitAnimationDuration)??iM:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(rw,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(tw,Gg)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Gg),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Gg),this._animationsEnabled?(this._hostElement.style.setProperty(rw,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(nw)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(tw,nw)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,i){t&2&&(jr("id",i._config.id),Ze("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Oe("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[Qe],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1),he(2,nM,0,0,"ng-template",2),M()())},dependencies:[Lo],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return r})(),rw="--mat-dialog-transition-duration";function iw(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?Pl(r.substring(0,r.length-2)):r.endsWith("s")?Pl(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var Dh=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(Dh||{}),Xs=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new _e;_beforeClosed=new _e;_result;_closeFallbackTimeout;_state=Dh.OPEN;_closeInteractionType;constructor(n,e,t){this._ref=n,this._containerInstance=t,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(Ct(i=>i.state==="opened"),un(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Ct(i=>i.state==="closed"),un(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zn(this.backdropClick(),this.keydownEvents().pipe(Ct(i=>i.keyCode===27&&!this.disableClose&&!rn(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),aM(this,i.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Ct(e=>e.state==="closing"),un(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Dh.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Dh.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function aM(r,n,e){return r._closeInteractionType=n,r.close(e)}var qg=new ne("MatMdcDialogData"),sM=new ne("mat-mdc-dialog-default-options"),cM=new ne("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=x(kn);return()=>r.scrollStrategies.block()}});var Sh=(()=>{class r{_overlay=x(kn);_defaultOptions=x(sM,{optional:!0});_scrollStrategy=x(cM);_parentDialog=x(r,{optional:!0,skipSelf:!0});_idGenerator=x(zt);_dialog=x(Hg);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new _e;_afterOpenedAtThisLevel=new _e;dialogConfigClass=Eh;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Wi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gn(void 0)));constructor(){this._dialogRefConstructor=Xs,this._dialogContainerType=oM,this._dialogDataToken=qg}open(e,t){let i;t=J(J({},this._defaultOptions||new Eh),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,dt(J({},t),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:Uo,useValue:t}]},templateContext:()=>({dialogRef:i}),providers:(a,s,c)=>(i=new this._dialogRefConstructor(a,t,c),i.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:s.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(i);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ow=(()=>{class r{_dialogRef=x(Xs,{optional:!0});_elementRef=x(Fe);_dialog=x(Sh);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=lM(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r})}return r})(),aw=(()=>{class r extends ow{id=x(zt).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){t&2&&jr("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Qe]})}return r})(),sw=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[iy([Wx])]})}return r})(),cw=(()=>{class r extends ow{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(t,i){t&2&&Oe("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},features:[Qe]})}return r})();function lM(r,n){let e=r.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(t=>t.id===e.id):null}var lw=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[Sh],imports:[ew,zo,to,Je,Je]})}return r})();function dM(r,n){if(r&1){let e=nt();I(0,"button",3),te("click",function(){le(e);let i=ee();return de(i.onCancel())}),j(1,"Cancel"),M()}}var kh=class r{constructor(n,e){this.data=n;this.dialogRef=e}okClick=new fe;cancelClick=new fe;onOk(){this.okClick.emit(),this.dialogRef.close()}onCancel(){this.cancelClick.emit(),this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(ve(qg),ve(Xs))};static \u0275cmp=re({type:r,selectors:[["app-alert-dialog"]],outputs:{okClick:"okClick",cancelClick:"cancelClick"},decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button",""]],template:function(e,t){e&1&&(I(0,"h1",0),j(1),M(),I(2,"div",1)(3,"p"),j(4),M()(),I(5,"div",2)(6,"button",3),te("click",function(){return t.onOk()}),j(7,"OK"),M(),he(8,dM,2,0,"button",4),M()),e&2&&(P(),ht(t.data.title),P(3),ht(t.data.message),P(4),me(t.data.cancelButton?8:-1))},dependencies:[lw,aw,cw,sw,Wt,qt],encapsulation:2})};var Ln=class r{constructor(n){this.dialog=n}showSuccessAlert(n,e=!1,t,i){this.showDialog("Success",n,e,t,i)}showErrorAlert(n,e=!1,t,i){this.showDialog("Error",n,e,t,i)}showWarningAlert(n,e=!1,t,i){this.showDialog("Warning",n,e,t,i)}showDialog(n,e,t,i,o){let a=this.dialog.open(kh,{data:{title:n,message:e,cancelButton:t}});i&&a.componentInstance.okClick.subscribe(i),o&&a.componentInstance.cancelClick.subscribe(o)}static \u0275fac=function(e){return new(e||r)(Ae(Sh))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var uM=["navImg"],Ih=class r{constructor(n,e,t){this.globalStorageService=n;this.router=e;this.alert=t}user;lable;navImg;ngOnInit(){this.globalStorageService.get("info")&&(this.user=this.globalStorageService.get("info"),this.lable=this.globalStorageService.get("lable"),this.user.name=Ia(this.user.name))}goto(n){this.router.navigate([n])}openPayment(){window.open("https://www.timt.org.in/")}showToken(){let n=this.globalStorageService.get("token");n!=null&&this.alert.showSuccessAlert(n)}openShowCase(){window.open("https://www.facebook.com/timttmluk/photos_by")}openCalander(){window.open("https://www.timt.org.in/academic/academic-calender")}openUrl(n){window.open(n)}static \u0275fac=function(e){return new(e||r)(ve(on),ve(nn),ve(Ln))};static \u0275cmp=re({type:r,selectors:[["app-dashbord"]],viewQuery:function(e,t){if(e&1&&lt(uM,5),e&2){let i;Ne(i=Pe())&&(t.navImg=i.first)}},decls:91,vars:1,consts:[["navImg",""],[1,"root","bg-img"],[1,"w-full","h-full","p-4","relative"],[1,"w-full","flex","justify-end"],["mat-fab","","disabled",""],["matBadge","4"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","#000000"],["d","M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Zm320-300Zm0 420q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-280h320v-280q0-66-47-113t-113-47q-66 0-113 47t-47 113v280Z"],["data-aos","fade-left",1,"w-full","h-[60px]","bg-[#ffffff5e]","rounded-md","decoration-auto","p-1","flex","items-center","z-[3]","absolute","top-[20%]"],[1,"rounded-full","h-full","w-[52px]"],["alt","user","src","/img/user-286-512.png"],[1,"ml-2","parkinsans"],["data-aos","fade-up",1,"w-full","bg-blue-500","absolute","bottom-0","rt-12px","flex","p-4","pt-22","z-[1]","top-[30%]"],["appearance","outlined","data-aos","fade-right",1,"h-[100px]","w-[45%]","m-3"],[1,"decoration-auto"],["appearance","outlined","data-aos","fade-left",1,"h-[100px]","w-[45%]","m-3","parkinsans"],["data-aos","fade-up",1,"w-full","h-[50%]","bg-white","absolute","bottom-0","rt-12px","pt-[25px]","z-[3]"],[1,"grid","grid-cols-3","auto-rows-[150px]","gap-4","w-full","h-full","overflow-y-auto","p-4"],["appearance","outlined","data-aos","flip-left",1,"h-full","w-full","mat-card-click",3,"click"],[1,"w-full","h-full","flex","justify-center","items-center"],[1,"icon",2,"background-image","url('/icon/school/college.png')"],[1,"icon",2,"background-image","url('/icon/school/presentation.png')"],[1,"icon",2,"background-image","url('/icon/school/noticeboard.png')"],[1,"icon",2,"background-image","url('/icon/school/credit-card.png')"],[1,"icon",2,"background-image","url('/icon/school/blockchain.png')"],[1,"icon",2,"background-image","url('/icon/school/cogwheel.png')"],["appearance","outlined",1,"h-full","w-full","mat-card-click",3,"click"],[1,"icon",2,"background-image","url('/icon/school/cyber-security.png')"],[1,"icon",2,"background-image","url('/icon/school/portfolio.png')"],[1,"icon",2,"background-image","url('/icon/school/calendar.png')"],[1,"icon",2,"background-image","url('/icon/school/facebook_5968764.png')"],[1,"icon",2,"background-image","url('/icon/school/instagram_4494488.png')"],[1,"icon",2,"background-image","url('/icon/school/youtube_4494485.png')"],[1,"icon",2,"background-image","url('/icon/school/customer-review.png')"]],template:function(e,t){if(e&1){let i=nt();I(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4)(4,"mat-icon",5),Sn(),I(5,"svg",6),G(6,"path",7),M()()()(),ua(),I(7,"div",8)(8,"div",9),G(9,"img",10,0),M(),I(11,"h1",11),j(12),M()()(),I(13,"div",12)(14,"mat-card",13)(15,"mat-card-content",14),j(16,"Attendance Persentage"),M(),I(17,"mat-card-content"),j(18,"0.1%"),M()(),I(19,"mat-card",15)(20,"mat-card-content"),j(21,"Class Persentage"),M(),I(22,"mat-card-content"),j(23,"0%"),M()()(),I(24,"div",16)(25,"div",17)(26,"mat-card",18),te("click",function(){return le(i),de(t.goto("/college/attendance"))}),I(27,"mat-card-content"),j(28,"Attendance"),M(),I(29,"div",19),G(30,"div",20),M()(),I(31,"mat-card",18),te("click",function(){return le(i),de(t.goto("college/class"))}),I(32,"mat-card-content"),j(33,"Classes"),M(),I(34,"div",19),G(35,"div",21),M()(),I(36,"mat-card",18),te("click",function(){return le(i),de(t.goto("college/notic"))}),I(37,"mat-card-content"),j(38,"Notice Bord"),M(),I(39,"div",19),G(40,"div",22),M()(),I(41,"mat-card",18),te("click",function(){return le(i),de(t.openPayment())}),I(42,"mat-card-content"),j(43,"Payment"),M(),I(44,"div",19),G(45,"div",23),M()(),I(46,"mat-card",18),te("click",function(){return le(i),de(t.showToken())}),I(47,"mat-card-content"),j(48,"Token"),M(),I(49,"div",19),G(50,"div",24),M()(),I(51,"mat-card",18),te("click",function(){return le(i),de(t.goto("/me_data"))}),I(52,"mat-card-content"),j(53,"Setting"),M(),I(54,"div",19),G(55,"div",25),M()(),I(56,"mat-card",26),te("click",function(){return le(i),de(t.goto("/user/security"))}),I(57,"mat-card-content"),j(58,"Securty"),M(),I(59,"div",19),G(60,"div",27),M()(),I(61,"mat-card",26),te("click",function(){return le(i),de(t.openShowCase())}),I(62,"mat-card-content"),j(63,"Showcase"),M(),I(64,"div",19),G(65,"div",28),M()(),I(66,"mat-card",26),te("click",function(){return le(i),de(t.openCalander())}),I(67,"mat-card-content"),j(68,"Calander"),M(),I(69,"div",19),G(70,"div",29),M()(),I(71,"mat-card",26),te("click",function(){return le(i),de(t.openUrl("https://www.facebook.com/timttmluk"))}),I(72,"mat-card-content"),j(73,"Facebook"),M(),I(74,"div",19),G(75,"div",30),M()(),I(76,"mat-card",26),te("click",function(){return le(i),de(t.openUrl("https://www.instagram.com/tamralipta_inst_of_man_nd_tech"))}),I(77,"mat-card-content"),j(78,"Instagram"),M(),I(79,"div",19),G(80,"div",31),M()(),I(81,"mat-card",26),te("click",function(){return le(i),de(t.openUrl("https://www.youtube.com/@tamraliptainstituteofmanag3871"))}),I(82,"mat-card-content"),j(83,"Youtube"),M(),I(84,"div",19),G(85,"div",32),M()(),I(86,"mat-card",26),te("click",function(){return le(i),de(t.goto("/college/feedback"))}),I(87,"mat-card-content"),j(88,"Feedback"),M(),I(89,"div",19),G(90,"div",33),M()()()()()}e&2&&(P(12),ht(t.user==null?null:t.user.name))},dependencies:[Us,er,js,Ws,No,Oo,Wt,Hs,Ux,zx,K0],styles:[".rt-12px[_ngcontent-%COMP%]{border-radius:24px 24px 0 0}.bg-img[_ngcontent-%COMP%]{background-image:url(/img/bg/bg2.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed}.icon[_ngcontent-%COMP%]{background-position:center;background-size:contain;background-repeat:no-repeat;background-attachment:fixed;height:58px;width:58px}.mat-card-click[_ngcontent-%COMP%]:active{transform:scale(1.1);background-color:#00f3}"]})};var Zr=class r{constructor(n,e){this.router=n;this.storage=e}canActivate(){return this.storage.get("token")?!0:(this.router.navigate(["/welcome"]),!1)}static \u0275fac=function(e){return new(e||r)(Ae(nn),Ae(on))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var hM=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return r})(),uw=kr({passive:!0}),hw=(()=>{class r{_platform=x(ft);_ngZone=x(Le);_styleLoader=x(jt);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return pi;this._styleLoader.load(hM);let t=Sr(e),i=this._monitoredElements.get(t);if(i)return i.subject;let o=new _e,a="cdk-text-field-autofilled",s=c=>{c.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(a)?(t.classList.add(a),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(a)&&(t.classList.remove(a),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,uw),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:o,unlisten:()=>{t.removeEventListener("animationstart",s,uw)}}),o}stopMonitoring(e){let t=Sr(e),i=this._monitoredElements.get(t);i&&(i.unlisten(),i.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var fw=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})();var xw=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,t){this._renderer=e,this._elementRef=t}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(t){return new(t||r)(ve(ms),ve(Fe))};static \u0275dir=ae({type:r})}return r})(),ww=(()=>{class r extends xw{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,features:[Qe]})}return r})(),Ta=new ne("");var fM={provide:Ta,useExisting:wr(()=>Ar),multi:!0};function pM(){let r=bs()?bs().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var mM=new ne(""),Ar=(()=>{class r extends xw{_compositionMode;_composing=!1;constructor(e,t,i){super(e,t),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!pM())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(t){return new(t||r)(ve(ms),ve(Fe),ve(mM,8))};static \u0275dir=ae({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){t&1&&te("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Ke([fM]),Qe]})}return r})();function jo(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function Cw(r){return r!=null&&typeof r.length=="number"}var td=new ne(""),Jg=new ne(""),gM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ft=class{static min(n){return vM(n)}static max(n){return bM(n)}static required(n){return _M(n)}static requiredTrue(n){return yM(n)}static email(n){return xM(n)}static minLength(n){return wM(n)}static maxLength(n){return CM(n)}static pattern(n){return DM(n)}static nullValidator(n){return Dw(n)}static compose(n){return Rw(n)}static composeAsync(n){return Mw(n)}};function vM(r){return n=>{if(jo(n.value)||jo(r))return null;let e=parseFloat(n.value);return!isNaN(e)&&e<r?{min:{min:r,actual:n.value}}:null}}function bM(r){return n=>{if(jo(n.value)||jo(r))return null;let e=parseFloat(n.value);return!isNaN(e)&&e>r?{max:{max:r,actual:n.value}}:null}}function _M(r){return jo(r.value)?{required:!0}:null}function yM(r){return r.value===!0?null:{required:!0}}function xM(r){return jo(r.value)||gM.test(r.value)?null:{email:!0}}function wM(r){return n=>jo(n.value)||!Cw(n.value)?null:n.value.length<r?{minlength:{requiredLength:r,actualLength:n.value.length}}:null}function CM(r){return n=>Cw(n.value)&&n.value.length>r?{maxlength:{requiredLength:r,actualLength:n.value.length}}:null}function DM(r){if(!r)return Dw;let n,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=r.toString(),n=r),t=>{if(jo(t.value))return null;let i=t.value;return n.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function Dw(r){return null}function Ew(r){return r!=null}function Sw(r){return lu(r)?Dn(r):r}function kw(r){let n={};return r.forEach(e=>{n=e!=null?J(J({},n),e):n}),Object.keys(n).length===0?null:n}function Iw(r,n){return n.map(e=>e(r))}function EM(r){return!r.validate}function Aw(r){return r.map(n=>EM(n)?n:e=>n.validate(e))}function Rw(r){if(!r)return null;let n=r.filter(Ew);return n.length==0?null:function(e){return kw(Iw(e,n))}}function ev(r){return r!=null?Rw(Aw(r)):null}function Mw(r){if(!r)return null;let n=r.filter(Ew);return n.length==0?null:function(e){let t=Iw(e,n).map(Sw);return tu(t).pipe(He(kw))}}function tv(r){return r!=null?Mw(Aw(r)):null}function pw(r,n){return r===null?[n]:Array.isArray(r)?[...r,n]:[r,n]}function Tw(r){return r._rawValidators}function Fw(r){return r._rawAsyncValidators}function Yg(r){return r?Array.isArray(r)?r:[r]:[]}function Mh(r,n){return Array.isArray(r)?r.includes(n):r===n}function mw(r,n){let e=Yg(n);return Yg(r).forEach(i=>{Mh(e,i)||e.push(i)}),e}function gw(r,n){return Yg(n).filter(e=>!Mh(r,e))}var Th=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=ev(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=tv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},no=class extends Th{name;get formDirective(){return null}get path(){return null}},Ci=class extends Th{_parent=null;name=null;valueAccessor=null},Fh=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},SM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},v5=dt(J({},SM),{"[class.ng-submitted]":"isSubmitted"}),Di=(()=>{class r extends Fh{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(ve(Ci,2))};static \u0275dir=ae({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){t&2&&Oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qe]})}return r})(),Ei=(()=>{class r extends Fh{constructor(e){super(e)}static \u0275fac=function(t){return new(t||r)(ve(no,10))};static \u0275dir=ae({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){t&2&&Oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qe]})}return r})();var Xl="VALID",Ah="INVALID",Qs="PENDING",Ql="DISABLED",Wo=class{},Oh=class extends Wo{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Jl=class extends Wo{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},ed=class extends Wo{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},Zs=class extends Wo{status;source;constructor(n,e){super(),this.status=n,this.source=e}},$g=class extends Wo{source;constructor(n){super(),this.source=n}},Kg=class extends Wo{source;constructor(n){super(),this.source=n}};function nv(r){return(Lh(r)?r.validators:r)||null}function kM(r){return Array.isArray(r)?ev(r):r||null}function rv(r,n){return(Lh(n)?n.asyncValidators:r)||null}function IM(r){return Array.isArray(r)?tv(r):r||null}function Lh(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function Ow(r,n,e){let t=r.controls;if(!(n?Object.keys(t):t).length)throw new Dt(1e3,"");if(!t[e])throw new Dt(1001,"")}function Nw(r,n,e){r._forEachChild((t,i)=>{if(e[i]===void 0)throw new Dt(1002,"")})}var Js=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Gr(this.statusReactive)}set status(n){Gr(()=>this.statusReactive.set(n))}_status=Gi(()=>this.statusReactive());statusReactive=mi(void 0);get valid(){return this.status===Xl}get invalid(){return this.status===Ah}get pending(){return this.status==Qs}get disabled(){return this.status===Ql}get enabled(){return this.status!==Ql}errors;get pristine(){return Gr(this.pristineReactive)}set pristine(n){Gr(()=>this.pristineReactive.set(n))}_pristine=Gi(()=>this.pristineReactive());pristineReactive=mi(!0);get dirty(){return!this.pristine}get touched(){return Gr(this.touchedReactive)}set touched(n){Gr(()=>this.touchedReactive.set(n))}_touched=Gi(()=>this.touchedReactive());touchedReactive=mi(!1);get untouched(){return!this.touched}_events=new _e;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(mw(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(mw(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(gw(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(gw(n,this._rawAsyncValidators))}hasValidator(n){return Mh(this._rawValidators,n)}hasAsyncValidator(n){return Mh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(dt(J({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new ed(!0,t))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:t})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t),e&&n.emitEvent!==!1&&this._events.next(new ed(!1,t))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(dt(J({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new Jl(!1,t))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),e&&n.emitEvent!==!1&&this._events.next(new Jl(!0,t))}markAsPending(n={}){this.status=Qs;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Zs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(dt(J({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ql,this.errors=null,this._forEachChild(i=>{i.disable(dt(J({},n),{onlySelf:!0}))}),this._updateValue();let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Oh(this.value,t)),this._events.next(new Zs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(dt(J({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Xl,this._forEachChild(t=>{t.enable(dt(J({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(dt(J({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xl||this.status===Qs)&&this._runAsyncValidator(t,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Oh(this.value,e)),this._events.next(new Zs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(dt(J({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ql:Xl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Qs,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=Sw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,i)=>t&&t._find(i),this)}getError(n,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,t){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||t)&&this._events.next(new Zs(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,t)}_initObservables(){this.valueChanges=new fe,this.statusChanges=new fe}_calculateStatus(){return this._allControlsDisabled()?Ql:this.errors?Ah:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qs)?Qs:this._anyControlsHaveStatus(Ah)?Ah:Xl}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let t=!this._anyControlsDirty(),i=this.pristine!==t;this.pristine=t,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),i&&this._events.next(new Jl(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new ed(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Lh(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=kM(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=IM(this._rawAsyncValidators)}},Ho=class extends Js{constructor(n,e,t){super(nv(e),rv(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,t={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Nw(this,!0,n),Object.keys(n).forEach(t=>{Ow(this,!0,t),this.controls[t].setValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(t=>{let i=this.controls[t];i&&i.patchValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((t,i)=>{t.reset(n?n[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,t)=>(n[t]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&n(t,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&n(t))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(n,e){let t=n;return this._forEachChild((i,o)=>{t=e(t,i,o)}),t}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var Xg=class extends Ho{};var Bh=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>Vh}),Vh="always";function AM(r,n){return[...n.path,r]}function Qg(r,n,e=Vh){iv(r,n),n.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(r.disabled),MM(r,n),FM(r,n),TM(r,n),RM(r,n)}function vw(r,n,e=!0){let t=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(t),n.valueAccessor.registerOnTouched(t)),Ph(r,n),r&&(n._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Nh(r,n){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function RM(r,n){if(n.valueAccessor.setDisabledState){let e=t=>{n.valueAccessor.setDisabledState(t)};r.registerOnDisabledChange(e),n._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function iv(r,n){let e=Tw(r);n.validator!==null?r.setValidators(pw(e,n.validator)):typeof e=="function"&&r.setValidators([e]);let t=Fw(r);n.asyncValidator!==null?r.setAsyncValidators(pw(t,n.asyncValidator)):typeof t=="function"&&r.setAsyncValidators([t]);let i=()=>r.updateValueAndValidity();Nh(n._rawValidators,i),Nh(n._rawAsyncValidators,i)}function Ph(r,n){let e=!1;if(r!==null){if(n.validator!==null){let i=Tw(r);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==n.validator);o.length!==i.length&&(e=!0,r.setValidators(o))}}if(n.asyncValidator!==null){let i=Fw(r);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==n.asyncValidator);o.length!==i.length&&(e=!0,r.setAsyncValidators(o))}}}let t=()=>{};return Nh(n._rawValidators,t),Nh(n._rawAsyncValidators,t),e}function MM(r,n){n.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Pw(r,n)})}function TM(r,n){n.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Pw(r,n),r.updateOn!=="submit"&&r.markAsTouched()})}function Pw(r,n){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function FM(r,n){let e=(t,i)=>{n.valueAccessor.writeValue(t),i&&n.viewToModelUpdate(t)};r.registerOnChange(e),n._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function Lw(r,n){r==null,iv(r,n)}function OM(r,n){return Ph(r,n)}function NM(r,n){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function PM(r){return Object.getPrototypeOf(r.constructor)===ww}function Bw(r,n){r._syncPendingControls(),n.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function LM(r,n){if(!n)return null;Array.isArray(n);let e,t,i;return n.forEach(o=>{o.constructor===Ar?e=o:PM(o)?t=o:i=o}),i||t||e||null}function BM(r,n){let e=r.indexOf(n);e>-1&&r.splice(e,1)}var VM={provide:no,useExisting:wr(()=>ec)},Zl=Promise.resolve(),ec=(()=>{class r extends no{callSetDisabledState;get submitted(){return Gr(this.submittedReactive)}_submitted=Gi(()=>this.submittedReactive());submittedReactive=mi(!1);_directives=new Set;form;ngSubmit=new fe;options;constructor(e,t,i){super(),this.callSetDisabledState=i,this.form=new Ho({},ev(e),tv(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Zl.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Qg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Zl.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Zl.then(()=>{let t=this._findContainer(e.path),i=new Ho({});Lw(i,e),t.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Zl.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Zl.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Bw(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(t){return new(t||r)(ve(td,10),ve(Jg,10),ve(Bh,8))};static \u0275dir=ae({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){t&1&&te("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ke([VM]),Qe]})}return r})();function bw(r,n){let e=r.indexOf(n);e>-1&&r.splice(e,1)}function _w(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Rh=class extends Js{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,t){super(nv(e),rv(t,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(_w(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){bw(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){bw(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){_w(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var zM=r=>r instanceof Rh;var Si=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})(),UM={provide:Ta,useExisting:wr(()=>ov),multi:!0},ov=(()=>{class r extends ww{writeValue(e){let t=e??"";this.setProperty("value",t)}registerOnChange(e){this.onChange=t=>{e(t==""?null:parseFloat(t))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){t&1&&te("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ke([UM]),Qe]})}return r})();var Vw=new ne("");var jM={provide:no,useExisting:wr(()=>Bn)},Bn=(()=>{class r extends no{callSetDisabledState;get submitted(){return Gr(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Gi(()=>this._submittedReactive());_submittedReactive=mi(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new fe;constructor(e,t,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ph(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let t=this.form.get(e.path);return Qg(t,e,this.callSetDisabledState),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){vw(e.control||null,e,!1),BM(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this._submittedReactive.set(!0),Bw(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new $g(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Kg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let t=e.control,i=this.form.get(e.path);t!==i&&(vw(t||null,e),zM(i)&&(Qg(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let t=this.form.get(e.path);Lw(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let t=this.form.get(e.path);t&&OM(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iv(this.form,this),this._oldForm&&Ph(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(t){return new(t||r)(ve(td,10),ve(Jg,10),ve(Bh,8))};static \u0275dir=ae({type:r,selectors:[["","formGroup",""]],hostBindings:function(t,i){t&1&&te("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ke([jM]),Qe,At]})}return r})();var WM={provide:Ci,useExisting:wr(()=>Jr)},Jr=(()=>{class r extends Ci{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new fe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,t,i,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=LM(this,o)}ngOnChanges(e){this._added||this._setUpControl(),NM(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return AM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(t){return new(t||r)(ve(no,13),ve(td,10),ve(Jg,10),ve(Ta,10),ve(Vw,8))};static \u0275dir=ae({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ke([WM]),Qe,At]})}return r})();var zw=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({})}return r})(),Zg=class extends Js{constructor(n,e,t){super(nv(e),rv(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,t={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(n,e={}){let t=this._adjustIndex(n);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,t={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){Nw(this,!1,n),n.forEach((t,i)=>{Ow(this,!1,i),this.at(i).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(n.forEach((t,i)=>{this.at(i)&&this.at(i).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((t,i)=>{t.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,t)=>t._syncPendingControls()?!0:e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,t)=>{n(e,t)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}};function yw(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var ki=(()=>{class r{useNonNullable=!1;get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,t=null){let i=this._reduceControls(e),o={};return yw(t)?o=t:t!==null&&(o.validators=t.validator,o.asyncValidators=t.asyncValidator),new Ho(i,o)}record(e,t=null){let i=this._reduceControls(e);return new Xg(i,t)}control(e,t,i){let o={};return this.useNonNullable?(yw(t)?o=t:(o.validators=t,o.asyncValidators=i),new Rh(e,dt(J({},o),{nonNullable:!0}))):new Rh(e,t,i)}array(e,t,i){let o=e.map(a=>this._createControl(a));return new Zg(o,t,i)}_reduceControls(e){let t={};return Object.keys(e).forEach(i=>{t[i]=this._createControl(e[i])}),t}_createControl(e){if(e instanceof Rh)return e;if(e instanceof Js)return e;if(Array.isArray(e)){let t=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(t,i,o)}else return this.control(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var tc=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Bh,useValue:e.callSetDisabledState??Vh}]}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[zw]})}return r})(),Ii=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Vw,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Bh,useValue:e.callSetDisabledState??Vh}]}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[zw]})}return r})();var av=class{_box;_destroyed=new _e;_resizeSubject=new _e;_resizeObserver;_elementObservables=new Map;constructor(n){this._box=n,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new fi(e=>{let t=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),t.unsubscribe(),this._elementObservables.delete(n)}}).pipe(Ct(e=>e.some(t=>t.target===n)),qp({bufferSize:1,refCount:!0}),Pt(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Uw=(()=>{class r{_observers=new Map;_ngZone=x(Le);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,t){let i=t?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new av(i)),this._observers.get(i).observe(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var HM=["notch"],GM=["matFormFieldNotchedOutline",""],qM=["*"],YM=["textField"],$M=["iconPrefixContainer"],KM=["textPrefixContainer"],XM=["iconSuffixContainer"],QM=["textSuffixContainer"],ZM=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],JM=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function eT(r,n){r&1&&G(0,"span",21)}function tT(r,n){if(r&1&&(I(0,"label",20),je(1,1),he(2,eT,1,0,"span",21),M()),r&2){let e=ee(2);pe("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Ze("for",e._control.disableAutomaticLabeling?null:e._control.id),P(2),me(!e.hideRequiredMarker&&e._control.required?2:-1)}}function nT(r,n){if(r&1&&he(0,tT,3,5,"label",20),r&2){let e=ee();me(e._hasFloatingLabel()?0:-1)}}function rT(r,n){r&1&&G(0,"div",7)}function iT(r,n){}function oT(r,n){if(r&1&&he(0,iT,0,0,"ng-template",13),r&2){ee(2);let e=Wr(1);pe("ngTemplateOutlet",e)}}function aT(r,n){if(r&1&&(I(0,"div",9),he(1,oT,1,1,null,13),M()),r&2){let e=ee();pe("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),P(),me(e._forceDisplayInfixLabel()?-1:1)}}function sT(r,n){r&1&&(I(0,"div",10,2),je(2,2),M())}function cT(r,n){r&1&&(I(0,"div",11,3),je(2,3),M())}function lT(r,n){}function dT(r,n){if(r&1&&he(0,lT,0,0,"ng-template",13),r&2){ee();let e=Wr(1);pe("ngTemplateOutlet",e)}}function uT(r,n){r&1&&(I(0,"div",14,4),je(2,4),M())}function hT(r,n){r&1&&(I(0,"div",15,5),je(2,5),M())}function fT(r,n){r&1&&G(0,"div",16)}function pT(r,n){if(r&1&&(I(0,"div",18),je(1,6),M()),r&2){let e=ee();pe("@transitionMessages",e._subscriptAnimationState)}}function mT(r,n){if(r&1&&(I(0,"mat-hint",22),j(1),M()),r&2){let e=ee(2);pe("id",e._hintLabelId),P(),ht(e.hintLabel)}}function gT(r,n){if(r&1&&(I(0,"div",19),he(1,mT,2,2,"mat-hint",22),je(2,7),G(3,"div",23),je(4,8),M()),r&2){let e=ee();pe("@transitionMessages",e._subscriptAnimationState),P(),me(e.hintLabel?1:-1)}}var nr=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-label"]]})}return r})(),vT=new ne("MatError");var Uh=(()=>{class r{align="start";id=x(zt).getId("mat-mdc-hint-");static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){t&2&&(jr("id",i.id),Ze("align",null),Oe("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"}})}return r})(),bT=new ne("MatPrefix");var $w=new ne("MatSuffix"),nc=(()=>{class r{set _isTextSelector(e){this._isText=!0}_isText=!1;static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[Ke([{provide:$w,useExisting:r}])]})}return r})(),Kw=new ne("FloatingLabelParent"),jw=(()=>{class r{_elementRef=x(Fe);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=x(Uw);_ngZone=x(Le);_parent=x(Kw);_resizeSubscription=new Tt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return _T(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return r})();function _T(r){let n=r;if(n.offsetParent!==null)return n.scrollWidth;let e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let t=e.scrollWidth;return e.remove(),t}var Ww="mdc-line-ripple--active",zh="mdc-line-ripple--deactivating",Hw=(()=>{class r{_elementRef=x(Fe);constructor(){x(Le).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(zh),e.add(Ww)}deactivate(){this._elementRef.nativeElement.classList.add(zh)}_handleTransitionEnd=e=>{let t=this._elementRef.nativeElement.classList,i=t.contains(zh);e.propertyName==="opacity"&&i&&t.remove(Ww,zh)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return r})(),Gw=(()=>{class r{_elementRef=x(Fe);_ngZone=x(Le);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,i){if(t&1&&lt(HM,5),t&2){let o;Ne(o=Pe())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:GM,ngContentSelectors:qM,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(t,i){t&1&&(Et(),G(0,"div",1),I(1,"div",2,0),je(3),M(),G(4,"div",3))},encapsulation:2,changeDetection:0})}return r})(),yT={transitionMessages:Do("transitionMessages",[va("enter",Gn({opacity:1,transform:"translateY(0%)"})),qr("void => enter",[Gn({opacity:0,transform:"translateY(-5px)"}),vi("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},rc=(()=>{class r{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r})}return r})();var Fa=new ne("MatFormField"),xT=new ne("MAT_FORM_FIELD_DEFAULT_OPTIONS"),qw="fill",wT="auto",Yw="fixed",CT="translateY(-50%)",Rr=(()=>{class r{_elementRef=x(Fe);_changeDetectorRef=x(St);_dir=x(hn);_platform=x(ft);_idGenerator=x(zt);_defaults=x(xT,{optional:!0});_animationMode=x(tn,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=ny(nr);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Qi(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||wT}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let t=this._appearance,i=e||this._defaults?.appearance||qw;this._appearance=i,this._appearance==="outline"&&this._appearance!==t&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=qw;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Yw}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||Yw}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new _e;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=x(yt);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Gi(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let t=this._control,i="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(i+e.controlType),t.controlType&&this._elementRef.nativeElement.classList.add(i+t.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=t.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=t.stateChanges.pipe(gn([void 0,void 0]),He(()=>[t.errorState,t.userAriaDescribedBy]),Gp(),Ct(([[o,a],[s,c]])=>o!==s||a!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),t.ngControl&&t.ngControl.valueChanges&&(this._valueChanges=t.ngControl.valueChanges.pipe(Pt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Zn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),au(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Pt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Gi(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let t=this._control?this._control.ngControl:null;return t&&t[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let t=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,i=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let t=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,a=this._textSuffixContainer?.nativeElement,s=t?.getBoundingClientRect().width??0,c=i?.getBoundingClientRect().width??0,l=o?.getBoundingClientRect().width??0,d=a?.getBoundingClientRect().width??0,u=this._dir.value==="rtl"?"-1":"1",h=`${s+c}px`,p=`calc(${u} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${CT} translateX(${p})
    )`;let m=s+c+l+d;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${m}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-form-field"]],contentQueries:function(t,i,o){if(t&1&&(cy(o,i._labelChild,nr,5),Vt(o,rc,5),Vt(o,bT,5),Vt(o,$w,5),Vt(o,vT,5),Vt(o,Uh,5)),t&2){ly();let a;Ne(a=Pe())&&(i._formFieldControl=a.first),Ne(a=Pe())&&(i._prefixChildren=a),Ne(a=Pe())&&(i._suffixChildren=a),Ne(a=Pe())&&(i._errorChildren=a),Ne(a=Pe())&&(i._hintChildren=a)}},viewQuery:function(t,i){if(t&1&&(lt(YM,5),lt($M,5),lt(KM,5),lt(XM,5),lt(QM,5),lt(jw,5),lt(Gw,5),lt(Hw,5)),t&2){let o;Ne(o=Pe())&&(i._textField=o.first),Ne(o=Pe())&&(i._iconPrefixContainer=o.first),Ne(o=Pe())&&(i._textPrefixContainer=o.first),Ne(o=Pe())&&(i._iconSuffixContainer=o.first),Ne(o=Pe())&&(i._textSuffixContainer=o.first),Ne(o=Pe())&&(i._floatingLabel=o.first),Ne(o=Pe())&&(i._notchedOutline=o.first),Ne(o=Pe())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){t&2&&Oe("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations",i._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ke([{provide:Fa,useExisting:r},{provide:Kw,useExisting:r}])],ngContentSelectors:JM,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(t,i){if(t&1){let o=nt();Et(ZM),he(0,nT,1,1,"ng-template",null,0,fy),I(2,"div",6,1),te("click",function(s){return le(o),de(i._control.onContainerClick(s))}),he(4,rT,1,0,"div",7),I(5,"div",8),he(6,aT,2,2,"div",9)(7,sT,3,0,"div",10)(8,cT,3,0,"div",11),I(9,"div",12),he(10,dT,1,1,null,13),je(11),M(),he(12,uT,3,0,"div",14)(13,hT,3,0,"div",15),M(),he(14,fT,1,0,"div",16),M(),I(15,"div",17),he(16,pT,2,1,"div",18)(17,gT,5,2,"div",19),M()}if(t&2){let o;P(2),Oe("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),P(2),me(!i._hasOutline()&&!i._control.disabled?4:-1),P(2),me(i._hasOutline()?6:-1),P(),me(i._hasIconPrefix?7:-1),P(),me(i._hasTextPrefix?8:-1),P(2),me(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),P(2),me(i._hasTextSuffix?12:-1),P(),me(i._hasIconSuffix?13:-1),P(),me(i._hasOutline()?-1:14),P(),Oe("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic"),P(),me((o=i._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[jw,Gw,Ey,Hw,Uh],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[yT.transitionMessages]},changeDetection:0})}return r})(),ei=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Qu,Je]})}return r})();var sv=new ne("MAT_INPUT_VALUE_ACCESSOR"),DT=["button","checkbox","file","hidden","image","radio","range","reset","submit"],ET=new ne("MAT_INPUT_CONFIG"),Mr=(()=>{class r{_elementRef=x(Fe);_platform=x(ft);ngControl=x(Ci,{optional:!0,self:!0});_autofillMonitor=x(hw);_ngZone=x(Le);_formField=x(Fa,{optional:!0});_uid=x(zt).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_webkitBlinkWheelListenerAttached=!1;_config=x(ET,{optional:!0});_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new _e;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=Qi(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Ft.required)??!1}set required(e){this._required=Qi(e)}_required;get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&ng().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Qi(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>ng().has(e));constructor(){let e=x(ec,{optional:!0}),t=x(Bn,{optional:!0}),i=x(Ul),o=x(sv,{optional:!0,self:!0}),a=this._elementRef.nativeElement,s=a.nodeName.toLowerCase();o?fa(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=a,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{a.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Ea(i,this.ngControl,t,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=s==="select",this._isTextarea=s==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=a.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&mu(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let t=this._elementRef.nativeElement;t.type==="number"?(t.type="text",t.setSelectionRange(0,0),t.type="number"):t.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){DT.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(e){let t=this._elementRef.nativeElement,i=t.getAttribute("aria-describedby"),o;if(i){let a=this._formFieldDescribedBy||e;o=e.concat(i.split(" ").filter(s=>s&&!a.includes(s)))}else o=e;this._formFieldDescribedBy=e,o.length?t.setAttribute("aria-describedby",o.join(" ")):t.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let t=e.target;!t.value&&t.selectionStart===0&&t.selectionEnd===0&&(t.setSelectionRange(1,1),t.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(t,i){t&1&&te("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),t&2&&(jr("id",i.id)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),Ze("name",i.name||null)("readonly",i._getReadonlyAttribute())("aria-disabled",i.disabled&&i.disabledInteractive?"true":null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Oe("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mat-mdc-input-disabled-interactive",i.disabledInteractive)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Se]},exportAs:["matInput"],features:[Ke([{provide:rc,useExisting:r}]),st,At]})}return r})(),Tr=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,ei,ei,fw,Je]})}return r})();var jh={api:"https://api.timt.in",production:!0};var Ai=class r{constructor(n,e){this.http=n;this.storage=e}api=jh.api;cache={};login(n){let e=`${this.api}/login`,t={"Content-Type":"application/json"};return this.http.post(e,n,{headers:t})}postInfo(n){let e=`${this.api}/user_info`,t=this.storage.get("token"),i=new Jt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}getUserinfo(n){let e=`userinfo-${n}`,t=this.cache[e];if(t&&Date.now()-t.timestamp<24*60*60*1e3)return be(t.data);let i=`${this.api}/user/info/${n}`,o=this.storage.get("token"),a=new Jt({"Content-Type":"application/json",Authorization:o?`Bearer ${o}`:""});return this.http.get(i,{headers:a}).pipe(Ve(s=>{this.cache[e]={data:s,timestamp:Date.now()}}))}static \u0275fac=function(e){return new(e||r)(Ae(Yi),Ae(on))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function ST(r,n){if(r&1){let e=nt();I(0,"form",8),te("ngSubmit",function(){le(e);let i=ee();return de(i.onSubmit())}),I(1,"mat-form-field",9)(2,"mat-label"),j(3,"Email Id"),M(),G(4,"input",10),M(),I(5,"mat-form-field",9)(6,"mat-label"),j(7,"Password"),M(),G(8,"input",11),M(),I(9,"div",12)(10,"a",13),j(11,"Forget Password?"),M()(),I(12,"div",14)(13,"button",15),j(14," Login "),M()()()}if(r&2){let e=ee();pe("formGroup",e.loginForm)}}var Hh=class r{constructor(n,e,t,i,o){this.service=n;this.fb=e;this.alertService=t;this.router=i;this.storage=o}loginForm;ngOnInit(){this.storage.get("token")&&this.router.navigate(["/"]),qn("Execute login component"),this.loginForm=this.fb.group({username:["",[Ft.required,Ft.email]],password:["",Ft.required]})}onSubmit(){return at(this,null,function*(){this.loginForm?.valid&&(qn("Submit login form"),qn(this.loginForm?.value),yield _t(this.service.login(this.loginForm?.value).pipe(Ve(n=>{n.token&&n.lable&&(localStorage.setItem("token",n.token),this.storage.set("token",n.token),localStorage.setItem("lable",n.lable),this.storage.set("lable",n.lable),n.info?(localStorage.setItem("info",JSON.stringify(n.info)),this.storage.set("info",n.info),this.router.navigate(["/"])):this.alertService.showErrorAlert("Complit your profile",!1,this.onOkError.bind(this)))},n=>{this.alertService.showErrorAlert(n.error.message)}))))})}onOkError(){this.router.navigate(["/me_data"])}static \u0275fac=function(e){return new(e||r)(ve(Ai),ve(ki),ve(Ln),ve(nn),ve(on))};static \u0275cmp=re({type:r,selectors:[["app-login"]],decls:10,vars:1,consts:[[1,"root"],[1,"mask-black"],[1,"root","bg-blue-500"],[1,"z-[1]","m-6","rounded-full","bg-white","bg-center","bg-no-repeat","bg-contain","w-[200px]","h-[200px]","shadow-2","absolute","top-[20%]",2,"background-image","url('img/timt.jpg')"],["data-aos","fade-left",1,"z-[2]","h-[55%]","w-full","shadow-1","p-4","bg-white","absolute","bottom-0","ml-2","mr-2","mt-[25px]","flex","justify-center","items-center","z-[2]",2,"border-radius","32px 32px 0px 0px"],[1,"example-form","w-full",3,"formGroup"],[1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-15%]","left-[-50%]"],[1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-25%]","left-[-30%]"],[1,"example-form","w-full",3,"ngSubmit","formGroup"],[1,"example-full-width","w-full","bg-transparent"],["matInput","","type","email","placeholder","example@gmial.com","formControlName","username"],["matInput","","type","password","placeholder","ddmmyyyy","formControlName","password"],[1,"w-full","flex","justify-end"],["mat-button","","disabled","","href","https://www.google.com/","target","_blank"],[1,"w-full","mt-5"],["mat-flat-button","",1,"w-full","shadow-2","justify-center"]],template:function(e,t){e&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),G(3,"div",3),I(4,"div",4)(5,"mat-divider"),j(6,"s"),M(),he(7,ST,15,1,"form",5),M(),G(8,"div",6)(9,"div",7),M()()()),e&2&&(P(7),me(t.loginForm?7:-1))},dependencies:[Wt,Lx,qt,Us,zs,No,Tr,Mr,Rr,nr,ei,tc,Si,Ar,Di,Ei,Ii,Bn,Jr],styles:[".example-full-width[_ngcontent-%COMP%]{background-color:transparent!important}"]})};var Gh=class r{constructor(n){this.router=n}showMore=!1;goLogin(){this.router.navigate(["/login"])}showHide(){this.showMore?(document.getElementById("more").style.display="none",document.getElementById("donts").style.display="block",this.showMore=!1):(document.getElementById("more").style.display="block",document.getElementById("donts").style.display="none",this.showMore=!0)}static \u0275fac=function(e){return new(e||r)(ve(nn))};static \u0275cmp=re({type:r,selectors:[["app-welcome"]],decls:21,vars:1,consts:[[1,"root","bg-blue-500","flex-col",2,"overflow","hidden !important","position","relative"],["data-aos","zoom-in",1,"m-6","rounded-full","bg-white","bg-center","bg-no-repeat","bg-contain","w-[200px]","h-[200px]","shadow-2","z-[2]",2,"background-image","url('img/timt.jpg')"],[1,"w-full","text-center","text-white","z-[2]"],[1,"dancing"],[1,"bg-white","w-[85%]","p-4","shadow-1","z-[2]","rounded-sm","text-center","absolute","bottom-[100px]"],["id","donts"],["id","more"],["mat-button","",3,"click"],[1,"w-full","text-center","absolute","bottom-[50px]","z-[2]"],["mat-raised-button","",1,"w-[90%]",3,"click"],["data-aos","fade-up-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","bottom-[-15%]","left-[-50%]"],["data-aos","fade-up-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","bottom-[-25%]","left-[-40%]"],["data-aos","fade-down-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-15%]","left-[-50%]"],["data-aos","fade-down-right",1,"absolute","shadow-2","rounded-full","w-[400px]","h-[400px]","bg-white","z-[1]","top-[-25%]","left-[-30%]"]],template:function(e,t){e&1&&(I(0,"div",0),G(1,"div",1),I(2,"div",2)(3,"p",3),j(4,"Welcome"),M()(),I(5,"div",4)(6,"p"),j(7,"The Tamralipta Institute of Management & Technology(TIMT) is situated at Tamluk, "),I(8,"span",5),j(9,"...."),M(),I(10,"span",6),j(11," the district head quarter of Purba Medinipur. It is affiliated to Maulana Abdul Kalam Azad University of Technology West Bengal(MAKAUT, WB). The institute has also received approval from All India Council for Technical Education (AICTE) vide letter No: F.NO.Eastern/2024-25/1-44130103223 dated on 09/05/2024 TIMT boasts of one of the best infrastructure which is evident from its consistent high ranking on infrastructure parameter. Its strength lies in its eminent faculty and the quality of its courses that have, in many cases, been trendsetter."),M()(),I(12,"button",7),te("click",function(){return t.showHide()}),j(13),M()(),I(14,"div",8)(15,"button",9),te("click",function(){return t.goLogin()}),j(16,"Go to Login"),M()(),G(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13),M()),e&2&&(P(13),Xt(" ",t.showMore?"Read Less":"Read More"," "))},dependencies:[Wt,qt,No],styles:['@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLviuEViw.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLuiuEViw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Dancing Script;font-style:normal;font-weight:400 700;font-display:swap;src:url(https://fonts.gstatic.com/s/dancingscript/v25/If2RXTr6YS-zF4S-kcSWSVi_szLgiuE.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Lct-FG.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3vct-FG.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Pct-FG.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3zct-FG.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Dct-FG.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3Hct-FG.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Noto Serif";font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6faw1J5X9T9RW6j9bNfFIMZhhWnFTyNZIQD1-_P3_ctw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf3D33Esw.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf-D33Esw.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf2D33Esw.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf5D33Esw.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf1D33Esw.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf0D33Esw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Noto Serif";font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v23/ga6daw1J5X9T9RW6j9bNVls-hfgvz8JcMofYTYf6D30.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.dancing[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-optical-sizing:auto;font-weight:200px!important;font-style:normal;font-size:80px}#more[_ngcontent-%COMP%]{display:none}']})};var kT=["input"],IT=["formField"],AT=["*"],qh=class{source;value;constructor(n,e){this.source=n,this.value=e}},RT={provide:Ta,useExisting:wr(()=>cv),multi:!0},Xw=new ne("MatRadioGroup"),MT=new ne("mat-radio-default-options",{providedIn:"root",factory:TT});function TT(){return{color:"accent",disabledInteractive:!1}}var cv=(()=>{class r{_changeDetector=x(St);_value=null;_name=x(zt).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new fe;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(t=>{t.checked=this.value===t.value,t.checked&&(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new qh(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["mat-radio-group"]],contentQueries:function(t,i,o){if(t&1&&Vt(o,Yh,5),t&2){let a;Ne(a=Pe())&&(i._radios=a)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Se],required:[2,"required","required",Se],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Se]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Ke([RT,{provide:Xw,useExisting:r}]),st]})}return r})(),Yh=(()=>{class r{_elementRef=x(Fe);_changeDetector=x(St);_focusMonitor=x(Da);_radioDispatcher=x(jx);_defaultOptions=x(MT,{optional:!0});_ngZone=x(Le);_uniqueId=x(zt).getId("mat-radio-");id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new fe;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=x(yt);constructor(){x(jt).load(ka);let e=x(Xw,{optional:!0}),t=x(tn,{optional:!0}),i=x(new Ur("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=t==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,i&&(this.tabIndex=Hr(i,0))}focus(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._inputElement.nativeElement.addEventListener("click",this._onInputClick)})}ngOnDestroy(){this._inputElement?.nativeElement.removeEventListener("click",this._onInputClick),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new qh(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,t;if(!e||!e.selected||this.disabled?t=this.tabIndex:t=e.selected===this?this.tabIndex:-1,t!==this._previousTabIndex){let i=this._inputElement?.nativeElement;i&&(i.setAttribute("tabindex",t+""),this._previousTabIndex=t,On(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===i&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===i&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-radio-button"]],viewQuery:function(t,i){if(t&1&&(lt(kT,5),lt(IT,7,Fe)),t&2){let o;Ne(o=Pe())&&(i._inputElement=o.first),Ne(o=Pe())&&(i._rippleTrigger=o.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(t,i){t&1&&te("focus",function(){return i._inputElement.nativeElement.focus()}),t&2&&(Ze("id",i.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Oe("mat-primary",i.color==="primary")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("mat-mdc-radio-checked",i.checked)("mat-mdc-radio-disabled",i.disabled)("mat-mdc-radio-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Se],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Hr(e)],checked:[2,"checked","checked",Se],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Se],required:[2,"required","required",Se],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Se]},outputs:{change:"change"},exportAs:["matRadioButton"],features:[st],ngContentSelectors:AT,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(t,i){if(t&1){let o=nt();Et(),I(0,"div",2,0)(2,"div",3)(3,"div",4),te("click",function(s){return le(o),de(i._onTouchTargetClick(s))}),M(),I(4,"input",5,1),te("change",function(s){return le(o),de(i._onInputInteraction(s))}),M(),I(6,"div",6),G(7,"div",7)(8,"div",8),M(),I(9,"div",9),G(10,"div",10),M()(),I(11,"label",11),je(12),M()()}t&2&&(pe("labelPosition",i.labelPosition),P(2),Oe("mdc-radio--disabled",i.disabled),P(2),pe("id",i.inputId)("checked",i.checked)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),Ze("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-disabled",i.disabled&&i.disabledInteractive?"true":null),P(5),pe("matRippleTrigger",i._rippleTrigger.nativeElement)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0),P(2),pe("for",i.inputId))},dependencies:[Dg,Sx],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return r})(),Qw=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,jl,Yh,Je]})}return r})();var OT=["mat-calendar-body",""];function NT(r,n){return this._trackRow(n)}var oC=(r,n)=>n.id;function PT(r,n){if(r&1&&(I(0,"tr",0)(1,"td",3),j(2),M()()),r&2){let e=ee();P(),gi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ze("colspan",e.numCols),P(),Xt(" ",e.label," ")}}function LT(r,n){if(r&1&&(I(0,"td",3),j(1),M()),r&2){let e=ee(2);gi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ze("colspan",e._firstRowOffset),P(),Xt(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function BT(r,n){if(r&1){let e=nt();I(0,"td",6)(1,"button",7),te("click",function(i){let o=le(e).$implicit,a=ee(2);return de(a._cellClicked(o,i))})("focus",function(i){let o=le(e).$implicit,a=ee(2);return de(a._emitActiveDateChange(o,i))}),I(2,"span",8),j(3),M(),G(4,"span",9),M()()}if(r&2){let e=n.$implicit,t=n.$index,i=ee().$index,o=ee();gi("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),Ze("data-mat-row",i)("data-mat-col",t),P(),Oe("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(i,t))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,i,t))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,i,t))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),pe("ngClass",e.cssClasses)("tabindex",o._isActiveCell(i,t)?0:-1),Ze("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null)("aria-describedby",o._getDescribedby(e.compareValue)),P(),Oe("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),P(),Xt(" ",e.displayValue," ")}}function VT(r,n){if(r&1&&(I(0,"tr",1),he(1,LT,2,6,"td",4),ur(2,BT,5,48,"td",5,oC),M()),r&2){let e=n.$implicit,t=n.$index,i=ee();P(),me(t===0&&i._firstRowOffset?1:-1),P(),hr(e)}}function zT(r,n){if(r&1&&(I(0,"th",2)(1,"span",6),j(2),M(),I(3,"span",3),j(4),M()()),r&2){let e=n.$implicit;P(2),ht(e.long),P(2),ht(e.narrow)}}var UT=["*"];function jT(r,n){}function WT(r,n){if(r&1){let e=nt();I(0,"mat-month-view",4),fu("activeDateChange",function(i){le(e);let o=ee();return hu(o.activeDate,i)||(o.activeDate=i),de(i)}),te("_userSelection",function(i){le(e);let o=ee();return de(o._dateSelected(i))})("dragStarted",function(i){le(e);let o=ee();return de(o._dragStarted(i))})("dragEnded",function(i){le(e);let o=ee();return de(o._dragEnded(i))}),M()}if(r&2){let e=ee();uu("activeDate",e.activeDate),pe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function HT(r,n){if(r&1){let e=nt();I(0,"mat-year-view",5),fu("activeDateChange",function(i){le(e);let o=ee();return hu(o.activeDate,i)||(o.activeDate=i),de(i)}),te("monthSelected",function(i){le(e);let o=ee();return de(o._monthSelectedInYearView(i))})("selectedChange",function(i){le(e);let o=ee();return de(o._goToDateInView(i,"month"))}),M()}if(r&2){let e=ee();uu("activeDate",e.activeDate),pe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function GT(r,n){if(r&1){let e=nt();I(0,"mat-multi-year-view",6),fu("activeDateChange",function(i){le(e);let o=ee();return hu(o.activeDate,i)||(o.activeDate=i),de(i)}),te("yearSelected",function(i){le(e);let o=ee();return de(o._yearSelectedInMultiYearView(i))})("selectedChange",function(i){le(e);let o=ee();return de(o._goToDateInView(i,"year"))}),M()}if(r&2){let e=ee();uu("activeDate",e.activeDate),pe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function qT(r,n){}var YT=["button"],$T=[[["","matDatepickerToggleIcon",""]]],KT=["[matDatepickerToggleIcon]"];function XT(r,n){r&1&&(Sn(),I(0,"svg",2),G(1,"path",3),M())}var cc=(()=>{class r{changes=new _e;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,t){return`${e} \u2013 ${t}`}formatYearRangeLabel(e,t){return`${e} to ${t}`}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),QT=0,id=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=QT++;constructor(n,e,t,i,o={},a=n,s){this.value=n,this.displayValue=e,this.ariaLabel=t,this.enabled=i,this.cssClasses=o,this.compareValue=a,this.rawValue=s}},Zw=kr({passive:!1,capture:!0}),Go=kr({passive:!0,capture:!0}),$h=kr({passive:!0}),sc=(()=>{class r{_elementRef=x(Fe);_ngZone=x(Le);_platform=x(ft);_intl=x(cc);_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new fe;previewChange=new fe;activeDateChange=new fe;dragStarted=new fe;dragEnded=new fe;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=x(yt);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=x(zt);this._startDateLabelId=e.getId("mat-calendar-body-start-"),this._endDateLabelId=e.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=e.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=e.getId("mat-calendar-body-comparison-end-"),x(jt).load(ka),this._ngZone.runOutsideAngular(()=>{let t=this._elementRef.nativeElement;t.addEventListener("touchmove",this._touchmoveHandler,Zw),t.addEventListener("mouseenter",this._enterHandler,Go),t.addEventListener("focus",this._enterHandler,Go),t.addEventListener("mouseleave",this._leaveHandler,Go),t.addEventListener("blur",this._leaveHandler,Go),t.addEventListener("mousedown",this._mousedownHandler,$h),t.addEventListener("touchstart",this._mousedownHandler,$h),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,t){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:t})}_emitActiveDateChange(e,t){e.enabled&&this.activeDateChange.emit({value:e.value,event:t})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let t=e.numCols,{rows:i,numCols:o}=this;(e.rows||t)&&(this._firstRowOffset=i&&i.length&&i[0].length?o-i[0].length:0),(e.cellAspectRatio||t||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/o}%`),(t||!this._cellWidth)&&(this._cellWidth=`${100/o}%`)}ngOnDestroy(){let e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,Zw),e.removeEventListener("mouseenter",this._enterHandler,Go),e.removeEventListener("focus",this._enterHandler,Go),e.removeEventListener("mouseleave",this._leaveHandler,Go),e.removeEventListener("blur",this._leaveHandler,Go),e.removeEventListener("mousedown",this._mousedownHandler,$h),e.removeEventListener("touchstart",this._mousedownHandler,$h),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,t){let i=e*this.numCols+t;return e&&(i-=this._firstRowOffset),i==this.activeCell}_focusActiveCell(e=!0){On(()=>{setTimeout(()=>{let t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&(e||(this._skipNextFocus=!0),t.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return uv(e,this.startValue,this.endValue)}_isRangeEnd(e){return hv(e,this.startValue,this.endValue)}_isInRange(e){return fv(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return uv(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,t,i){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[t][i-1];if(!o){let a=this.rows[t-1];o=a&&a[a.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,t,i){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[t][i+1];if(!o){let a=this.rows[t+1];o=a&&a[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return hv(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return fv(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return uv(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return hv(e,this.previewStart,this.previewEnd)}_isInPreview(e){return fv(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let t=this._getCellFromElement(e.target);t&&this._ngZone.run(()=>this.previewChange.emit({value:t.enabled?t:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let t=Jw(e),i=t?this._getCellFromElement(t):null;t!==e.target&&(this._didDragSinceMouseDown=!0),dv(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:i?.enabled?i:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let t=e.target&&this._getCellFromElement(e.target);!t||!this._isInRange(t.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:t.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let t=dv(e.target);if(!t){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}t.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let i=this._getCellFromElement(t);this.dragEnded.emit({value:i?.rawValue??null,event:e})})};_touchendHandler=e=>{let t=Jw(e);t&&this._mouseupHandler({target:t})};_getCellFromElement(e){let t=dv(e);if(t){let i=t.getAttribute("data-mat-row"),o=t.getAttribute("data-mat-col");if(i&&o)return this.rows[parseInt(i)][parseInt(o)]}return null}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[At],attrs:OT,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(t,i){t&1&&(he(0,PT,3,6,"tr",0),ur(1,VT,4,1,"tr",1,NT,!0),I(3,"span",2),j(4),M(),I(5,"span",2),j(6),M(),I(7,"span",2),j(8),M(),I(9,"span",2),j(10),M()),t&2&&(me(i._firstRowOffset<i.labelMinRequiredCells?0:-1),P(),hr(i.rows),P(2),pe("id",i._startDateLabelId),P(),Xt(" ",i.startDateAccessibleName,`
`),P(),pe("id",i._endDateLabelId),P(),Xt(" ",i.endDateAccessibleName,`
`),P(),pe("id",i._comparisonStartDateLabelId),P(),Jp(" ",i.comparisonDateAccessibleName," ",i.startDateAccessibleName,`
`),P(),pe("id",i._comparisonEndDateLabelId),P(),Jp(" ",i.comparisonDateAccessibleName," ",i.endDateAccessibleName,`
`))},dependencies:[bu],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}'],encapsulation:2,changeDetection:0})}return r})();function lv(r){return r?.nodeName==="TD"}function dv(r){let n;return lv(r)?n=r:lv(r.parentNode)?n=r.parentNode:lv(r.parentNode?.parentNode)&&(n=r.parentNode.parentNode),n?.getAttribute("data-mat-row")!=null?n:null}function uv(r,n,e){return e!==null&&n!==e&&r<e&&r===n}function hv(r,n,e){return n!==null&&n!==e&&r>=n&&r===e}function fv(r,n,e,t){return t&&n!==null&&e!==null&&n!==e&&r>=n&&r<=e}function Jw(r){let n=r.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}var Fr=class{start;end;_disableStructuralEquivalency;constructor(n,e){this.start=n,this.end=e}},od=(()=>{class r{selection;_adapter;_selectionChanged=new _e;selectionChanged=this._selectionChanged;constructor(e,t){this.selection=e,this._adapter=t,this.selection=e}updateSelection(e,t){let i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(t){ps()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),ZT=(()=>{class r extends od{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new r(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(t){return new(t||r)(Ae(Pn))};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();function JT(r,n){return r||new ZT(n)}var aC={provide:od,deps:[[new la,new el,od],Pn],useFactory:JT};var sC=new ne("MAT_DATE_RANGE_SELECTION_STRATEGY");var pv=7,eF=0,eC=(()=>{class r{_changeDetectorRef=x(St);_dateFormats=x(Sa,{optional:!0});_dateAdapter=x(Pn,{optional:!0});_dir=x(hn,{optional:!0});_rangeStrategy=x(sC,{optional:!0});_rerenderSubscription=Tt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._hasSameMonthAndYear(t,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Fr?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new fe;_userSelection=new fe;dragStarted=new fe;dragEnded=new fe;activeDateChange=new fe;_matCalendarBody;_monthLabel;_weeks;_firstWeekOffset;_rangeStart;_rangeEnd;_comparisonRangeStart;_comparisonRangeEnd;_previewStart;_previewEnd;_isRange;_todayDate;_weekdays;constructor(){x(jt).load(Kr),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(gn(null)).subscribe(()=>this._init())}ngOnChanges(e){let t=e.comparisonStart||e.comparisonEnd;t&&!t.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let t=e.value,i=this._getDateFromDayOfMonth(t),o,a;this._selected instanceof Fr?(o=this._getDateInCurrentMonth(this._selected.start),a=this._getDateInCurrentMonth(this._selected.end)):o=a=this._getDateInCurrentMonth(this._selected),(o!==t||a!==t)&&this.selectedChange.emit(i),this._userSelection.emit({value:i,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!rn(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(pv+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%pv,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:t}){if(this._rangeStrategy){let i=t?t.rawValue:null,o=this._rangeStrategy.createPreview(i,this.selected,e);if(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end),this.activeDrag&&i){let a=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,i,e);a&&(this._previewStart=this._getCellCompareValue(a.start),this._previewEnd=this._getCellCompareValue(a.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let t=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:t??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),t=this._dateAdapter.getDayOfWeekNames("narrow"),o=this._dateAdapter.getDayOfWeekNames("long").map((a,s)=>({long:a,narrow:t[s],id:eF++}));this._weekdays=o.slice(e).concat(o.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),t=this._dateAdapter.getDateNames();this._weeks=[[]];for(let i=0,o=this._firstWeekOffset;i<e;i++,o++){o==pv&&(this._weeks.push([]),o=0);let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),s=this._shouldEnableDate(a),c=this._dateAdapter.format(a,this._dateFormats.display.dateA11yLabel),l=this.dateClass?this.dateClass(a,"month"):void 0;this._weeks[this._weeks.length-1].push(new id(i+1,t[i],c,s,l,this._getCellCompareValue(a),a))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,t){return!!(e&&t&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t))}_getCellCompareValue(e){if(e){let t=this._dateAdapter.getYear(e),i=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(t,i,o).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof Fr?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-month-view"]],viewQuery:function(t,i){if(t&1&&lt(sc,5),t&2){let o;Ne(o=Pe())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[At],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(t,i){t&1&&(I(0,"table",0)(1,"thead",1)(2,"tr"),ur(3,zT,5,2,"th",2,oC),M(),I(5,"tr",3),G(6,"th",4),M()(),I(7,"tbody",5),te("selectedValueChange",function(a){return i._dateSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("previewChange",function(a){return i._previewChanged(a)})("dragStarted",function(a){return i.dragStarted.emit(a)})("dragEnded",function(a){return i._dragEnded(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),M()()),t&2&&(P(3),hr(i._weekdays),P(4),pe("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName))},dependencies:[sc],encapsulation:2,changeDetection:0})}return r})(),gr=24,mv=4,tC=(()=>{class r{_changeDetectorRef=x(St);_dateAdapter=x(Pn,{optional:!0});_dir=x(hn,{optional:!0});_rerenderSubscription=Tt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),cC(this._dateAdapter,t,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Fr?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new fe;yearSelected=new fe;activeDateChange=new fe;_matCalendarBody;_years;_todayYear;_selectedYear;constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(gn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let t=this._dateAdapter.getYear(this._activeDate)-rd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let i=0,o=[];i<gr;i++)o.push(t+i),o.length==mv&&(this._years.push(o.map(a=>this._createCellForYear(a))),o=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let t=e.value,i=this._dateAdapter.createDate(t,0,1),o=this._getDateFromYear(t);this.yearSelected.emit(i),this.selectedChange.emit(o)}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromYear(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-mv);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,mv);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-rd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,gr-rd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-gr*10:-gr);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?gr*10:gr);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return rd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let t=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,t,1));return this._dateAdapter.createDate(e,t,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForYear(e){let t=this._dateAdapter.createDate(e,0,1),i=this._dateAdapter.getYearName(t),o=this.dateClass?this.dateClass(t,"multi-year"):void 0;return new id(e,i,i,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let t=this._dateAdapter.createDate(e,0,1);for(let i=t;this._dateAdapter.getYear(i)==e;i=this._dateAdapter.addCalendarDays(i,1))if(this.dateFilter(i))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Fr){let t=e.start||e.end;t&&(this._selectedYear=this._dateAdapter.getYear(t))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-multi-year-view"]],viewQuery:function(t,i){if(t&1&&lt(sc,5),t&2){let o;Ne(o=Pe())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(t,i){t&1&&(I(0,"table",0)(1,"thead",1)(2,"tr"),G(3,"th",2),M()(),I(4,"tbody",3),te("selectedValueChange",function(a){return i._yearSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),M()()),t&2&&(P(4),pe("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[sc],encapsulation:2,changeDetection:0})}return r})();function cC(r,n,e,t,i){let o=r.getYear(n),a=r.getYear(e),s=lC(r,t,i);return Math.floor((o-s)/gr)===Math.floor((a-s)/gr)}function rd(r,n,e,t){let i=r.getYear(n);return tF(i-lC(r,e,t),gr)}function lC(r,n,e){let t=0;return e?t=r.getYear(e)-gr+1:n&&(t=r.getYear(n)),t}function tF(r,n){return(r%n+n)%n}var nC=(()=>{class r{_changeDetectorRef=x(St);_dateFormats=x(Sa,{optional:!0});_dateAdapter=x(Pn,{optional:!0});_dir=x(hn,{optional:!0});_rerenderSubscription=Tt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._dateAdapter.getYear(t)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Fr?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new fe;monthSelected=new fe;activeDateChange=new fe;_matCalendarBody;_months;_yearLabel;_todayMonth;_selectedMonth;constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(gn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let t=e.value,i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(i);let o=this._getDateFromMonth(t);this.selectedChange.emit(o)}_updateActiveDate(e){let t=e.value,i=this._activeDate;this.activeDate=this._getDateFromMonth(t),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let t=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(t=>t.map(i=>this._createCellForMonth(i,e[i]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),i=this._dateAdapter.getNumDaysInMonth(t);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForMonth(e,t){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(i,this._dateFormats.display.monthYearA11yLabel),a=this.dateClass?this.dateClass(i,"year"):void 0;return new id(e,t.toLocaleUpperCase(),o,this._shouldEnableMonth(e),a)}_shouldEnableMonth(e){let t=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(t,e)||this._isYearAndMonthBeforeMinDate(t,e))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(t,e,1);for(let o=i;this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,t){if(this.maxDate){let i=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>i||e===i&&t>o}return!1}_isYearAndMonthBeforeMinDate(e,t){if(this.minDate){let i=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<i||e===i&&t<o}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof Fr?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-year-view"]],viewQuery:function(t,i){if(t&1&&lt(sc,5),t&2){let o;Ne(o=Pe())&&(i._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(t,i){t&1&&(I(0,"table",0)(1,"thead",1)(2,"tr"),G(3,"th",2),M()(),I(4,"tbody",3),te("selectedValueChange",function(a){return i._monthSelected(a)})("activeDateChange",function(a){return i._updateActiveDate(a)})("keyup",function(a){return i._handleCalendarBodyKeyup(a)})("keydown",function(a){return i._handleCalendarBodyKeydown(a)}),M()()),t&2&&(P(4),pe("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[sc],encapsulation:2,changeDetection:0})}return r})(),dC=(()=>{class r{_intl=x(cc);calendar=x(gv);_dateAdapter=x(Pn,{optional:!0});_dateFormats=x(Sa,{optional:!0});constructor(){x(jt).load(Kr);let e=x(St);this.calendar.stateChanges.subscribe(()=>e.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-gr)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:gr)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,t){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t):cC(this._dateAdapter,e,t,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let t=this._dateAdapter.getYear(this.calendar.activeDate)-rd(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),i=t+gr-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1)),a=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1));return[o,a]}_periodButtonLabelId=x(zt).getId("mat-calendar-period-label-");static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:UT,decls:17,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(t,i){t&1&&(Et(),I(0,"div",0)(1,"div",1)(2,"span",2),j(3),M(),I(4,"button",3),te("click",function(){return i.currentPeriodClicked()}),I(5,"span",4),j(6),M(),Sn(),I(7,"svg",5),G(8,"polygon",6),M()(),ua(),G(9,"div",7),je(10),I(11,"button",8),te("click",function(){return i.previousClicked()}),Sn(),I(12,"svg",9),G(13,"path",10),M()(),ua(),I(14,"button",11),te("click",function(){return i.nextClicked()}),Sn(),I(15,"svg",9),G(16,"path",12),M()()()()),t&2&&(P(2),pe("id",i._periodButtonLabelId),P(),ht(i.periodButtonDescription),P(),Ze("aria-label",i.periodButtonLabel)("aria-describedby",i._periodButtonLabelId),P(2),ht(i.periodButtonText),P(),Oe("mat-calendar-invert",i.calendar.currentView!=="month"),P(4),pe("disabled",!i.previousEnabled()),Ze("aria-label",i.prevButtonLabel),P(3),pe("disabled",!i.nextEnabled()),Ze("aria-label",i.nextButtonLabel))},dependencies:[qt,Tg],encapsulation:2,changeDetection:0})}return r})(),gv=(()=>{class r{_dateAdapter=x(Pn,{optional:!0});_dateFormats=x(Sa,{optional:!0});_changeDetectorRef=x(St);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get selected(){return this._selected}set selected(e){e instanceof Fr?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new fe;yearSelected=new fe;monthSelected=new fe;viewChanged=new fe(!0);_userSelection=new fe;_userDragDrop=new fe;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let t=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),t&&this.viewChanged.emit(t)}_currentView;_activeDrag=null;stateChanges=new _e;constructor(){this._intlChanges=x(cc).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new eo(this.headerComponent||dC),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let t=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,i=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=t||i||e.dateFilter;if(o&&!o.firstChange){let a=this._getCurrentViewComponent();a&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),a._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let t=e.value;(this.selected instanceof Fr||t&&!this._dateAdapter.sameDate(t,this.selected))&&this.selectedChange.emit(t),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,t){this.activeDate=e,this.currentView=t}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-calendar"]],viewQuery:function(t,i){if(t&1&&(lt(eC,5),lt(nC,5),lt(tC,5)),t&2){let o;Ne(o=Pe())&&(i.monthView=o.first),Ne(o=Pe())&&(i.yearView=o.first),Ne(o=Pe())&&(i.multiYearView=o.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[Ke([aC]),At],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(t,i){if(t&1&&(he(0,jT,0,0,"ng-template",0),I(1,"div",1),he(2,WT,1,11,"mat-month-view",2)(3,HT,1,6,"mat-year-view",3)(4,GT,1,6,"mat-multi-year-view",3),M()),t&2){let o;pe("cdkPortalOutlet",i._calendarHeaderPortal),P(2),me((o=i.currentView)==="month"?2:o==="year"?3:o==="multi-year"?4:-1)}},dependencies:[Lo,fx,eC,nC,tC],styles:['.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})(),rC={transformPanel:Do("transformPanel",[qr("void => enter-dropdown",vi("120ms cubic-bezier(0, 0, 0.2, 1)",tm([Gn({opacity:0,transform:"scale(1, 0.8)"}),Gn({opacity:1,transform:"scale(1, 1)"})]))),qr("void => enter-dialog",vi("150ms cubic-bezier(0, 0, 0.2, 1)",tm([Gn({opacity:0,transform:"scale(0.7)"}),Gn({transform:"none",opacity:1})]))),qr("* => void",vi("100ms linear",Gn({opacity:0})))]),fadeInCalendar:Do("fadeInCalendar",[va("void",Gn({opacity:0})),va("enter",Gn({opacity:1})),qr("void => *",vi("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},uC=new ne("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let r=x(kn);return()=>r.scrollStrategies.reposition()}});function nF(r){return()=>r.scrollStrategies.reposition()}var rF={provide:uC,deps:[kn],useFactory:nF},hC=(()=>{class r{_elementRef=x(Fe);_changeDetectorRef=x(St);_globalModel=x(od);_dateAdapter=x(Pn);_rangeSelectionStrategy=x(sC,{optional:!0});_subscriptions=new Tt;_model;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationState;_animationDone=new _e;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){x(jt).load(Kr);let e=x(cc);this._closeButtonText=e.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let t=this._model.selection,i=e.value,o=t instanceof Fr;if(o&&this._rangeSelectionStrategy){let a=this._rangeSelectionStrategy.selectionFinished(i,t,e.event);this._model.updateSelection(a,this)}else i&&(o||!this._dateAdapter.sameDate(i,t))&&this._model.add(i);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating=e.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,t){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,t&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-datepicker-content"]],viewQuery:function(t,i){if(t&1&&lt(gv,5),t&2){let o;Ne(o=Pe())&&(i._calendar=o.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(t,i){t&1&&sy("@transformPanel.start",function(a){return i._handleAnimationEvent(a)})("@transformPanel.done",function(a){return i._handleAnimationEvent(a)}),t&2&&(ay("@transformPanel",i._animationState),dr(i.color?"mat-"+i.color:""),Oe("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(t,i){if(t&1&&(I(0,"div",0)(1,"mat-calendar",1),te("yearSelected",function(a){return i.datepicker._selectYear(a)})("monthSelected",function(a){return i.datepicker._selectMonth(a)})("viewChanged",function(a){return i.datepicker._viewChanged(a)})("_userSelection",function(a){return i._handleUserSelection(a)})("_userDragDrop",function(a){return i._handleUserDragDrop(a)}),M(),he(2,qT,0,0,"ng-template",2),I(3,"button",3),te("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),j(4),M()()),t&2){let o;Oe("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),Ze("aria-modal",!0)("aria-labelledby",(o=i._dialogLabelId)!==null&&o!==void 0?o:void 0),P(),dr(i.datepicker.panelClass),pe("id",i.datepicker.id)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName),P(),pe("cdkPortalOutlet",i._actionsPortal),P(),Oe("cdk-visually-hidden",!i._closeButtonFocused),pe("color",i.color||"primary"),P(),ht(i._closeButtonText)}},dependencies:[dx,gv,Lo,qt],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[rC.transformPanel,rC.fadeInCalendar]},changeDetection:0})}return r})(),iC=(()=>{class r{_overlay=x(kn);_viewContainerRef=x(Hn);_dateAdapter=x(Pn,{optional:!0});_dir=x(hn,{optional:!0});_model=x(od);_scrollStrategy=x(uC);_inputStateChanges=Tt.EMPTY;_document=x(Ge);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new fe;monthSelected=new fe;viewChanged=new fe(!0);dateClass;openedStream=new fe;closedStream=new fe;get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=X0(e)}_panelClass;get opened(){return this._opened}set opened(e){e?this.open():this.close()}_opened=!1;id=x(zt).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef;_componentRef;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal;datepickerInput;stateChanges=new _e;_injector=x(yt);_changeDetectorRef=x(St);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let t=e.xPosition||e.yPosition;if(t&&!t.firstChange&&this._overlayRef){let i=this._overlayRef.getConfig().positionStrategy;i instanceof Yl&&(this._setConnectedPositions(i),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=Ro(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:i,location:o}=this._componentRef;i._startExitAnimation(),i._animationDone.pipe(un(1)).subscribe(()=>{let a=this._document.activeElement;e&&(!a||a===this._document.activeElement||o.nativeElement.contains(a))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(t):t()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,t=new eo(hC,this._viewContainerRef),i=this._overlayRef=this._overlay.create(new Bo({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(i).subscribe(o=>{o&&o.preventDefault(),this.close()}),i.keydownEvents().subscribe(o=>{let a=o.keyCode;(a===38||a===40||a===37||a===39||a===33||a===34)&&o.preventDefault()}),this._componentRef=i.attach(t),this._forwardContentValues(this._componentRef.instance),e||On(()=>{i.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let t=this.xPosition==="end"?"end":"start",i=t==="start"?"end":"start",o=this.yPosition==="above"?"bottom":"top",a=o==="top"?"bottom":"top";return e.withPositions([{originX:t,originY:a,overlayX:t,overlayY:o},{originX:t,originY:o,overlayX:t,overlayY:a},{originX:i,originY:a,overlayX:i,overlayY:o},{originX:i,originY:o,overlayX:i,overlayY:a}])}_getCloseStream(e){let t=["ctrlKey","shiftKey","metaKey"];return Zn(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(Ct(i=>i.keyCode===27&&!rn(i)||this.datepickerInput&&rn(i,"altKey")&&i.keyCode===38&&t.every(o=>!rn(i,o)))))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",Se],disabled:[2,"disabled","disabled",Se],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",Se],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",Se]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[st,At]})}return r})(),lc=(()=>{class r extends iC{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[Ke([aC,{provide:iC,useExisting:r}]),Qe],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0})}return r})(),ac=class{target;targetElement;value;constructor(n,e){this.target=n,this.targetElement=e,this.value=this.target.value}},iF=(()=>{class r{_elementRef=x(Fe);_dateAdapter=x(Pn,{optional:!0});_dateFormats=x(Sa,{optional:!0});_isInitialized;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let t=e,i=this._elementRef.nativeElement;this._disabled!==t&&(this._disabled=t,this.stateChanges.next(void 0)),t&&this._isInitialized&&i.blur&&i.blur()}_disabled;dateChange=new fe;dateInput=new fe;stateChanges=new _e;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=Tt.EMPTY;_localeSubscription=Tt.EMPTY;_pendingValue;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{matDatepickerFilter:!0}};_minValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMinDate();return!i||!t||this._dateAdapter.compareDate(i,t)<=0?null:{matDatepickerMin:{min:i,actual:t}}};_maxValidator=e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMaxDate();return!i||!t||this._dateAdapter.compareDate(i,t)>=0?null:{matDatepickerMax:{max:i,actual:t}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(t=>{if(this._shouldHandleChangeEvent(t)){let i=this._getValueFromModel(t.selection);this._lastValueValid=this._isValidValue(i),this._cvaOnChange(i),this._onTouched(),this._formatValue(i),this.dateInput.emit(new ac(this,this._elementRef.nativeElement)),this.dateChange.emit(new ac(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){oF(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let t=["ctrlKey","shiftKey","metaKey"];rn(e,"altKey")&&e.keyCode===40&&t.every(o=>!rn(e,o))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let t=this._lastValueValid,i=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(i),i=this._dateAdapter.getValidDateOrNull(i);let o=!this._dateAdapter.sameDate(i,this.value);!i||o?this._cvaOnChange(i):(e&&!this.value&&this._cvaOnChange(i),t!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(i),this.dateInput.emit(new ac(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new ac(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let t=this._getDateFilter();return!t||t(e)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,inputs:{value:"value",disabled:[2,"disabled","disabled",Se]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[st,At]})}return r})();function oF(r,n){let e=Object.keys(r);for(let t of e){let{previousValue:i,currentValue:o}=r[t];if(n.isDateInstance(i)&&n.isDateInstance(o)){if(!n.sameDate(i,o))return!0}else return!0}return!1}var aF={provide:Ta,useExisting:wr(()=>qo),multi:!0},sF={provide:td,useExisting:wr(()=>qo),multi:!0},qo=(()=>{class r extends iF{_formField=x(Fa,{optional:!0});_closedSubscription=Tt.EMPTY;_openedSubscription=Tt.EMPTY;set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}_datepicker;_ariaOwns=mi(null);get min(){return this._min}set min(e){let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._min)||(this._min=t,this._validatorOnChange())}_min;get max(){return this._max}set max(e){let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._max)||(this._max=t,this._validatorOnChange())}_max;get dateFilter(){return this._dateFilter}set dateFilter(e){let t=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==t&&this._validatorOnChange()}_dateFilter;_validator;constructor(){super(),this._validator=Ft.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(t,i){t&1&&te("input",function(a){return i._onInput(a.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(a){return i._onKeydown(a)}),t&2&&(jr("disabled",i.disabled),Ze("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",i._ariaOwns())("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[Ke([aF,sF,{provide:sv,useExisting:r}]),Qe]})}return r})(),cF=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","matDatepickerToggleIcon",""]]})}return r})(),Oa=(()=>{class r{_intl=x(cc);_changeDetectorRef=x(St);_stateChanges=Tt.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple;_customIcon;_button;constructor(){let e=x(new Ur("tabindex"),{optional:!0}),t=Number(e);this.tabIndex=t||t===0?t:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:be(),t=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:be(),i=this.datepicker?Zn(this.datepicker.openedStream,this.datepicker.closedStream):be();this._stateChanges.unsubscribe(),this._stateChanges=Zn(this._intl.changes,e,t,i).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,i,o){if(t&1&&Vt(o,cF,5),t&2){let a;Ne(a=Pe())&&(i._customIcon=a.first)}},viewQuery:function(t,i){if(t&1&&lt(YT,5),t&2){let o;Ne(o=Pe())&&(i._button=o.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(t,i){t&1&&te("click",function(a){return i._open(a)}),t&2&&(Ze("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),Oe("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&i.datepicker.color==="accent")("mat-warn",i.datepicker&&i.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Se],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[st,At],ngContentSelectors:KT,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,i){t&1&&(Et($T),I(0,"button",1,0),he(2,XT,2,0,":svg:svg",2),je(3),M()),t&2&&(pe("disabled",i.disabled)("disableRipple",i.disableRipple),Ze("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),P(2),me(i._customIcon?-1:2))},dependencies:[Tg],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,changeDetection:0})}return r})();var dc=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[cc,rF],imports:[Wt,zo,Ls,to,Je,hC,Oa,dC,Ys]})}return r})();var Kh=class r{constructor(n,e,t,i){this.fb=n;this.router=e;this.userInfoService=t;this.alertService=i}profileForm=null;imageSrc=null;userInfo=localStorage.getItem("info")?JSON.parse(localStorage.getItem("info")):null;update=!1;ngOnInit(){this.init()}init(){this.profileForm=this.fb.group({name:["",Ft.required],phone:["",Ft.required],address:["",Ft.required],gender:["",Ft.required],dob:[Date,Ft.required],img:[""]}),this.userInfo&&(this.update=!0,this.profileForm.patchValue(this.userInfo),this.imageSrc=this.userInfo.img)}onFileChange(n){let e=n.target;if(e.files&&e.files[0]){let t=e.files[0],i=new FileReader;i.onload=o=>{this.imageSrc=o.target.result,this.profileForm.patchValue({img:o.target.result})},i.onerror=o=>{console.error("FileReader error:",o),this.alertService.showErrorAlert("Faild Upload profile",!1)},i.readAsDataURL(t)}}onSubmit(){return at(this,null,function*(){if(qn(this.profileForm.valid),this.profileForm!=null){if(!this.profileForm.valid){qn("From are invalid");return}yield this.profileForm.patchValue({dob:mh(this.profileForm.value.dob)}),qn(this.profileForm.value),this.update?this.alertService.showErrorAlert("Update info are disibaled"):yield _t(this.userInfoService.postInfo(this.profileForm.value).pipe(Ve(n=>{n&&(localStorage.setItem("info",JSON.stringify(this.profileForm.value)),this.router.navigate(["/"]))},n=>{qn(n),this.alertService.showErrorAlert(n.error.message)})))}})}logout(){this.router.navigate(["/logout"])}static \u0275fac=function(e){return new(e||r)(ve(ki),ve(nn),ve(Ai),ve(Ln))};static \u0275cmp=re({type:r,selectors:[["app-profile"]],features:[Ke([xi()])],decls:43,vars:4,consts:[["picker",""],[1,"root","bg-img"],[1,"w-full","h-full","p-4","bg-[#ffffff54]"],[1,"w-full","h-full",3,"submit","formGroup"],[1,"grid","h-[25%]","rounded-lg","p-6","relative"],[1,"absolute","flex","justify-center","items-center","w-full","h-full"],["id","imagePreview","alt","Profile Image",1,"circular-image","object-cover","object-center","h-full","z-10",3,"src"],[1,"absolute","inset-0","flex","items-center","justify-center"],["type","file","id","fileInput","formControlName","img",1,"absolute","inset-0","opacity-0","cursor-pointer","file-input",3,"change"],[1,"block","py-2","px-4","rounded-lg","text-sm","font-semibold","text-white","bg-blue-600","hover:bg-blue-700","dark:bg-blue-500","dark:hover:bg-blue-400","z-20"],[1,"w-full","h-[75%]","flex","justify-center","items-center","flex-col"],[1,"example-full-width"],["matInput","","formControlName","name","placeholder","John Doe"],["matInput","","type","number","formControlName","phone","placeholder","9067340000"],["matInput","","type","text","formControlName","address","placeholder","John Doe, 456 Elm Street, Suite 3, Los Angeles, CA 90001, USA"],["aria-label","Select an option","formControlName","gender"],["value","M"],["value","F"],["value","O"],["matInput","","formControlName","dob",3,"matDatepicker"],["matIconSuffix","",3,"for"],["mat-button","","type","submit"],["mat-button","","target","_blank",3,"click"]],template:function(e,t){if(e&1){let i=nt();I(0,"div",1)(1,"div",2)(2,"form",3),te("submit",function(){return le(i),de(t.onSubmit())}),I(3,"div",4)(4,"div",5),G(5,"img",6),I(6,"label",7)(7,"input",8),te("change",function(a){return le(i),de(t.onFileChange(a))}),M(),I(8,"span",9),j(9," Choose "),M()()()(),I(10,"div",10)(11,"mat-form-field",11)(12,"mat-label"),j(13,"Your Name"),M(),G(14,"input",12),M(),I(15,"mat-form-field",11)(16,"mat-label"),j(17,"Mobile No"),M(),G(18,"input",13),M(),I(19,"mat-form-field",11)(20,"mat-label"),j(21,"Address"),M(),G(22,"input",14),M(),I(23,"mat-radio-group",15)(24,"mat-radio-button",16),j(25,"Male"),M(),I(26,"mat-radio-button",17),j(27,"Female"),M(),I(28,"mat-radio-button",18),j(29,"Other"),M()(),I(30,"mat-form-field")(31,"mat-label"),j(32,"DOB"),M(),G(33,"input",19),I(34,"mat-hint"),j(35,"MM/DD/YYYY"),M(),G(36,"mat-datepicker-toggle",20)(37,"mat-datepicker",null,0),M(),I(39,"button",21),j(40,"Submit"),M(),I(41,"button",22),te("click",function(){return le(i),de(t.logout())}),j(42,"It\u2019s not my account"),M()()()()()}if(e&2){let i=Wr(38);P(2),pe("formGroup",t.profileForm),P(3),pe("src",t.imageSrc||"/img/user-286-512.png",Dr),P(28),pe("matDatepicker",i),P(3),pe("for",i)}},dependencies:[Ii,Si,Ar,ov,Di,Ei,Bn,Jr,Tr,Mr,Rr,nr,Uh,nc,tc,Qw,cv,Yh,dc,lc,qo,Oa,Wt,qt],styles:[".bg-img[_ngcontent-%COMP%]{background-image:url(/img/bg/33391314-617d-4c74-8a6c-918976b69cc1.jpg);background-position:center;background-size:cover;background-repeat:no-repeat;background-attachment:fixed}mat-form-field[_ngcontent-%COMP%]{width:95%}.grid[_ngcontent-%COMP%]{position:relative}#imagePreview[_ngcontent-%COMP%]{position:relative;z-index:1}.file-input[_ngcontent-%COMP%]{z-index:2}"]})};var e1=function(r,n){return(e1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(r,n)};function ii(r,n){function e(){this.constructor=r}e1(r,n),r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function we(r,n,e,t){return new(e||(e=Promise))(function(i,o){function a(l){try{c(t.next(l))}catch(d){o(d)}}function s(l){try{c(t.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):new e(function(d){d(l.value)}).then(a,s)}c((t=t.apply(r,n||[])).next())})}function Ce(r,n){var e,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,t&&(i=2&d[0]?t.return:d[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,d[1])).done)return i;switch(t=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,t=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=n.call(r,a)}catch(u){d=[6,u],t=0}finally{e=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,l])}}}var lF=function(){function r(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return r.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},r.prototype.registerFlag=function(n,e,t){if(this.flagRegistry[n]={evaluationFn:e,setHook:t},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},r.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},r.prototype.getNumber=function(n){return this.get(n)},r.prototype.getBool=function(n){return this.get(n)},r.prototype.getFlags=function(){return this.flags},Object.defineProperty(r.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),r.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},r.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},r.prototype.setFlags=function(n){this.flags=Object.assign({},n)},r.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},r.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,t,i=(e=this.global.location.search,t={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return dF(t,a[0],a[1]),a.join("=")}),t);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],c=a[1];n.urlFlags[s]=function(l,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+l+".")}(s,c)})}},r}();function dF(r,n,e){r[decodeURIComponent(n)]=decodeURIComponent(e||"")}function W(){return t1}var t1=null,ff=new Map,Vv=new Map;function n1(r,n){var e=i1(r,n);return ff.get(e)}function uF(r){return Vv.get(r)}function vC(r){for(var n=ff.entries(),e=[];;){var t=n.next(),i=t.done,o=t.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===r&&e.push(s)}return e}function r1(r){var n=r.kernelName,e=r.backendName,t=i1(n,e);if(ff.has(t))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");ff.set(t,r)}function hF(r){var n=r.kernelName;Vv.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),Vv.set(n,r)}function i1(r,n){return n+"_"+r}function bC(r){for(var n=r.length,e=0,t=0;n>0;)t=Math.random()*n|0,e=r[--n],r[n]=r[t],r[t]=e}function pf(r,n,e){return Math.max(r,Math.min(n,e))}function ab(r){return r%2==0?r:r+1}function o1(r){for(var n=0,e=0;e<r.length;e++)n+=r[e];return n}function k(r,n){if(!r)throw new Error(typeof n=="string"?n:n())}function vt(r,n,e){e===void 0&&(e=""),k(an(r,n),function(){return e+" Shapes "+r+" and "+n+" must match"})}function Ya(r){k(r!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function so(r,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(r)||Rn(r)&&!e)for(var t=0;t<r.length;++t)so(r[t],n,e);else n.push(r);return n}function ke(r){if(r.length===0)return 1;for(var n=r[0],e=1;e<r.length;e++)n*=r[e];return n}function an(r,n){if(r===n)return!0;if(r==null||n==null||r.length!==n.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}function $t(r){return r%1==0}function a1(r){if(Math.tanh!=null)return Math.tanh(r);if(r===1/0)return 1;if(r===-1/0)return-1;var n=Math.exp(2*r);return(n-1)/(n+1)}function mf(r){var n=Math.ceil(Math.sqrt(r));return[n,Math.ceil(r/n)]}function Ua(r,n){return n<=r.length?r:r+" ".repeat(n-r.length)}function zv(r,n,e){return n===void 0&&(n=function(t){return 0}),new Promise(function(t,i){var o=0,a=function(){if(r())t();else{o++;var s=n(o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function s1(r,n){for(var e=1,t=-1,i=0;i<r.length;++i)if(r[i]>=0)e*=r[i];else if(r[i]===-1){if(t!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+t+" and dim "+i);t=i}else if(r[i]<0)throw Error("Shapes can not be < 0. Found "+r[i]+" at dim "+i);if(t===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+r);return r}if(e===0)throw Error("Cannot infer the missing size in ["+r+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=r.slice();return o[t]=n/e,o}function cn(r,n){var e=n.length;return k((r=r==null?n.map(function(t,i){return i}):[].concat(r)).every(function(t){return t>=-e&&t<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+r}),k(r.every(function(t){return $t(t)}),function(){return"All values in axis param must be integers but got axis "+r}),r.map(function(t){return t<0?e+t:t})}function Yo(r,n){for(var e=[],t=[],i=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||i?null:cn(n,r).sort(),a=0,s=0;s<r.length;++s){if(o!=null){if(o[a]===s&&r[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+r[s]+"' is not 1");(o[a]==null||o[a]>s)&&r[s]===1&&(e.push(r[s]),t.push(s)),o[a]<=s&&a++}r[s]!==1&&(e.push(r[s]),t.push(s))}return{newShape:e,keptDims:t}}function Cc(r,n){var e=null;if(r==null||r==="float32")e=new Float32Array(n);else if(r==="int32")e=new Int32Array(n);else{if(r!=="bool")throw new Error("Unknown data type "+r);e=new Uint8Array(n)}return e}function md(r,n){var e=null;if(r==null||r==="float32")e=new Float32Array(n);else if(r==="int32")e=new Int32Array(n);else if(r==="bool")e=new Uint8Array(n);else{if(r!=="string")throw new Error("Unknown data type "+r);e=new Array(n)}return e}function c1(r,n){for(var e=0;e<r.length;e++){var t=r[e];if(isNaN(t)||!isFinite(t))throw Error("A tensor of type "+n+" being uploaded contains "+t+".")}}function l1(r){return r==="bool"||r==="complex64"||r==="float32"||r==="int32"||r==="string"}function d1(r,n){return n!=="complex64"&&(n!=="float32"||r==="complex64")&&(n!=="int32"||r==="float32"||r==="complex64")&&(n!=="bool"||r!=="bool")}function Rn(r){return r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array}function sb(r){if(r==="float32"||r==="int32")return 4;if(r==="complex64")return 8;if(r==="bool")return 1;throw new Error("Unknown dtype "+r)}function u1(r){if(r==null)return 0;var n=0;return r.forEach(function(e){return n+=e.length}),n}function $o(r){return typeof r=="string"||r instanceof String}function h1(r){return typeof r=="boolean"}function f1(r){return typeof r=="number"}function Ec(r){return Array.isArray(r)?Ec(r[0]):r instanceof Float32Array?"float32":r instanceof Int32Array||r instanceof Uint8Array?"int32":f1(r)?"float32":$o(r)?"string":h1(r)?"bool":"float32"}function gf(r){return!!(r&&r.constructor&&r.call&&r.apply)}function vf(r,n){for(var e=n;e<r;++e)if(r%e==0)return e;return r}function ni(r){var n=r.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=r[n-1];for(var t=n-3;t>=0;--t)e[t]=e[t+1]*r[t+1];return e}function cb(r,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(r)&&(r=so(r)),e&&c1(r,n),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(r,n))return r;if(n==null||n==="float32"||n==="complex64")return new Float32Array(r);if(n==="int32")return new Int32Array(r);if(n==="bool"){for(var t=new Uint8Array(r.length),i=0;i<t.length;++i)Math.round(r[i])!==0&&(t[i]=1);return t}throw new Error("Unknown data type "+n)}function Uv(r,n){if(r.length===0)return n[0];var e=r.reduce(function(t,i){return t*i});if(e===0)return[];if(e!==n.length)throw new Error("["+r+"] does not match the input size.");return function t(i,o,a){var s=new Array;if(o.length===1)for(var c=o[0],l=0;l<c;l++)s[l]=a[i+l];else{c=o[0];var d=o.slice(1),u=d.reduce(function(h,f){return h*f});for(l=0;l<c;l++)s[l]=t(i+l*u,d,a)}return s}(0,r,n)}function lb(r,n){for(var e=Sc(r,n),t=0;t<e.length;t++)e[t]=1;return e}function Sc(r,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(r);if(n==="int32")return new Int32Array(r);if(n==="bool")return new Uint8Array(r);throw new Error("Unknown data type "+n)}function ti(){return W().platform.now()}function db(r){r.forEach(function(n){k(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+r+"]."})})}function p1(r,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",W().platform.encode(r,n)}function gd(r,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",W().platform.decode(r,n)}function jv(r,n,e){if(n===0)return 0;if(n===1)return r[0];for(var t=r[r.length-1],i=0;i<r.length-1;++i)t+=e[i]*r[i];return t}function m1(r,n,e){if(n===0)return[];if(n===1)return[r];for(var t=new Array(n),i=0;i<t.length-1;++i)t[i]=Math.floor(r/e[i]),r-=t[i]*e[i];return t[t.length-1]=r,t}var L6=Object.freeze({shuffle:bC,clamp:pf,nearestLargerEven:ab,sum:o1,randUniform:function(r,n){var e=Math.random();return n*e+(1-e)*r},distSquared:function(r,n){for(var e=0,t=0;t<r.length;t++){var i=Number(r[t])-Number(n[t]);e+=i*i}return e},assert:k,assertShapesMatch:vt,assertNonNull:Ya,flatten:so,sizeFromShape:ke,isScalarShape:function(r){return r.length===0},arraysEqual:an,isInt:$t,tanh:a1,sizeToSquarishShape:mf,createShuffledIndices:function(r){for(var n=new Uint32Array(r),e=0;e<r;++e)n[e]=e;return bC(n),n},rightPad:Ua,repeatedTry:zv,inferFromImplicitShape:s1,parseAxisParam:cn,squeezeShape:Yo,getTypedArrayFromDType:Cc,getArrayFromDType:md,checkConversionForErrors:c1,isValidDtype:l1,hasEncodingLoss:d1,isTypedArray:Rn,bytesPerElement:sb,bytesFromStringArray:u1,isString:$o,isBoolean:h1,isNumber:f1,inferDtype:Ec,isFunction:gf,nearestDivisor:vf,computeStrides:ni,toTypedArray:cb,toNestedArray:Uv,makeOnesTypedArray:lb,makeZerosTypedArray:Sc,now:ti,assertNonNegativeIntegerDimensions:db,fetch:function(r,n){return W().platform.fetch(r,n)},encodeString:p1,decodeString:gd,locToIndex:jv,indexToLoc:m1}),fF=function(){function r(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new pF)}return r.prototype.profileKernel=function(n,e,t){var i,o=this,a=this.backendTimer.time(function(){i=t()});return i.forEach(function(s){s.data().then(function(c){(function(l,d,u){if(d!=="float32")return!1;for(var h=0;h<l.length;h++){var f=l[h];if(isNaN(f)||!isFinite(f))return console.warn("Found "+f+" in the result of '"+u+"'"),!0}})(c,s.dtype,n),a.then(function(l){var d="";l.getExtraProfileInfo!=null&&(d=l.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,c,l.kernelMs,e,d)})})}),i},r}(),pF=function(){function r(){}return r.prototype.logKernelProfile=function(n,e,t,i,o,a){var s=typeof i=="number"?Ua(i+"ms",9):i.error,c=Ua(n,25),l=e.rank,d=e.size,u=Ua(e.shape.toString(),14),h="";for(var f in o){var p=o[f].shape||e.shape,m=p.length;h+=f+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+c+"	%c"+s+"	%c"+l+"D "+u+"	%c"+d+"	%c"+h+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},r}(),_C=20,ad=3,bv=7;function mF(r,n,e,t){var i=ni(n),o=function(l,d,u,h){var f=ke(d),p=h[h.length-1],m=new Array(p).fill(0),g=d.length,v=u==="complex64"?cd(l):l;if(g>1)for(var _=0;_<f/p;_++)for(var y=_*p,b=0;b<p;b++)m[b]=Math.max(m[b],sd(v[y+b],0,u).length);return m}(r,n,e,i),a=n.length,s=function l(d,u,h,f,p,m){m===void 0&&(m=!0);var g=h==="complex64"?2:1,v=u[0],_=u.length;if(_===0)return h==="complex64"?[sd(cd(d)[0],0,h)]:h==="bool"?[g1(d[0])]:[d[0].toString()];if(_===1){if(v>_C){var y=ad*g,b=Array.from(d.slice(0,y)),w=Array.from(d.slice((v-ad)*g,v*g));return h==="complex64"&&(b=cd(b),w=cd(w)),["["+b.map(function(U,Y){return sd(U,p[Y],h)}).join(", ")+", ..., "+w.map(function(U,Y){return sd(U,p[v-ad+Y],h)}).join(", ")+"]"]}return["["+(h==="complex64"?cd(d):Array.from(d)).map(function(U,Y){return sd(U,p[Y],h)}).join(", ")+"]"]}var C=u.slice(1),A=f.slice(1),R=f[0]*g,S=[];if(v>_C){for(var D=0;D<ad;D++){var F=(T=D*R)+R;S.push.apply(S,l(d.slice(T,F),C,h,A,p,!1))}for(S.push("..."),D=v-ad;D<v;D++)F=(T=D*R)+R,S.push.apply(S,l(d.slice(T,F),C,h,A,p,D===v-1))}else for(D=0;D<v;D++){var T;F=(T=D*R)+R,S.push.apply(S,l(d.slice(T,F),C,h,A,p,D===v-1))}var V=_===2?",":"";for(S[0]="["+S[0]+V,D=1;D<S.length-1;D++)S[D]=" "+S[D]+V;var z=`,
`;for(D=2;D<_;D++)z+=`
`;return S[S.length-1]=" "+S[S.length-1]+"]"+(m?"":z),S}(r,n,e,i,o),c=["Tensor"];return t&&(c.push("  dtype: "+e),c.push("  rank: "+a),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(s.map(function(l){return"    "+l}).join(`
`)),c.join(`
`)}function sd(r,n,e){return Ua(Array.isArray(r)?parseFloat(r[0].toFixed(bv))+" + "+parseFloat(r[1].toFixed(bv))+"j":$o(r)?"'"+r+"'":e==="bool"?g1(r):parseFloat(r.toFixed(bv)).toString(),n)}function g1(r){return r===0?"false":"true"}function cd(r){for(var n=[],e=0;e<r.length;e+=2)n.push([r[e],r[e+1]]);return n}var vd=function(){function r(n,e,t){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=ke(n),t!=null){var o=t.length;k(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=t||md(e,this.size),this.strides=ni(n)}return r.prototype.set=function(n){for(var e=this,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];t.length===0&&(t=[0]),k(t.length===this.rank,function(){return"The number of provided coordinates ("+t.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(t);this.values[o]=n},r.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var t=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[t]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}t++}for(var c=n[n.length-1],l=0;l<n.length-1;++l)c+=this.strides[l]*n[l];return this.values[c]},r.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],t=0;t<n.length-1;++t)e+=this.strides[t]*n[t];return e},r.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),t=0;t<e.length-1;++t)e[t]=Math.floor(n/this.strides[t]),n-=e[t]*this.strides[t];return e[e.length-1]=n,e},Object.defineProperty(r.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),r.prototype.toTensor=function(){return Ri().makeTensor(this.values,this.shape,this.dtype)},r}(),Ri=null,B=null,v1=null,Rt=function(){function r(n,e,t,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=ke(n),this.strides=ni(n),this.dataId=t,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return r.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},r.prototype.asScalar=function(){return this.throwIfDisposed(),k(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},r.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},r.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},r.prototype.as3D=function(n,e,t){return this.throwIfDisposed(),this.reshape([n,e,t])},r.prototype.as4D=function(n,e,t,i){return this.throwIfDisposed(),this.reshape([n,e,t,i])},r.prototype.as5D=function(n,e,t,i,o){return this.throwIfDisposed(),this.reshape([n,e,t,i,o])},r.prototype.asType=function(n){return this.throwIfDisposed(),B.cast(this,n)},Object.defineProperty(r.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),r.prototype.buffer=function(){return we(this,void 0,void 0,function(){var n;return Ce(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,B.buffer(this.shape,this.dtype,n)]}})})},r.prototype.bufferSync=function(){return B.buffer(this.shape,this.dtype,this.dataSync())},r.prototype.array=function(){return we(this,void 0,void 0,function(){var n;return Ce(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,Uv(this.shape,n)]}})})},r.prototype.arraySync=function(){return Uv(this.shape,this.dataSync())},r.prototype.data=function(){return we(this,void 0,void 0,function(){var n,e;return Ce(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),n=Ri().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=t.sent();try{return[2,e.map(function(i){return gd(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}t.label=2;case 2:return[2,n]}})})},r.prototype.dataSync=function(){this.throwIfDisposed();var n=Ri().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return gd(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},r.prototype.bytes=function(){return we(this,void 0,void 0,function(){var n;return Ce(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,Ri().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},r.prototype.dispose=function(){this.isDisposed||(Ri().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(r.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),r.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},r.prototype.toFloat=function(){return this.asType("float32")},r.prototype.toInt=function(){return this.asType("int32")},r.prototype.toBool=function(){return this.asType("bool")},r.prototype.print=function(n){return n===void 0&&(n=!1),B.print(this,n)},r.prototype.reshape=function(n){return this.throwIfDisposed(),B.reshape(this,n)},r.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},r.prototype.expandDims=function(n){return n===void 0&&(n=0),B.expandDims(this,n)},r.prototype.cumsum=function(n,e,t){return n===void 0&&(n=0),e===void 0&&(e=!1),t===void 0&&(t=!1),B.cumsum(this,n,e,t)},r.prototype.squeeze=function(n){return this.throwIfDisposed(),B.squeeze(this,n)},r.prototype.clone=function(){return this.throwIfDisposed(),B.clone(this)},r.prototype.oneHot=function(n,e,t){return this.throwIfDisposed(),B.oneHot(this,n,e,t)},r.prototype.toString=function(n){return n===void 0&&(n=!1),mF(this.dataSync(),this.shape,this.dtype,n)},r.prototype.tile=function(n){return this.throwIfDisposed(),B.tile(this,n)},r.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),B.gather(this,n,e)},r.prototype.matMul=function(n,e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),this.throwIfDisposed(),B.matMul(this,n,e,t)},r.prototype.dot=function(n){return this.throwIfDisposed(),B.dot(this,n)},r.prototype.norm=function(n,e,t){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),B.norm(this,n,e,t)},r.prototype.slice=function(n,e){return this.throwIfDisposed(),B.slice(this,n,e)},r.prototype.reverse=function(n){return this.throwIfDisposed(),B.reverse(this,n)},r.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof r&&(n=[n]),B.concat([this].concat(n),e)},r.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),B.split(this,n,e)},r.prototype.stack=function(n,e){return e===void 0&&(e=0),B.stack([this,n],e)},r.prototype.unstack=function(n){return n===void 0&&(n=0),B.unstack(this,n)},r.prototype.pad=function(n,e){return e===void 0&&(e=0),B.pad(this,n,e)},r.prototype.batchNormalization=function(n,e,t,i,o){return t===void 0&&(t=.001),v1("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,t)},r.prototype.batchNorm=function(n,e,t,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),B.batchNorm(this,n,e,t,i,o)},r.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.all(this,n,e)},r.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.any(this,n,e)},r.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.logSumExp(this,n,e)},r.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.sum(this,n,e)},r.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.prod(this,n,e)},r.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.mean(this,n,e)},r.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.min(this,n,e)},r.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),B.max(this,n,e)},r.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),B.argMin(this,n)},r.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),B.argMax(this,n)},r.prototype.cast=function(n){return this.throwIfDisposed(),B.cast(this,n)},r.prototype.add=function(n){return this.throwIfDisposed(),B.add(this,n)},r.prototype.addStrict=function(n){return this.throwIfDisposed(),B.addStrict(this,n)},r.prototype.atan2=function(n){return this.throwIfDisposed(),B.atan2(this,n)},r.prototype.sub=function(n){return this.throwIfDisposed(),B.sub(this,n)},r.prototype.subStrict=function(n){return this.throwIfDisposed(),B.subStrict(this,n)},r.prototype.pow=function(n){return this.throwIfDisposed(),B.pow(this,n)},r.prototype.powStrict=function(n){return this.throwIfDisposed(),B.powStrict(this,n)},r.prototype.mul=function(n){return this.throwIfDisposed(),B.mul(this,n)},r.prototype.mulStrict=function(n){return this.throwIfDisposed(),B.mulStrict(this,n)},r.prototype.div=function(n){return this.throwIfDisposed(),B.div(this,n)},r.prototype.divNoNan=function(n){return this.throwIfDisposed(),B.divNoNan(this,n)},r.prototype.floorDiv=function(n){return this.throwIfDisposed(),B.floorDiv(this,n)},r.prototype.divStrict=function(n){return this.throwIfDisposed(),B.divStrict(this,n)},r.prototype.minimum=function(n){return this.throwIfDisposed(),B.minimum(this,n)},r.prototype.minimumStrict=function(n){return this.throwIfDisposed(),B.minimumStrict(this,n)},r.prototype.maximum=function(n){return this.throwIfDisposed(),B.maximum(this,n)},r.prototype.maximumStrict=function(n){return this.throwIfDisposed(),B.maximumStrict(this,n)},r.prototype.mod=function(n){return this.throwIfDisposed(),B.mod(this,n)},r.prototype.modStrict=function(n){return this.throwIfDisposed(),B.modStrict(this,n)},r.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),B.squaredDifferenceStrict(this,n)},r.prototype.transpose=function(n){return this.throwIfDisposed(),B.transpose(this,n)},r.prototype.notEqual=function(n){return this.throwIfDisposed(),B.notEqual(this,n)},r.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),B.notEqualStrict(this,n)},r.prototype.less=function(n){return this.throwIfDisposed(),B.less(this,n)},r.prototype.lessStrict=function(n){return this.throwIfDisposed(),B.lessStrict(this,n)},r.prototype.equal=function(n){return this.throwIfDisposed(),B.equal(this,n)},r.prototype.equalStrict=function(n){return this.throwIfDisposed(),B.equalStrict(this,n)},r.prototype.lessEqual=function(n){return this.throwIfDisposed(),B.lessEqual(this,n)},r.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),B.lessEqualStrict(this,n)},r.prototype.greater=function(n){return this.throwIfDisposed(),B.greater(this,n)},r.prototype.greaterStrict=function(n){return this.throwIfDisposed(),B.greaterStrict(this,n)},r.prototype.greaterEqual=function(n){return this.throwIfDisposed(),B.greaterEqual(this,n)},r.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),B.greaterEqualStrict(this,n)},r.prototype.logicalAnd=function(n){return this.throwIfDisposed(),B.logicalAnd(this,n)},r.prototype.logicalOr=function(n){return this.throwIfDisposed(),B.logicalOr(this,n)},r.prototype.logicalNot=function(){return this.throwIfDisposed(),B.logicalNot(this)},r.prototype.logicalXor=function(n){return this.throwIfDisposed(),B.logicalXor(this,n)},r.prototype.where=function(n,e){return this.throwIfDisposed(),B.where(n,this,e)},r.prototype.neg=function(){return this.throwIfDisposed(),B.neg(this)},r.prototype.ceil=function(){return this.throwIfDisposed(),B.ceil(this)},r.prototype.floor=function(){return this.throwIfDisposed(),B.floor(this)},r.prototype.sign=function(){return this.throwIfDisposed(),B.sign(this)},r.prototype.isNaN=function(){return this.throwIfDisposed(),B.isNaN(this)},r.prototype.isInf=function(){return this.throwIfDisposed(),B.isInf(this)},r.prototype.isFinite=function(){return this.throwIfDisposed(),B.isFinite(this)},r.prototype.exp=function(){return this.throwIfDisposed(),B.exp(this)},r.prototype.expm1=function(){return this.throwIfDisposed(),B.expm1(this)},r.prototype.log=function(){return this.throwIfDisposed(),B.log(this)},r.prototype.log1p=function(){return this.throwIfDisposed(),B.log1p(this)},r.prototype.sqrt=function(){return this.throwIfDisposed(),B.sqrt(this)},r.prototype.rsqrt=function(){return this.throwIfDisposed(),B.rsqrt(this)},r.prototype.square=function(){return this.throwIfDisposed(),B.square(this)},r.prototype.reciprocal=function(){return this.throwIfDisposed(),B.reciprocal(this)},r.prototype.abs=function(){return this.throwIfDisposed(),B.abs(this)},r.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),B.clipByValue(this,n,e)},r.prototype.relu=function(){return this.throwIfDisposed(),B.relu(this)},r.prototype.relu6=function(){return this.throwIfDisposed(),B.relu6(this)},r.prototype.elu=function(){return this.throwIfDisposed(),B.elu(this)},r.prototype.selu=function(){return this.throwIfDisposed(),B.selu(this)},r.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),B.leakyRelu(this,n)},r.prototype.prelu=function(n){return this.throwIfDisposed(),B.prelu(this,n)},r.prototype.sigmoid=function(){return this.throwIfDisposed(),B.sigmoid(this)},r.prototype.logSigmoid=function(){return this.throwIfDisposed(),B.logSigmoid(this)},r.prototype.softplus=function(){return this.throwIfDisposed(),B.softplus(this)},r.prototype.zerosLike=function(){return this.throwIfDisposed(),B.zerosLike(this)},r.prototype.onesLike=function(){return this.throwIfDisposed(),B.onesLike(this)},r.prototype.sin=function(){return this.throwIfDisposed(),B.sin(this)},r.prototype.cos=function(){return this.throwIfDisposed(),B.cos(this)},r.prototype.tan=function(){return this.throwIfDisposed(),B.tan(this)},r.prototype.asin=function(){return this.throwIfDisposed(),B.asin(this)},r.prototype.acos=function(){return this.throwIfDisposed(),B.acos(this)},r.prototype.atan=function(){return this.throwIfDisposed(),B.atan(this)},r.prototype.sinh=function(){return this.throwIfDisposed(),B.sinh(this)},r.prototype.cosh=function(){return this.throwIfDisposed(),B.cosh(this)},r.prototype.tanh=function(){return this.throwIfDisposed(),B.tanh(this)},r.prototype.asinh=function(){return this.throwIfDisposed(),B.asinh(this)},r.prototype.acosh=function(){return this.throwIfDisposed(),B.acosh(this)},r.prototype.atanh=function(){return this.throwIfDisposed(),B.atanh(this)},r.prototype.erf=function(){return this.throwIfDisposed(),B.erf(this)},r.prototype.round=function(){return this.throwIfDisposed(),B.round(this)},r.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),B.step(this,n)},r.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),B.softmax(this,n)},r.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),B.logSoftmax(this,n)},r.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),B.image.resizeBilinear(this,n,e)},r.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),B.image.resizeNearestNeighbor(this,n,e)},r.prototype.conv1d=function(n,e,t,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),B.conv1d(this,n,e,t,i,o,a)},r.prototype.conv2d=function(n,e,t,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),B.conv2d(this,n,e,t,i,o,a)},r.prototype.conv2dTranspose=function(n,e,t,i,o){return this.throwIfDisposed(),B.conv2dTranspose(this,n,e,t,i,o)},r.prototype.depthwiseConv2D=function(n,e,t,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),B.depthwiseConv2d(this,n,e,t,i,o,a)},r.prototype.separableConv2d=function(n,e,t,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),B.separableConv2d(this,n,e,t,i,o,a)},r.prototype.avgPool=function(n,e,t,i){return this.throwIfDisposed(),B.avgPool(this,n,e,t,i)},r.prototype.maxPool=function(n,e,t,i){return this.throwIfDisposed(),B.maxPool(this,n,e,t,i)},r.prototype.localResponseNormalization=function(n,e,t,i){return n===void 0&&(n=5),e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=.5),B.localResponseNormalization(this,n,e,t,i)},r.prototype.pool=function(n,e,t,i,o){return this.throwIfDisposed(),B.pool(this,n,e,t,i,o)},r.prototype.variable=function(n,e,t){return n===void 0&&(n=!0),this.throwIfDisposed(),Ri().makeVariable(this,n,e,t)},r.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),B.unsortedSegmentSum(this,n,e)},r.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),B.batchToSpaceND(this,n,e)},r.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),B.spaceToBatchND(this,n,e)},r.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),B.topk(this,n,e)},r.prototype.stridedSlice=function(n,e,t,i,o,a,s,c){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=0),this.throwIfDisposed(),B.stridedSlice(this,n,e,t,i,o,a,s,c)},r.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),B.depthToSpace(this,n,e)},r.prototype.fft=function(){return this.throwIfDisposed(),B.spectral.fft(this)},r.prototype.ifft=function(){return this.throwIfDisposed(),B.spectral.ifft(this)},r.prototype.rfft=function(){return this.throwIfDisposed(),B.spectral.rfft(this)},r.prototype.irfft=function(){return this.throwIfDisposed(),B.spectral.irfft(this)},r}();Object.defineProperty(Rt,Symbol.hasInstance,{value:function(r){return!!r&&r.dataId!=null&&r.shape!=null&&r.dtype!=null}});var yC,Wv,Hv,Gv,qv,Wa=function(r){function n(e,t,i,o){var a=r.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=t,a.name=i,a}return ii(n,r),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!an(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ri().disposeTensor(this),this.dataId=e.dataId,Ri().incRef(this,null)},n.prototype.dispose=function(){Ri().disposeVariable(this),this.isDisposedInternal=!0},n}(Rt);Object.defineProperty(Wa,Symbol.hasInstance,{value:function(r){return r instanceof Rt&&r.assign!=null&&r.assign instanceof Function}}),function(r){r.R0="R0",r.R1="R1",r.R2="R2",r.R3="R3",r.R4="R4",r.R5="R5",r.R6="R6"}(yC||(yC={})),function(r){r.float32="float32",r.int32="int32",r.bool="int32",r.complex64="complex64"}(Wv||(Wv={})),function(r){r.float32="float32",r.int32="int32",r.bool="bool",r.complex64="complex64"}(Hv||(Hv={})),function(r){r.float32="float32",r.int32="float32",r.bool="float32",r.complex64="complex64"}(Gv||(Gv={})),function(r){r.float32="complex64",r.int32="complex64",r.bool="complex64",r.complex64="complex64"}(qv||(qv={}));var gF={float32:Gv,int32:Wv,bool:Hv,complex64:qv};function bn(r,n){if(r==="string"||n==="string"){if(r==="string"&&n==="string")return"string";throw new Error("Can not upcast "+r+" with "+n)}return gF[r][n]}function _v(r){return bn(r,"int32")}function Ht(r,n){if(r.dtype===n.dtype)return[r,n];var e=bn(r.dtype,n.dtype);return[r.cast(e),n.cast(e)]}function b1(r,n){k(r.dtype===n.dtype,function(){return"The dtypes of the first("+r.dtype+") and second("+n.dtype+") input must match"})}function ub(r){var n=[];return function e(t,i,o){if(t!=null){if(t instanceof Rt)return void i.push(t);if(a=t,!(!Array.isArray(a)&&typeof a!="object")){var a,s=t;for(var c in s){var l=s[c];o.has(l)||(o.add(l),e(l,i,o))}}}}(r,n,new Set),n}var yv,B6=Object.freeze({makeTypesMatch:Ht,assertTypesMatch:b1,isTensorInList:function(r,n){return n.some(function(e){return e.id===r.id})},getTensorsInContainer:ub}),xC=function(){function r(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return r.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},r}(),vF=function(){function r(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new xC}return r.prototype.ready=function(){return we(this,void 0,void 0,function(){var n,e,t;return Ce(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?(t=n[e],[4,this.initializeBackend(t).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(t)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(r.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),r.prototype.backendNames=function(){return Object.keys(this.registryFactory)},r.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},r.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},r.prototype.registerBackend=function(n,e,t){return t===void 0&&(t=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:t},!0)},r.prototype.setBackend=function(n){return we(this,void 0,void 0,function(){var e,t,i;return Ce(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),t=e.success,e.asyncInit?[4,t]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=t,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new fF(this.backendInstance),[2,!0]}})})},r.prototype.setupRegisteredKernels=function(){var n=this;vC(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},r.prototype.disposeRegisteredKernels=function(n){var e=this;vC(n).forEach(function(t){t.disposeFunc!=null&&t.disposeFunc(e.registry[n])})},r.prototype.initializeBackend=function(n){var e=this,t=this.registryFactory[n];if(t==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=t.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},r.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},r.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,t){return n.registryFactory[t].priority-n.registryFactory[e].priority})},r.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var t=n[e],i=this.initializeBackend(t),o=i.success,a=i.asyncInit;if(a||o)return{name:t,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},r.prototype.moveData=function(n,e){var t=this.state.tensorInfo.get(e),i=t.backend,o=this.readSync(e);i.disposeData(e),t.backend=n,n.move(e,o,t.shape,t.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},r.prototype.tidy=function(n,e){var t,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(t)},function(){return(t=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),t})},r.prototype.scopedRun=function(n,e,t){n();try{var i=t();return e(),i}catch(o){throw e(),o}},r.prototype.nextTensorId=function(){return r.nextTensorId++},r.prototype.nextVariableId=function(){return r.nextVariableId++},r.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),t={x:n};return this.addTapeNode(this.state.activeScope.name,t,[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},r.prototype.runKernel=function(n,e,t,i,o){return this.runKernelFunc(null,e,null,n,t,i,o)},r.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},r.prototype.checkKernelForMemLeak=function(n,e,t){var i=this.backend.numDataIds(),o=0;t.forEach(function(c){o+=c.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-e-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},r.prototype.runKernelFunc=function(n,e,t,i,o,a,s){var c,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var d=[],u=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,f=function(_){u&&(d=_.map(function(y){return l.keep(l.clone(y))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,v=n1(i,this.backendName);return h=v!=null?function(){var _=l.backend.numDataIds();g=v.kernelFunc({inputs:e,attrs:o,backend:l.backend});var y=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,_,y);var b=y.map(function(C){var A=C.dataId,R=C.shape,S=C.dtype;return l.makeTensorFromDataId(A,R,S)}),w=b.filter(function(C,A){return s[A]});return f((a||[]).slice().concat(w)),b}:function(){var _=l.backend.numDataIds();g=l.tidy(function(){return n(l.backend,f)});var y=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,_,y),y},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){c=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,e,function(){return h()}):h()}),u&&this.addTapeNode(i,e,c,t,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(_){return e[_].shape}),outputShapes:c.map(function(_){return _.shape})}),Array.isArray(g)?c:c[0]},r.prototype.makeTensor=function(n,e,t,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");t=t||"float32",i=i||this.backend;var o=n;t==="string"&&$o(n[0])&&(o=n.map(function(d){return p1(d)}));var a=i.write(o,e,t),s=new Rt(e,t,a,this.nextTensorId());if(this.incRef(s,i),t==="string"){var c=this.state.tensorInfo.get(a),l=u1(o);this.state.numBytes+=l-c.bytes,c.bytes=l}return s},r.prototype.makeTensorFromDataId=function(n,e,t,i){var o=new Rt(e,t=t||"float32",n,this.nextTensorId());return this.incRef(o,i),o},r.prototype.makeVariable=function(n,e,t,i){e===void 0&&(e=!0),t=t||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var o=new Wa(n,e,t,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},r.prototype.incRef=function(n,e){var t=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,t===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*sb(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof Wa||this.track(n)},r.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},r.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},r.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},r.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},r.prototype.profile=function(n){return we(this,void 0,void 0,function(){var e,t;return Ce(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,t=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-t,[2,this.state.activeProfile]})})},r.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},r.prototype.addTapeNode=function(n,e,t,i,o){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:t,saved:o},c=uF(n);c!=null&&(i=c.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(d,u){if(d==null){var h=t[u],f=Sc(h.size,h.dtype);return a.makeTensor(f,h.shape,h.dtype)}return d}),i(l.length>1?l:l[0],o)}),this.state.activeTape.push(s)},r.prototype.keep=function(n){return n.kept=!0,n},r.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},r.prototype.endTape=function(){this.state.gradientDepth--},r.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},r.prototype.endScope=function(n){for(var e=this,t=ub(n),i=new Set(t.map(function(c){return c.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(function(c){c.kept||c.scopeId!==s.id||e.track(c)})},r.prototype.gradients=function(n,e,t,i){var o=this;if(i===void 0&&(i=!1),k(e.length>0,function(){return"gradients() received an empty list of xs."}),t!=null&&t.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+t.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});k(a instanceof Rt,function(){return"The result y returned by f() must be a tensor."});var s=function(c,l,d){for(var u={},h={},f=0;f<l.length;f++)u[l[f].id]=!0;for(f=0;f<c.length;f++){var p=(C=c[f]).inputs;for(var m in p){for(var g=p[m],v=!1,_=0;_<l.length;_++)if(u[g.id]){C.outputs.forEach(function(D){return u[D.id]=!0}),v=!0,h[C.id]=!0;break}if(v)break}}var y={};y[d.id]=!0;var b={};for(f=c.length-1;f>=0;f--)for(p=(C=c[f]).inputs,_=0;_<C.outputs.length;_++)if(y[C.outputs[_].id]){for(var m in p)y[p[m].id]=!0,b[C.id]=!0;break}var w=[];for(f=0;f<c.length;f++){var C;if(h[(C=c[f]).id]&&b[C.id]){var A={};for(var m in C.inputs){var R=C.inputs[m];u[R.id]&&(A[m]=R)}var S=Object.assign({},C);S.inputs=A,S.outputs=C.outputs,w.push(S)}}return w}(this.state.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,l,d={};d[a.id]=t??(c=a.shape,l=lb(ke(c),"float32"),N.makeTensor(l,c,"float32")),function(h,f,p){for(var m=function(v){var _=f[v],y=[];if(_.outputs.forEach(function(A){var R=h[A.id];R!=null?y.push(R):y.push(null)}),_.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+_.kernelName+".");var b=_.gradient(y),w=function(A){if(!(A in b))throw new Error("Cannot backprop through input "+A+". Available gradients found: "+Object.keys(b)+".");var R=p(function(){return b[A]()});if(R.dtype!=="float32")throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input "+A+" must have 'float32' dtype, but has '"+R.dtype+"'");var S=_.inputs[A];if(!an(R.shape,S.shape))throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input '"+A+"' has shape '"+R.shape+"', which does not match the shape of the input '"+S.shape+"'");if(h[S.id]==null)h[S.id]=R;else{var D=h[S.id];h[S.id]=D.add(R),D.dispose()}};for(var C in _.inputs)w(C)},g=f.length-1;g>=0;g--)m(g)}(d,s,function(h){return o.tidy(h)});var u=e.map(function(h){return d[h.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(h){for(var f=0,p=h.saved;f<p.length;f++)p[f].dispose()}),o.state.activeTape=null),{value:a,grads:u}})},r.prototype.customGrad=function(n){var e=this;return k(gf(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];k(i.every(function(s){return s instanceof Rt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,c){a[c]=s}),e.runKernelFunc(function(s,c){return k((t=n.apply(void 0,i.concat([c]))).value instanceof Rt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),k(gf(t.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),t.value},a,function(s,c){var l=t.gradFunc(s,c),d=Array.isArray(l)?l:[l];k(d.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),k(d.every(function(h){return h instanceof Rt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var u={};return d.forEach(function(h,f){u[f]=function(){return h}}),u})}},r.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},r.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},r.prototype.time=function(n){return we(this,void 0,void 0,function(){var e,t;return Ce(this,function(i){switch(i.label){case 0:return e=ti(),[4,this.backend.time(n)];case 1:return(t=i.sent()).wallMs=ti()-e,[2,t]}})})},r.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(r.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),r.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new xC,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},r.nextTensorId=0,r.nextVariableId=0,r}(),N=function(){var r=function(){if(yv==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}yv=e}return yv}();if(r._tfengine==null){var n=new lF(r);r._tfengine=new vF(n)}return function(e){t1=e}(r._tfengine.ENV),Ri=function(){return r._tfengine},r._tfengine}();function _1(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ro=W();ro.registerFlag("DEBUG",function(){return!1},function(r){r&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ro.registerFlag("IS_BROWSER",function(){return _1()}),ro.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ro.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ro.registerFlag("PROD",function(){return!1}),ro.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ro.getBool("DEBUG")}),ro.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ro.registerFlag("IS_TEST",function(){return!1});var bd,br,vr,La={},xv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function y1(r,n){La[r]=n}function Oi(r){r in La||(La[r]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete La[e]},!1),e===1?t.getContext("webgl",xv)||t.getContext("experimental-webgl",xv):t.getContext("webgl2",xv)}(r));var n=La[r];return n.isContextLost()?(delete La[r],Oi(r)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),La[r])}function Af(r,n){return[n,r]}function fd(r){var n=ke(r);return mf(Math.ceil(n/4))}function Ed(r,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(r/2))]}function hb(r,n){var e,t,i,o,a,s,c,l,d,u=r;return W().getNumber("WEBGL_VERSION")===2?(e=u.R32F,t=u.R16F,i=u.RGBA16F,o=u.RGBA32F,a=u.RED,s=4,c=1,l=u.HALF_FLOAT,d=u.FLOAT):(e=r.RGBA,t=r.RGBA,i=r.RGBA,o=u.RGBA,a=r.RGBA,s=4,c=4,l=n!=null?n.HALF_FLOAT_OES:null,d=r.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:t,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:r.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function ye(r,n,e){var t=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+w1(i,o))}(r),t}(function(r){r[r.DENSE=0]="DENSE",r[r.SHARED_BATCH=1]="SHARED_BATCH"})(bd||(bd={})),function(r){r[r.RENDER=0]="RENDER",r[r.UPLOAD=1]="UPLOAD",r[r.PIXELS=2]="PIXELS",r[r.DOWNLOAD=3]="DOWNLOAD"}(br||(br={})),function(r){r[r.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",r[r.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",r[r.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",r[r.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",r[r.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(vr||(vr={}));var bF=596e-10,_F=65504;function x1(r){return!!(W().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||r===0||bF<Math.abs(r)&&Math.abs(r)<_F)}function w1(r,n){switch(n){case r.NO_ERROR:return"NO_ERROR";case r.INVALID_ENUM:return"INVALID_ENUM";case r.INVALID_VALUE:return"INVALID_VALUE";case r.INVALID_OPERATION:return"INVALID_OPERATION";case r.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case r.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case r.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function dd(r,n,e){return co(r,n,function(){return r.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function C1(r,n,e){var t=co(r,n,function(){return r.createShader(r.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ye(r,n,function(){return r.shaderSource(t,e)}),ye(r,n,function(){return r.compileShader(t)}),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw console.log(r.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function D1(r,n,e){var t=co(r,n,function(){return r.createShader(r.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ye(r,n,function(){return r.shaderSource(t,e)}),ye(r,n,function(){return r.compileShader(t)}),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw function(i,o){var a=yF.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],c=i.split(`
`),l=c.length.toString().length+2,d=c.map(function(g,v){return Ua((v+1).toString(),l)+g}),u=0,h=0;h<d.length;h++)u=Math.max(d[h].length,u);var f=d.slice(0,s-1),p=d.slice(s-1,s),m=d.slice(s);console.log(f.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Ua(p[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(e,r.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}var af,sf,yF=/ERROR: [0-9]+:([0-9]+):/g;function E1(r,n){return co(r,n,function(){return r.createProgram()},"Unable to create WebGLProgram.")}function S1(r,n,e){if(ye(r,n,function(){return r.linkProgram(e)}),r.getProgramParameter(e,r.LINK_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function cf(r,n,e){if(ye(r,n,function(){return r.validateProgram(e)}),r.getProgramParameter(e,r.VALIDATE_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function k1(r,n,e){var t=co(r,n,function(){return r.createBuffer()},"Unable to create WebGLBuffer");return ye(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,t)}),ye(r,n,function(){return r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)}),t}function I1(r,n,e){var t=co(r,n,function(){return r.createBuffer()},"Unable to create WebGLBuffer");return ye(r,n,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t)}),ye(r,n,function(){return r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW)}),t}function A1(r,n){return co(r,n,function(){return r.createTexture()},"Unable to create WebGLTexture.")}function R1(r,n){var e=W().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||n<=0){var t="["+r+"x"+n+"]";throw new Error("Requested texture size "+t+" is invalid.")}if(r>e||n>e)throw t="["+r+"x"+n+"]",new Error("Requested texture size "+t+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function M1(r,n){return co(r,n,function(){return r.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Yv(r,n,e,t,i,o,a,s){var c=r.getAttribLocation(e,t);return c!==-1&&(ye(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,i)}),ye(r,n,function(){return r.vertexAttribPointer(c,o,r.FLOAT,!1,a,s)}),ye(r,n,function(){return r.enableVertexAttribArray(c)}),!0)}function T1(r,n,e,t){L1(r,t),ye(r,n,function(){return r.activeTexture(r.TEXTURE0+t)}),ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)})}function F1(r,n,e,t){return co(r,n,function(){return r.getUniformLocation(e,t)},'uniform "'+t+'" not present in program.')}function O1(r,n,e){return r.getUniformLocation(n,e)}function N1(r,n,e,t,i,o){ye(r,n,function(){return T1(r,n,t,o)}),ye(r,n,function(){return r.uniform1i(i,o)})}function lf(r,n,e,t){ye(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,t)}),ye(r,n,function(){return r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0)})}function $v(r,n,e){ye(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,e)}),ye(r,n,function(){return r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0)})}function ud(r){var n=r.checkFramebufferStatus(r.FRAMEBUFFER);if(n!==r.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+P1(r,n))}function P1(r,n){switch(n){case r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case r.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function co(r,n,e,t){var i=ye(r,n,function(){return e()});if(i==null)throw new Error(t);return i}function L1(r,n){var e=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,t=n+r.TEXTURE0;if(t<r.TEXTURE0||t>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function _d(r,n){return n===void 0&&(n=2),ke(r.slice(0,r.length-n))}function yd(r){if(r.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[r.length>1?r[r.length-2]:1,r[r.length-1]]}function df(r){var n=[1,1,1];return r.length===0||r.length===1&&r[0]===1||(n=[_d(r)].concat(yd(r))),n}function B1(r,n){var e;n===void 0&&(n=!1);var t=W().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(t*=2,(r=r.map(function(l,d){return d>=r.length-2?ab(r[d]):r[d]})).length===1&&(r=[2,r[0]])),r.length!==2){var i=Yo(r);r=i.newShape}var o=ke(r);if(r.length<=1&&o<=t)return[1,o];if(r.length===2&&r[0]<=t&&r[1]<=t)return r;if(r.length===3&&r[0]*r[1]<=t&&r[2]<=t)return[r[0]*r[1],r[2]];if(r.length===3&&r[0]<=t&&r[1]*r[2]<=t)return[r[0],r[1]*r[2]];if(r.length===4&&r[0]*r[1]*r[2]<=t&&r[3]<=t)return[r[0]*r[1]*r[2],r[3]];if(r.length===4&&r[0]<=t&&r[1]*r[2]*r[3]<=t)return[r[0],r[1]*r[2]*r[3]];if(n){var a=_d(r),s=2,c=2;return r.length&&(s=(e=yd(r))[0],c=e[1]),mf(o=a*(s/2)*(c/2)).map(function(l){return 2*l})}return mf(o)}function Xh(r){return r%2==0}function hd(r,n){if(an(r=r.slice(-2),n=n.slice(-2))||!r.length||!n.length||r[0]===0||r[1]===0||n[0]===0||n[1]===0)return!0;if(r.length!==n.length){var e=r.slice(-1)[0],t=n.slice(-1)[0];if(e===t||Xh(e)&&Xh(t)&&(r[0]===1||n[0]===1))return!0}return r[1]===n[1]&&Xh(r[0])&&Xh(n[0])}function V1(r){if(af==null){var n=Oi(r);af=n.getParameter(n.MAX_TEXTURE_SIZE)}return af}function z1(r){if(sf==null){var n=Oi(r);sf=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sf)}function U1(r){if(r===0)return 0;var n=Oi(r);return _r(n,"EXT_disjoint_timer_query_webgl2")&&r===2?2:_r(n,"EXT_disjoint_timer_query")?1:0}function _r(r,n){return r.getExtension(n)!=null}function Kv(r){try{if(Oi(r)!=null)return!0}catch{return!1}return!1}function j1(r){if(r===0)return!1;var n=Oi(r);if(r===1){if(!_r(n,"OES_texture_float"))return!1}else if(!_r(n,"EXT_color_buffer_float"))return!1;return Xv(n)}function W1(r){if(r===0)return!1;var n=Oi(r);if(r!==1){if(_r(n,"EXT_color_buffer_float"))return Xv(n);if(_r(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(t,i){var o=hb(t,i),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);var c=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(a),t.deleteFramebuffer(s),c}(n,e)}return!1}return!!_r(n,"OES_texture_float")&&!!_r(n,"WEBGL_color_buffer_float")&&Xv(n)}function Xv(r){var n=hb(r),e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var t=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,t),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);var i=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(e),r.deleteFramebuffer(t),i}function H1(r){return r===2&&Oi(r).fenceSync!=null}var xF=Object.freeze({callAndCheck:ye,canBeRepresented:x1,getWebGLErrorMessage:w1,getExtensionOrThrow:dd,createVertexShader:C1,createFragmentShader:D1,createProgram:E1,linkProgram:S1,validateProgram:cf,createStaticVertexBuffer:k1,createStaticIndexBuffer:I1,getNumChannels:function(){return W().getNumber("WEBGL_VERSION")===2?1:4},createTexture:A1,validateTextureSize:R1,createFramebuffer:M1,bindVertexBufferToProgramAttribute:Yv,bindTextureUnit:T1,unbindTextureUnit:function(r,n,e){L1(r,e),ye(r,n,function(){return r.activeTexture(r.TEXTURE0+e)}),ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:F1,getProgramUniformLocation:O1,bindTextureToProgramUniformSampler:N1,bindCanvasToFramebuffer:function(r,n){ye(r,n,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),ye(r,n,function(){return r.viewport(0,0,r.canvas.width,r.canvas.height)}),ye(r,n,function(){return r.scissor(0,0,r.canvas.width,r.canvas.height)})},bindColorTextureToFramebuffer:lf,unbindColorTextureFromFramebuffer:$v,validateFramebuffer:ud,getFramebufferErrorMessage:P1,getBatchDim:_d,getRowsCols:yd,getShapeAs3D:df,getTextureShapeFromLogicalShape:B1,isReshapeFree:hd,getWebGLMaxTextureSize:V1,resetMaxTextureSize:function(){af=null},resetMaxTexturesInShader:function(){sf=null},getMaxTexturesInShader:z1,getWebGLDisjointQueryTimerVersion:U1,hasExtension:_r,isWebGLVersionEnabled:Kv,isCapableOfRenderingToFloatTexture:j1,isDownloadFloatTextureEnabled:W1,isWebGLFenceEnabled:H1}),Ye=W();function G1(r){W().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(r+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Q(r,n){return N.tidy(r,n)}function or(r){ub(r).forEach(function(n){return n.dispose()})}function wF(r){return N.keep(r)}function bf(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];W().getBool("IS_TEST")||console.warn.apply(console,r)}function Fi(r,n){var e=r;if(Rn(r))return n==="string"?[]:[r.length];if(!Array.isArray(r))return[];for(var t=[];Array.isArray(e)||Rn(e)&&n!=="string";)t.push(e.length),e=e[0];return Array.isArray(r)&&W().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!Rn(o))return void k(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});k(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),k(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var c=a.slice(1),l=0;l<o.length;++l)i(o[l],c,s.concat(l))}(r,t,[]),t}function wC(r,n,e,t){if(r!=null&&(r!=="numeric"&&r!==n||r==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+t+"' must be "+r+" tensor, but got "+n+" tensor")}function E(r,n,e,t){if(t===void 0&&(t="numeric"),r instanceof Rt)return wC(t,r.dtype,n,e),r;var i=Ec(r);if(i!=="string"&&["bool","int32","float32"].indexOf(t)>=0&&(i=t),wC(t,i,n,e),r==null||!Rn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string"){var o=r==null?"null":r.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=Fi(r,i);Rn(r)||Array.isArray(r)||(r=[r]);var s=i!=="string"?cb(r,i,W().getBool("DEBUG")):so(r,[],!0);return N.makeTensor(s,a,i)}function _f(r,n,e,t){if(t===void 0&&(t="numeric"),!Array.isArray(r))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return r.map(function(i,o){return E(i,n+"["+o+"]",e)},t)}function fb(r,n){for(var e=0;e<r.length;++e)if(r[r.length-e-1]!==n-1-e)return!1;return!0}function q1(r,n,e){for(var t=r.length+n.length,i=[],o=0,a=0,s=0;s<t;s++)e.indexOf(s)===-1?i.push(r[o++]):i.push(n[a++]);return i}function An(r,n){for(var e=[],t=r.length,i=0;i<t;i++)n.indexOf(i)===-1&&e.push(r[i]);return[e,n.map(function(o){return r[o]})]}function Yn(r,n){return q1(r,n.map(function(e){return 1}),n)}function rr(r,n,e){k(fb(n,e),function(){return r+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function oi(r,n){if(fb(r,n))return null;for(var e=[],t=0;t<n;++t)r.indexOf(t)===-1&&e.push(t);return r.forEach(function(i){return e.push(i)}),e}function Rf(r){return r.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function ai(r,n){for(var e=[],t=n-r;t<n;++t)e.push(t);return e}function Y1(r,n){var e=r[0].length;r.forEach(function(i,o){k(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),k(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var t=r[0];r.forEach(function(i,o){for(var a=0;a<e;a++)k(a===n||i[a]===t[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+t+") along the non-concatenated axis "+o+"."})})}function Ha(r,n){for(var e=r[0].slice(),t=1;t<r.length;t++)e[n]+=r[t][n];return e}function O(r){var n=Object.keys(r);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],t=r[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];N.startScope(e);try{var s=t.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),N.endScope(s),s}catch(c){throw N.endScope(null),c}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}Ye.registerFlag("HAS_WEBGL",function(){return Ye.getNumber("WEBGL_VERSION")>0}),Ye.registerFlag("WEBGL_VERSION",function(){return Kv(2)?2:Kv(1)?1:0}),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ye.get("WEBGL_VERSION")===2}),Ye.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ye.registerFlag("WEBGL_PACK",function(){return Ye.getBool("HAS_WEBGL")}),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_CLIP",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_REDUCE",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_CONV_IM2COL",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return V1(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return z1(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var r=Ye.getNumber("WEBGL_VERSION");return r===0?0:U1(r)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(r=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))));var r}),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return j1(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ye.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return W1(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return H1(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),v1=G1;var In=O({complex_:function(r,n){var e=E(r,"real","complex"),t=E(n,"imag","complex");return vt(e.shape,t.shape,"real and imag shapes, "+e.shape+" and "+t.shape+", must match in call to tf.complex()."),N.runKernelFunc(function(i){return i.complex(e,t)},{$real:e,$imag:t})}}),Or=O({real_:function(r){var n=E(r,"input","real");return N.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),Mi=O({imag_:function(r){var n=E(r,"input","imag");return N.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function _n(r,n,e){return Qo(r,n,Fi(r,e),e)}function Qo(r,n,e,t){if(t==null&&(t=Ec(r)),t==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Rn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){db(n);var i=ke(n),o=ke(e);k(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<e.length;++a){var s=e[a],c=a!==e.length-1||s!==ke(n.slice(a));k(e[a]===n[a]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return Rn(r)||Array.isArray(r)||(r=[r]),n=n||e,r=t!=="string"?cb(r,t,W().getBool("DEBUG")):so(r,[],!0),N.makeTensor(r,n,t)}function se(r,n){if((Rn(r)&&n!=="string"||Array.isArray(r))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Rn(r)&&!(r instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Qo(r,[],[],n)}function Ot(r,n){Ya(r);var e=Fi(r,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Qo(r,null,e,n)}function Ti(r,n,e){if(Ya(r),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var t=Fi(r,e);if(t.length!==2&&t.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Qo(r,n,t,e)}function Mf(r,n,e){if(Ya(r),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var t=Fi(r,e);if(t.length!==3&&t.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Qo(r,n,t,e)}function fn(r,n,e){if(Ya(r),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var t=Fi(r,e);if(t.length!==4&&t.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Qo(r,n,t,e)}function CF(r,n,e){if(Ya(r),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var t=Fi(r,e);if(t.length!==5&&t.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Qo(r,n,t,e)}function DF(r,n,e){if(Ya(r),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var t=Fi(r,e);if(t.length!==6&&t.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(t.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Qo(r,n=n||t,t,e)}function EF(r,n,e,t){return n===void 0&&(n=!0),N.makeVariable(r,n,e,t)}function kc(r,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=kc(r,"float32"),t=Lt(r,"float32");return In(e,t)}var i=lb(ke(r),n);return N.makeTensor(i,r,n)}function Lt(r,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Lt(r,"float32"),t=Lt(r,"float32");return In(e,t)}var i=Sc(ke(r),n);return N.makeTensor(i,r,n)}function xr(r,n,e){return N.runKernelFunc(function(t){return t.fill(r,n,e)},{})}function SF(r,n,e){if(e<=0)throw new Error("The number of values should be positive.");return N.runKernelFunc(function(t){return t.linspace(r,n,e)},{})}function yf(r,n,e,t){if(e===void 0&&(e=1),t===void 0&&(t="float32"),e===0)throw new Error("Cannot have a step of zero");if(r===n||r<n&&e<0||n<r&&e>1)return Lt([0],t);var i=Sc(Math.abs(Math.ceil((n-r)/e)),t);n<r&&e===1&&(e=-1),i[0]=r;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Ot(i,t)}var $1=O({onesLike_:function(r){var n=E(r,"x","onesLike");if(n.dtype==="complex64"){var e=$1(Or(n)),t=ut(Mi(n));return In(e,t)}return N.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,o){return{$x:function(){return ut(i)}}})}}),ut=O({zerosLike_:function(r){var n=E(r,"x","zerosLike");return N.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,t){return{$x:function(){return ut(e)}}})}}),Ut=O({concat_:function(r,n){n===void 0&&(n=0),k(r.length>=1,function(){return"Pass at least one tensor to concat"});var e=_f(r,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=cn(n,e[0].shape)[0];var t=Ha(e.map(function(s){return s.shape}),n);if(ke(t)===0)return _n([],t);if((e=e.filter(function(s){return s.size>0})).length===1)return e[0];var i=e.map(function(s){return s.shape});Y1(i,n);var o=e,a={axis:n};return N.runKernelFunc(function(s){return s.concat(e,n)},o,function(s){var c=i.map(function(l){return l[n]});return pb(s,c,n).map(function(l){return function(){return l}})},"Concat",a)}}),kF=O({concat1d_:function(r){return Ut(r,0)}}),IF=O({concat2d_:function(r,n){return Ut(r,n)}}),AF=O({concat3d_:function(r,n){return Ut(r,n)}}),RF=O({concat4d_:function(r,n){return Ut(r,n)}}),pb=O({split_:function(r,n,e){e===void 0&&(e=0);var t,i=E(r,"x","split");return e=cn(e,i.shape)[0],typeof n=="number"?(k(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),t=new Array(n).fill(i.shape[e]/n)):(k(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),t=n),N.runKernelFunc(function(o){return o.split(i,t,e)},{$x:i},function(o){return{$x:function(){return Ut(o,e)}}})}});function $a(r,n){return r(n={exports:{}},n.exports),n.exports}var MF=$a(function(r){(function(n,e,t){function i(s){var c,l=this,d=(c=4022871197,function(u){u=u.toString();for(var h=0;h<u.length;h++){var f=.02519603282416938*(c+=u.charCodeAt(h));f-=c=f>>>0,c=(f*=c)>>>0,c+=4294967296*(f-=c)}return 23283064365386963e-26*(c>>>0)});l.next=function(){var u=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=0|u)},l.c=1,l.s0=d(" "),l.s1=d(" "),l.s2=d(" "),l.s0-=d(s),l.s0<0&&(l.s0+=1),l.s1-=d(s),l.s1<0&&(l.s1+=1),l.s2-=d(s),l.s2<0&&(l.s2+=1),d=null}function o(s,c){return c.c=s.c,c.s0=s.s0,c.s1=s.s1,c.s2=s.s2,c}function a(s,c){var l=new i(s),d=c&&c.state,u=l.next;return u.int32=function(){return 4294967296*l.next()|0},u.double=function(){return u()+11102230246251565e-32*(2097152*u()|0)},u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.alea=a})(0,r,!1)}),TF=$a(function(r){(function(n,e,t){function i(s){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var u=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^u^u>>>8},s===(0|s)?c.x=s:l+=s;for(var d=0;d<l.length+64;d++)c.x^=0|l.charCodeAt(d),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xor128=a})(0,r,!1)}),FF=$a(function(r){(function(n,e,t){function i(s){var c=this,l="";c.next=function(){var u=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^u^u<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(0|s)?c.x=s:l+=s;for(var d=0;d<l.length+64;d++)c.x^=0|l.charCodeAt(d),d==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xorwow=a})(0,r,!1)}),OF=$a(function(r){(function(n,e,t){function i(s){var c=this;c.next=function(){var l,d,u=c.x,h=c.i;return l=u[h],d=(l^=l>>>7)^l<<24,d^=(l=u[h+1&7])^l>>>10,d^=(l=u[h+3&7])^l>>>3,d^=(l=u[h+4&7])^l<<7,l=u[h+7&7],d^=(l^=l<<13)^l<<9,u[h]=d,c.i=h+1&7,d},function(l,d){var u,h=[];if(d===(0|d))h[0]=d;else for(d=""+d,u=0;u<d.length;++u)h[7&u]=h[7&u]<<15^d.charCodeAt(u)+h[u+1&7]<<13;for(;h.length<8;)h.push(0);for(u=0;u<8&&h[u]===0;++u);for(u==8?h[7]=-1:h[u],l.x=h,l.i=0,u=256;u>0;--u)l.next()}(c,s)}function o(s,c){return c.x=s.x.slice(),c.i=s.i,c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(d.x&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xorshift7=a})(0,r,!1)}),NF=$a(function(r){(function(n,e,t){function i(s){var c=this;c.next=function(){var l,d,u=c.w,h=c.X,f=c.i;return c.w=u=u+1640531527|0,d=h[f+34&127],l=h[f=f+1&127],d^=d<<13,l^=l<<17,d^=d>>>15,l^=l>>>12,d=h[f]=d^l,c.i=f,d+(u^u>>>16)|0},function(l,d){var u,h,f,p,m,g=[],v=128;for(d===(0|d)?(h=d,d=null):(d+="\0",h=0,v=Math.max(v,d.length)),f=0,p=-32;p<v;++p)d&&(h^=d.charCodeAt((p+32)%d.length)),p===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(m=m+1640531527|0,f=(u=g[127&p]^=h+m)==0?f+1:0);for(f>=128&&(g[127&(d&&d.length||0)]=-1),f=127,p=512;p>0;--p)h=g[f+34&127],u=g[f=f+1&127],h^=h<<13,u^=u<<17,h^=h>>>15,u^=u>>>12,g[f]=h^u;l.w=m,l.X=g,l.i=f}(c,s)}function o(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(d.X&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.xor4096=a})(0,r,!1)}),PF=$a(function(r){(function(n,e,t){function i(s){var c=this,l="";c.next=function(){var u=c.b,h=c.c,f=c.d,p=c.a;return u=u<<25^u>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-u|0,c.b=u=u<<20^u>>>12^h,c.c=h=h-f|0,c.d=f<<16^h>>>16^p,c.a=p-u|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=0|s):l+=s;for(var d=0;d<l.length+20;d++)c.b^=0|l.charCodeAt(d),c.next()}function o(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function a(s,c){var l=new i(s),d=c&&c.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},u.int32=l.next,u.quick=u,d&&(typeof d=="object"&&o(d,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=a:t&&t.amd?t(function(){return a}):this.tychei=a})(0,r,!1)}),Ba=$a(function(r){(function(n,e){var t,i=this,o=256,a=6,s="random",c=e.pow(o,a),l=e.pow(2,52),d=2*l,u=o-1;function h(v,_,y){var b=[],w=m(function R(S,D){var F,T=[],V=typeof S;if(D&&V=="object")for(F in S)try{T.push(R(S[F],D-1))}catch{}return T.length?T:V=="string"?S:S+"\0"}((_=_==1?{entropy:!0}:_||{}).entropy?[v,g(n)]:v??function(){try{var R;return t&&(R=t.randomBytes)?R=R(o):(R=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(R)),g(R)}catch{var S=i.navigator,D=S&&S.plugins;return[+new Date,i,D,i.screen,g(n)]}}(),3),b),C=new f(b),A=function(){for(var R=C.g(a),S=c,D=0;R<l;)R=(R+D)*o,S*=o,D=C.g(1);for(;R>=d;)R/=2,S/=2,D>>>=1;return(R+D)/S};return A.int32=function(){return 0|C.g(4)},A.quick=function(){return C.g(4)/4294967296},A.double=A,m(g(C.S),n),(_.pass||y||function(R,S,D,F){return F&&(F.S&&p(F,C),R.state=function(){return p(C,{})}),D?(e[s]=R,S):R})(A,w,"global"in _?_.global:this==e,_.state)}function f(v){var _,y=v.length,b=this,w=0,C=b.i=b.j=0,A=b.S=[];for(y||(v=[y++]);w<o;)A[w]=w++;for(w=0;w<o;w++)A[w]=A[C=u&C+v[w%y]+(_=A[w])],A[C]=_;(b.g=function(R){for(var S,D=0,F=b.i,T=b.j,V=b.S;R--;)S=V[F=u&F+1],D=D*o+V[u&(V[F]=V[T=u&T+S])+(V[T]=S)];return b.i=F,b.j=T,D})(o)}function p(v,_){return _.i=v.i,_.j=v.j,_.S=v.S.slice(),_}function m(v,_){for(var y,b=v+"",w=0;w<b.length;)_[u&w]=u&(y^=19*_[u&w])+b.charCodeAt(w++);return g(_)}function g(v){return String.fromCharCode.apply(0,v)}if(e["seed"+s]=h,m(e.random(),n),r.exports){r.exports=h;try{t=fC()}catch{}}})([],Math)});Ba.alea=MF,Ba.xor128=TF,Ba.xorwow=FF,Ba.xorshift7=OF,Ba.xor4096=NF,Ba.tychei=PF;var Tf=Ba.alea,mb=function(){function r(n,e,t,i,o){this.mean=n,this.stdDev=e,this.dtype=t,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Tf(a.toString())}return r.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,t,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var c=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*c,t=this.mean+this.stdDev*a*c,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)},r.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},r.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},r}(),LF=function(){function r(n,e,t,i){this.alpha=n,this.beta=1/e,this.dtype=t;var o=i||Math.random();this.randu=Tf(o.toString()),this.randn=new mb(0,1,t,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return r.prototype.nextValue=function(){for(var n,e,t,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=1-.331*(n=i*i)*n,t=.5*n+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<t)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},r.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},r}(),BF=function(){function r(n,e,t,i){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=t,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=Tf(i)}return r.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},r.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},r}();function et(r,n,e){return n===void 0&&(n="float32"),n=n||"float32",db(r),new vd(r,n,e)}function VF(r,n){n===void 0&&(n=!1),console.log(r.toString(n))}var K1=O({batchToSpaceND_:function(r,n,e){var t=E(r,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return k(t.rank>=1+n.length,function(){return"input rank is "+t.rank+" but should be > than blockShape.length "+n.length}),k(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),k(t.shape[0]%i==0,function(){return"input tensor batch is "+t.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),N.runKernelFunc(function(o){return o.batchToSpaceND(t,n,e)},{$x:t},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),zF=O({broadcastTo_:function(r,n){var e=E(r,"broadcastTo","x"),t=e.shape;if(n.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var i=e.shape.slice();i.length<n.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(n),a=n.length-1;a>=0;a--)if(e.shape[a]===n[a])o[a]=1;else if(e.shape[a]!==1)throw new Error("broadcastTo(): ["+t+"] cannot be broadcast to ["+n+"].");var s=o.map(function(c,l){return c>1?l:-1}).filter(function(c){return c>=0});return s.length===0?e.clone():N.runKernelFunc(function(c){return c.tile(e,o)},{input:e},function(c){return{input:function(){return c.sum(s,!0)}}})}}),UF=O({cast_:function(r,n){var e=E(r,"x","cast");if(!l1(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var t={dtype:n};return N.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",t)}}),jF=O({clone_:function(r){var n=E(r,"x","clone",null);return N.runKernelFunc(function(){return N.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),WF=O({cumsum_:function(r,n,e,t){n===void 0&&(n=0),e===void 0&&(e=!1),t===void 0&&(t=!1);var i=E(r,"x","cumsum"),o=oi([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=ai(1,i.rank)[0],c=N.runKernelFunc(function(l){return l.cumsum(a,s,e,t)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(n,e,!t)}}});return o!=null&&(c=c.transpose(o)),c}}),HF=O({depthToSpace_:function(r,n,e){e===void 0&&(e="NHWC");var t=E(r,"x","depthToSpace"),i=e==="NHWC"?t.shape[1]:t.shape[2],o=e==="NHWC"?t.shape[2]:t.shape[3],a=e==="NHWC"?t.shape[3]:t.shape[1];return k(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+t.shape}),k(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+t.shape}),k(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+t.shape}),N.runKernelFunc(function(s){return s.depthToSpace(t,n,e)},{$x:t})}}),Vn=O({expandDims_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","expandDims",null);k(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var t=e.shape.slice();return n<0&&(k(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),t.splice(n,0,1),Kn(e,t)}}),X1=O({eye_:function(r,n,e,t){t===void 0&&(t="float32"),n==null&&(n=r);for(var i=et([r,n],t),o=r<=n?r:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(r,n);if(e==null)return s;if(e.length===1)return ja(Vn(s,0),[e[0],1,1]);if(e.length===2)return ja(Vn(Vn(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return ja(Vn(Vn(Vn(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),GF=O({multinomial_:function(r,n,e,t){t===void 0&&(t=!1);var i=E(r,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,c=N.runKernelFunc(function(l){return l.multinomial(s,t,n,e)},{logits2D:s});return a===1?c.as1D():c}}),Qv=O({oneHot_:function(r,n,e,t){if(e===void 0&&(e=1),t===void 0&&(t=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=E(r,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),N.runKernelFunc(function(a){return a.oneHot(i,n,e,t)},{$indices:i},function(a){return{$indices:function(){return Lt(i.shape,"float32")}}}).reshape(o)}}),lo=O({pad_:function(r,n,e){e===void 0&&(e=0);var t=E(r,"x","pad");if(t.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:n,constantValue:e};return N.runKernelFunc(function(o){return o.pad(t,n,e)},{x:t},function(o){var a=n.map(function(s){return s[0]});return{x:function(){return o.slice(a,t.shape)}}},"PadV2",i)}}),qF=O({pad1d_:function(r,n,e){return e===void 0&&(e=0),k(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),lo(r,[n],e)}}),YF=O({pad2d_:function(r,n,e){return e===void 0&&(e=0),k(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lo(r,n,e)}}),$F=O({pad3d_:function(r,n,e){return e===void 0&&(e=0),k(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lo(r,n,e)}}),KF=O({pad4d_:function(r,n,e){return e===void 0&&(e=0),k(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lo(r,n,e)}}),XF=O({rand_:function(r,n,e){var t=ke(r),i=null;if(e==null||e==="float32")i=new Float32Array(t);else if(e==="int32")i=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(t)}for(var o=0;o<t;o++)i[o]=n();return N.makeTensor(i,r,e)}}),QF=O({randomNormal_:function(r,n,e,t,i){if(n===void 0&&(n=0),e===void 0&&(e=1),t!=null&&t==="bool")throw new Error("Unsupported data type "+t);for(var o=new mb(n,e,t,!1,i),a=et(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),ZF=O({randomGamma_:function(r,n,e,t,i){if(e===void 0&&(e=1),t===void 0&&(t="float32"),e==null&&(e=1),t==null&&(t="float32"),t!=="float32"&&t!=="int32")throw new Error("Unsupported data type "+t);for(var o=new LF(n,e,t,i),a=et(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Q1=O({randomUniform_:function(r,n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=1),t===void 0&&(t="float32");for(var o=et(r,t),a=new BF(n,e,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Kn=O({reshape_:function(r,n){var e=E(r,"x","reshape",null);n=s1(n,e.size),k(e.size===ke(n),function(){return"new shape and old shape must have the same number of elements."});var t={shape:n};return N.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",t)}}),Z1=O({spaceToBatchND_:function(r,n,e){var t=E(r,"x","spaceToBatchND");return k(t.rank>=1+n.length,function(){return"input rank "+t.rank+" should be > than [blockShape] "+n.length}),k(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),k(t.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+t.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),N.runKernelFunc(function(i){return i.spaceToBatchND(t,n,e)},{$x:t},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),J1=O({squeeze_:function(r,n){var e=E(r,"x","squeeze");return Kn(e,Yo(e.shape,n).newShape)}}),Mn=O({stack_:function(r,n){n===void 0&&(n=0);var e=_f(r,"tensors","stack");if(k(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var t=e[0].rank,i=e[0].shape,o=e[0].dtype;k(n<=t,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){vt(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){k(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return Ut(a,n)}}),ja=O({tile_:function(r,n){var e=E(r,"x","tile",null);k(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."});var t=[e],i={reps:n};return N.runKernelFunc(function(o,a){var s=o.tile(e,n);return a([e]),s},{x:e},function(o,a){var s=a[0];return{x:function(){var c=ut(s);if(s.rank===1)for(var l=0;l<n[0];++l)c=c.add(o.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<n[0];++l)for(var d=0;d<n[1];++d)c=c.add(o.slice([l*s.shape[0],d*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<n[0];++l)for(d=0;d<n[1];++d)for(var u=0;u<n[2];++u)c=c.add(o.slice([l*s.shape[0],d*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<n[0];++l)for(d=0;d<n[1];++d)for(u=0;u<n[2];++u)for(var h=0;h<n[3];++h)c=c.add(o.slice([l*s.shape[0],d*s.shape[1],u*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return c}}},"Tile",i,t)}}),JF=O({truncatedNormal_:function(r,n,e,t,i){if(n===void 0&&(n=0),e===void 0&&(e=1),t!=null&&t==="bool")throw new Error("Unsupported data type "+t);for(var o=new mb(n,e,t,!0,i),a=et(r,t),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),kt=O({unstack_:function(r,n){n===void 0&&(n=0),n=n||0;var e=E(r,"x","unstack");k(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length);var t={axis:n};return N.runKernelFunc(function(i){return i.unstack(e,n)},{x:e},function(i){return{x:function(){return Mn(i,n)}}},"Unpack",t)}}),eO=function(r,n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u;return Ce(this,function(h){switch(h.label){case 0:return e=E(r,"x","setdiff1d"),t=E(n,"y","setdiff1d"),k(e.dtype===t.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+t.dtype+")."}),k(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),k(t.rank===1,function(){return"y should be 1D tensor, but got y ("+t.shape+")."}),[4,e.data()];case 1:return i=h.sent(),[4,t.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,d=0;d<i.length;d++)a.has(i[d])||s++;for(c=new vd([s],e.dtype),l=new vd([s],"int32"),d=0,u=0;d<i.length;d++)a.has(i[d])||(c.values[u]=i[d],l.values[u]=d,u++);return[2,[c.toTensor(),l.toTensor()]]}})})};function xf(r,n,e,t){t===void 0&&(t=!0);var i=[];if(t)(i=i.concat(n.slice(0))).push(r[0]/e),i=i.concat(r.slice(1));else{i=i.concat(r[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([r[a+1]/n[a],n[a]]);i=i.concat(r.slice(o+1))}return i}function wf(r,n,e){e===void 0&&(e=!0);var t=[];if(e){t.push(n);for(var i=n+1;i<r;++i)i<=2*n?(t.push(i),t.push(i-(n+1))):t.push(i)}else{var o=[],a=[];for(i=1;i<r;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);t.push.apply(t,o),t.push(0),t.push.apply(t,a)}return t}function Cf(r,n,e,t){t===void 0&&(t=!0);var i=[];t?i.push(r[0]/e):i.push(r[0]*e);for(var o=1;o<r.length;++o)o<=n.length?t?i.push(n[o-1]*r[o]):i.push(r[o]/n[o-1]):i.push(r[o]);return i}function eD(r,n){for(var e=[0],t=0;t<n;++t)e.push(r[t][0]);return e}function tD(r,n,e){for(var t=r.slice(0,1),i=0;i<e;++i)t.push(r[i+1]-n[i][0]-n[i][1]);return t}function gb(r,n){if(r.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+r.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>r.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+r.rank);if(r.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+r.shape+".");for(var e=n.shape,t=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=r.shape,s=e.slice();s.pop();var c=1;for(o=t;o<r.rank;++o)c*=a[o],s.push(a[o]);var l=ni(r.shape).map(function(d){return d/c}).concat([1]).slice(0,t);return[s,i,c,l]}var V6=Object.freeze({prepareAndValidate:gb}),vb=30;function uf(r){return r<=vb?r:vf(r,Math.floor(Math.sqrt(r)))}function nD(r,n,e){var t=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+r+", sliceDim: "+t+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(r.length<t+(e.rank-i))throw new Error(o+" Output shape length < "+(t+(e.rank-i)));if(e.rank!==i+r.length-t)throw new Error(o+" update.rank != "+(i+r.length-t));for(var a=0;a<i;++a)if(e.shape[a]!==n.shape[a])throw new Error(o+" updates.shape["+a+"] ("+e.shape[a]+") != indices.shape["+a+"] ("+n.shape[a]+").");for(a=0;a<e.rank-i;++a)if(e.shape[a+i]!==r[a+t])throw new Error(o+" updates.shape["+(a+i)+"] ("+e.shape[a+i]+") != shape["+(a+i)+"] ("+r[a+i]+")")}function rD(r,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(r.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+r.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(r.size===0)throw new Error("Updates specified for empty output. updates shape: "+r.shape)}nD(e,n,r)}function xd(r,n,e){for(var t=n.shape.length,i=t>1?n.shape[t-1]:1,o=e.length,a=1,s=i;s<o;++s)a*=e[s];var c=i<1?1:i;return{sliceRank:i,numUpdates:ke(n.shape)/c,sliceSize:a,strides:ni(e.slice(0,i)).concat([1]),outputSize:ke(e)}}var z6=Object.freeze({validateUpdateShape:nD,validateInput:rD,calculateShapes:xd});function iD(r,n,e){k(r.rank===n.length,function(){return"Error in slice"+r.rank+"D: Length of begin "+n+" must match the rank of the array ("+r.rank+")."}),k(r.rank===e.length,function(){return"Error in slice"+r.rank+"D: Length of size "+e+" must match the rank of the array ("+r.rank+")."});for(var t=function(o){k(n[o]+e[o]<=r.shape[o],function(){return"Error in slice"+r.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+r.shape[o]+")"})},i=0;i<r.rank;++i)t(i)}function Zv(r){for(var n=[],e=0;r>0;)1&r&&n.push(e),r/=2,e++;return n}function Ff(r,n,e){for(var t=[],i=0;i<r.length;i++)t[i]=Math.ceil((n[i]-r[i])/e[i]);return t}function oD(r,n,e,t,i){var o=n[i],a=e[i]||1;(r&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=t[i];return o<0&&(o+=s),o=pf(0,o,s-1)}function aD(r,n,e,t,i){var o=n[i],a=e[i]||1;(r&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=t[i];return o<0&&(o+=s),o=a>0?pf(0,o,s):pf(-1,o,s-1)}function bb(r,n,e){for(var t=e.length,i=0;i<e.length;i++)if(e[i]>1){t=i;break}for(i=t+1;i<e.length;i++)if(n[i]>0||e[i]!==r[i])return!1;return!0}function _b(r,n){for(var e=r.length>0?r[r.length-1]:1,t=0;t<r.length-1;t++)e+=r[t]*n[t];return e}var U6=Object.freeze({assertParamsValid:iD,maskToAxes:Zv,computeOutShape:Ff,startForAxis:oD,stopForAxis:aD,isSliceContinous:bb,computeFlatOffset:_b});function tO(r,n){k(gf(r),function(){return"The f passed in variableGrads(f) must be a function"}),k(n==null||Array.isArray(n)&&n.every(function(d){return d instanceof Wa}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var t in n=[],N.registeredVariables)n.push(N.registeredVariables[t]);var i=e?n.filter(function(d){return!d.trainable}):null,o=n.length;k((n=n.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=N.gradients(r,n,null,!0),s=a.value,c=a.grads;k(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),k(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return n.forEach(function(d,u){c[u]!=null&&(l[d.name]=c[u])}),i?.forEach(function(d){return l[d.name]=null}),{value:s,grads:l}}function Of(r){return N.customGrad(r)}var Xn=O({softmax_:function(r,n){n===void 0&&(n=-1);var e=E(r,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return N.runKernelFunc(function(t,i){var o=t.softmax(e,n);return i([o]),o},{logits:e},function(t,i){var o=i[0],a=t.mul(o);return{logits:function(){return a.sub(a.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),nO=O({logSoftmax_:function(r,n){n===void 0&&(n=-1);var e=E(r,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return Of(function(t,i){var o=t.max(n,!0),a=t.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(c,l){var d=l[0].exp();return c.sub(c.sum(n,!0).mul(d))}}})(e)}}),sD=function(){function r(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return r.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},r.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},r.prototype.has=function(n){return this.data.has(n)},r.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},r.prototype.numDataIds=function(){return this.dataIdsCount},r}(),cD=function(){function r(){}return r.prototype.time=function(n){return L("time")},r.prototype.read=function(n){return L("read")},r.prototype.readSync=function(n){return L("readSync")},r.prototype.numDataIds=function(){return L("numDataIds")},r.prototype.disposeData=function(n){return L("disposeData")},r.prototype.write=function(n,e,t){return L("write")},r.prototype.move=function(n,e,t,i){return L("move")},r.prototype.memory=function(){return L("memory")},r.prototype.floatPrecision=function(){return L("floatPrecision")},r.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},r.prototype.batchMatMul=function(n,e,t,i){return L("batchMatMul")},r.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,L("fusedBatchMatMul")},r.prototype.slice=function(n,e,t){return L("slice")},r.prototype.stridedSlice=function(n,e,t,i){return L("stridedSlice")},r.prototype.unstack=function(n,e){return L("unstack")},r.prototype.reverse=function(n,e){return L("reverse")},r.prototype.concat=function(n,e){return L("concat")},r.prototype.neg=function(n){return L("neg")},r.prototype.add=function(n,e){return L("add")},r.prototype.addN=function(n){return L("addN")},r.prototype.subtract=function(n,e){return L("subtract")},r.prototype.multiply=function(n,e){return L("multiply")},r.prototype.realDivide=function(n,e){return L("realDivide")},r.prototype.floorDiv=function(n,e){return L("floorDiv")},r.prototype.sum=function(n,e){return L("sum")},r.prototype.prod=function(n,e){return L("prod")},r.prototype.unsortedSegmentSum=function(n,e,t){return L("unsortedSegmentSum")},r.prototype.argMin=function(n,e){return L("argMin")},r.prototype.argMax=function(n,e){return L("argMax")},r.prototype.equal=function(n,e){return L("equal")},r.prototype.notEqual=function(n,e){return L("notEqual")},r.prototype.less=function(n,e){return L("less")},r.prototype.lessEqual=function(n,e){return L("lessEqual")},r.prototype.greater=function(n,e){return L("greater")},r.prototype.greaterEqual=function(n,e){return L("greaterEqual")},r.prototype.logicalNot=function(n){return L("logicalNot")},r.prototype.logicalAnd=function(n,e){return L("logicalAnd")},r.prototype.logicalOr=function(n,e){return L("logicalOr")},r.prototype.where=function(n){return L("where")},r.prototype.select=function(n,e,t){return L("select")},r.prototype.topk=function(n,e,t){return L("topk")},r.prototype.min=function(n,e){return L("min")},r.prototype.minimum=function(n,e){return L("minimum")},r.prototype.mod=function(n,e){return L("mod")},r.prototype.max=function(n,e){return L("max")},r.prototype.maximum=function(n,e){return L("maximum")},r.prototype.all=function(n,e){return L("all")},r.prototype.any=function(n,e){return L("any")},r.prototype.squaredDifference=function(n,e){return L("squaredDifference")},r.prototype.ceil=function(n){return L("ceil")},r.prototype.floor=function(n){return L("floor")},r.prototype.round=function(n){return L("round")},r.prototype.sign=function(n){return L("sign")},r.prototype.isNaN=function(n){return L("isNaN")},r.prototype.isInf=function(n){return L("isInf")},r.prototype.isFinite=function(n){return L("isFinite")},r.prototype.pow=function(n,e){return L("pow")},r.prototype.exp=function(n){return L("exp")},r.prototype.expm1=function(n){return L("expm1")},r.prototype.softmax=function(n,e){return L("softmax")},r.prototype.log=function(n){return L("log")},r.prototype.log1p=function(n){return L("log1p")},r.prototype.sqrt=function(n){return L("sqrt")},r.prototype.rsqrt=function(n){return L("rsqrt")},r.prototype.square=function(n){return L("square")},r.prototype.reciprocal=function(n){return L("reciprocal")},r.prototype.relu=function(n){return L("relu")},r.prototype.relu6=function(n){return L("relu6")},r.prototype.prelu=function(n,e){return L("prelu")},r.prototype.elu=function(n){return L("elu")},r.prototype.eluDer=function(n,e){return L("eluDer")},r.prototype.selu=function(n){return L("selu")},r.prototype.int=function(n){return L("int")},r.prototype.clip=function(n,e,t){return L("clip")},r.prototype.abs=function(n){return L("abs")},r.prototype.complexAbs=function(n){return L("complexAbs")},r.prototype.sigmoid=function(n){return L("sigmoid")},r.prototype.softplus=function(n){return L("softplus")},r.prototype.sin=function(n){return L("sin")},r.prototype.cos=function(n){return L("cos")},r.prototype.tan=function(n){return L("tan")},r.prototype.asin=function(n){return L("asin")},r.prototype.acos=function(n){return L("acos")},r.prototype.atan=function(n){return L("atan")},r.prototype.atan2=function(n,e){return L("atan2")},r.prototype.sinh=function(n){return L("sinh")},r.prototype.cosh=function(n){return L("cosh")},r.prototype.tanh=function(n){return L("tanh")},r.prototype.asinh=function(n){return L("asinh")},r.prototype.acosh=function(n){return L("acosh")},r.prototype.atanh=function(n){return L("atanh")},r.prototype.erf=function(n){return L("erf")},r.prototype.step=function(n,e){return L("step")},r.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,L("fusedConv2d")},r.prototype.conv2d=function(n,e,t){return L("conv2d")},r.prototype.conv2dDerInput=function(n,e,t){return L("conv2dDerInput")},r.prototype.conv2dDerFilter=function(n,e,t){return L("conv2dDerFilter")},r.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,L("fusedDepthwiseConv2D")},r.prototype.depthwiseConv2D=function(n,e,t){return L("depthwiseConv2D")},r.prototype.depthwiseConv2DDerInput=function(n,e,t){return L("depthwiseConv2DDerInput")},r.prototype.depthwiseConv2DDerFilter=function(n,e,t){return L("depthwiseConv2DDerFilter")},r.prototype.conv3d=function(n,e,t){return L("conv3d")},r.prototype.conv3dDerInput=function(n,e,t){return L("conv3dDerInput")},r.prototype.conv3dDerFilter=function(n,e,t){return L("conv3dDerFilter")},r.prototype.maxPool=function(n,e){return L("maxPool")},r.prototype.maxPoolBackprop=function(n,e,t,i){return L("maxPoolBackprop")},r.prototype.avgPool=function(n,e){return L("avgPool")},r.prototype.avgPoolBackprop=function(n,e,t){return L("avgPoolBackprop")},r.prototype.avgPool3d=function(n,e){return L("avgPool3d")},r.prototype.avgPool3dBackprop=function(n,e,t){return L("avgPool3dBackprop")},r.prototype.maxPool3d=function(n,e){return L("maxPool3d")},r.prototype.maxPool3dBackprop=function(n,e,t,i){return L("maxPool3dBackprop")},r.prototype.reshape=function(n,e){return L("reshape")},r.prototype.cast=function(n,e){return L("cast")},r.prototype.tile=function(n,e){return L("tile")},r.prototype.pad=function(n,e,t){return L("pad")},r.prototype.transpose=function(n,e){return L("transpose")},r.prototype.gather=function(n,e,t){return L("gather")},r.prototype.gatherND=function(n,e){return L("gatherND")},r.prototype.scatterND=function(n,e,t){return L("scatterND")},r.prototype.batchToSpaceND=function(n,e,t){return L("batchToSpaceND")},r.prototype.spaceToBatchND=function(n,e,t){return L("spaceToBatchND")},r.prototype.resizeBilinear=function(n,e,t,i){return L("resizeBilinear")},r.prototype.resizeBilinearBackprop=function(n,e,t){return L("resizeBilinearBackprop")},r.prototype.resizeNearestNeighbor=function(n,e,t,i){return L("resizeNearestNeighbor")},r.prototype.resizeNearestNeighborBackprop=function(n,e,t){return L("resizeNearestNeighborBackprop")},r.prototype.batchNormalization=function(n,e,t,i,o,a){return L("batchNormalization")},r.prototype.localResponseNormalization4D=function(n,e,t,i,o){return L("localResponseNormalization4D")},r.prototype.LRNGrad=function(n,e,t,i,o,a,s){return L("LRNGrad")},r.prototype.multinomial=function(n,e,t,i){return L("multinomial")},r.prototype.oneHot=function(n,e,t,i){return L("oneHot")},r.prototype.cumsum=function(n,e,t,i){return L("cumsum")},r.prototype.nonMaxSuppression=function(n,e,t,i,o){return L("nonMaxSuppression")},r.prototype.fft=function(n){return L("fft")},r.prototype.ifft=function(n){return L("ifft")},r.prototype.complex=function(n,e){return L("complex")},r.prototype.real=function(n){return L("real")},r.prototype.imag=function(n){return L("imag")},r.prototype.cropAndResize=function(n,e,t,i,o,a){return L("cropAndResize")},r.prototype.depthToSpace=function(n,e,t){return L("depthToSpace")},r.prototype.split=function(n,e,t){return L("split")},r.prototype.sparseToDense=function(n,e,t,i){return L("sparseToDense")},r.prototype.diag=function(n){return L("diag")},r.prototype.fill=function(n,e,t){return L("fill")},r.prototype.onesLike=function(n){return L("onesLike")},r.prototype.zerosLike=function(n){return L("zerosLike")},r.prototype.linspace=function(n,e,t){return L("linspace")},r.prototype.dispose=function(){return L("dispose")},r}();function L(r){throw new Error("'"+r+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ao(r,n){for(var e=r.length,t=[],i=0;i<e;i++){var o=e-1-i,a=r[o]||1;(n[n.length-1-i]||1)>1&&a===1&&t.unshift(o)}return t}function sn(r,n){for(var e=[],t=0;t<n.length;t++){var i=r[r.length-t-1],o=n.length-t-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function ct(r,n){for(var e=[],t=Math.max(r.length,n.length),i=0;i<t;i++){var o=r[r.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+r+" and "+n+".");e.unshift(o)}}return e}function Dc(r,n,e,t,i,o,a){a===void 0&&(a="channelsLast");var s,c=Df(n),l=c[0],d=c[1];if(a==="channelsLast")s=[l,d,r[3],r[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,d,r[1],r[1]]}return Zo(r,s,e,t,i,o,!1,a)}function wd(r,n,e,t,i,o,a){a===void 0&&(a="NDHWC");var s,c,l=Jv(n),d=l[0],u=l[1],h=l[2];if(a==="NDHWC")c="channelsLast",s=[d,u,h,r[4],r[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);c="channelsFirst",s=[d,u,h,r[1],r[1]]}return Cd(r,s,e,t,i,!1,c,o)}function Zo(r,n,e,t,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1],l=c[0],d=c[1],u=c[2],h=c[3];if(s==="channelsLast")l=r[0],d=r[1],u=r[2],h=r[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=r[0],h=r[1],d=r[2],u=r[3]}var f,p=n[0],m=n[1],g=n[3],v=Df(e),_=v[0],y=v[1],b=Df(t),w=b[0],C=b[1],A=_c(p,w),R=_c(m,C),S=function(z,U,Y,q,H,$,Z,ce){var ge,xe,We;if(typeof z=="number"){ge={top:z,bottom:z,left:z,right:z,type:z===0?"VALID":"NUMBER"};var Re=function(Ie,Te,$e,mt,Nt){mt==null&&(mt=yb(Ie,Te,$e));var Gt=Ie[0],di=Ie[1],ui=pd((Gt-Te+2*mt)/$e+1,Nt);k($t(ui),function(){return"The output # of rows ("+ui+") must be an integer. Change the stride and/or zero pad parameters"});var sr=pd((di-Te+2*mt)/$e+1,Nt);return k($t(sr),function(){return"The output # of columns ("+sr+") must be an integer. Change the stride and/or zero pad parameters"}),[ui,sr]}([U,Y],$,q,z,ce);xe=Re[0],We=Re[1]}else if(z==="same"){xe=Math.ceil(U/q),We=Math.ceil(Y/H);var Me=Math.max(0,(xe-1)*q+$-U),qe=Math.max(0,(We-1)*H+Z-Y),Xe=Math.floor(Me/2),tt=Me-Xe,pt=Math.floor(qe/2);ge={top:Xe,bottom:tt,left:pt,right:qe-pt,type:"SAME"}}else{if(z!=="valid")throw Error("Unknown padding parameter: "+z);ge={top:0,bottom:0,left:0,right:0,type:"VALID"},xe=Math.ceil((U-$+1)/q),We=Math.ceil((Y-Z+1)/H)}return{padInfo:ge,outHeight:xe,outWidth:We}}(i,d,u,_,y,A,R,o),D=S.padInfo,F=S.outHeight,T=S.outWidth,V=a?g*h:g;return s==="channelsFirst"?f=[l,V,F,T]:s==="channelsLast"&&(f=[l,F,T,V]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:u,inChannels:h,outHeight:F,outWidth:T,outChannels:V,padInfo:D,strideHeight:_,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:R,dilationHeight:w,dilationWidth:C,inShape:r,outShape:f,filterShape:n}}function Cd(r,n,e,t,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var c=[-1,-1,-1,-1,-1],l=c[0],d=c[1],u=c[2],h=c[3],f=c[4];if(a==="channelsLast")l=r[0],d=r[1],u=r[2],h=r[3],f=r[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=r[0],f=r[1],d=r[2],u=r[3],h=r[4]}var p,m=n[0],g=n[1],v=n[2],_=n[4],y=Jv(e),b=y[0],w=y[1],C=y[2],A=Jv(t),R=A[0],S=A[1],D=A[2],F=_c(m,R),T=_c(g,S),V=_c(v,D),z=function(Z,ce,ge,xe,We,Re,Me,qe,Xe,tt,pt){var Ie,Te,$e,mt;if(typeof Z=="number"){Ie={top:Z,bottom:Z,left:Z,right:Z,front:Z,back:Z,type:Z===0?"VALID":"NUMBER"};var Nt=function(cs,ji,Op,ls,hi,Np){hi==null&&(hi=yb(cs,ji,ls));var Ck=cs[0],Dk=cs[1],Ek=cs[2],Pp=pd((Ck-ji+2*hi)/ls+1,Np);k($t(Pp),function(){return"The output # of depths ("+Pp+") must be an integer. Change the stride and/or zero pad parameters"});var Lp=pd((Dk-ji+2*hi)/ls+1,Np);k($t(Lp),function(){return"The output # of rows ("+Lp+") must be an integer. Change the stride and/or zero pad parameters"});var Bp=pd((Ek-ji+2*hi)/ls+1,Np);return k($t(Bp),function(){return"The output # of columns ("+Bp+") must be an integer. Change the stride and/or zero pad parameters"}),[Pp,Lp,Bp,Op]}([ce,ge,xe,1],qe,1,We,Z,pt);Te=Nt[0],$e=Nt[1],mt=Nt[2]}else if(Z==="same"){Te=Math.ceil(ce/We),$e=Math.ceil(ge/Re),mt=Math.ceil(xe/Me);var Gt=(Te-1)*We+qe-ce,di=($e-1)*Re+Xe-ge,ui=(mt-1)*Me+tt-xe,sr=Math.floor(Gt/2),ss=Gt-sr,zi=Math.floor(di/2),bo=di-zi,Ui=Math.floor(ui/2);Ie={top:zi,bottom:bo,left:Ui,right:ui-Ui,front:sr,back:ss,type:"SAME"}}else{if(Z!=="valid")throw Error("Unknown padding parameter: "+Z);Ie={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Te=Math.ceil((ce-qe+1)/We),$e=Math.ceil((ge-Xe+1)/Re),mt=Math.ceil((xe-tt+1)/Me)}return{padInfo:Ie,outDepth:Te,outHeight:$e,outWidth:mt}}(i,d,u,h,b,w,C,F,T,V,s),U=z.padInfo,Y=z.outDepth,q=z.outHeight,H=z.outWidth,$=o?_*f:_;return a==="channelsFirst"?p=[l,$,Y,q,H]:a==="channelsLast"&&(p=[l,Y,q,H,$]),{batchSize:l,dataFormat:a,inDepth:d,inHeight:u,inWidth:h,inChannels:f,outDepth:Y,outHeight:q,outWidth:H,outChannels:$,padInfo:U,strideDepth:b,strideHeight:w,strideWidth:C,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:F,effectiveFilterHeight:T,effectiveFilterWidth:V,dilationDepth:R,dilationHeight:S,dilationWidth:D,inShape:r,outShape:p,filterShape:n}}function yb(r,n,e,t){t===void 0&&(t=1);var i=_c(n,t);return Math.floor((r[0]*(e-1)-e+i)/2)}function Df(r){return typeof r=="number"?[r,r,r]:r.length===2?[r[0],r[1],1]:r}function Jv(r){return typeof r=="number"?[r,r,r]:r}function _c(r,n){return n<=1?r:r+(r-1)*(n-1)}function pd(r,n){if(!n)return r;switch(n){case"round":return Math.round(r);case"ceil":return Math.ceil(r);case"floor":return Math.floor(r);default:throw new Error("Unknown roundingMode "+n)}}function Ga(r){var n=Df(r),e=n[0],t=n[1],i=n[2];return e===1&&t===1&&i===1}function $n(r,n){return Ga(r)||Ga(n)}function Nf(r){if(r==="NHWC")return"channelsLast";if(r==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+r)}function xb(r,n,e){if(n==="complex64"){if(r.dtype==="complex64")return r.clone();var t=Lt(r.shape),i=r.toFloat(),o=e.complex(i,t);return t.dispose(),i.dispose(),o}if(!d1(r.dtype,n))return N.makeTensorFromDataId(r.dataId,r.shape,n);if(r.dtype==="complex64"){var a=e.real(r);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(r);if(n==="bool"){var s=se(0,r.dtype);return o=e.notEqual(r,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+r.dtype+" to "+n)}function Ef(r,n){return N.makeTensorFromDataId(r.dataId,n,r.dtype)}function wb(r,n,e){var t=(n-r)/(e-1),i=Sc(e,"float32");i[0]=r;for(var o=1;o<i.length;o++)i[o]=i[o-1]+t;return Ot(i,"float32")}var j6=Object.freeze({castTensor:xb,reshapeTensor:Ef,linspaceImpl:wb,upcastType:bn,axesAreInnerMostDims:fb,combineLocations:q1,computeOutAndReduceShapes:An,expandShapeToKeepDim:Yn,assertAxesAreInnerMostDims:rr,getAxesPermutation:oi,getUndoAxesPermutation:Rf,getInnerMostAxes:ai,getBroadcastDims:ao,getReductionAxes:sn,assertAndGetBroadcastShape:ct,assertParamsConsistent:Y1,computeOutShape:Ha,computePool2DInfo:Dc,computePool3DInfo:wd,computeConv2DInfo:Zo,computeConv3DInfo:Cd,computeDefaultPad:yb,tupleValuesAreOne:Ga,eitherStridesOrDilationsAreOne:$n,convertConv2DDataFormat:Nf,PARALLELIZE_THRESHOLD:vb,computeOptimalWindowSize:uf});function eb(r,n){if(r.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+r.length+", imag: "+n.length+".");for(var e=new Float32Array(2*r.length),t=0;t<e.length;t+=2)e[t]=r[t/2],e[t+1]=n[t/2];return e}function CC(r,n){return{real:r[2*n],imag:r[2*n+1]}}function rO(r,n,e,t){r[2*t]=n,r[2*t+1]=e}function iO(r,n,e){var t=(e?2:-2)*Math.PI*(r/n);return{real:Math.cos(t),imag:Math.sin(t)}}function oO(r,n,e){var t=function(o,a,s){return function(c,l,d){for(var u=0,h=c.length,f=0,p=!1;u<h;){var m=d(l,c[f=u+(h-u>>>1)]);m>0?u=f+1:(h=f,p=!m)}return p?u:-u-1}(o,a,s||aO)}(r,n,e),i=t<0?-(t+1):t;r.splice(i,0,n)}function aO(r,n){return r>n?1:r<n?-1:0}function Cb(r,n,e,t,i){return lD(r,n,e,t,i,0).selectedIndices}function Db(r,n,e,t,i,o){var a=lD(r,n,e,t,i,o,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function lD(r,n,e,t,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s=!1);for(var c=Array.from(n).map(function(b,w){return{score:b,boxIndex:w,suppressBeginIndex:0}}).filter(function(b){return b.score>i}).sort(DC),l=o>0?-.5/o:0,d=[],u=[];d.length<e&&c.length>0;){var h=c.pop(),f=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(f<i)break;for(var g=!1,v=d.length-1;v>=m;--v){var _=sO(r,p,d[v]);if(_>=t){g=!0;break}if(h.score=h.score*cO(t,l,_),h.score<=i)break}h.suppressBeginIndex=d.length,g||(h.score===f?(d.push(p),u.push(h.score)):h.score>i&&oO(c,h,DC))}var y=d.length;return s&&(d.fill(0,y),u.fill(0,y)),{selectedIndices:Ot(d,"int32"),selectedScores:Ot(u,"float32"),numValidOutputs:se(y,"int32")}}function sO(r,n,e){var t=r.subarray(4*n,4*n+4),i=r.subarray(4*e,4*e+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),s=Math.max(t[0],t[2]),c=Math.max(t[1],t[3]),l=Math.min(i[0],i[2]),d=Math.min(i[1],i[3]),u=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(s-o)*(c-a),p=(u-l)*(h-d);if(f<=0||p<=0)return 0;var m=Math.max(o,l),g=Math.max(a,d),v=Math.min(s,u),_=Math.min(c,h),y=Math.max(v-m,0)*Math.max(_-g,0);return y/(f+p-y)}function cO(r,n,e){var t=Math.exp(n*e*e);return e<=r?t:0}function DC(r,n){return r.score-n.score||r.score===n.score&&n.boxIndex-r.boxIndex}function dD(r,n,e){var t=new Array(r.rank).fill(0),i=r.shape.slice();return n.map(function(o){i[e]=o;var a=r.slice(t,i);return t[e]+=o,a})}function uD(r,n){for(var e=new Array(r.rank),t=0;t<e.length;t++)e[t]=r.shape[t]*n[t];var i=et(e,r.dtype);for(t=0;t<i.values.length;++t){for(var o=i.indexToLoc(t),a=new Array(r.rank),s=0;s<a.length;s++)a[s]=o[s]%r.shape[s];var c=r.locToIndex(a);i.values[t]=r.values[c]}return i.toTensor()}function hD(r,n,e,t,i){for(var o=n[n.length-1],a=[r.length/o,o],s=a[0],c=a[1],l=Cc(e,s*t),d=Cc("int32",s*t),u=0;u<s;u++){for(var h=u*c,f=r.subarray(h,h+c),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort(function(b,w){return w.value-b.value});var g=u*t,v=l.subarray(g,g+t),_=d.subarray(g,g+t);for(m=0;m<t;m++)v[m]=p[m].value,_[m]=p[m].index}var y=n.slice();return y[y.length-1]=t,[_n(l,y,e),_n(d,y,"int32")]}function Eb(r,n){for(var e=[],t=0;t<n.length;t++)n[t]&&e.push(t);var i=et(r,"int32"),o=et([e.length,r.length],"int32");for(t=0;t<e.length;t++){var a=i.indexToLoc(e[t]),s=t*r.length;o.values.set(a,s)}return o.toTensor()}var lO=function(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var t=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+t+`;
        setOutput(result);
      }
    `},dO=function(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var t=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+t+`;
        setOutput(result);
      }
    `},uO=function(r,n,e){this.variableNames=["A"];var t=r.windowSize,i=r.batchSize,o=r.inSize,a=Math.ceil(o/t);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+t+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function fD(r,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return r+"."+e})}function ir(r,n){return n===1?[r]:fD(r,n)}function zn(){var r,n,e,t,i,o,a,s,c,l;return W().getNumber("WEBGL_VERSION")===2?(r="#version 300 es",n="in",e="out",t="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(r="",n="attribute",e="varying",t="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:r,attribute:n,varyingVs:e,varyingFs:t,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Va(r,n,e){e===void 0&&(e="index");var t=ni(n);return t.map(function(i,o){return"int "+r[o]+" = "+e+" / "+i+"; "+(o===t.length-1?"int "+r[o+1]+" = "+e+" - "+r[o]+" * "+i:"index -= "+r[o]+" * "+i)+";"}).join("")}function Sb(r){var n=ni(r).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var pD=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function hO(r,n,e,t){var i=[];r.forEach(function(f){var p=ke(f.shapeInfo.logicalShape);f.shapeInfo.isUniform?i.push("uniform float "+f.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+f.name+";"),i.push("uniform int offset"+f.name+";"))});var o,a,s=i.join(`
`),c=r.map(function(f){return function(p,m,g){g===void 0&&(g=!1);var v="";v+=g?mD(p):mc(p);var _=p.shapeInfo.logicalShape,y=m.logicalShape;return _.length<=y.length&&(v+=g?function(b,w){var C,A=b.name,R=A.charAt(0).toUpperCase()+A.slice(1),S="get"+R+"AtOutCoords",D=b.shapeInfo.logicalShape.length,F=w.logicalShape.length,T=ao(b.shapeInfo.logicalShape,w.logicalShape),V=Bt(F),z=F-D,U=["x","y","z","w","u","v"];C=D===0?"":F<2&&T.length>=1?"coords = 0;":T.map(function(ge){return"coords."+U[ge+z]+" = 0;"}).join(`
`);var Y="";Y=F<2&&D>0?"coords":b.shapeInfo.logicalShape.map(function(ge,xe){return"coords."+U[xe+z]}).join(", ");var q="return outputValue;",H=ke(b.shapeInfo.logicalShape)===1,$=ke(w.logicalShape)===1;if(D!==1||H||$){if(H&&!$)q=F===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(T.length){var Z=D-2,ce=D-1;T.indexOf(Z)>-1&&T.indexOf(ce)>-1?q="return vec4(outputValue.x);":T.indexOf(Z)>-1?q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(ce)>-1&&(q="return vec4(outputValue.xx, outputValue.zz);")}}else q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+S+`() {
      `+V+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+R+"("+Y+`);
      `+q+`
    }
  `}(p,m):function(b,w){var C=b.name,A=C.charAt(0).toUpperCase()+C.slice(1),R="get"+A+"AtOutCoords",S=w.texShape,D=b.shapeInfo.texShape,F=b.shapeInfo.logicalShape.length,T=w.logicalShape.length;if(!b.shapeInfo.isUniform&&F===T&&b.shapeInfo.flatOffset==null&&an(D,S))return`
      float `+R+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var V,z=Bt(T),U=ao(b.shapeInfo.logicalShape,w.logicalShape),Y=T-F,q=["x","y","z","w","u","v"];V=F===0?"":T<2&&U.length>=1?"coords = 0;":U.map(function($){return"coords."+q[$+Y]+" = 0;"}).join(`
`);var H="";return H=T<2&&F>0?"coords":b.shapeInfo.logicalShape.map(function($,Z){return"coords."+q[Z+Y]}).join(", "),`
    float `+R+`() {
      `+z+` coords = getOutputCoords();
      `+V+`
      return get`+A+"("+H+`);
    }
  `}(p,m)),v}(f,n,t)}).join(`
`),l=n.texShape,d=zn(),u=function(f){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+f.texture2D+`(textureSampler, uv).r;
    }
  `}(d),h=function(f){return f.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+f.varyingFs+` vec2 resultUV;
    `+f.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+f.defineSpecialNaN+`
    `+f.defineSpecialInf+`
    `+f.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+fO+`
    `+pO+`
    `+mO+`
  `}(d);return n.isPacked?(o=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,w){var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,w){var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(an(b,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var A=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+A+`);
      int c = imod(index, `+A+`) * 2;

      return ivec2(r, c);
    }
  `}(f,p);case 3:return m=f,g=p,v=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],_=Math.ceil(m[2]/2),y=_*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+_+`);
      int c = imod(index, `+_+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,w){for(var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],A=Math.ceil(b[b.length-1]/2),R=A*Math.ceil(b[b.length-2]/2),S=R,D="",F="b, r, c",T=2;T<b.length-1;T++)S*=b[b.length-T-1],D=`
      int b`+T+" = index / "+S+`;
      index -= b`+T+" * "+S+`;
    `+D,F="b"+T+", "+F;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+D+`

      int b = index / `+R+`;
      index -= b * `+R+`;

      int r = 2 * (index / `+A+`);
      int c = imod(index, `+A+`) * 2;

      return ivec`+b.length+"("+F+`);
    }
  `}(f,p)}var m,g,v,_,y}(n.logicalShape,l),a=function(f){return`
    void setOutput(vec4 val) {
      `+f.output+` = val;
    }
  `}(d)):(o=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,_){return _[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return resTexRC.x * `+_[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,_){return an(v,_)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(f,p);case 3:return m=p,g=Va(["r","c","d"],f),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,_){var y=Va(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(f,p);case 5:return function(v,_){var y=Va(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+_[0]+`,
                             `+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(f,p);case 6:return function(v,_){var y=Va(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(f,p);default:throw new Error(f.length+"-D output sampling is not yet supported")}var m,g}(n.logicalShape,l),a=function(f){return`
    void setOutput(float val) {
      `+f.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),t&&(h+=gO),[h,u,a,s,o,c,e].join(`
`)}function mc(r){var n=r.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,i="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+t+";}";var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+t+`, halfCR);
      }
    `;var c=e.shapeInfo.texShape,l=c[0],d=c[1],u=Na(t);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+d+", "+u+`);
      return sampleTexture(`+t+`, uv);
    }
  `}(r);case 1:return function(e){var t=e.name,i="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+hc(e)+`
      }
    `;var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+t+`, halfCR);
      }
    `;var c=Na(t);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+a+`.0);
        return sampleTexture(`+t+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+t+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+c+`);
      return sampleTexture(`+t+`, uv);
    }
  `}(r);case 2:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=e.shapeInfo.texShape;if(a!=null&&an(t,a)){var s=a[0],c=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=Yo(t),d=l.newShape,u=l.keptDims,h=d;if(h.length<t.length){var f=gc(e,h);return`
      `+mc(f)+`
      float `+o+`(int row, int col) {
        return `+o+"("+vc(["row","col"],u)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+t[1]+`, 1)));
        `+hc(e)+`
      }
    `;var p=a[0],m=a[1],g=Na(i);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+t[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+t[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+t[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(r);case 3:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[1]*t[2],s=t[2],c=Yo(t),l=c.newShape,d=c.keptDims,u=l;if(u.length<t.length){var h=gc(e,u);return`
        `+mc(h)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+vc(["row","col","depth"],d)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+hc(e)+`
      }
    `;var f=e.shapeInfo.texShape,p=f[0],m=f[1],g=e.shapeInfo.flatOffset;if(m===a&&g==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+t[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var v=Na(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(r);case 4:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[3],s=t[2]*a,c=t[1]*s,l=Yo(t),d=l.newShape,u=l.keptDims;if(d.length<t.length){var h=gc(e,d);return`
      `+mc(h)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+vc(["row","col","depth","depth2"],u)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+s+", "+a+`, 1)));
        `+hc(e)+`
      }
    `;var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,m=p[0],g=p[1];if(g===c&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&f==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+t[1]*t[2]+", "+t[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var v=Na(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+v+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);case 5:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t[4],s=t[3]*a,c=t[2]*s,l=t[1]*c,d=Yo(t),u=d.newShape,h=d.keptDims;if(u.length<t.length){var f=gc(e,u);return`
      `+mc(f)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+vc(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+c+", "+s+", "+a+`)) +
          depth3;
        `+hc(e)+`
      }
    `;var p=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,g=m[0],v=m[1];if(v===l&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===a&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+t[1]*t[2]*t[3]+`,
               `+t[2]*t[3]+", "+t[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var _=Na(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+c+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+_+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);case 6:return function(e){var t=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=Yo(t),s=a.newShape,c=a.keptDims;if(s.length<t.length){var l=gc(e,s);return`
      `+mc(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+vc(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=t[5],u=t[4]*d,h=t[3]*u,f=t[2]*h,p=t[1]*f;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+f+", "+h+", "+u+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+hc(e)+`
      }
    `;var m=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,v=g[0],_=g[1];if(_===p&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+f+", "+h+", "+u+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(_===d&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+t[1]*t[2]*t[3]*t[4]+`,
               `+t[2]*t[3]*t[4]+`,
               `+t[3]*t[4]+`,
               `+t[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Na(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+f+" + depth * "+h+` +
          depth2 * `+u+" + depth3 * "+d+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+_+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(r);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function mD(r){var n,e,t;switch(r.shapeInfo.logicalShape.length){case 0:return n=r.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),t=zn(),`
    vec4 `+e+`() {
      return `+t.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=zn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(r);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,l=c[0],d=c[1],u=zn();if(c!=null&&an(o,c))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+l+`.0);

        return `+u.texture2D+"("+a+`, uv);
      }
    `;var h=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+f+", "+h[0]+", "+h[1]+`, row, col);
      return `+u.texture2D+"("+a+`, uv);
    }
  `}(r);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,l=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var d=o.slice(1),u=gc(i,d);return`
        `+mD(u)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+vc(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],f=l[1],p=Math.ceil(o[2]/2),m=p*Math.ceil(o[1]/2),g=zn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+f+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+a+`, uv);
    }
  `}(r);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,c="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,d=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],u=d[0],h=d[1],f=Math.ceil(o[a-1]/2),p=f*Math.ceil(o[a-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+f+" + (col / 2)",v=2;v<a-1;v++)m="int b"+v+", "+m,p*=o[a-v-1],g="b"+v+" * "+p+" + "+g;var _=zn();return`
    vec4 `+c+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+u+`);
      return `+_.texture2D+"("+s+`, uv);
    }
  `}(r)}}var fO=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pO=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mO=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,gO=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Na(r){return"offset"+r}function hc(r){var n=r.name,e=ke(r.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Bt(r){if(r<=1)return"int";if(r===2)return"ivec2";if(r===3)return"ivec3";if(r===4)return"ivec4";if(r===5)return"ivec5";if(r===6)return"ivec6";throw Error("GPU for rank "+r+" is not yet supported")}function gc(r,n){var e=JSON.parse(JSON.stringify(r));return e.shapeInfo.logicalShape=n,e}function vc(r,n){return n.map(function(e){return r[e]}).join(", ")}var vO=function(r,n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k(r.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=r[r.length-1],o=Math.ceil(i/n);this.outputShape=r.slice(0,-1),o>1&&this.outputShape.push(o),t||this.variableNames.push("bestIndicesA");var a,s,c=this.outputShape,l=c.length,d=Bt(l),u=ir("coords",l);if(o===1){var h=Bt(s=l+1);a=`
        `+h+" sourceLocR = "+h+"("+u.join()+`, 0);
        ++`+u[l-1]+`;
        `+h+" sourceLocG = "+h+"("+u.join()+`, 0);
        ++`+u[l-2]+`;
        `+h+" sourceLocA = "+h+"("+u.join()+`, 0);
        --`+u[l-1]+`;
        `+h+" sourceLocB = "+h+"("+u.join()+`, 0);
        --`+u[l-2]+";"}else s=l,a=`
        `+d+` sourceLocR = coords;
        ++`+u[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+u[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+u[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+u[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map(function(R){return"int "+R}),g=ir("sourceLocR",s-1).concat("inIdx.r"),v=ir("sourceLocG",s-1).concat("inIdx.g"),_=ir("sourceLocB",s-1).concat("inIdx.b"),y=ir("sourceLocA",s-1).concat("inIdx.a"),b=e==="max"?"greaterThan":"lessThan",w=t?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",C=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",A=t?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+f.join()+`),
                                          vec2(`+f.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+f.join()+`),
                               vec2(`+f.slice(-2).join()+`));
      }
      `+A+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+u[l-1]+" < "+(c[l-1]-1)+`;
        bool hasNextRow = `+u[l-2]+" < "+(c[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},bO=function(r){this.variableNames=["dy"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=r.dilationHeight,a=r.dilationWidth,s=r.effectiveFilterHeight,c=r.effectiveFilterWidth,l=s-1-r.padInfo.top,d=c-1-r.padInfo.left,u=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},_O=function(r){this.variableNames=["dy"],this.outputShape=r.inShape;var n=r.filterDepth,e=r.filterHeight,t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterDepth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=d-1-r.padInfo.front,p=u-1-r.padInfo.top,m=h-1-r.padInfo.left,g=1/(n*e*t);this.userCode=`
      const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+r.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},yO=function(r,n,e,t,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ct(r,n),ct(r,e);var a="0.0";t!=null&&(ct(r,t),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(ct(r,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},xO=function(r,n,e,t,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ct(r,n),ct(r,e);var a="vec4(0.0)";t!=null&&(ct(r,t),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(ct(r,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},wO="return areal * breal - aimag * bimag;",CO="return areal * bimag + aimag * breal;",EC=function(r,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ct(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+r+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},wv="return a + b;",Cv="return a - b;",SC="return a * b;",gD="return (a < 0.) ? b * a : a;",Qt=function(r,n,e){this.variableNames=["A","B"],this.outputShape=ct(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+r+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},vD=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,io=function(r,n,e,t){t===void 0&&(t=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ct(n,e);var i=this.outputShape.length,o="";if(t)if(i===0||ke(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Bt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=ir("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+r+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},DO=function(){function r(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return r.prototype.getCustomSetupFunc=function(n,e){var t=this;return function(i,o){t.minLoc==null&&(t.minLoc=i.getUniformLocationNoThrow(o,"minVal"),t.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(t.minLoc,n),i.gl.uniform1f(t.maxLoc,e)}},r}(),EO=function(){function r(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return r.prototype.getCustomSetupFunc=function(n,e){var t=this;return function(i,o){t.minLoc==null&&(t.minLoc=i.getUniformLocationNoThrow(o,"minVal"),t.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(t.minLoc,n),i.gl.uniform1f(t.maxLoc,e)}},r}(),SO=function(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},kO=function(r){this.outputShape=[],this.outputShape=Ha(r,1),this.variableNames=r.map(function(s,c){return"T"+c});var n=new Array(r.length-1);n[0]=r[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+r[e][1];var t=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];t.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];t.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+t.join(`
        `)+`
      }
    `},IO=function(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ha(r,n);var e=this.outputShape,t=e.length,i=Bt(t),o=ir("coords",t),a=["x","y","z","w","u","v"].slice(0,t);this.variableNames=r.map(function(g,v){return"T"+v});var s=new Array(r.length-1);s[0]=r[0][n];for(var c=1;c<s.length;c++)s[c]=s[c-1]+r[c][n];var l=a[n],d=a.slice(-2),u=a.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+u+"), vec2("+d.join()+`));
        }`;for(c=1;c<s.length;c++){var f=s[c-1];h+=`
        if (`+l+" < "+s[c]+"  && "+l+" >= "+s[c-1]+`) {
          return getChannel(
            getT`+c+"("+Qh(a,l,f)+`),
            vec2(`+Qh(d,l,f)+`));
        }`}var p=s.length,m=s[s.length-1];h+=`
        return getChannel(
          getT`+p+"("+Qh(a,l,m)+`),
          vec2(`+Qh(d,l,m)+"));",this.userCode=`
      float getValue(`+a.map(function(g){return"int "+g})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[t-1]+" = "+o[t-1]+` + 1;
        if (`+o[t-1]+" < "+e[t-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[t-2]+" = "+o[t-2]+` + 1;
        if (`+o[t-2]+" < "+e[t-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[t-1]+" = "+o[t-1]+` - 1;
        if (`+o[t-2]+" < "+e[t-2]+` &&
            `+o[t-1]+" < "+e[t-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Qh(r,n,e){var t=r.indexOf(n);return r.map(function(i,o){return o===t?i+" - "+e:i}).join()}var AO=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideHeight,e=r.strideWidth,t=r.padInfo.top,i=r.padInfo.left,o=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yR = 0; yR < `+r.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+t+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+r.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},RO=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=r.dataFormat==="channelsLast",a=n-1-r.padInfo.top,s=e-1-r.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+r.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},MO=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideDepth,e=r.strideHeight,t=r.strideWidth,i=r.padInfo.front,o=r.padInfo.top,a=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yF = 0; yF < `+r.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+r.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+r.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+r.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+r.outWidth+`; yC++) {
                int xC = wC + yC * `+t+" - "+a+`;

                if (xC < 0 || xC >= `+r.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},TO=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterDepth,e=r.filterHeight,t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=n-1-r.padInfo.front,c=e-1-r.padInfo.top,l=t-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+c+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+r.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+t+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+t+` - 1 - wC;

              for (int d2 = 0; d2 < `+r.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},FO=function(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;var n=r.strideHeight,e=r.strideWidth,t=r.padInfo.top,i=r.padInfo.left,o=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+r.batchSize+`; b++) {
          for (int yR = 0; yR < `+r.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+t+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+r.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},OO=function(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;var n=r.filterHeight,e=r.filterWidth,t=r.strideHeight,i=r.strideWidth,o=n-1-r.padInfo.top,a=e-1-r.padInfo.left,s=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},kC=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.outputShape=r.outShape;var i=r.padInfo.top,o=r.padInfo.left,a=r.strideHeight,s=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.filterHeight,u=r.filterWidth,h=4*Math.floor(r.inChannels/4),f=r.inChannels%4,p=r.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,v=p?3:1,_="",y="";e&&(_=t?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+r.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+u+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+r.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(f===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(f===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(f===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+y+`
        setOutput(result);
      }
    `},NO=function(r){this.variableNames=["x","W"],this.outputShape=r.outShape;var n=r.padInfo.front,e=r.padInfo.top,t=r.padInfo.left,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.filterDepth,u=r.filterHeight,h=r.filterWidth,f=4*Math.floor(r.inChannels/4),p=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+t+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+r.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+u+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+f+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+f+`) *
                  getW(wF, wR, wC, `+f+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1),
                  getX(batch, xF, xR, xC, `+f+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2),
                  getW(wF, wR, wC, `+f+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},IC=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.outputShape=r.outShape;var i=r.inHeight,o=r.inWidth,a=r.padInfo.top,s=r.padInfo.left,c=r.strideHeight,l=r.strideWidth,d=r.dilationHeight,u=r.dilationWidth,h=r.filterHeight,f=r.filterWidth,p=r.outChannels/r.inChannels,m="",g="";e&&(m=t?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,g="result = activation(result);");var v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+c+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+g+`
        setOutput(result);
      }
    `},AC=function(r,n,e,t){n===void 0&&(n=!1),e===void 0&&(e=null),t===void 0&&(t=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.outShape;for(var i=r.inHeight,o=r.inWidth,a=r.padInfo.top,s=r.padInfo.left,c=r.strideHeight,l=r.strideWidth,d=r.dilationHeight,u=r.dilationWidth,h=r.filterHeight,f=r.filterWidth,p=f,m="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var v=0;v<f;v++)m+=`
          vec4 xTexelR`+g+"C"+2*v+` = vec4(0.);
          vec4 wR`+g+"C"+v+` = vec4(0.);
          vec4 xR`+g+"C"+v+" = vec4(0.);";for(g=0;g<h;g++)for(var _=0;_<p;_++){if(m+=`
          xR = xRCorner + `+g*d+`;
          xC = xCCorner + `+(v=2*_)*u+`;
        `,l===1){if(v<f&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+g+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+`.xy);
                } else {
                  xR`+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xR`+g+"C"+v+" = xTexelR"+g+"C"+v+`;
              `,v+1<f)){var y=s%2==0?ab(u):u;u%2==0&&s%2==1||u%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,u>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+`;
                `}}else v<f&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
              `,v+1<f&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+`.xy);
              `,v+1<f&&(m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
                `)),m+="}");v<f&&(m+=`
            vec4 wTexelR`+g+"C"+v+" = getW("+g+", "+v+`, d1, q);
            wR`+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+`.xz);
          `,v+1<f&&(m+=`
              vec4 wTexelR`+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+`, d1, q);
              wR`+g+"C"+(v+1)+` =
                vec4(wTexelR`+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<h;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",w="";e&&(b=t?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,w="result = activation(result);");var C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),t&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+c+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+C+`
        `+w+`
        setOutput(result);
      }
    `},PO=function(r,n,e,t,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=r[0],a=r[1],s=r[2],c=r[3],l=n[0],d=e[0],u=e[1];this.outputShape=[l,d,u,c];var h=t==="bilinear"?1:0,f=[a-1+".0",s-1+".0"],p=f[0],m=f[1],g=d>1?[""+(a-1)/(d-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],_=g[1],y=g[2],b=u>1?[""+(s-1)/(u-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],C=b[1],A=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+_+`;
        float width_scale = `+C+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+A+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},LO=function(r,n,e){this.variableNames=["x"],this.outputShape=r;var t=r.length,i=r[r.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Bt(t)+` coords = getOutputCoords();
        int end = `+RC(t,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+RC(t,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(t,"coords")+`);
        }
        setOutput(val);
      }
    `};function RC(r,n){if(r===1)return""+n;if(r===2)return n+".y";if(r===3)return n+".z";if(r===4)return n+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}var BO=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=bd.DENSE;var n=fd(r),e=zn();this.outputShape=r,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Va(["r","c","d"],r)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},VO=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=bd.DENSE;var n=fd(r),e=zn();this.outputShape=r,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Va(["r","c","d"],r)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},zO=function(){function r(n,e,t){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=t,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return r.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},r.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},r.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},r.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},r.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},r}(),UO=function(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},jO=function(r){this.variableNames=["A"],this.outTexUsage=br.DOWNLOAD;var n=zn();this.outputShape=r,this.userCode=`
      `+pD+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},WO=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=br.DOWNLOAD;var n=zn();this.outputShape=r,this.userCode=`
      `+pD+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},HO=function(r,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var t=zn(),i=n[0],o=n[1];this.outputShape=r;var a="result";e&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+Sb(r)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+t.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+t.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},GO=function(r,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=zn(),i=n[0],o=n[1];this.outputShape=r;var a="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var l=0;l<=1;l++){var d=2*c+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+r[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+c+" < "+r[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+t.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Sb(r)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+t.output+" = "+s+`;
      }
    `},qO="return real * expR - imag * expI;",YO="return real * expI + imag * expR;",MC=function(r,n,e){this.variableNames=["real","imag"];var t=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?t+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+r+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+t+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+t+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},$O=function(){function r(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;return function(t,i){e.valueLoc==null&&(e.valueLoc=t.getUniformLocationNoThrow(i,"value")),t.gl.uniform1f(e.valueLoc,n)}},r}(),KO=function(r,n,e){this.variableNames=["A","indices"];var t=r.slice();t[e]=n,this.outputShape=t,this.rank=t.length;var i=Bt(this.rank),o=function(a,s){var c=a.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],u=0;u<a.length;u++)u===s?d.push("int(getIndices("+l[u]+"))"):d.push(""+l[u]);return d.join()}(r,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},XO=function(r,n,e){this.sliceDim=r,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var t=Bt(n.length),i=Bt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+t+" strides = "+t+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function bD(r,n){var e=zn();return C1(r,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function _D(r,n){return k1(r,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function yD(r,n){return I1(r,n,new Uint16Array([0,1,2,2,1,3]))}function Sd(r,n,e,t,i,o,a){R1(e,t);var s=A1(r,n),c=r.TEXTURE_2D;return ye(r,n,function(){return r.bindTexture(c,s)}),ye(r,n,function(){return r.texParameteri(c,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE)}),ye(r,n,function(){return r.texParameteri(c,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)}),ye(r,n,function(){return r.texParameteri(c,r.TEXTURE_MIN_FILTER,r.NEAREST)}),ye(r,n,function(){return r.texParameteri(c,r.TEXTURE_MAG_FILTER,r.NEAREST)}),ye(r,n,function(){return r.texImage2D(c,0,i,e,t,0,o,a,null)}),ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)}),s}function xD(r,n,e,t,i){var o=Af(e,t);return Sd(r,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,r.FLOAT)}function wD(r,n,e,t,i){var o=Af(e,t);return Sd(r,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function CD(r,n,e,t,i){var o=Af(e,t);return Sd(r,n,o[0],o[1],r.RGBA,r.RGBA,r.UNSIGNED_BYTE)}function DD(r,n,e,t,i){var o=Ed(e,t);return Sd(r,n,o[0],o[1],i.internalFormatPackedFloat,r.RGBA,r.FLOAT)}function ED(r,n,e,t,i){var o=Ed(e,t);return Sd(r,n,o[0],o[1],i.internalFormatPackedHalfFloat,r.RGBA,i.textureTypeHalfFloat)}function SD(r,n,e,t){return ye(r,n,function(){return r.bindBuffer(r.ARRAY_BUFFER,t)}),Yv(r,n,e,"clipSpacePos",t,3,20,0)&&Yv(r,n,e,"uv",t,2,20,12)}function kD(r,n,e,t,i,o,a){var s,c,l;ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(t*i*4),c=r.UNSIGNED_BYTE,l=r.RGBA):(s=new Float32Array(t*i*4),c=r.FLOAT,l=a.internalFormatPackedFloat),s.set(o),ye(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,l,t,i,0,r.RGBA,c,s)}),ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})}function ID(r,n,e,t){ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,e)}),t.data instanceof Uint8Array?ye(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width,t.height,0,r.RGBA,r.UNSIGNED_BYTE,t.data)}):ye(r,n,function(){return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}),ye(r,n,function(){return r.bindTexture(r.TEXTURE_2D,null)})}function AD(r,n,e,t,i){var o=r.createBuffer();ye(r,n,function(){return r.bindBuffer(r.PIXEL_PACK_BUFFER,o)});var a=16*e*t;return ye(r,n,function(){return r.bufferData(r.PIXEL_PACK_BUFFER,a,r.STREAM_READ)}),ye(r,n,function(){return r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,0)}),ye(r,n,function(){return r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}),o}function RD(r,n,e){var t=r,i=new Float32Array(e);return t.bindBuffer(t.PIXEL_PACK_BUFFER,n),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),i}function MD(r,n,e,t,i){var o=Af(e,t),a=o[0],s=o[1],c=new Uint8Array(e*t*4);return ye(r,n,function(){return r.readPixels(0,0,a,s,i.downloadTextureFormat,r.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function TD(r,n,e,t,i,o,a,s){var c=r,l=new Float32Array(function(d,u){var h=Ed(d,u);return h[0]*h[1]*4}(o,a));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function FD(r,n,e,t){var i=new Float32Array(e*t*4);return ye(r,n,function(){return r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,i)}),i}var QO=Object.freeze({createVertexShader:bD,createVertexBuffer:_D,createIndexBuffer:yD,createFloat32MatrixTexture:xD,createFloat16MatrixTexture:wD,createUnsignedBytesMatrixTexture:CD,createPackedMatrixTexture:DD,createFloat16PackedMatrixTexture:ED,bindVertexProgramAttributeStreams:SD,uploadDenseMatrixToTexture:kD,uploadPixelDataToTexture:ID,createBufferFromOutputTexture:AD,downloadFloat32MatrixFromBuffer:RD,downloadByteEncodedFloatMatrixFromOutputTexture:MD,downloadPackedMatrixFromBuffer:TD,downloadMatrixFromPackedOutputTexture:FD}),OD=function(){function r(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=W().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,y1(e,n)):this.gl=Oi(e);var t="WEBGL_color_buffer_float";if(W().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=dd(this.gl,this.debug,"OES_texture_float"),_r(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=dd(this.gl,this.debug,"OES_texture_half_float");else if(W().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(t),_r(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=dd(this.gl,this.debug,"EXT_color_buffer_half_float");else if(W().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(t="EXT_color_buffer_float",_r(this.gl,t))this.colorBufferFloatExtension=this.gl.getExtension(t);else{if(!_r(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=_D(this.gl,this.debug),this.indexBuffer=yD(this.gl,this.debug),this.framebuffer=M1(this.gl,this.debug),this.textureConfig=hb(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(r.prototype,"debug",{get:function(){return W().getBool("DEBUG")},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ye(e,this.debug,function(){return e.finish()}),ye(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ye(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),ye(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ye(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ye(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},r.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),xD(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),wD(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),CD(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),ID(this.gl,this.debug,n,e)},r.prototype.uploadDenseMatrixToTexture=function(n,e,t,i){this.throwIfDisposed(),kD(this.gl,this.debug,n,e,t,i,this.textureConfig)},r.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),ED(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),DD(this.gl,this.debug,n,e,this.textureConfig)},r.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&($v(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ye(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},r.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,t){var i=this;return this.downloadMatrixDriver(n,function(){return MD(i.gl,i.debug,e,t,i.textureConfig)})},r.prototype.downloadPackedMatrixFromBuffer=function(n,e,t,i,o,a){return TD(this.gl,n,0,0,0,o,a,this.textureConfig)},r.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return RD(this.gl,n,e)},r.prototype.createBufferFromTexture=function(n,e,t){this.bindTextureToFrameBuffer(n);var i=AD(this.gl,this.debug,e,t,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},r.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},r.prototype.createFence=function(n){var e,t,i=this;if(W().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),t=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),t=function(){return i.isQueryAvailable(e,W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):t=function(){return!0};return{query:e,isFencePassed:t}},r.prototype.downloadMatrixFromPackedTexture=function(n,e,t){var i=this;return this.downloadMatrixDriver(n,function(){return FD(i.gl,i.debug,e,t)})},r.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,t=D1(e,this.debug,n),i=bD(e,this.debug),o=E1(e,this.debug);return ye(e,this.debug,function(){return e.attachShader(o,i)}),ye(e,this.debug,function(){return e.attachShader(o,t)}),S1(e,this.debug,o),this.debug&&cf(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=SD(e,this.debug,this.program,this.vertexBuffer)),o},r.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&ye(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},r.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&cf(this.gl,this.debug,this.program),ye(this.gl,this.debug,function(){return e.gl.useProgram(n)})},r.prototype.getUniformLocation=function(n,e,t){return t===void 0&&(t=!0),this.throwIfDisposed(),t?F1(this.gl,this.debug,n,e):O1(this.gl,n,e)},r.prototype.getAttributeLocation=function(n,e){var t=this;return this.throwIfDisposed(),ye(this.gl,this.debug,function(){return t.gl.getAttribLocation(n,e)})},r.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},r.prototype.setInputMatrixTexture=function(n,e,t){this.throwIfDisposed(),this.throwIfNoProgram(),N1(this.gl,this.debug,this.program,n,e,t)},r.prototype.setOutputMatrixTexture=function(n,e,t){this.setOutputMatrixTextureDriver(n,t,e)},r.prototype.setOutputPackedMatrixTexture=function(n,e,t){this.throwIfDisposed();var i=Ed(e,t),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},r.prototype.setOutputMatrixWriteRegion=function(n,e,t,i){this.setOutputMatrixWriteRegionDriver(t,n,i,e)},r.prototype.setOutputPackedMatrixWriteRegion=function(n,e,t,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},r.prototype.debugValidate=function(){this.program!=null&&cf(this.gl,this.debug,this.program),ud(this.gl)},r.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),ye(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},r.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),ye(this.gl,this.debug,function(){return n.gl.finish()})},r.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=dd(this.gl,this.debug,W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},r.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},r.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},r.prototype.beginQuery=function(){if(W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),t=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,t),t}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},r.prototype.endQuery=function(){if(W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,t=this.getQueryTimerExtensionWebGL2();e.endQuery(t.TIME_ELAPSED_EXT)}},r.prototype.waitForQueryAndGetTime=function(n){return we(this,void 0,void 0,function(){var e=this;return Ce(this,function(t){switch(t.label){case 0:return[4,zv(function(){return e.disposed||e.isQueryAvailable(n,W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return t.sent(),[2,this.getQueryTime(n,W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},r.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var t=this.gl;return t.getQueryParameter(n,t.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},r.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var t=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=t.getQueryParameter(n,t.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},r.prototype.pollFence=function(n){var e=this;return new Promise(function(t){e.addItemToPoll(function(){return n.isFencePassed()},function(){return t()})})},r.prototype.pollItems=function(){for(var n=function(t){for(var i=0;i<t.length&&t[i]();++i);return i-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},r.prototype.addItemToPoll=function(n,e){var t=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||zv(function(){return t.pollItems(),t.itemsToPoll.length===0})},r.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),lf(this.gl,this.debug,n,this.framebuffer),this.debug&&ud(this.gl)},r.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(lf(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ud(this.gl)):$v(this.gl,this.debug,this.framebuffer)},r.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var t=e();return this.unbindTextureToFrameBuffer(),t},r.prototype.setOutputMatrixTextureDriver=function(n,e,t){this.throwIfDisposed();var i=this.gl;lf(i,this.debug,n,this.framebuffer),this.debug&&ud(i),this.outputTexture=n,ye(i,this.debug,function(){return i.viewport(0,0,e,t)}),ye(i,this.debug,function(){return i.scissor(0,0,e,t)})},r.prototype.setOutputMatrixWriteRegionDriver=function(n,e,t,i){var o=this;this.throwIfDisposed(),ye(this.gl,this.debug,function(){return o.gl.scissor(n,e,t,i)})},r.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},r.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},r}();function TC(r,n){if(r.length!==n.length)throw Error("Binary was compiled with "+r.length+" inputs, but was executed with "+n.length+" inputs");r.forEach(function(e,t){var i=e.logicalShape,o=n[t],a=o.shape;if(!an(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!an(s,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+c+" must match")}})}var ZO=function(r,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;for(var t=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,c=e.outWidth,l=e.dilationWidth,d=e.dilationHeight,u=e.dataFormat,h=s.left,f=s.top,p=i*t,m=zn(),g=u==="channelsLast",v=g?0:1,_=g?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+r[1]+" && pos < "+r[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+a+" - "+f+`;
            d0 = offsetY + `+d+" * (pos / "+p+`);

            if(d0 < `+n[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+n[_]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+m.output+` = result;
      }
    `},JO=function(r,n,e,t,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=r[3]-1;this.outputShape=r;var c="float("+e+") + float("+t+") * sum";o=i===.5?"inversesqrt("+c+")":i===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},eN=function(r,n,e,t,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=e,this.alpha=t,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+t+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+t+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},tN=function(r,n,e,t,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=n,s=r[3]-1;this.outputShape=r;var c="float("+e+") + float("+t+") * sum";o=i===.5?"inversesqrt("+c+")":i===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},nN=function(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;var n=r.strideHeight,e=r.strideWidth,t=r.dilationHeight,i=r.effectiveFilterHeight,o=r.effectiveFilterWidth,a=i-1-r.padInfo.top,s=o-1-r.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+t+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},rN=function(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;var n=r.strideDepth,e=r.strideHeight,t=r.strideWidth,i=r.dilationDepth,o=r.dilationHeight,a=r.dilationWidth,s=r.effectiveFilterDepth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,d=s-1-r.padInfo.front,u=c-1-r.padInfo.top,h=l-1-r.padInfo.left,f=s*c*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+u+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+r.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+r.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+t+`.0;

              if (dyC < 0.0 || dyC >= `+r.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+f+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Dv=function(r,n,e,t,i,o,a){e===void 0&&(e=!1),t===void 0&&(t=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?r[1]:r[2],c=Math.ceil(s/2),l=e?"i * 2, rc.y":"rc.y, i * 2",d=t?"rc.z, i * 2":"i * 2, rc.z",u=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=t?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";o&&(f=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+f+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+u[0]+" * "+h[0]+`);
          result += (`+u[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},iN=function(){function r(n,e,t){this.variableNames=["probs"],this.outputShape=[n,t],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;return function(t,i){e.seedLoc==null&&(e.seedLoc=t.getUniformLocation(i,"seed")),t.gl.uniform1f(e.seedLoc,n)}},r}(),oN=function(r,n,e,t){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+t+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},aN=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r;var n=r.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=ir("rc",n),t=Bt(n),i=function(s,c,l){if(s===1)return"rc > "+c[0];for(var d="",u=s-2;u<s;u++)d+=l[u]+" >= "+c[u],u<s-1&&(d+="||");return d}(n,r,e),o=function(s,c,l,d){if(s===1)return"";var u=d.slice(-2);return`
    int r = `+u[0]+`;
    int c = `+u[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+l+`;
  `}(n,r[r.length-1],r[r.length-2],e),a=function(s,c){var l=s.length,d=function(u,h){for(var f=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<u;v++)g=h[h.length-1-v]+","+g;f.push(g)}return f}(l,c);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(r,e);this.userCode=`
        void main() {
          `+t+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},sN=function(r,n,e){this.variableNames=["x"],this.outputShape=n.map(function(c,l){return c[0]+r[l]+c[1]});var t=r.length,i=Bt(t),o=n.map(function(c){return c[0]}).join(","),a=n.map(function(c,l){return c[0]+r[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t);this.userCode=t!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},cN=function(r,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(g,v){return g[0]+r[v]+g[1]});for(var t=r.length,i=Bt(t),o=n.map(function(g){return g[0]}).join(","),a=n.map(function(g,v){return g[0]+r[v]}).join(","),s=ir("rc",t),c=ir("source",t),l=s[t-1]+" < "+this.outputShape[t-1],d=t===1?"source":"vec2("+c.slice(-2).join()+")",u=[i+" rc = outputLoc;",s[t-1]+` += 1;
       if(`+l+`) {
      `,t===1?"":`}
       rc = outputLoc;
       `+s[t-2]+` += 1;
       if(`+s[t-2]+" < "+this.outputShape[t-2]+") {",t===1?"":"  "+s[t-1]+` += 1;
         if(`+l+") {"],h=t===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=t===1?2:4;p<m;p++)f+=`
        `+u[p]+`
        if (`+h+`) {
          result[`+p+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;f+=t===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+f+`
        setOutput(result);
      }
    `},Ev=function(r,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var t=r.filterWidth,i=r.strideHeight,o=r.strideWidth,a=r.dilationHeight,s=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,d=r.padInfo.top,u=r.padInfo.left;this.outputShape=r.outShape;var h=n==="avg",f="0.0";if(h||(f="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+d+", "+u+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+r.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(p="avgValue / count");var m=4*Math.floor(t/4),g=t%4,v=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float initializationValue = `+f+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+r.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+f+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+r.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},Sv=function(r,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var t=r.filterWidth,i=r.strideDepth,o=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterDepth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.front,p=r.padInfo.top,m=r.padInfo.left;this.outputShape=r.outShape;var g=n==="avg",v="0.0";if(g||(v="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+r.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+u+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+r.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+r.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+u+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(_="avgValue / count");var y=4*Math.floor(t/4),b=t%4,w=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+r.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+r.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+u+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+r.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},lN=function(r,n){this.variableNames=["x"];var e=r.windowSize,t=r.batchSize,i=r.inSize,o=Math.ceil(i/e);this.outputShape=[t,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var l=4*Math.floor(e/4),d=e%4,u=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";n==="all"?(a="1.0",u=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",u=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var f="";i%e>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+f+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+u+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+u+`
        } else if (`+(d===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+u+`
        } else if (`+(d===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+u+`
        }
        setOutput(`+c+`);
      }
    `},dN=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;for(var e="",t=0;t<4;t++){var i="thisRC = rc;";t%2==1&&(i+="thisRC.z += 1;"),t>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(t>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+t+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(t>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Va(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+Sb(r)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+r[1]+`;
        int cols = `+r[2]+`;

        `+e+`

        setOutput(result);
      }
    `},uN=function(r,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var t=n.shape,i=t[1],o=t[2],a=r.shape,s=a[1],c=a[2],l=[e&&s>1?i-1:i,e&&c>1?o-1:o],d=[e&&s>1?s-1:s,e&&c>1?c-1:c],u=l[0]/d[0],h=l[1]/d[1],f=1/u,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+u+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},hN=function(r,n,e,t){this.variableNames=["A"],this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},fN=function(r,n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`,
          `+c[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},pN=function(r,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var t=n.shape,i=t[1],o=t[2],a=r.shape,s=a[1],c=a[2],l=[e&&s>1?i-1:i,e&&c>1?o-1:o],d=[e&&s>1?s-1:s,e&&c>1?c-1:c],u=l[0]/d[0],h=l[1]/d[1],f=1/u,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+u+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},mN=function(r,n,e,t){this.variableNames=["A"],this.outputShape=[];var i=r[0],o=r[1],a=r[2],s=r[3];this.outputShape=[i,n,e,s];var c=[t&&n>1?o-1:o,t&&e>1?a-1:a],l=[t&&n>1?n-1:n,t&&e>1?e-1:e],d=t?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/l[0]+`,
          `+c[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},gN=function(r,n){this.variableNames=["x"];var e=r.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=r,e!==1){var t=r.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&r[s]!==1?r[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Bt(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+t+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+r[0]+` - coord - 1));
        }
      `},vN=function(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=r.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=r;var t=ir("rc",e),i=t[e-1]+" + 1 < "+this.outputShape[e-1],o=t[e-2]+" + 1 < "+this.outputShape[e-2],a=Bt(e);function s(c){var l=r.map(function(d,u){return function(h,f){return n.indexOf(h)!==-1&&r[h]!==1?r[h]+" - "+f[h]+" - 1":""+f[h]}(u,c)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+r[0]+` - rc - 1),
            `+r[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+r[0]+` - (rc  + 1) - 1),
                `+r[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return s(c)}(t.slice())+`;
          if(`+i+`){
            result.g = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",s(c)}(t.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(c){return c[e-2]="("+c[e-2]+" + 1)",s(c)}(t.slice())+`;
            if(`+i+`) {
              result.a = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",c[e-2]="("+c[e-2]+" + 1)",s(c)}(t.slice())+`;
            }
          }
          setOutput(result);
        }
    `},FC=function(r,n,e,t,i,o,a){a===void 0&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Bt(i.length),c=Bt(o.length),l="";e===1?l="i":e===2&&(l="i, j");var d="getIndices("+l+")",u="";t===1?u="i":t===2&&(u="i, coords[1]");var h="getUpdates("+u+")",f=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+r+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+f+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},bN=function(r,n){this.variableNames=["x","segmentIds"];var e=r.windowSize,t=r.batchSize,i=r.inSize,o=r.numSegments,a=o*Math.ceil(i/e);this.outputShape=[t,a];var s=4*Math.floor(e/4),c=e%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var u="";i%e>0&&(u=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+u+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},_N=function(r,n,e){var t,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",t="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],c=0;c<n.length;c++)s.push(""+o[c]),c<r&&a.push(""+o[c]);t=a.join(),i=s.join()}var l=Bt(e);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+t+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},yN=function(){function r(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,t=Bt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return kv.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);e=`
        `+t+` sourceLoc;
        `+t+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+kv[s]+" = start["+s+"] + coords."+kv[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(t,i){e.startLoc==null&&(e.startLoc=t.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||t.gl.uniform1iv(e.startLoc,n)}},r}(),kv=["x","y","z","w","u","v"],xN=function(){function r(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=Bt(this.rank),t=ir("coords",this.rank),i=ir("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+t[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+t[this.rank-1]+`;
      if (++`+t[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+t[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(d,u){return"start["+u+"]"}).join()+");":n.map(function(d,u){return i[u]+" = "+t[u]+" + start["+u+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+c+`
        setOutput(result);
      }
    `}return r.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(t,i){e.startLoc==null&&(e.startLoc=t.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||t.gl.uniform1iv(e.startLoc,n)}},r}(),wN=function(r,n,e){this.variableNames=["x"],this.outputShape=e;var t=e.length,i=Bt(e.length),o=Bt(e.length),a="";if(t===1)a="coords * strides + begin";else{var s=0;a=e.map(function(c,l){return s++,e.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+r+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},CN=function(){function r(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return r.prototype.acquireTexture=function(n,e,t){var i,o=OC(e,t),a=NC(n,o,t);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===vr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===vr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===vr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===vr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===vr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},r.prototype.releaseTexture=function(n,e,t,i){if(this.freeTextures!=null){var o=NC(e,OC(t,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},r.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},r.prototype.getNumUsedTextures=function(){return this.numUsedTextures},r.prototype.getNumFreeTextures=function(){return this.numFreeTextures},r.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(t){n.gpgpu.deleteMatrixTexture(t)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},r}();function OC(r,n){if(r===br.UPLOAD)return vr.PACKED_2X2_FLOAT32;if(r===br.RENDER||r==null)return function(e){return W().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?vr.PACKED_2X2_FLOAT32:vr.UNPACKED_FLOAT32:e?vr.PACKED_2X2_FLOAT16:vr.UNPACKED_FLOAT16}(n);if(r===br.DOWNLOAD||r===br.PIXELS)return vr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+r)}function NC(r,n,e){return r[0]+"_"+r[1]+"_"+n+"_"+e}var DN=function(r,n){this.variableNames=["A"];for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[t]*n[t];this.outputShape=e,this.rank=e.length;var i=Bt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],d=0;d<a.length;d++)l.push("imod("+c[d]+", "+a[d]+")");return l.join()}(r);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},EN=function(r,n){this.variableNames=["A"];for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[n[t]];this.outputShape=e,this.rank=e.length;var i=Bt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),d=0;d<a.length;d++)l[a[d]]=c[d];return l.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},SN=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=r[n[t]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Bt(this.rank),o=fD("rc",this.rank),a=new Array(this.rank);for(t=0;t<n.length;t++)a[n[t]]=o[t];var s="vec2("+a.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+e[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+c+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+c+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},kb=1.7580993408473768,Ib=1.0507009873554805,it=function(r,n){this.variableNames=["A"],this.outputShape=r,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},si="if (isnan(x)) return x;",kN="return x;",PC="return abs(x);",ND=si+`
  return (x < 0.0) ? 0.0 : x;
`,PD=si+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,LD="return (x >= 0.0) ? x : (exp(x) - 1.0);",IN=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+kb+`;
  float scale = `+Ib+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,LC="return -x;",BC="return ceil(x);",VC="return floor(x);",zC="return exp(x);",UC="return exp(x) - 1.0;",AN=si+`
  return sin(x);
`,RN=si+`
  return cos(x);
`,MN=si+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,TN=si+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,FN=si+`
  return atan(x);
`,ON=si+"return log(x + sqrt(x * x + 1.0));",NN=si+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,PN=si+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Zh="return x;",LN="return x;",BD=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VD=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zD=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ld=function(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},BN=function(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r;var n=r.length,e=ir("rc",n),t=Bt(n),i=function(s,c){if(s===1)return"rc";for(var l="",d=0;d<s;d++)l+=c[d],d<s-1&&(l+=",");return l}(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+t+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},Jh={};function ef(r,n){if(n===void 0&&(n=!1),r==="linear")return n?LN:kN;if(r==="relu")return n?BD:ND;if(r==="elu")return n?zD:LD;if(r==="relu6")return n?VD:PD;if(r==="prelu")return n?vD:gD;throw new Error("Activation "+r+" has not been implemented for the WebGL backend.")}var VN=600,UD=function(r){function n(e){var t,i=r.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!W().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=Oi(W().getNumber("WEBGL_VERSION"));i.binaryCache=((t=W().getNumber("WEBGL_VERSION"))in Jh||(Jh[t]={}),Jh[t]),i.gpgpu=new OD(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new CN(i.gpgpu),i.numMBBeforeWarning=W().global.screen==null?1024:W().global.screen.height*W().global.screen.width*window.devicePixelRatio*VN/1024/1024,i.texData=new sD(i,N),i}return ii(n,r),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,t,i){if(W().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:t,dtype:i,values:e,usage:br.UPLOAD}),o},n.prototype.move=function(e,t,i,o){if(W().getBool("DEBUG")&&this.checkNumericalProblems(t),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:t,usage:br.UPLOAD})},n.prototype.readSync=function(e){var t=this.texData.get(e),i=t.values,o=t.dtype,a=t.complexTensors,s=t.slice,c=t.shape,l=t.isPacked;if(s!=null){var d=void 0;d=l?new ld(c,Zh):new it(c,Zh);var u=this.runWebGLProgram(d,[{dataId:e,shape:c,dtype:o}],o),h=this.readSync(u.dataId);return this.disposeData(u.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var f,p,m=this.activeTimers!=null;return m&&(f=ti()),o==="complex64"?p=eb(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=ti()-f),this.convertAndCacheOnCPU(e,p)},n.prototype.read=function(e){return we(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,w,C,A,R;return Ce(this,function(S){switch(S.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(D){return t.push(D)})];if(i=this.texData.get(e),o=i.values,a=i.shape,s=i.slice,c=i.dtype,l=i.complexTensors,d=i.isPacked,s!=null)return u=void 0,u=d?new ld(a,Zh):new it(a,Zh),h=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:c}],c),f=this.read(h.dataId),this.disposeData(h.dataId),[2,f];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!W().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&W().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,c!=="complex64"&&W().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),g=this.texData.get(m.dataId),p=(R=this.gpgpu).createBufferFromTexture.apply(R,[g.texture].concat(fd(a)))),this.pendingRead.set(e,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:S.sent(),S.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return _=S.sent(),y=_[0],b=_[1],v=eb(y,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(e):(w=ke(a),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w)),S.label=5;case 5:return m!=null&&this.disposeData(m.dataId),C=this.convertAndCacheOnCPU(e,v),A=this.pendingRead.get(e),this.pendingRead.delete(e),A.forEach(function(D){return D(C)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,C]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];if(!x1(i))throw W().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var t,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.isPacked,c=ke(o);if(W().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),d=this.texData.get(l.dataId),u=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[d.texture].concat(fd(o))).subarray(0,c);return this.disposeData(l.dataId),u}var h=W().getBool("WEBGL_PACK")&&s===!0,f=h?df(o):o,p=h?new WO(f):new jO(f),m=this.runWebGLProgram(p,[{shape:f,dtype:a,dataId:e}],"float32"),g=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,c);return this.disposeData(m.dataId),v},n.prototype.time=function(e){return we(this,void 0,void 0,function(){var t,i,o,a,s,c,l;return Ce(this,function(d){switch(d.label){case 0:return t=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),a=so(this.activeTimers.map(function(u){return u.query})).filter(function(u){return u!=null}),s=so(this.activeTimers.map(function(u){return u.name})).filter(function(u){return u!=null}),this.activeTimers=t,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=d.sent(),c.kernelMs=o1(l),c.getExtraProfileInfo=function(){return l.map(function(u,h){return{name:s[h],ms:u}}).map(function(u){return u.name+": "+u.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ti(),endMs:null}},n.prototype.endTimer=function(e){return W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ti(),e)},n.prototype.getQueryTime=function(e){return we(this,void 0,void 0,function(){var t;return Ce(this,function(i){return W().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;t!=null&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var t=this.texData.get(e),i=t.texture,o=t.dtype,a=t.texShape,s=t.usage,c=t.isPacked,l=t.slice,d=l&&l.origDataId||e,u=this.dataRefCount.get(d);u>1?this.dataRefCount.set(d,u-1):(this.dataRefCount.delete(d),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,c)));var h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return W().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=N.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,t){var i=this;return t===void 0&&(t=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<t})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,t){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:N.keep(e.clone()),imag:N.keep(t.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,t,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,i);if(ke(i)===0)return _n([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,a=bb(e.shape,t,i);if(o||!a){var s=W().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xN(i):new yN(i),c=s.getCustomSetupFunc(t);return this.compileAndRun(s,[e],null,c)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,i)},n.prototype.shallowSlice=function(e,t,i){var o=this.texData.get(e.dataId),a=this.makeOutput(i,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=e.dtype;var c=_b(t,e.strides);o.slice&&(c+=o.slice.flatOffset),s.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},n.prototype.stridedSlice=function(e,t,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,i,o);var a=Ff(t,i,o);if(a.some(function(c){return c===0}))return _n([],a);var s=new wN(t,o,a);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,t){var i=W().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vN(e.shape,t):new gN(e.shape,t);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,t){if(e[0].dtype==="complex64"){var i=e.map(function(f){return Or(f)}),o=e.map(function(f){return Mi(f)});return In(this.concat(i,t),this.concat(o,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(e.length===1)return e[0];if(e.length>W().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),t),c=this.concat(e.slice(a),t);return this.concat([s,c],t)}if(W().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var l=new IO(e.map(function(f){return f.shape}),t);return this.compileAndRun(l,e)}var d=Ha(e.map(function(f){return f.shape}),t),u=e.map(function(f){return f.as2D(-1,ke(f.shape.slice(t)))}),h=new kO(u.map(function(f){return f.shape}));return this.compileAndRun(h,u).reshape(d)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,LC,e.dtype);var t=new it(e.shape,LC);return this.compileAndRun(t,[e])},n.prototype.batchMatMul=function(e,t,i,o){var a=i?e.shape[2]:e.shape[1],s=o?t.shape[1]:t.shape[2],c=i?e.shape[1]:e.shape[2],l=e.shape[0];if((a===1||s===1)&&c>1e3){i&&(e=e.transpose([0,2,1])),o&&(t=t.transpose([0,2,1]));var d=s===1?e:e.as3D(l,c,1),u=s===1?2:1,h=s===1?t.as3D(l,1,c):t;return this.multiply(d,h).sum(u,!0)}var f=bn(e.dtype,t.dtype),p=new Dv(e.shape,[l,a,s],i,o);return this.compileAndRun(p,[e,t],f)},n.prototype.fusedBatchMatMul=function(e){var t=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=o?t.shape[2]:t.shape[1],u=a?i.shape[1]:i.shape[2],h=t.shape[0],f=bn(t.dtype,i.dtype),p=s!=null,m=l!=null,g=c?ef(c,!0):null,v=new Dv(t.shape,[h,d,u],o,a,p,g,m),_=[t,i];return s&&_.push(s),l&&_.push(l),this.compileAndRun(v,_,f)},n.prototype.multiply=function(e,t){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=new EC(wO,e.shape,t.shape),s=new EC(CO,e.shape,t.shape),c=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(t,o.complexTensors.real),this.makeComplexComponentTensorInfo(t,o.complexTensors.imag)],l=this.compileAndRun(a,c),d=this.compileAndRun(s,c),u=this.complex(l,d);return l.dispose(),d.dispose(),u}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,SC,e.dtype);var h=new Qt(SC,e.shape,t.shape);return this.compileAndRun(h,[e,t],e.dtype)},n.prototype.batchNormalization=function(e,t,i,o,a,s){var c=[e,t,i],l=null;s!=null&&(l=s.shape,c.push(s));var d=null;if(a!=null&&(d=a.shape,c.push(a)),W().getBool("WEBGL_PACK_NORMALIZATION")){var u=new xO(e.shape,t.shape,i.shape,l,d,o);return this.compileAndRun(u,c)}var h=new yO(e.shape,t.shape,i.shape,l,d,o);return this.compileAndRun(h,c)},n.prototype.localResponseNormalization4D=function(e,t,i,o,a){var s=W().getBool("WEBGL_PACK_NORMALIZATION")?new tN(e.shape,t,i,o,a):new JO(e.shape,t,i,o,a);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,t,i,o,a,s,c){var l=new eN(t.shape,o,a,s,c);return this.compileAndRun(l,[t,i,e])},n.prototype.tile=function(e,t){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(a){return gd(a)});return uD(et(e.shape,e.dtype,i),t)}var o=new DN(e.shape,t);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,t,i){var o=W().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cN(e.shape,t,i):new sN(e.shape,t,i);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var i=W().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SN(e.shape,t):new EN(e.shape,t);return this.compileAndRun(i,[e])},n.prototype.gather=function(e,t,i){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,i);var o=new KO(e.shape,t.size,i);return this.compileAndRun(o,[e,t])},n.prototype.batchToSpaceND=function(e,t,i){k(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=t.reduce(function(u,h){return u*h}),a=xf(e.shape,t,o),s=wf(a.length,t.length),c=Cf(e.shape,t,o),l=eD(i,t.length),d=tD(c,i,t.length);return e.reshape(a).transpose(s).reshape(c).slice(l,d)},n.prototype.spaceToBatchND=function(e,t,i){k(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=t.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,i);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var c=e.pad(a),l=xf(c.shape,t,o,!1),d=wf(l.length,t.length,!1),u=Cf(c.shape,t,o,!1);return c.reshape(l).transpose(d).reshape(u)},n.prototype.reduce=function(e,t,i){var o=e.shape[0],a=e.shape[1],s=uf(a),c=new lN({windowSize:s,inSize:a,batchSize:o},t),l=this.compileAndRun(c,[e],i);return l.shape[1]===1?l:this.reduce(l,t,i)},n.prototype.argReduce=function(e,t,i){i===void 0&&(i=null);var o=e.shape[0],a=e.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=uf(a),c=new uO({windowSize:s,inSize:a,batchSize:o},t,i==null),l=[e];i!=null&&l.push(i);var d=this.compileAndRun(c,l,"int32");return d.shape[1]===1?d:this.argReduce(e,t,d)},n.prototype.argReducePacked=function(e,t,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,a=uf(o[o.length-1]),s=new vO(o,a,t,i==null),c=i==null?[e]:[e,i],l=this.compileAndRun(s,c,"int32");return l.rank===e.rank?this.argReducePacked(e,t,l):l},n.prototype.sum=function(e,t){rr("sum",t,e.rank);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a),c=_v(e.dtype);return this.reduce(s,"sum",c).reshape(o)},n.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a),c=_v(e.dtype);return this.reduce(s,"prod",c).reshape(o)},n.prototype.unsortedSegmentSum=function(e,t,i){var o=0,a=oi([o],e.rank),s=e;a!=null&&(s=e.transpose(a),o=ai(1,e.rank)[0]);var c=function(f,p,m){for(var g=[],v=f.length,_=0;_<v;_++)_!==p?g.push(f[_]):g.push(m);return g}(s.shape,o,i),l=ke([s.shape[o]]),d=s.as2D(-1,l),u=_v(e.dtype),h=this.segOpCompute(d,"unsortedSegmentSum",t,u,i).reshape(c);return a!=null&&(h=h.transpose(Rf(a))),h},n.prototype.segOpCompute=function(e,t,i,o,a){var s=e.shape[0],c=e.shape[1],l=function(h,f){var p,m=!1;for(h<=vb?(p=h,m=!0):p=vf(h,Math.floor(Math.sqrt(h)));!m;)p>f||p===h?m=!0:p=vf(h,p+1);return p}(c,a),d=new bN({windowSize:l,inSize:c,batchSize:s,numSegments:a},t),u=this.compileAndRun(d,[e,i],o);return u.shape[1]===a?u:(i=yf(0,a).tile([c/l]),this.segOpCompute(u,t,i,o,a))},n.prototype.argMinMaxReduce=function(e,t,i){var o=[t];if(rr("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!W().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=An(e.shape,o),s=a[0],c=ke(a[1]),l=e.as2D(-1,c);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},n.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},n.prototype.cumsum=function(e,t,i,o){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new LO(e.shape,i,o);return this.compileAndRun(a,[e])},n.prototype.equal=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(equal(a, b));
`,"bool");var i=new Qt("return float(a == b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.notEqual=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Qt("return float(a != b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Qt("return float(a < b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.lessEqual=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Qt("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Qt("return float(a > b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.greaterEqual=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Qt("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.logicalNot=function(e){var t=new it(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},n.prototype.logicalAnd=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Qt("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.logicalOr=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Qt("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t],"bool")},n.prototype.select=function(e,t,i){var o=new _N(e.rank,t.shape,t.rank);return this.compileAndRun(o,[e,t,i],bn(t.dtype,i.dtype))},n.prototype.where=function(e){bf("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Eb(e.shape,t)},n.prototype.topk=function(e,t,i){return hD(e.dataSync(),e.shape,e.dtype,t)},n.prototype.min=function(e,t){rr("min",t,e.rank);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Qt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.mod=function(e,t){var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Qt(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);rr("max",t,e.rank);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Qt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.all=function(e,t){rr("all",t,e.rank);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,t){rr("any",t,e.rank);var i=An(e.shape,t),o=i[0],a=ke(i[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.realDivide=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Qt(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,t.shape);return this.compileAndRun(i,[e,t],"float32")},n.prototype.floorDiv=function(e,t){if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Qt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,t.shape);return this.compileAndRun(i,[e,t],"int32")},n.prototype.add=function(e,t){if(e.dtype==="complex64"&&t.dtype==="complex64")return this.complexSeparableBinaryOp(e,t,wv);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var i=bn(e.dtype,t.dtype);if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,wv,i);var o=new Qt(wv,e.shape,t.shape);return this.compileAndRun(o,[e,t],i)},n.prototype.packedUnaryOp=function(e,t,i){var o=new ld(e.shape,t);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,t,i,o,a){a===void 0&&(a=!1);var s=new io(i,e.shape,t.shape,a);return this.compileAndRun(s,[e,t],o)},n.prototype.complexSeparableBinaryOp=function(e,t,i){var o=this,a=this.texData.get(e.dataId),s=this.texData.get(t.dataId),c=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(h){var f=h[0],p=h[1],m=o.makeComplexComponentTensorInfo(e,f),g=o.makeComplexComponentTensorInfo(t,p),v=new Qt(i,e.shape,t.shape);return o.compileAndRun(v,[m,g],bn(f.dtype,p.dtype))}),l=c[0],d=c[1],u=this.complex(l,d);return l.dispose(),d.dispose(),u},n.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>W().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),i=this.addN(e.slice(0,t)),o=this.addN(e.slice(t));return this.addN([i,o])}var a=e.map(function(l){return l.dtype}).reduce(function(l,d){return bn(l,d)}),s=e.map(function(l){return l.shape}),c=W().getBool("WEBGL_PACK")?new dO(e[0].shape,s):new lO(e[0].shape,s);return this.compileAndRun(c,e,a)},n.prototype.subtract=function(e,t){if(e.dtype==="complex64"&&t.dtype==="complex64")return this.complexSeparableBinaryOp(e,t,Cv);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var i=bn(e.dtype,t.dtype);if(W().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Cv,e.dtype);var o=new Qt(Cv,e.shape,t.shape);return this.compileAndRun(o,[e,t],i)},n.prototype.pow=function(e,t){var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Qt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,t.shape),o=bn(e.dtype,t.dtype);return this.compileAndRun(i,[e,t],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,BC,e.dtype);var t=new it(e.shape,BC);return this.compileAndRun(t,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,VC,e.dtype);var t=new it(e.shape,VC);return this.compileAndRun(t,[e])},n.prototype.sign=function(e){var t=new it(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(t,[e])},n.prototype.isNaN=function(e){var t=new it(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.isInf=function(e){var t=new it(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.isFinite=function(e){var t=new it(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},n.prototype.round=function(e){var t=new it(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(t,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zC,e.dtype);var t=new it(e.shape,zC);return this.compileAndRun(t,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,UC,e.dtype);var t=new it(e.shape,UC);return this.compileAndRun(t,[e])},n.prototype.softmax=function(e,t){var i=cn([t],e.shape),o=this.max(e,i),a=Yn(o.shape,i),s=this.subtract(e,o.reshape(a)),c=this.exp(s),l=this.sum(c,i).reshape(a);return this.realDivide(c,l)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var t=new it(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(t,[e])},n.prototype.log1p=function(e){var t=new it(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},n.prototype.sqrt=function(e){var t=new it(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new it(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},n.prototype.reciprocal=function(e){var t=new it(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},n.prototype.relu=function(e){var t;return t=W().getBool("WEBGL_PACK")?new ld(e.shape,BD):new it(e.shape,ND),this.compileAndRun(t,[e])},n.prototype.relu6=function(e){var t;return t=W().getBool("WEBGL_PACK")?new ld(e.shape,VD):new it(e.shape,PD),this.compileAndRun(t,[e])},n.prototype.prelu=function(e,t){var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(vD,e.shape,t.shape):new Qt(gD,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.elu=function(e){if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zD,e.dtype);var t=new it(e.shape,LD);return this.compileAndRun(t,[e])},n.prototype.eluDer=function(e,t){var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,t.shape):new Qt("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.selu=function(e){var t=new it(e.shape,IN);return this.compileAndRun(t,[e])},n.prototype.int=function(e){var t=new it(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},n.prototype.clip=function(e,t,i){var o,a=(o=W().getBool("WEBGL_PACK_CLIP")?new EO(e.shape):new DO(e.shape)).getCustomSetupFunc(t,i);return this.compileAndRun(o,[e],null,a)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(W().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,PC,e.dtype);var t=new it(e.shape,PC);return this.compileAndRun(t,[e])},n.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),i=new SO(e.shape),o=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var t=new it(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},n.prototype.softplus=function(e){var t=new it(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(t,[e])},n.prototype.sin=function(e){var t=new it(e.shape,AN);return this.compileAndRun(t,[e])},n.prototype.cos=function(e){var t=new it(e.shape,RN);return this.compileAndRun(t,[e])},n.prototype.tan=function(e){var t=new it(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},n.prototype.asin=function(e){var t=new it(e.shape,MN);return this.compileAndRun(t,[e])},n.prototype.acos=function(e){var t=new it(e.shape,TN);return this.compileAndRun(t,[e])},n.prototype.atan=function(e){var t=new it(e.shape,FN);return this.compileAndRun(t,[e])},n.prototype.atan2=function(e,t){var i=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,t.shape):new Qt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,t.shape);return this.compileAndRun(i,[e,t])},n.prototype.sinh=function(e){var t=new it(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(t,[e])},n.prototype.cosh=function(e){var t=new it(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(t,[e])},n.prototype.tanh=function(e){var t=new it(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(t,[e])},n.prototype.asinh=function(e){var t=new it(e.shape,ON);return this.compileAndRun(t,[e])},n.prototype.acosh=function(e){var t=new it(e.shape,NN);return this.compileAndRun(t,[e])},n.prototype.atanh=function(e){var t=new it(e.shape,PN);return this.compileAndRun(t,[e])},n.prototype.erf=function(e){var t=new it(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(t,[e])},n.prototype.step=function(e,t){var i=new it(e.shape,function(o){return o===void 0&&(o=0),si+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(t));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,t,i,o,a,s){var c=e.shape,l=this.texData.get(e.dataId),d=i.inChannels,u=c[0]*c[1]*c[2],h=i.outChannels,f=i.dataFormat==="channelsLast",p=(u===1||h===1)&&d>1e3,m=c[2]%2!=0&&!!l.isPacked;if(p||!W().getBool("WEBGL_LAZILY_UNPACK")||!W().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=f?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],v=this.reshape(e,[1,g,i.inChannels]),_=this.reshape(t,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:_,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var y=f?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),b={dataId:e.dataId,shape:[1,y,i.inChannels],dtype:e.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,k(hd(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var C=this.reshape(t,[1,i.inChannels,i.outChannels]),A=this.fusedBatchMatMul({a:b,b:C,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),R=this.texData.get(A.dataId);return k(R.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=w,R.shape=i.outShape,N.makeTensorFromDataId(A.dataId,i.outShape,A.dtype)},n.prototype.conv2dWithIm2Row=function(e,t,i,o,a,s){var c=i.filterWidth,l=i.filterHeight,d=i.inChannels,u=i.outWidth,h=i.outHeight,f=i.dataFormat==="channelsLast",p=c*l*d,m=h*u,g=[p,m],v=e.squeeze([0]),_=t.reshape([1,p,-1]),y=new ZO(g,v.shape,i),b=this.compileAndRun(y,[v]).reshape([1,g[0],g[1]]),w=o!=null,C=s!=null,A=a?ef(a,!0):null,R=new Dv(b.shape,[1,m,i.outChannels],!0,!1,w,A,C),S=[b,_];o&&S.push(o),C&&S.push(s);var D=this.compileAndRun(R,S);return f?D.reshape([1,h,u,i.outChannels]):D.reshape([1,i.outChannels,h,u])},n.prototype.fusedConv2d=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(t,i,o,a,s,c);if(W().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,i,o,a,s,c);var l=a!=null,d=c!=null,u=s?ef(s,!1):null,h=new kC(o,l,u,d),f=[t,i];return a&&f.push(a),c&&f.push(c),this.compileAndRun(h,f)},n.prototype.conv2d=function(e,t,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,t,i);if(W().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,t,i);var o=new kC(i);return this.compileAndRun(o,[e,t])},n.prototype.conv2dDerInput=function(e,t,i){var o=new RO(i);return this.compileAndRun(o,[e,t])},n.prototype.conv2dDerFilter=function(e,t,i){var o=new AO(i);return this.compileAndRun(o,[e,t])},n.prototype.fusedDepthwiseConv2D=function(e){var t,i=e.input,o=e.filter,a=e.convInfo,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=W().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,u=c?ef(c,d):null,h=[i,o],f=s!=null,p=l!=null;return f&&h.push(s),p&&h.push(l),d?(t=new AC(a,f,u,p),this.compileAndRun(t,h)):(t=new IC(a,f,u,p),this.compileAndRun(t,h))},n.prototype.depthwiseConv2D=function(e,t,i){var o;return W().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new AC(i),this.compileAndRun(o,[e,t])):(o=new IC(i),this.compileAndRun(o,[e,t]))},n.prototype.depthwiseConv2DDerInput=function(e,t,i){var o=new OO(i);return this.compileAndRun(o,[e,t])},n.prototype.depthwiseConv2DDerFilter=function(e,t,i){var o=new FO(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3d=function(e,t,i){var o=new NO(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3dDerInput=function(e,t,i){var o=new TO(i);return this.compileAndRun(o,[e,t])},n.prototype.conv3dDerFilter=function(e,t,i){var o=new MO(i);return this.compileAndRun(o,[e,t])},n.prototype.maxPool=function(e,t){var i=new Ev(t,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,t){var i=new Ev(t,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,t,i,o){var a=new Ev(o,"max",!0),s=this.compileAndRun(a,[t]),c=new nN(o),l=this.compileAndRun(c,[e,s],t.dtype);return s.dispose(),l},n.prototype.avgPoolBackprop=function(e,t,i){var o=new bO(i);return this.compileAndRun(o,[e],t.dtype)},n.prototype.cast=function(e,t){return xb(e,t,this)},n.prototype.unstack=function(e,t){for(var i=e.shape[t],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(o[a++]=e.shape[s]);var c=new Array(e.rank).fill(0),l=e.shape.slice();l[t]=1;var d=new Array(i);for(s=0;s<d.length;s++)c[t]=s,d[s]=this.slice(e,c,l).reshape(o);return d},n.prototype.avgPool3d=function(e,t){var i=new Sv(t,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,t,i){var o=new _O(i);return this.compileAndRun(o,[e],t.dtype)},n.prototype.maxPool3d=function(e,t){var i=new Sv(t,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,t,i,o){var a=new Sv(o,"max",!0),s=this.compileAndRun(a,[t]),c=new rN(o),l=this.compileAndRun(c,[e,s],t.dtype);return s.dispose(),l},n.prototype.reshape=function(e,t){var i=this.texData.get(e.dataId);if(i.isPacked&&!hd(e.shape,t)&&(i.texture===null||!hd(i.shape,t))){var o=this.packedReshape(e,t);return N.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Ef(e,t)},n.prototype.resizeBilinear=function(e,t,i,o){var a=W().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fN(e.shape,t,i,o):new hN(e.shape,t,i,o);return this.compileAndRun(a,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,t,i){var o=new uN(e,t,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,t,i,o){var a=new mN(e.shape,t,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,t,i){var o=new pN(e,t,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,t,i,o){var a=t?e:Xn(e),s=a.shape[0],c=a.shape[1],l=new iN(s,c,i),d=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",d)},n.prototype.oneHot=function(e,t,i,o){var a=new oN(e.size,t,i,o);return this.compileAndRun(a,[e])},n.prototype.diag=function(e){var t=new UO(e.size);return this.compileAndRun(t,[e])},n.prototype.nonMaxSuppression=function(e,t,i,o,a){return bf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Cb(e.dataSync(),t.dataSync(),i,o,a)},n.prototype.cropAndResize=function(e,t,i,o,a,s){var c=new PO(e.shape,t.shape,o,a,s);return this.compileAndRun(c,[e,t,i],"float32")},n.prototype.depthToSpace=function(e,t,i){k(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var o=e.shape[0],a=i==="NHWC"?e.shape[1]:e.shape[2],s=i==="NHWC"?e.shape[2]:e.shape[3],c=i==="NHWC"?e.shape[3]:e.shape[1],l=a*t,d=s*t,u=c/(t*t),h=new zO(i==="NHWC"?[o,l,d,u]:[o,u,l,d],t,i);return this.compileAndRun(h,[e])},n.prototype.split=function(e,t,i){return dD(e,t,i)},n.prototype.scatterND=function(e,t,i){var o=xd(0,e,i),a=o.sliceRank,s=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,u=[d/c,c],h=e.reshape([s,a]),f=t.reshape([s,c]);if(d===0)return Ef(_n([]),i);var p=se(0),m=new FC(s,a,h.rank,f.rank,l,u);return this.compileAndRun(m,[f,h,p]).reshape(i)},n.prototype.sparseToDense=function(e,t,i,o){var a=xd(0,e,i),s=a.sliceRank,c=a.numUpdates,l=a.strides,d=a.outputSize,u=new FC(c,s,e.rank,t.rank,l,[d,1],!1);return this.compileAndRun(u,[t,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,t){var i=this.texData.get(e.dataId),o=new MC(qO,e.shape,t),a=new MC(YO,e.shape,t),s=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],c=this.compileAndRun(o,s),l=this.compileAndRun(a,s),d=this.complex(c,l).as2D(e.shape[0],e.shape[1]);return c.dispose(),l.dispose(),d},n.prototype.gatherND=function(e,t){var i=t.shape,o=i[i.length-1],a=gb(e,t),s=a[0],c=a[1],l=a[2],d=a[3],u=t.reshape([c,o]),h=e.reshape([e.size/l,l]),f=new XO(o,d,[c,l]);return this.compileAndRun(f,[h,u]).reshape(s)},n.prototype.fill=function(e,t,i){if((i=i||Ec(t))==="string"){var o=md(i,ke(e));return o.fill(t),N.makeTensor(o,e,i,this)}var a=new $O(e,t),s=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],i,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,t,i){return wb(e,t,i)},n.prototype.makeTensorInfo=function(e,t){var i=this.write(null,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}},n.prototype.makeOutput=function(e,t){var i=this.makeTensorInfo(e,t).dataId;return N.makeTensorFromDataId(i,e,t,this)},n.prototype.unpackTensor=function(e){var t=new BN(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},n.prototype.packTensor=function(e){var t=new aN(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,t){var i=[_d(e.shape)].concat(yd(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},a=[_d(t)].concat(yd(t)),s=new dN(a,i),c=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}},n.prototype.decode=function(e){var t,i=this.texData.get(e),o=i.isPacked,a=i.shape,s=i.dtype,c=df(a);return t=o?new VO(c):new BO(c),{dtype:s,shape:a,dataId:this.runWebGLProgram(t,[{shape:c,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,t,i,o,a){var s=this;a===void 0&&(a=!1);var c=this.makeTensorInfo(e.outputShape,i),l=this.texData.get(c.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===bd.DENSE){var d=fd(e.outputShape);l.texShape=d.map(function(y){return 2*y})}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ke(c.shape)===0)return l.values=Cc(c.dtype,0),c;var u=[],h=t.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(y.dataId);if(b.texture==null){if(!e.packedInputs&&ke(y.shape)<=W().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}else if(!!b.isPacked!=!!e.packedInputs)y=b.isPacked?s.unpackTensor(y):s.packTensor(y),u.push(y),b=s.texData.get(y.dataId);else if(b.isPacked&&!hd(b.shape,y.shape)){var w=y,C=y.shape;y.shape=b.shape,y=s.packedReshape(y,C),u.push(y),b=s.texData.get(y.dataId),w.shape=C}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(c.dataId);var f,p={shape:c.shape,texData:l,isUniform:!1},m=function(y,b,w){var C="";b.concat(w).forEach(function(S){var D=S.texData!=null&&S.texData.slice!=null&&S.texData.slice.flatOffset>0,F=S.isUniform?"uniform":S.texData.texShape;C+=S.shape+"_"+F+"_"+D});var A=y.userCode,R=y.constructor.name;return R+="_"+C+"_"+A}(e,h,p),g=this.getAndSaveBinary(m,function(){return function(y,b,w,C){var A=b.userCode,R=w.map(function(H,$){var Z={logicalShape:H.shape,texShape:H.isUniform?null:H.texData.texShape,isUniform:H.isUniform,isPacked:!H.isUniform&&H.texData.isPacked,flatOffset:null};return H.texData!=null&&H.texData.slice!=null&&H.texData.slice.flatOffset>0&&(Z.flatOffset=H.texData.slice.flatOffset),{name:b.variableNames[$],shapeInfo:Z}}),S=R.map(function(H){return H.shapeInfo}),D={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},F=hO(R,D,A,b.packedInputs),T=y.createProgram(F),V=null,z=y.getUniformLocation(T,"NAN",!1);W().getNumber("WEBGL_VERSION")===1&&(V=y.getUniformLocation(T,"INFINITY",!1));for(var U={},Y=0;Y<b.variableNames.length;Y++){var q=b.variableNames[Y];U[q]=y.getUniformLocation(T,q,!1),U["offset"+q]=y.getUniformLocation(T,"offset"+q,!1)}return{program:b,source:F,webGLProgram:T,uniformLocations:U,inShapeInfos:S,outShapeInfo:D,infLoc:V,nanLoc:z}}(s.gpgpu,e,h,p)}),v=this.activeTimers!=null;if(v&&(f=this.startTimer()),function(y,b,w,C,A){TC(b.inShapeInfos,w),TC([b.outShapeInfo],[C]);var R=C.texData.texture,S=C.texData.texShape;C.texData.isPacked?y.setOutputPackedMatrixTexture(R,S[0],S[1]):y.setOutputMatrixTexture(R,S[0],S[1]),y.setProgram(b.webGLProgram),W().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&y.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&y.gl.uniform1f(b.nanLoc,NaN),w.forEach(function(D,F){var T=b.program.variableNames[F],V=b.uniformLocations[T],z=b.uniformLocations["offset"+T];if(V!=null)if(D.isUniform)if(ke(D.shape)<2)y.gl.uniform1f(V,D.uniformValues[0]);else{var U=D.uniformValues;U instanceof Float32Array||(U=new Float32Array(U)),y.gl.uniform1fv(V,U)}else D.texData.slice!=null&&z!=null&&y.gl.uniform1i(z,D.texData.slice.flatOffset),y.setInputMatrixTexture(D.texData.texture,V,F)}),A?.(y,b.webGLProgram),y.executeProgram()}(this.gpgpu,g,h,p,o),u.forEach(function(y){return s.disposeData(y.dataId)}),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!W().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var _=this.unpackTensor(c);return this.disposeData(c.dataId),_}return c},n.prototype.compileAndRun=function(e,t,i,o,a){a===void 0&&(a=!1),i=i||t[0].dtype;var s=this.runWebGLProgram(e,t,i,o,a);return N.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(W().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Q(function(){if(!W().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=W().getBool("DEBUG");W().set("DEBUG",!1);var i=e.abs(se(1e-8)).dataSync()[0];if(W().set("DEBUG",t),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var t,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.values,c=i.texture,l=i.usage,d=i.isPacked;if(c==null){var u,h=this.activeTimers!=null;h&&(u=ti());var f=i.texShape;if(f==null&&(f=B1(o,d),i.texShape=f),s!=null){var p=df(o),m=void 0,g=f[1],v=f[0],_=s instanceof Uint8Array;d?(g=(t=Ed(f[0],f[1]))[0],v=t[1],m=new GO(p,[v,g],_)):m=new HO(p,[v,g],_);var y=this.makeTensorInfo([v,g],a);this.texData.get(y.dataId).usage=_?br.PIXELS:br.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),g,v,s);var b=this.runWebGLProgram(m,[y],a,null,!0),w=this.texData.get(b.dataId);i.texture=w.texture,i.texShape=w.texShape,i.isPacked=w.isPacked,i.usage=w.usage,this.disposeData(y.dataId),this.texData.delete(b.dataId),i.values=null,h&&(this.uploadWaitMs+=ti()-u)}else{var C=this.acquireTexture(f,l,a,d);i.texture=C}}},n.prototype.convertAndCacheOnCPU=function(e,t){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),t!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var c=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<c.length;++l)c[l]=Math.round(a[l]);return c}throw new Error("Unknown dtype "+s)}(t,o)),i.values},n.prototype.acquireTexture=function(e,t,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,o)},n.prototype.computeBytes=function(e,t){return e[0]*e[1]*sb(t)},n}(cD);_1()&&N.registerBackend("webgl",function(){return new UD},2);var zN=O({square_:function(r){var n=E(r,"x","square"),e=[n];return N.runKernelFunc(function(t,i){return i([n]),t.square(n)},{x:n},null,"Square",{},e,[])}}),Dd="SquaredDifference",jD=O({squaredDifference_:function(r,n){var e,t=E(r,"a","squaredDifference"),i=E(n,"b","squaredDifference");e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape);var o={a:t,b:i},a=[t,i];return N.runKernelFunc(function(s,c){var l=s.squaredDifference(t,i);return c([t,i]),l},o,function(s,c){var l=c[0],d=c[1],u=se(2);return{a:function(){return s.mul(l.sub(d).mul(u))},b:function(){return s.mul(d.sub(l).mul(u))}}},Dd,{},a,[])}}),UN=O({abs_:function(r){var n=E(r,"x","abs");return n.dtype==="complex64"?N.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):N.runKernelFunc(function(e,t){var i=e.abs(n);return t([n]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),jN=O({acos_:function(r){var n=E(r,"x","acos");return N.runKernelFunc(function(e,t){var i=e.acos(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(se(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),WN=O({acosh_:function(r){var n=E(r,"x","acosh");return N.runKernelFunc(function(e,t){var i=e.acosh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),HN=O({asin_:function(r){var n=E(r,"x","asin");return N.runKernelFunc(function(e,t){var i=e.asin(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(se(1).sub(i.toFloat().square()).sqrt())}}})}}),GN=O({asinh_:function(r){var n=E(r,"x","asinh");return N.runKernelFunc(function(e,t){var i=e.asinh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.divStrict(se(1).add(i.toFloat().square()).sqrt())}}})}}),qN=O({atan_:function(r){var n=E(r,"x","atan");return N.runKernelFunc(function(e,t){var i=e.atan(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),YN=O({atanh_:function(r){var n=E(r,"x","atanh");return N.runKernelFunc(function(e,t){var i=e.atanh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(se(1).sub(i.toFloat().square()))}}})}}),$N=O({ceil_:function(r){var n=E(r,"x","ceil");return N.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),kd=O({clipByValue_:function(r,n,e){var t=E(r,"x","clipByValue");k(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."});var i=[t],o={min:n,max:e};return N.runKernelFunc(function(a,s){var c=a.clip(t,n,e);return s([t]),c},{x:t},function(a,s){var c=s[0];return{x:function(){return a.where(c.greaterEqual(n).logicalAnd(c.lessEqual(e)),ut(a))}}},"ClipByValue",o,i)}}),KN=O({cos_:function(r){var n=E(r,"x","cos"),e=[n];return N.runKernelFunc(function(t,i){var o=t.cos(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(t)}}},"Cos",{},e)}}),XN=O({cosh_:function(r){var n=E(r,"x","cosh");return N.runKernelFunc(function(e,t){var i=e.cosh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),QN=O({erf_:function(r){var n=E(r,"x","erf");return k(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),N.runKernelFunc(function(e,t){var i=e.erf(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Pf=O({exp_:function(r){var n=E(r,"x","exp");return N.runKernelFunc(function(e,t){var i=e.exp(n);return t([i]),i},{x:n},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),ZN=O({expm1_:function(r){var n=E(r,"x","expm1");return N.runKernelFunc(function(e,t){var i=e.expm1(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.exp())}}})}}),JN=O({floor_:function(r){var n=E(r,"x","floor");return N.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),eP=O({log_:function(r){var n=E(r,"x","log"),e=[n];return N.runKernelFunc(function(t,i){var o=t.log(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return t.div(o.toFloat())}}},"Log",{},e)}}),tP=O({log1p_:function(r){var n=E(r,"x","log1p");return N.runKernelFunc(function(e,t){var i=e.log1p(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.add(1))}}})}}),nP=O({logSigmoid_:function(r){var n=E(r,"x","logSigmoid");return N.runKernelFunc(function(e,t){var i=e.softplus(n.neg()).neg();return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),Id=O({neg_:function(r){var n=E(r,"x","neg"),e=[n];return N.runKernelFunc(function(t){return t.neg(n)},{x:n},function(t){return{x:function(){return t.neg()}}},"Neg",{},e)}}),rP=O({reciprocal_:function(r){var n=E(r,"x","reciprocal");return N.runKernelFunc(function(e,t){var i=e.reciprocal(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.square().neg())}}})}}),iP=O({round_:function(r){var n=E(r,"x","round");return N.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),WD=O({rsqrt_:function(r){var n=E(r,"x","rsqrt"),e=[n];return N.runKernelFunc(function(t,i){var o=t.rsqrt(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return t.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),Ab=O({sigmoid_:function(r){var n=E(r,"x","sigmoid");return N.runKernelFunc(function(e,t){var i=e.sigmoid(n);return t([i]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mul(i.mul(se(1).sub(i)))}}},"Sigmoid")}}),oP=O({sign_:function(r){var n=E(r,"x","sign");return N.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),aP=O({isNaN_:function(r){var n=E(r,"x","isNaN");return N.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),sP=O({isInf_:function(r){var n=E(r,"x","isInf");return N.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),cP=O({isFinite_:function(r){var n=E(r,"x","isFinite");return N.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return ut(e)}}})}}),lP=O({sin_:function(r){var n=E(r,"x","sin"),e=[n];return N.runKernelFunc(function(t,i){var o=t.sin(n);return i([n]),o},{x:n},function(t,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(t)}}},"Sin",{},e)}}),dP=O({sinh_:function(r){var n=E(r,"x","sinh");return N.runKernelFunc(function(e,t){var i=e.sinh(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),uP=O({softplus_:function(r){var n=E(r,"x","softplus");return N.runKernelFunc(function(e,t){var i=e.softplus(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),hP=O({sqrt_:function(r){var n=E(r,"x","sqrt");return N.runKernelFunc(function(e,t){var i=e.sqrt(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),fP=O({step_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","step");return N.runKernelFunc(function(t){return t.step(e,n)},{$x:e},function(t){return{$x:function(){return ut(t)}}})}}),pP=O({tan_:function(r){var n=E(r,"x","tan");return N.runKernelFunc(function(e,t){var i=e.tan(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return e.div(i.cos().square())}}})}}),mP=O({tanh_:function(r){var n=E(r,"x","tanh");return N.runKernelFunc(function(e,t){var i=e.tanh(n);return t([i]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return se(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function HD(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),k(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),k(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),k(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),a!=null&&k(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&k(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Ad(c,l,d,s,a,o)}function GD(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),k(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),k(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),k(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),a!=null&&k(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&k(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Ad(c,l,d,s,a,o)}function qD(r,n,e,t,i,o){var a,s,c=E(r,"x","batchNorm"),l=E(n,"mean","batchNorm"),d=E(e,"variance","batchNorm");return i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),k(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),k(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),k(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),a!=null&&k(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&k(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Ad(c,l,d,s,a,o)}function Ad(r,n,e,t,i,o){o==null&&(o=.001);var a,s,c,l=E(r,"x","batchNorm"),d=E(n,"mean","batchNorm"),u=E(e,"variance","batchNorm");i!=null&&(a=E(i,"scale","batchNorm")),t!=null&&(s=E(t,"offset","batchNorm")),k(d.rank===u.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),k(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),k(a==null||d.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,d,u,a];return N.runKernelFunc(function(f,p){var m=f.batchNormalization(c,tf(d),tf(u),o,tf(a),tf(s));return p([l,d,u,a]),m},{x:l,mean:d,variance:u,scale:a,offset:s},function(f,p){var m=p,g=m[0],v=m[1],_=m[2],y=m[3],b=y??se(1),w=sn(v.shape,c.shape),C=[];if(v.rank===1){for(var A=0;A<c.shape.length-1;++A)C.push(c.shape[A]);C.push(1)}var R=g.sub(v),S=f.mul(b),D=WD(_.add(se(o))),F=D.mul(D).mul(D).mul(se(-.5));return{x:function(){return v.rank===1?f.mul(ja(D.as4D(1,1,1,v.shape[0]),C)).mul(b).reshape(g.shape):f.mul(D).mul(b).reshape(g.shape)},mean:function(){var T=D.mul(se(-1)).mul(S);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},variance:function(){var T=F.mul(R).mul(S);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},scale:function(){var T=R.mul(D),V=f.mul(T);return v.rank===1&&(V=V.sum(w)),V.reshape(v.shape)},offset:function(){var T=f;return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:o},h).reshape(l.shape)}function tf(r){return r==null?null:r.rank===0?r.as1D():r.rank===1?r:r.rank===2?r.as4D(1,1,r.shape[0],r.shape[1]):r.rank===3?r.as4D(1,r.shape[0],r.shape[1],r.shape[2]):r}function Lf(){G1("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var gP=O({batchNormalization2d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Lf(),HD(r,n,e,o,i,t)}}),vP=O({batchNormalization3d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Lf(),GD(r,n,e,o,i,t)}}),bP=O({batchNormalization4d_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Lf(),qD(r,n,e,o,i,t)}}),_P=O({batchNormalization_:function(r,n,e,t,i,o){return t===void 0&&(t=.001),Lf(),Ad(r,n,e,o,i,t)}}),Rb=O({batchNorm_:Ad}),yP=O({batchNorm2d_:HD}),xP=O({batchNorm3d_:GD}),wP=O({batchNorm4d_:qD}),Bf=O({logicalAnd_:function(r,n){var e=E(r,"a","logicalAnd","bool"),t=E(n,"b","logicalAnd","bool");return ct(e.shape,t.shape),N.runKernelFunc(function(i){return i.logicalAnd(e,t)},{a:e,b:t},null,"LogicalAnd")}}),CP=O({logicalNot_:function(r){var n=E(r,"x","logicalNot","bool");return N.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),YD=O({logicalOr_:function(r,n){var e=E(r,"a","logicalOr","bool"),t=E(n,"b","logicalOr","bool");return ct(e.shape,t.shape),N.runKernelFunc(function(i){return i.logicalOr(e,t)},{$a:e,$b:t})}}),DP=O({logicalXor_:function(r,n){var e=E(r,"a","logicalXor","bool"),t=E(n,"b","logicalXor","bool");return ct(e.shape,t.shape),YD(r,n).logicalAnd(Bf(r,n).logicalNot())}}),qa=O({where_:function(r,n,e){var t=E(n,"a","where"),i=E(e,"b","where"),o=E(r,"condition","where","bool");return vt(t.shape,i.shape,"Error in where: "),o.rank===1?k(o.shape[0]===t.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):vt(o.shape,i.shape,"Error in where: "),N.runKernelFunc(function(a,s){var c=a.select(o,t,i);return s([o]),c},{$condition:o,$a:t,$b:i},function(a,s){var c=s[0];return{$condition:function(){return ut(c).toFloat()},$a:function(){return a.mul(c.cast(a.dtype))},$b:function(){return a.mul(c.logicalNot().cast(a.dtype))}}})}}),$D=function(r){return we(this,void 0,void 0,function(){var n,e,t;return Ce(this,function(i){switch(i.label){case 0:return[4,(n=E(r,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),t=Eb(n.shape,e),r!==n&&n.dispose(),[2,t]}})})},Ue=O({add_:function(r,n){var e,t=E(r,"a","add"),i=E(n,"b","add");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a){return a.add(t,i)},{a:t,b:i},function(a){return{a:function(){var s=a,c=sn(t.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(t.shape)},b:function(){var s=a,c=sn(i.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(i.shape)}}},"Add")}}),EP=O({addN_:function(r){k(Array.isArray(r),function(){return"The argument passed to tf.addN() must be a list of tensors"}),k(r.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+r.length});var n=r.map(function(i,o){return E(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!an(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var t=n;return N.runKernelFunc(function(i){return i.addN(n)},t,function(i){var o={};return n.forEach(function(a,s){o[s]=function(){return i.clone()}}),o},"AddN")}}),SP=O({addStrict_:function(r,n){var e=E(r,"a","addStrict"),t=E(n,"b","addStrict");return vt(e.shape,t.shape,"Error in addStrict: "),e.add(t)}}),kP=O({atan2_:function(r,n){var e,t=E(r,"a","atan2"),i=E(n,"b","atan2");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a,s){var c=a.atan2(t,i);return s([t,i]),c},{$a:t,$b:i},function(a,s){var c=s[0],l=s[1];return{$a:function(){var d=Ue(c.square(),l.square()),u=a.mul(l.div(d)),h=sn(c.shape,o);return h.length>0&&(u=u.sum(h)),u.reshape(c.shape)},$b:function(){var d=Ue(c.square(),l.square()),u=Id(a.mul(c.div(d))),h=sn(l.shape,o);return h.length>0&&(u=u.sum(h)),u.reshape(l.shape)}}})}}),Nr=O({div_:function(r,n){var e,t=E(r,"a","div"),i=E(n,"b","div");if(e=Ht(t,i),t=e[0],i=e[1],t.dtype==="int32"&&i.dtype==="int32")return KD(t,i);var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a,s){var c=a.realDivide(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.div(l.toFloat()),u=sn(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=sn(l.shape,o);u.length>0&&(d=d.sum(u).reshape(l.shape));var h=l.square();return d.div(h.toFloat()).neg()}}},"Div")}}),IP=O({divNoNan_:function(r,n){var e,t=E(r,"a","div"),i=E(n,"b","div");t=(e=Ht(t,i))[0],i=e[1];var o=Nr(t,i),a=ut(o),s=i.equal(a);return qa(s,a,o)}}),AP=O({divStrict_:function(r,n){var e=E(r,"a","div"),t=E(n,"b","div");return vt(e.shape,t.shape,"Error in divideStrict: "),e.div(t)}}),KD=O({floorDiv_:function(r,n){var e,t=E(r,"a","floorDiv"),i=E(n,"b","floorDiv");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a,s){var c=a.floorDiv(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.div(l.toFloat()),u=sn(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=sn(l.shape,o);u.length>0&&(d=d.sum(u).reshape(l.shape));var h=l.square();return d.div(h.toFloat()).neg()}}},"FloorDiv")}}),Mb=O({maximum_:function(r,n){var e,t=E(r,"a","maximum"),i=E(n,"b","maximum");return e=Ht(t,i),t=e[0],i=e[1],t.dtype==="bool"&&(t=t.toInt(),i=i.toInt()),ct(t.shape,i.shape),N.runKernelFunc(function(o,a){var s=o.maximum(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return o.mul(s.greaterEqual(c).toFloat())},b:function(){return o.mul(s.less(c).toFloat())}}},"Maximum")}}),RP=O({maximumStrict_:function(r,n){var e=E(r,"a","maximumStrict"),t=E(n,"b","maximumStrict");return vt(e.shape,t.shape,"Error in maximumStrict: "),e.maximum(t)}}),XD=O({minimum_:function(r,n){var e,t=E(r,"a","minimum"),i=E(n,"b","minimum");return e=Ht(t,i),t=e[0],i=e[1],t.dtype==="bool"&&(t=t.toInt(),i=i.toInt()),ct(t.shape,i.shape),N.runKernelFunc(function(o,a){var s=o.minimum(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return o.mul(s.lessEqual(c).toFloat())},b:function(){return o.mul(s.greater(c).toFloat())}}},"Minimum")}}),MP=O({minimumStrict_:function(r,n){var e=E(r,"a","minimumStrict"),t=E(n,"b","minimumStrict");return vt(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)}}),TP=O({mod_:function(r,n){var e,t=E(r,"a","mod"),i=E(n,"b","mod");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a,s){var c=a.mod(t,i);return s([t,i]),c},{$a:t,$b:i},function(a,s){var c=s[0],l=s[1];return{$a:function(){var d=sn(c.shape,o);return d.length>0?a.sum(d).reshape(c.shape):a},$b:function(){var d=a.mul(c.div(l).floor().neg()),u=sn(l.shape,o);return u.length>0?d.sum(u).reshape(l.shape):d}}})}}),FP=O({modStrict_:function(r,n){var e=E(r,"a","modStrict"),t=E(n,"b","modStrict");return vt(e.shape,t.shape,"Error in modStrict: "),e.mod(t)}}),Yt=O({mul_:function(r,n){var e,t=E(r,"a","mul"),i=E(n,"b","mul");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a,s){var c=a.multiply(t,i);return s([t,i]),c},{a:t,b:i},function(a,s){var c=s[0],l=s[1];return{a:function(){var d=a.mul(l.toFloat()),u=sn(c.shape,o);return u.length>0?d.sum(u).reshape(c.shape):d},b:function(){var d=a.mul(c.toFloat()),u=sn(l.shape,o);return u.length>0?d.sum(u).reshape(l.shape):d}}},"Mul")}}),OP=O({mulStrict_:function(r,n){var e=E(r,"a","mul"),t=E(n,"b","mul");return vt(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)}}),Sf=O({pow_:function(r,n){var e,t=E(r,"base","pow"),i=E(n,"exp","pow");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape),a=[t,i];return N.runKernelFunc(function(s,c){var l=s.pow(t,i);return c([t,i,l]),l},{a:t,b:i},function(s,c){var l=c[0],d=c[1],u=c[2];return{a:function(){var h=d.toFloat(),f=s.mul(h.mul(l.pow(h.sub(se(1))))),p=sn(l.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)},b:function(){var h=l.greater(0),f=l.log().where(h,ut(l)),p=s.mul(u.mul(f)),m=sn(d.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(d.shape)}}},"Pow",{},a,[!0])}}),NP=O({powStrict_:function(r,n){return vt(r.shape,n.shape,"Error in powStrict: "),r.pow(n)}}),PP=O({squaredDifferenceStrict_:function(r,n){var e=E(r,"a","squaredDifferenceStrict"),t=E(n,"b","squaredDifferenceStrict");return vt(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)}}),Mt=O({sub_:function(r,n){var e,t=E(r,"a","sub"),i=E(n,"b","sub");e=Ht(t,i),t=e[0],i=e[1];var o=ct(t.shape,i.shape);return N.runKernelFunc(function(a){return a.subtract(t,i)},{a:t,b:i},function(a){return{a:function(){var s=a,c=sn(t.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(t.shape)},b:function(){var s=a,c=sn(i.shape,o);return c.length>0&&(s=s.sum(c)),s.neg().reshape(i.shape)}}},"Sub")}}),LP=O({subStrict_:function(r,n){var e=E(r,"a","subStrict"),t=E(n,"b","subStrict");return vt(e.shape,t.shape,"Error in subStrict: "),e.sub(t)}}),QD=O({equal_:function(r,n){var e,t=E(r,"a","equal"),i=E(n,"b","equal");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o){return o.equal(t,i)},{$a:t,$b:i})}}),BP=O({equalStrict_:function(r,n){var e=E(r,"a","equalStrict"),t=E(n,"b","equalStrict");return vt(e.shape,t.shape,"Error in equalStrict: "),e.equal(t)}}),VP=O({greater_:function(r,n){var e,t=E(r,"a","greater"),i=E(n,"b","greater");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o){return o.greater(t,i)},{a:t,b:i},null,"Greater")}}),ZD=O({greaterEqual_:function(r,n){var e,t=E(r,"a","greaterEqual"),i=E(n,"b","greaterEqual");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o,a){var s=o.greaterEqual(t,i);return a([t,i]),s},{a:t,b:i},function(o,a){var s=a[0],c=a[1];return{a:function(){return ut(s)},b:function(){return ut(c)}}},"GreaterEqual")}}),zP=O({greaterEqualStrict_:function(r,n){var e=E(r,"a","greaterEqualStrict"),t=E(n,"b","greaterEqualStrict");return vt(e.shape,t.shape,"Error in greaterEqualStrict: "),e.greaterEqual(t)}}),UP=O({greaterStrict_:function(r,n){var e=E(r,"a","greaterStrict"),t=E(n,"b","greaterStrict");return vt(e.shape,t.shape,"Error in greaterStrict: "),e.greater(t)}}),jP=O({less_:function(r,n){var e,t=E(r,"a","less"),i=E(n,"b","less");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o){return o.less(t,i)},{a:t,b:i},null,"Less")}}),WP=O({lessEqual_:function(r,n){var e,t=E(r,"a","lessEqual"),i=E(n,"b","lessEqual");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o,a){var s=o.lessEqual(t,i);return a([t,i]),s},{a:t,b:i},null,"LessEqual")}}),HP=O({lessEqualStrict_:function(r,n){var e=E(r,"a","lessEqualStrict"),t=E(n,"b","lessEqualStrict");return vt(e.shape,t.shape,"Error in lessEqualStrict: "),e.lessEqual(t)}}),GP=O({lessStrict_:function(r,n){var e=E(r,"a","lessStrict"),t=E(n,"b","lessStrict");return vt(e.shape,t.shape,"Error in lessStrict: "),e.less(t)}}),qP=O({notEqual_:function(r,n){var e,t=E(r,"a","notEqual"),i=E(n,"b","notEqual");return e=Ht(t,i),t=e[0],i=e[1],ct(t.shape,i.shape),N.runKernelFunc(function(o){return o.notEqual(t,i)},{a:t,b:i},null,"NotEqual")}}),YP=O({notEqualStrict_:function(r,n){var e=E(r,"a","notEqualStrict"),t=E(n,"b","notEqualStrict");return vt(e.shape,t.shape,"Error in notEqualStrict: "),e.notEqual(t)}});function jC(r,n){for(var e=[],t=r;t<n;++t)e.push(t);return e}function WC(r){for(var n=[],e=0;e<r.length;++e)for(var t=0;t<r[e].length;++t)n.push(r[e][t]);return n}var Tb=O({gather_:function(r,n,e){e===void 0&&(e=0);var t=E(r,"x","gather"),i=E(n,"indices","gather","int32");e=cn(e,t.shape)[0];var o=function(a,s,c){for(var l=a.shape[c],d=[],u=1,h=1,f=0;f<c;f++)d.push(a.shape[f]),u*=a.shape[f];for(f=0;f<s.rank;f++)d.push(s.shape[f]);for(f=c+1;f<a.rank;f++)d.push(a.shape[f]),h*=a.shape[f];return{batchSize:u,sliceSize:h,dimSize:l,outputShape:d}}(t,i,e);return N.runKernelFunc(function(a,s){var c=a.gather(t,i.flatten(),e);return s([i]),c},{x:t,indices:i},function(a,s){var c=s[0];return{x:function(){var l=t.shape,d=c.size,u=l.slice(0,e),h=u.length,f=l.slice(e,l.length).slice(1),p=f.length,m=jC(0,h),g=jC(h+1,h+1+p),v=WC([u,[d],f]),_=a.reshape(v),y=c.reshape([d]),b=WC([[h],m,g]),w=_.transpose(b),C=JD(w,y,t.shape[e]),A=Rf(b);return C=C.transpose(A)},indices:function(){return c}}},"Gather",{axis:e}).reshape(o.outputShape)}}),JD=O({unsortedSegmentSum_:function(r,n,e){var t=E(r,"x","unsortedSegmentSum"),i=E(n,"segmentIds","unsortedSegmentSum","int32");return k($t(e),function(){return"numSegments must be of dtype int"}),N.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(t,i,e);return a([i]),s},{$x:t},function(o,a){var s=a[0];return{$x:function(){return function(c,l){for(var d=Mb(l,ut(l)),u=Tb(c,d),h=ZD(l,se(0,"int32")),f=u.rank-h.rank,p=0;p<f;++p)h=Vn(h,p+1);h=Bf(h,kc(u.shape,"bool"));var m=ut(u);return qa(h,u,m)}(o,s)}}})}}),$P=function(r,n,e){return we(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m;return Ce(this,function(g){switch(g.label){case 0:for(t=E(r,"tensor","boolMask"),i=E(n,"mask","boolMask","bool"),o=e??0,a=i.rank,s=t.shape,k(a>0,function(){return"mask cannot be scalar"}),vt(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+a;l++)c*=s[l];return d=s.slice(0,o).concat([c],s.slice(o+a)),u=t.reshape(d),h=i.reshape([-1]),[4,$D(h)];case 1:return f=g.sent(),p=f.squeeze([1]),m=Tb(u,p,o),r!==t&&t.dispose(),n!==i&&i.dispose(),p.dispose(),u.dispose(),h.dispose(),f.dispose(),[2,m]}})})};function eE(r,n,e,t,i,o,a){o===void 0&&(o="NHWC"),k(r.length===n.rank,function(){return"Length of inShape ("+r.length+") and rank of dy ("+n.rank+") must match"});var s=r,c=n,l=!1;n.rank===3&&(l=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,r[0],r[1],r[2]]),k(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),k(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),k(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var d=o==="NHWC"?s[3]:s[1],u=o==="NHWC"?c.shape[3]:c.shape[1];k(d===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+e.shape[2]+"."}),k(u===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+u+") must match output depth for filter "+e.shape[3]+"."}),a!=null&&k($t(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var h=Nf(o),f=Zo(s,e.shape,t,1,i,a,!1,h),p=N.runKernelFunc(function(m,g){var v=m.conv2dDerInput(c,e,f);return g([e,c]),v},{dy4D:c,filter:e},function(m,g){var v=g[0],_=g[1];return{dy4D:function(){return yn(m,v,t,i,o,1,a)},filter:function(){return Fb(m,_,v.shape,t,i,o,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Iv(r){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(r),e=n[0],t=n[1],i=n[2];return e===1&&t===1&&i===1}function tE(r,n,e,t,i){k(r.length===n.rank,function(){return"Length of inShape ("+r.length+") and rank of dy ("+n.rank+") must match"});var o=r,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,r[0],r[1],r[2],r[3]]);var c=o[4],l=a.shape[4];k(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),k(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),k(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),k(c===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[3]+"."}),k(l===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+e.shape[4]+"."});var d=Cd(o,e.shape,t,1,i),u=N.runKernelFunc(function(h){return h.conv3dDerInput(a,e,d)},{dy5D:a});return s?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}var KP=O({conv1d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=E(r,"x","conv1d"),c=E(n,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),k(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),k(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),a!=null&&k($t(t),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."}),k(l.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),k($n(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),k(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var u=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=yn(h,u,[1,e],t,"NHWC",[1,o],a);return d?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),yn=O({conv2d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=E(r,"x","conv2d"),c=E(n,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),k(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),k(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),a!=null&&k($t(t),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."});var u=i==="NHWC"?l.shape[3]:l.shape[1];k(u===c.shape[2],function(){return"Error in conv2d: depth of input ("+u+") must match input depth for filter "+c.shape[2]+"."}),k($n(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var h=Nf(i),f=Zo(l.shape,c.shape,e,o,t,a,!1,h),p=[c,l],m=N.runKernelFunc(function(g,v){var _=g.conv2d(l,c,f);return v([c,l]),_},{x:l,filter:c},function(g,v){var _=v,y=_[0],b=_[1];return k(Ga(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return nE(b.shape,g,y,e,t,i)},filter:function(){return Fb(b,g,y.shape,e,t,i)}}},"Conv2D",f,p);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),XP=O({conv3d_:function(r,n,e,t,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=E(r,"x","conv3d"),s=E(n,"filter","conv3d"),c=a,l=!1;a.rank===4&&(l=!0,c=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),k(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),k(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),k(c.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),k(function(h,f){return Iv(h)||Iv(f)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),k(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var d=Cd(c.shape,s.shape,e,o,t),u=N.runKernelFunc(function(h,f){var p=h.conv3d(c,s,d);return f([c,s]),p},{x:c,$filter:s},function(h,f){k(Iv(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var p=f[0],m=f[1];return{x:function(){return tE(p.shape,h,m,e,t)},$filter:function(){return function(g,v,_,y,b){var w=g;g.rank===4&&(w=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var C=v;C.rank===4&&(C=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),k(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),k(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),k(_.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+_+"."}),k(w.shape[4]===_[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+_[3]+"."}),k(C.shape[4]===_[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+_[4]+")."});var A=Cd(w.shape,_,y,1,b);return N.runKernelFunc(function(R){return R.conv3dDerFilter(w,C,A)},{x5D:w,dy5D:C})}(p,h,m.shape,e,t)}}});return l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),Fb=O({conv2dDerFilter_:function(r,n,e,t,i,o,a){o===void 0&&(o="NHWC");var s=r;r.rank===3&&(s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),k(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),k(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),k(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],d=o==="NHWC"?c.shape[3]:c.shape[1];k(l===e[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+e[2]+"."}),k(d===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+e[3]+")."}),a!=null&&k($t(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var u=Nf(o),h=Zo(s.shape,e,t,1,i,a,!1,u);return N.runKernelFunc(function(f){return f.conv2dDerFilter(s,c,h)},{x4D:s,dy4D:c})}}),nE=O({conv2dDerInput_:eE}),Rd=O({depthwiseConv2d_:function(r,n,e,t,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=E(r,"x","depthwiseConv2d"),c=E(n,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),k(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),k(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),k(l.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),o==null&&(o=[1,1]),k($n(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&k($t(t),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+t+"."});var u=Zo(l.shape,c.shape,e,o,t,a,!0),h=[l,c],f=N.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(l,c,u);return m([l,c]),g},{x:l,filter:c},function(p,m){k(Ga(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var g=m[0],v=m[1];return{x:function(){return rE(g.shape,p,v,u)},filter:function(){return iE(g,p,v.shape,u)}}},"DepthwiseConv2dNative",u,h);return d?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),rE=O({depthwiseConv2dDerInput_:function(r,n,e,t){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=N.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,e,t)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),iE=O({depthwiseConv2dDerFilter_:function(r,n,e,t){var i=r;r.rank===3&&(i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),N.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,t)},{x4D:i,dy4D:o})}}),Md=O({separableConv2d_:function(r,n,e,t,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=E(r,"x","separableConv2d"),c=E(n,"depthwiseFilter","separableConv2d"),l=E(e,"pointwiseFilter","separableConv2d"),d=s,u=!1;if(s.rank===3&&(u=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");k(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),k(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),k(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),k(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),k(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=c.shape[2],f=c.shape[3];k(l.shape[2]===h*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."});var p=Rd(d,c,t,i,a,o),m=yn(p,l,1,"valid",a);return u?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),QP=O({conv2dTranspose_:function(r,n,e,t,i,o){return eE(e,E(r,"x","conv2dTranspose"),E(n,"filter","conv2dTranspose"),t,i,"NHWC",o)}}),ZP=O({conv3dTranspose_:function(r,n,e,t,i){return tE(e,E(r,"x","conv3dTranspose"),E(n,"filter","conv3dTranspose"),t,i)}}),Ic=O({matMul_:function(r,n,e,t){var i;e===void 0&&(e=!1),t===void 0&&(t=!1);var o=E(r,"a","matMul"),a=E(n,"b","matMul");i=Ht(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],c=t?a.shape[a.rank-1]:a.shape[a.rank-2],l=e?o.shape[o.rank-1]:o.shape[o.rank-2],d=t?a.shape[a.rank-2]:a.shape[a.rank-1],u=o.shape.slice(0,-2),h=a.shape.slice(0,-2),f=ke(u),p=ke(h);k(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),k(an(u,h),function(){return"Error in matMul: outer dimensions ("+u+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),k(s===c,function(){return"Error in matMul: inner shapes ("+s+") and ("+c+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+t+" must match."});var m=o.shape.slice(0,-2).concat([l,d]),g=e?o.as3D(f,s,l):o.as3D(f,l,s),v=t?a.as3D(p,d,c):a.as3D(p,c,d),_={transposeA:e,transposeB:t};return N.runKernelFunc(function(y,b){var w=y.batchMatMul(g,v,e,t);return b([g,v]),w},{a:g,b:v},function(y,b){var w=b,C=w[0],A=w[1];return e||t?!e&&t?{a:function(){return y.matMul(A,!1,!1)},b:function(){return y.matMul(C,!0,!1)}}:e&&!t?{a:function(){return A.matMul(y,!1,!0)},b:function(){return C.matMul(y,!1,!1)}}:{a:function(){return A.matMul(y,!0,!0)},b:function(){return y.matMul(C,!0,!0)}}:{a:function(){return y.matMul(A,!1,!0)},b:function(){return C.matMul(y,!0,!1)}}},"BatchMatMul",_).reshape(m)}}),JP=O({dot_:function(r,n){var e=E(r,"t1","dot"),t=E(n,"t2","dot");k(!(e.rank!==1&&e.rank!==2||t.rank!==1&&t.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+t.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=t.rank===1?t.size:t.shape[0];return k(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&t.rank===1?e.as2D(1,-1).matMul(t.as2D(-1,1)).asScalar():e.rank===1&&t.rank===2?e.as2D(1,-1).matMul(t.as2D(t.shape[0],t.shape[1])).as1D():e.rank===2&&t.rank===1?e.matMul(t.as2D(-1,1)).as1D():e.matMul(t.as2D(t.shape[0],t.shape[1]))}}),eL=O({outerProduct_:function(r,n){var e=E(r,"v1","outerProduct"),t=E(n,"v2","outerProduct");return k(e.rank===1&&t.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."}),e.as2D(-1,1).matMul(t.as2D(1,-1))}}),Td=O({reverse_:function(r,n){var e=E(r,"x","reverse");if(e.rank===0)return e.clone();var t=cn(n,e.shape);return N.runKernelFunc(function(i){return i.reverse(e,t)},{$x:e},function(i){return{$x:function(){return i.reverse(t)}}}).reshapeAs(e)}}),tL=O({reverse1d_:function(r){var n=E(r,"x","reverse");return k(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Td(n,0)}}),nL=O({reverse2d_:function(r,n){var e=E(r,"x","reverse");return k(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Td(e,n)}}),rL=O({reverse3d_:function(r,n){var e=E(r,"x","reverse");return k(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Td(e,n)}}),iL=O({reverse4d_:function(r,n){var e=E(r,"x","reverse");return k(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Td(e,n)}});function oE(r,n,e,t,i,o){var a=E(r,"x","maxPool"),s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),t==null&&(t=[1,1]),k(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),k($n(e,t),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+t+"'"}),o!=null&&k($t(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Dc(s.shape,n,e,t,i,o);if(l.filterWidth===1&&l.filterHeight===1&&an(l.inShape,l.outShape))return a.clone();var d=[s],u=N.runKernelFunc(function(h,f){var p=h.maxPool(s,l);return f([s,p]),p},{x:s},function(h,f){var p=f[0],m=f[1];return{x:function(){return function(g,v,_,y,b,w,C,A){var R=E(g,"dy","maxPoolBackprop"),S=E(v,"input","maxPoolBackprop"),D=E(_,"output","maxPoolBackprop");k(S.rank===R.rank,function(){return"Rank of input ("+S.rank+") does not match rank of dy ("+R.rank+")"}),w==null&&(w=[1,1]),k($n(b,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),k(R.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+R.rank+"."}),k(S.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+S.rank+"."}),A!=null&&k($t(C),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+C+"."});var F=Dc(S.shape,y,b,w,C,A);return N.runKernelFunc(function(T){return T.maxPoolBackprop(R,S,D,F)},{$dy:R,$input:S})}(h,p,m,n,e,t,i)}}},"MaxPool",l,d);return c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function aE(r,n,e,t,i,o){var a=E(r,"x","avgPool","float32");t==null&&(t=[1,1]),k($n(e,t),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+t+"'"});var s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&k($t(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Dc(s.shape,n,e,t,i,o);if(l.filterWidth===1&&l.filterHeight===1&&an(l.inShape,l.outShape))return a.clone();var d=N.runKernelFunc(function(u){return u.avgPool(s,l)},{x:s},function(u){return{x:function(){return function(h,f,p,m,g,v){var _=E(h,"dy","avgPoolBackprop"),y=E(f,"input","avgPoolBackprop");k(y.rank===_.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+_.rank+")"}),g==null&&(g=[1,1]),k($n(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var b=y,w=_,C=!1;y.rank===3&&(C=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),w=_.as4D(1,_.shape[0],_.shape[1],_.shape[2])),k(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),k(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var A=Dc(b.shape,p,m,g,v),R=N.runKernelFunc(function(S){return S.avgPoolBackprop(w,b,A)},{dy4D:w,input4D:b});return C?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}(u,s,n,e,t,i)}}},"AvgPool",l);return d=d.cast(a.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Kt=O({maxPool_:function(r,n,e,t,i){return oE(r,n,e,1,t,i)}}),uo=O({avgPool_:function(r,n,e,t,i){return aE(r,n,e,1,t,i)}}),oL=O({pool_:function(r,n,e,t,i,o){i==null&&(i=[1,1]),o==null&&(o=1),t===0&&(t="valid");var a=E(r,"x","maxPool"),s=a,c=!1;a.rank===3&&(c=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k($n(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,d=Dc(s.shape,n,o,i,t),u=[d.dilationHeight,d.dilationWidth];l=t==="same"?function(b,w){var C=b.map(function(S,D){return S+(S-1)*(w[D]-1)}).map(function(S){return S-1}),A=C.map(function(S){return Math.floor(S/2)}),R=C.map(function(S,D){return S-A[D]});return C.map(function(S,D){return[A[D],R[D]]})}([d.filterHeight,d.filterWidth],u):[[0,0],[0,0]];var h=u[0]===1&&u[1]===1,f=function(b,w,C){var A=C.map(function(z){return z[0]}),R=C.map(function(z){return z[1]}),S=b.concat(A,R),D=w.map(function(z,U){return(z-S[U]%z)%z}),F=R.map(function(z,U){return z+D[U]}),T=w.map(function(z,U){return[A[U],F[U]]}),V=w.map(function(z,U){return[0,D[U]]});return[T,V]}([d.inHeight,d.inWidth],u,l),p=f[0],m=f[1],g=h?t:"valid",v=h?s:Z1(s,u,p),_=(e==="avg"?function(){return aE(v,n,o,1,g)}:function(){return oE(v,n,o,1,g)})(),y=h?_:K1(_,u,m);return c?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),aL=O({maxPool3d_:function(r,n,e,t,i,o,a){o===void 0&&(o="NDHWC");var s=E(r,"x","maxPool3d"),c=s,l=!1;s.rank===4&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),k(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),k(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),k($n(e,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&k($t(t),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+t+"."});var d=wd(c.shape,n,e,a,t,i,o),u=N.runKernelFunc(function(h,f){var p=h.maxPool3d(c,d);return f([c,p]),p},{x:c},function(h,f){var p=f[0],m=f[1];return{x:function(){return function(g,v,_,y,b,w,C,A){var R=E(g,"dy","maxPool3dBackprop"),S=E(v,"input","maxPool3dBackprop"),D=E(_,"output","maxPool3dBackprop"),F=R,T=S,V=D,z=!1;S.rank===4&&(z=!0,F=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),T=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),V=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3])),k(F.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+F.rank+"."}),k(T.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+T.rank+"."}),k(V.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+V.rank+"."}),w==null&&(w=[1,1,1]),k($n(b,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),A!=null&&k($t(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+C+"."});var U=wd(T.shape,y,b,w,C,A),Y=N.runKernelFunc(function(q){return q.maxPool3dBackprop(F,T,V,U)},{dy5D:F,input5D:T});return z?Y.as4D(Y.shape[1],Y.shape[2],Y.shape[3],Y.shape[4]):Y}(h,p,m,n,e,a,t,i)}}});return l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),sL=O({avgPool3d_:function(r,n,e,t,i,o,a){o===void 0&&(o="NDHWC");var s=E(r,"x","avgPool3d","float32"),c=s,l=!1;s.rank===4&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),k(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),k(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),k($n(e,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&k($t(t),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+t+"."});var d=wd(c.shape,n,e,a,t,i,o),u=N.runKernelFunc(function(h){return h.avgPool3d(c,d)},{x:c},function(h){return{x:function(){return function(f,p,m,g,v,_,y){var b=E(f,"dy","avgPool3dBackprop"),w=E(p,"input","avgPool3dBackprop"),C=b,A=w,R=!1;w.rank===4&&(R=!0,C=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),A=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),k(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),k(A.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+A.rank+"."}),v==null&&(v=[1,1,1]),k($n(g,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+v+"'"}),y!=null&&k($t(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+_+"."});var S=wd(A.shape,m,g,v,_,y),D=N.runKernelFunc(function(F){return F.avgPool3dBackprop(C,A,S)},{dy5D:C,input5D:A});return R?D.as4D(D.shape[1],D.shape[2],D.shape[3],D.shape[4]):D}(h,c,n,e,a,t,i)}}});return u=u.cast(c.dtype),l?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),ri=O({slice_:function(r,n,e){var t,i,o=E(r,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(t=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(c){k(c!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(c,l){return c>=0?c:(k(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+l+"."}),o.shape[l]-t[l])}),iD(o,t,i);var a=o.shape,s={begin:t,size:i};return N.runKernelFunc(function(c){return c.slice(o,t,i)},{x:o},function(c){for(var l=[],d=0;d<c.rank;d++)l.push([t[d],a[d]-t[d]-i[d]]);return{x:function(){return c.pad(l)}}},"Slice",s)}}),cL=O({slice1d_:function(r,n,e){var t=E(r,"x","slice1d");return k(t.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+t.rank+" tensor"}),ri(t,[n],[e])}}),lL=O({slice2d_:function(r,n,e){var t=E(r,"x","slice2d");return k(t.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+t.rank+" tensor"}),ri(t,n,e)}}),Ob=O({slice3d_:function(r,n,e){var t=E(r,"x","slice3d");return k(t.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+t.rank+" tensor"}),ri(t,n,e)}}),dL=O({slice4d_:function(r,n,e){var t=E(r,"x","slice4d");return k(t.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+t.rank+" tensor"}),ri(t,n,e)}});function sE(r,n,e,t,i){return n.rank<e.rank&&(n=n.reshape(Yn(n.shape,t))),r.rank<e.rank&&(r=r.reshape(Yn(r.shape,t))),{x:function(){var o=r.mul(e.equal(n).cast(r.dtype));return i==null?o:o.transpose(i)}}}var uL=O({all_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","all","bool"),i=cn(n,t.shape),o=i,a=oi(o,t.rank);a!=null&&(t=t.transpose(a),o=ai(o.length,t.rank));var s=N.runKernelFunc(function(l){return l.all(t,o)},{$x:t});if(e){var c=Yn(s.shape,i);return s.reshape(c)}return s}}),hL=O({any_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","any","bool"),i=cn(n,t.shape),o=i,a=oi(o,t.rank);a!=null&&(t=t.transpose(a),o=ai(o.length,t.rank));var s=N.runKernelFunc(function(l){return l.any(t,o)},{$x:t});if(e){var c=Yn(s.shape,i);return s.reshape(c)}return s}}),fL=O({argMax_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","argMax");n==null&&(n=0);var t=cn(n,e.shape),i=oi(t,e.rank);i!=null&&(e=e.transpose(i),t=ai(t.length,e.rank));var o={axis:t[0]},a=[e];return N.runKernelFunc(function(s,c){var l=s.argMax(e,t[0]);return c([e]),l},{x:e},function(s,c){var l=c[0];return{x:function(){return ut(l)}}},"ArgMax",o,a)}}),pL=O({argMin_:function(r,n){n===void 0&&(n=0);var e=E(r,"x","argMin");n==null&&(n=0);var t=cn(n,e.shape),i=oi(t,e.rank);return i!=null&&(e=e.transpose(i),t=ai(t.length,e.rank)),N.runKernelFunc(function(o,a){var s=o.argMin(e,t[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return ut(s)}}})}}),mL=O({logSumExp_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","logSumExp"),i=cn(n,t.shape),o=t.max(i,!0),a=t.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var c=Yn(s.shape,i);return s.reshape(c)}return s}}),Ka=O({max_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","max"),i=t,o=cn(n,t.shape),a=o,s=oi(a,t.rank);s!=null&&(t=t.transpose(s),a=ai(a.length,t.rank));var c=[t],l=N.runKernelFunc(function(u,h){var f=u.max(t,a);return h([i,f]),f},{x:t},function(u,h){return sE(u,h[1],h[0],o,s)},"Max",{axes:a},c,[!0]);if(e){var d=Yn(l.shape,o);l=l.reshape(d)}return l}}),gL=O({mean_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","mean"),i=cn(n,t.shape),o=ke(An(t.shape,i)[1]);return Of(function(a){var s=se(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(c){var l=a.shape.slice();return i.forEach(function(d){l[d]=1}),c.reshape(l).mul(kc(a.shape,"float32")).div(o)}}})(t)}}),vL=O({min_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","min"),i=t,o=cn(n,t.shape),a=o,s=oi(a,t.rank);s!=null&&(t=t.transpose(s),a=ai(a.length,t.rank));var c=[t],l=N.runKernelFunc(function(u,h){var f=u.min(t,a);return h([i,f]),f},{x:t},function(u,h){return sE(u,h[1],h[0],o,s)},"Min",{axes:a},c,[!0]);if(e){var d=Yn(l.shape,o);l=l.reshape(d)}return l}}),bL=O({moments_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=cn(n,(r=E(r,"x","moments")).shape),i=r.mean(t,e),o=i.shape;e||(o=Yn(i.shape,t));var a=r.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(t,e)}}}),cE=O({sum_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","sum");t.dtype==="bool"&&(t=t.toInt());var i=cn(n,t.shape);return Of(function(o){var a=oi(i,o.rank),s=i,c=o;a!=null&&(c=o.transpose(a),s=ai(s.length,o.rank));var l=function(f){var p=o.shape.slice();return i.forEach(function(m){p[m]=1}),f.reshape(p).mul(kc(o.shape,"float32"))},d={axes:s},u=N.runKernelFunc(function(f){return f.sum(c,s)},{x:c},function(f){return{x:function(){return l(f)}}},"Sum",d);if(e){var h=Yn(u.shape,i);u=u.reshape(h)}return{value:u,gradFunc:l}})(t)}}),_L=O({prod_:function(r,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var t=E(r,"x","prod");t.dtype==="bool"&&(t=t.toInt());var i=cn(n,t.shape),o=oi(i,t.rank),a=i,s=t;o!=null&&(s=t.transpose(o),a=ai(a.length,t.rank));var c=N.runKernelFunc(function(d){return d.prod(s,a)},{permutedX:s});if(e){var l=Yn(c.shape,i);c=c.reshape(l)}return c}}),lE=O({elu_:function(r){var n=E(r,"x","elu");return N.runKernelFunc(function(e,t){var i=e.elu(n);return t([i]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){return N.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),yL=O({leakyRelu_:function(r,n){n===void 0&&(n=.2);var e=E(r,"x","leakyRelu");return Mb(se(n).mul(e),e)}}),dE=O({prelu_:function(r,n){var e=E(r,"x","prelu"),t=E(n,"alpha","prelu");return N.runKernelFunc(function(i,o){var a=i.prelu(e,t);return o([e,t]),a},{x:e,alpha:t},function(i,o){var a=o[0],s=o[1],c=a.greater(0);return{x:function(){return qa(c,i,i.mul(s))},alpha:function(){var l=qa(c,ut(i),i.mul(a)),d=sn(s.shape,i.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}},"Prelu")}}),wt=O({relu_:function(r){var n=E(r,"x","relu");return n.dtype==="bool"?n.toInt():N.runKernelFunc(function(e,t){var i=e.relu(n);return t([n]),i},{x:n},function(e,t){var i=t[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),uE=O({relu6_:function(r){var n=E(r,"x","relu6");return n.dtype==="bool"?n.toInt():N.runKernelFunc(function(e,t){var i=e.relu6(n);return t([n]),i},{x:n},function(e,t){var i=t[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),xL=O({selu_:function(r){var n=E(r,"x","selu");return N.runKernelFunc(function(e,t){var i=e.selu(n);return t([n]),i},{$x:n},function(e,t){var i=t[0];return{$x:function(){var o=i.greater(se(0)),a=se(kb),s=se(Ib),c=e.mul(s),l=e.mul(a).mul(i.toFloat().exp());return qa(o,c,l)}}})}}),Pr=O({transpose_:function(r,n){var e=E(r,"x","transpose");if(n==null&&(n=e.shape.map(function(i,o){return o}).reverse()),k(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(i){k(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1)return e.clone();var t={perm:n};return N.runKernelFunc(function(i){return i.transpose(e,n)},{x:e},function(i){var o=Rf(n);return{x:function(){return i.transpose(o)}}},"Transpose",t)}}),wL=O({localResponseNormalization_:function(r,n,e,t,i){n===void 0&&(n=5),e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=.5);var o=E(r,"x","localResponseNormalization");k(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),k($t(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=N.runKernelFunc(function(l,d){var u=l.localResponseNormalization4D(a,n,e,t,i);return d([a,u]),u},{x4D:a},function(l,d){var u=d[0],h=d[1];return{x4D:function(){return N.runKernelFunc(function(f){return f.LRNGrad(l,u,h,n,e,t,i)},{})}}});return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),hE=O({norm_:function(r,n,e,t){n===void 0&&(n="euclidean"),e===void 0&&(e=null),t===void 0&&(t=!1);var i=function s(c,l,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return s(c.reshape([-1]),l,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(l===1)return c.abs().sum(d);if(l===1/0)return c.abs().max(d);if(l===-1/0)return c.abs().min(d);if(l==="euclidean"||l===2)return c.abs().pow(se(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(d)&&d.length===2){if(l===1)return c.abs().sum(d[0]).max(d[1]-1);if(l===1/0)return c.abs().sum(d[1]).max(d[0]);if(l===-1/0)return c.abs().sum(d[1]).min(d[0]);if(l==="fro"||l==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+d)}(r=E(r,"x","norm"),n,e),o=i.shape;if(t){var a=cn(e,r.shape);o=Yn(i.shape,a)}return i.reshape(o)}}),CL=O({basicLSTMCell_:function(r,n,e,t,i,o){var a=E(r,"forgetBias","basicLSTMCell"),s=E(n,"lstmKernel","basicLSTMCell"),c=E(e,"lstmBias","basicLSTMCell"),l=E(t,"data","basicLSTMCell"),d=E(i,"c","basicLSTMCell"),u=E(o,"h","basicLSTMCell"),h=l.concat(u,1).matMul(s).add(c),f=h.shape[0],p=h.shape[1]/4,m=[f,p],g=h.slice([0,0],m),v=h.slice([0,p],m),_=h.slice([0,2*p],m),y=h.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(d.mulStrict(a.add(_).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),DL=O({multiRNNCell_:function(r,n,e,t){for(var i=E(n,"data","multiRNNCell"),o=_f(e,"c","multiRNNCell"),a=_f(t,"h","multiRNNCell"),s=i,c=[],l=0;l<r.length;l++){var d=r[l](s,o[l],a[l]);c.push(d[0]),c.push(d[1]),s=d[1]}var u=[],h=[];for(l=0;l<c.length;l+=2)u.push(c[l]),h.push(c[l+1]);return[u,h]}}),EL=O({movingAverage_:function(r,n,e,t,i){i===void 0&&(i=!0);var o=E(r,"v","movingAverage"),a=E(n,"x","movingAverage"),s=E(e,"decay","movingAverage");b1(o,a),k(an(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var c=se(1),l=c.sub(s),d=a.sub(o).mul(l);if(i){k(t!=null,function(){return"When using zeroDebias: true, step is required."});var u=E(t,"step","movingAverage");d=d.div(c.sub(Sf(s,u)))}return o.add(d)}}),SL=O({stridedSlice_:function(r,n,e,t,i,o,a,s,c){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=0),t==null&&(t=new Array(n.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=E(r,"x","stridedSlice"),d=Zv(s),u=l.shape.slice();d.forEach(function(g){n[g]=0,e[g]=1,u.splice(g,0,1)}),l=l.reshape(u);for(var h=0;h<l.rank;h++)n[h]=oD(i,n,t,l.shape,h),e[h]=aD(o,e,t,l.shape,h),t[h]=t[h]||1;var f=Zv(c);f.forEach(function(g){e[g]=n[g]+1,t[g]=1});var p=Ff(n,e,t),m=p.filter(function(g,v){return f.indexOf(v)===-1});return t.every(function(g){return g===1})?ri(l,n,p).reshape(m):N.runKernelFunc(function(g){return g.stridedSlice(l,n,e,t)},{$x:l}).reshape(m)}}),kL=O({topk_:function(r,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var t=E(r,"x","topk");if(t.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=t.shape[t.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=N.runKernelFunc(function(a){return a.topk(t,n,e)},{$x:t});return{values:o[0],indices:o[1]}}}),IL=O({scatterND_:function(r,n,e){var t=E(r,"indices","scatterND","int32"),i=E(n,"updates","scatterND");return rD(i,t,e),N.runKernelFunc(function(o){return o.scatterND(t,i,e)},{indices:t,updates:i},null,"ScatterNd",{shape:e})}}),Nb=O({fft_:function(r){k(r.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+r.dtype+"."});var n=r.shape[r.shape.length-1],e=r.size/n,t=r.as2D(e,n);return N.runKernelFunc(function(i){return i.fft(t)},{input:r}).reshape(r.shape)}}),kf=O({ifft_:function(r){k(r.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+r.dtype+"."});var n=r.shape[r.shape.length-1],e=r.size/n,t=r.as2D(e,n);return N.runKernelFunc(function(i){return i.ifft(t)},{input:r}).reshape(r.shape)}}),Pb=O({rfft_:function(r,n){k(r.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+r.dtype});var e,t=r.shape[r.shape.length-1],i=r.size/t;if(n!=null&&n<t){var o=r.shape.map(function(v){return 0}),a=r.shape.map(function(v){return v});a[r.shape.length-1]=n,e=r.slice(o,a),t=n}else if(n!=null&&n>t){var s=r.shape.map(function(v){return v});s[r.shape.length-1]=n-t,e=r.concat(Lt(s),r.shape.length-1),t=n}else e=r;var c=e.zerosLike(),l=In(e,c).as2D(i,t),d=Nb(l),u=Math.floor(t/2)+1,h=Or(d),f=Mi(d),p=h.split([u,t-u],h.shape.length-1),m=f.split([u,t-u],f.shape.length-1),g=e.shape.slice();return g[e.shape.length-1]=u,In(p[0],m[0]).reshape(g)}}),fE=O({irfft_:function(r){var n=r.shape[r.shape.length-1],e=r.size/n;if(n<=2){var t=r.as2D(e,n),i=kf(t);return Or(i)}var o=[e,2*(n-1)],a=Or(r).as2D(e,n),s=Mi(r).as2D(e,n),c=a.slice([0,1],[e,n-2]).reverse(1),l=s.slice([0,1],[e,n-2]).reverse(1).mul(se(-1)),d=a.concat(c,1),u=s.concat(l,1);return t=In(d,u).as2D(o[0],o[1]),i=kf(t),Or(i)}}),AL=Object.freeze({fft:Nb,ifft:kf,rfft:Pb,irfft:fE}),RL=O({sparseToDense_:function(r,n,e,t){t===void 0&&(t=0);var i=E(r,"sparseIndices","sparseToDense","int32"),o=E(n,"sparseValues","sparseToDense"),a=E(t,"defaultValue","sparseToDense",o.dtype);return function(s,c,l,d){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var u=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var f=c.size;if(c.rank!==0&&(c.rank!==1||f!==u))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+u+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,a),N.runKernelFunc(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),ML=O({gatherND_:function(r,n){var e=E(n,"indices","gatherND","int32"),t=E(r,"x","gatherND");return N.runKernelFunc(function(i){return i.gatherND(t,e)},{x:t,indices:e},null,"GatherNd")}}),TL=O({diag_:function(r){var n=E(r,"x","diag").flatten(),e=r.shape.concat(r.shape);return N.runKernelFunc(function(t){return t.diag(n)},{$x:n}).reshape(e)}}),FL=O({dropout_:function(r,n,e,t){var i=E(r,"x","dropout");if(k(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),k(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return r instanceof Rt?i.clone():i;var o=function(c,l){if(l==null)return c.shape.slice();if(an(c.shape,l))return l;if(c.shape.length===l.length){for(var d=[],u=0;u<c.shape.length;u++)l[u]==null&&c.shape[u]!=null?d.push(c.shape[u]):d.push(l[u]);return d}return l}(i,e),a=1-n,s=Q1(o,0,1,"float32",t).add(a).floor().div(a);return i.mul(s)}});function pE(r,n,e){for(var t=1-r%2,i=new Float32Array(r),o=0;o<r;++o){var a=2*Math.PI*o/(r+t-1);i[o]=n-e*Math.cos(a)}return Ot(i,"float32")}var Lb=O({hannWindow_:function(r){return pE(r,.5,.5)}}),mE=O({hammingWindow_:function(r){return pE(r,.54,.46)}}),Bb=O({frame_:function(r,n,e,t,i){t===void 0&&(t=!1),i===void 0&&(i=0);for(var o=0,a=[];o+n<=r.size;)a.push(ri(r,o,n)),o+=e;if(t)for(;o<r.size;){var s=o+n-r.size,c=Ut([ri(r,o,n-s),xr([s],i)]);a.push(c),o+=e}return a.length===0?Ti([],[0,n]):Ut(a).as2D(a.length,n)}}),gE=O({stft_:function(r,n,e,t,i){var o;i===void 0&&(i=Lb),t==null&&(o=n,t=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=Bb(r,n,e),s=Yt(a,i(n)),c=[],l=0;l<a.shape[0];l++)c.push(Pb(s.slice([l,0],[1,n]),t));return Ut(c)}}),OL=Object.freeze({hannWindow:Lb,hammingWindow:mE,frame:Bb,stft:gE}),Un,NL=function(r,n,e){return e===void 0&&(e=1),we(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u,h,f,p,m,g;return Ce(this,function(v){switch(v.label){case 0:return t=E(r,"predictions","inTopK"),i=E(n,"targets","inTopK"),k(t.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+t.rank}),k(t.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+t.rank+" and targets rank "+i.rank}),vt(t.shape.slice(0,t.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=t.shape[t.shape.length-1],k(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,t.data()];case 1:return a=v.sent(),[4,i.data()];case 2:for(s=v.sent(),c=[a.length/o,o],d=c[1],u=Cc("bool",l=c[0]),h=0;h<l;h++){for(f=h*d,p=a.subarray(f,f+d),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(_,y){return y.value-_.value}),u[h]=0,g=0;g<e;g++)if(m[g].index===s[h]){u[h]=1;break}}return r!==t&&t.dispose(),n!==i&&i.dispose(),[2,_n(u,i.shape,"bool")]}})})};(function(r){r[r.NONE=0]="NONE",r[r.MEAN=1]="MEAN",r[r.SUM=2]="SUM",r[r.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Un||(Un={}));var PL=O({absoluteDifference_:function(r,n,e,t){t===void 0&&(t=Un.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","absoluteDifference"),o=E(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=E(e,"weights","absoluteDifference")),vt(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return ho(s,a,t)}}),ho=O({computeWeightedLoss_:function(r,n,e){e===void 0&&(e=Un.SUM_BY_NONZERO_WEIGHTS);var t=E(r,"losses","computeWeightedLoss"),i=null;n!=null&&(i=E(n,"weights","computeWeightedLoss"));var o=i==null?t:t.mul(i);if(e===Un.NONE)return o;if(e===Un.SUM)return o.sum();if(e===Un.MEAN){if(i==null)return o.mean();var a=t.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(se(a)):s}if(e===Un.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(se(t.size));var c=i.mul(kc(t.shape)).notEqual(se(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+e)}}),LL=O({cosineDistance_:function(r,n,e,t,i){i===void 0&&(i=Un.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","cosineDistance"),a=E(n,"predictions","cosineDistance"),s=null;t!=null&&(s=E(t,"weights","cosineDistance")),vt(o.shape,a.shape,"Error in cosineDistance: ");var c=se(1).sub(o.mul(a).sum(e,!0));return ho(c,s,i)}}),BL=O({hingeLoss_:function(r,n,e,t){t===void 0&&(t=Un.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","hingeLoss"),o=E(n,"predictions","hingeLoss"),a=null;e!=null&&(a=E(e,"weights","hingeLoss")),vt(i.shape,o.shape,"Error in hingeLoss: ");var s=se(1);i=se(2).mul(i).sub(s);var c=s.sub(i.mul(o)).relu();return ho(c,a,t)}}),VL=O({huberLoss_:function(r,n,e,t,i){t===void 0&&(t=1),i===void 0&&(i=Un.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","huberLoss"),a=E(n,"predictions","huberLoss"),s=null;e!=null&&(s=E(e,"weights","huberLoss")),vt(o.shape,a.shape,"Error in huberLoss: ");var c=se(t),l=a.sub(o).abs(),d=XD(l,c),u=l.sub(d),h=se(.5).mul(d.square()).add(c.mul(u));return ho(h,s,i)}}),zL=O({logLoss_:function(r,n,e,t,i){t===void 0&&(t=1e-7),i===void 0&&(i=Un.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"labels","logLoss"),a=E(n,"predictions","logLoss"),s=null;e!=null&&(s=E(e,"weights","logLoss")),vt(o.shape,a.shape,"Error in logLoss: ");var c=se(1),l=se(t),d=o.mul(a.add(l).log()).neg().sub(c.sub(o).mul(c.sub(a).add(l).log()));return ho(d,s,i)}}),UL=O({meanSquaredError_:function(r,n,e,t){t===void 0&&(t=Un.SUM_BY_NONZERO_WEIGHTS);var i=E(r,"labels","meanSquaredError"),o=E(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=E(e,"weights","meanSquaredError")),vt(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return ho(s,a,t)}}),jL=O({sigmoidCrossEntropy_:function(r,n,e,t,i){t===void 0&&(t=0),i===void 0&&(i=Un.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"multiClassLabels","sigmoidCrossEntropy"),a=E(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=E(e,"weights","sigmoidCrossEntropy")),vt(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),t>0){var c=se(t),l=se(1),d=se(.5);o=o.mul(l.sub(c)).add(d.mul(c))}var u=function(h,f){var p=E(h,"labels","sigmoidCrossEntropyWithLogits"),m=E(f,"logits","sigmoidCrossEntropyWithLogits");vt(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),v=m.mul(p),_=m.abs().neg().exp().log1p();return g.sub(v).add(_)}(o,a);return ho(u,s,i)}}),WL=O({softmaxCrossEntropy_:function(r,n,e,t,i){t===void 0&&(t=0),i===void 0&&(i=Un.SUM_BY_NONZERO_WEIGHTS);var o=E(r,"onehotLabels","softmaxCrossEntropy"),a=E(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=E(e,"weights","softmaxCrossEntropy")),vt(o.shape,a.shape,"Error in softmaxCrossEntropy: "),t>0){var c=se(t),l=se(1),d=se(o.shape[1]);o=o.mul(l.sub(c)).add(c.div(d))}var u=function(h,f,p){if(p===void 0&&(p=-1),p===-1&&(p=f.rank-1),p!==f.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+f.rank+" and dim was "+p);return Of(function(m,g,v){var _=g.logSumExp([p],!0),y=g.toFloat().sub(_);return v([m,y]),{value:y.mul(m).neg().sum([p]),gradFunc:function(b,w){var C=w[0],A=w[1],R=Yn(b.shape,[p]);return[b.reshape(R).mul(C.toFloat().sub(A.exp())),b.reshape(R).mul(A.exp().sub(C.toFloat()))]}}})(h,f)}(o,a);return ho(u,s,i)}}),HL=Object.freeze({get Reduction(){return Un},absoluteDifference:PL,computeWeightedLoss:ho,cosineDistance:LL,hingeLoss:BL,huberLoss:VL,logLoss:zL,meanSquaredError:UL,sigmoidCrossEntropy:jL,softmaxCrossEntropy:WL});function HC(r,n){return n===void 0&&(n=!1),N.tidy(function(){if(r.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+r.shape.length+"D Tensor.");for(var e=r.shape[0],t=r.shape[1],i=X1(e),o=r.clone(),a=Ti([[1]],[1,1]),s=a.clone(),c=e>=t?t:e,l=function(u){var h,f=o,p=s,m=i;h=N.tidy(function(){var g=o.slice([u,u],[e-u,1]),v=g.norm(),_=o.slice([u,u],[1,1]),y=Ti([[-1]]).where(_.greater(0),Ti([[1]])),b=_.sub(y.mul(v)),w=g.div(b);s=w.shape[0]===1?a.clone():a.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var C=y.matMul(b).div(v).neg(),A=o.slice([u,0],[e-u,t]),R=C.mul(s);if(u===0)o=A.sub(R.matMul(s.transpose().matMul(A)));else{var S=A.sub(R.matMul(s.transpose().matMul(A)));o=o.slice([0,0],[u,t]).concat(S,0)}var D=i.slice([0,u],[e,i.shape[1]-u]);if(u===0)i=D.sub(D.matMul(s).matMul(R.transpose()));else{var F=D.sub(D.matMul(s).matMul(R.transpose()));i=i.slice([0,0],[e,u]).concat(F,1)}return[s,o,i]}),s=h[0],o=h[1],i=h[2],or([f,p,m])},d=0;d<c;++d)l(d);return!n&&e>t&&(i=i.slice([0,0],[e,t]),o=o.slice([0,0],[t,t])),[i,o]})}var GL=O({bandPart_:function(r,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var t=E(r,"a","bandPart");if(t.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+t.rank+".");var i=t.shape,o=t.shape.slice(-2),a=o[0],s=o[1];if(!(n<=a))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+a+").");if(!(e<=s))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+s+").");n<0&&(n=a),e<0&&(e=s);var c=yf(0,a,1,"int32").reshape([-1,1]),l=yf(0,s,1,"int32"),d=Mt(c,l),u=Bf(d.lessEqual(se(+n,"int32")),d.greaterEqual(se(-e,"int32"))),h=Lt([a,s],t.dtype);return Mn(kt(t.reshape([-1,a,s])).map(function(f){return qa(u,f,h)})).reshape(i)}}),qL=O({gramSchmidt_:function(r){var n;if(Array.isArray(r)){n=!1,k(r!=null&&r.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=r[0].shape[0],t=function(c){k(r[c].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+r[c].shape[0]+" vs. "+e+")"})},i=1;i<r.length;++i)t(i)}else n=!0,r=pb(r,r.shape[0],0).map(function(c){return J1(c,[0])});k(r.length<=r[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+r.length+") exceeds number of dimensions ("+r[0].shape[0]+")."});var o=[],a=r,s=function(c){o.push(N.tidy(function(){var l=a[c];if(c>0)for(var d=0;d<c;++d){var u=cE(o[d].mulStrict(l)).mul(o[d]);l=l.sub(u)}return l.div(hE(l,"euclidean"))}))};for(i=0;i<r.length;++i)s(i);return n?Mn(o,0):o}}),YL=O({qr_:function(r,n){if(n===void 0&&(n=!1),r.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+r.rank);if(r.rank===2)return HC(r,n);var e=r.shape.slice(0,r.shape.length-2).reduce(function(a,s){return a*s}),t=kt(r.reshape([e,r.shape[r.shape.length-2],r.shape[r.shape.length-1]]),0),i=[],o=[];return t.forEach(function(a){var s=HC(a,n),c=s[0],l=s[1];i.push(c),o.push(l)}),[Mn(i,0).reshape(r.shape),Mn(o,0).reshape(r.shape)]}}),$L=Object.freeze({bandPart:GL,gramSchmidt:qL,qr:YL});function Vf(r,n,e,t,i,o){t==null&&(t=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var a=r.shape[0];return e=Math.min(e,a),k(0<=t&&t<=1,function(){return"iouThreshold must be in [0, 1], but was '"+t+"'"}),k(r.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+r.rank+"'"}),k(r.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+r.shape[1]}),k(n.rank===1,function(){return"scores must be a 1D tensor"}),k(n.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+n.shape[0]}),k(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:t,scoreThreshold:i,softNmsSigma:o}}var KL=O({resizeBilinear_:function(r,n,e){e===void 0&&(e=!1);var t=E(r,"images","resizeBilinear");k(t.rank===3||t.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+t.rank+"."}),k(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=n[0],s=n[1],c=N.runKernelFunc(function(l,d){return d([i]),l.resizeBilinear(i,a,s,e)},{x:i},function(l,d){return{x:function(){return N.runKernelFunc(function(u){return u.resizeBilinearBackprop(l,d[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:a,newWidth:s});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),XL=O({resizeNearestNeighbor_:function(r,n,e){e===void 0&&(e=!1);var t=E(r,"images","resizeNearestNeighbor");k(t.rank===3||t.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+t.rank+"."}),k(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),k(t.dtype==="float32"||t.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=n[0],s=n[1],c=N.runKernelFunc(function(l,d){return d([i]),l.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(l,d){return{batchImages:function(){return N.runKernelFunc(function(u){return u.resizeNearestNeighborBackprop(l,d[0],e)},{})}}});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),QL=O({nonMaxSuppression_:function(r,n,e,t,i){t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=E(r,"boxes","nonMaxSuppression"),a=E(n,"scores","nonMaxSuppression"),s=Vf(o,a,e,t,i);e=s.maxOutputSize,t=s.iouThreshold,i=s.scoreThreshold;var c={maxOutputSize:e,iouThreshold:t,scoreThreshold:i};return N.runKernelFunc(function(l){return l.nonMaxSuppression(o,a,e,t,i)},{boxes:o,scores:a},null,"NonMaxSuppressionV3",c)}}),ZL=function(r,n,e,t,i){return t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),we(this,void 0,void 0,function(){var o,a,s,c,l,d,u;return Ce(this,function(h){switch(h.label){case 0:return o=E(r,"boxes","nonMaxSuppressionAsync"),a=E(n,"scores","nonMaxSuppressionAsync"),s=Vf(o,a,e,t,i),e=s.maxOutputSize,t=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return c=h.sent(),l=c[0],d=c[1],u=Cb(l,d,e,t,i),o!==r&&o.dispose(),a!==n&&a.dispose(),[2,u]}})})},JL=O({nonMaxSuppressionWithScore_:function(r,n,e,t,i,o){t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var a=E(r,"boxes","nonMaxSuppression"),s=E(n,"scores","nonMaxSuppression"),c=Vf(a,s,e,t,i,o),l={maxOutputSize:e=c.maxOutputSize,iouThreshold:t=c.iouThreshold,scoreThreshold:i=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},d=N.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:d[0],selectedScores:d[1]}}}),e3=function(r,n,e,t,i,o){return t===void 0&&(t=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),we(this,void 0,void 0,function(){var a,s,c,l,d,u,h;return Ce(this,function(f){switch(f.label){case 0:return a=E(r,"boxes","nonMaxSuppressionAsync"),s=E(n,"scores","nonMaxSuppressionAsync"),c=Vf(a,s,e,t,i,o),e=c.maxOutputSize,t=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=f.sent(),d=l[0],u=l[1],h=Db(d,u,e,t,i,o),a!==r&&a.dispose(),s!==n&&s.dispose(),[2,h]}})})},t3=O({cropAndResize_:function(r,n,e,t,i,o){var a=E(r,"image","cropAndResize"),s=E(n,"boxes","cropAndResize","float32"),c=E(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return k(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),k(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),k(c.rank===1&&c.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),k(t.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+t.length+"."}),k(t[0]>=1&&t[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+t}),k(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),N.runKernelFunc(function(d,u){return d.cropAndResize(a,s,c,t,i,o)},{images:a,boxes:s,boxInd:c},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:t})}}),Fd=Object.freeze({resizeBilinear:KL,resizeNearestNeighbor:XL,nonMaxSuppression:QL,nonMaxSuppressionAsync:ZL,nonMaxSuppressionWithScore:JL,nonMaxSuppressionWithScoreAsync:e3,cropAndResize:t3}),Vb=function(r,n){return!(r>0)||n==="linear"},zb=function(r,n,e){if(e==null||e==="linear")return r;if(e==="relu")return r.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},Ub=function(r,n){var e=n,t=sn(r.shape,n.shape);return t.length>0&&(e=e.sum(t)),e.reshape(r.shape)},jb=function(r,n,e){if(n==="linear")return r;if(n==="relu")return wt(r);if(n==="elu")return lE(r);if(n==="relu6")return uE(r);if(n==="prelu")return dE(r,e);throw new Error("Unknown fused activation "+n+".")},n3=O({fusedMatMul_:function(r){var n,e=r.a,t=r.b,i=r.transposeA,o=i!==void 0&&i,a=r.transposeB,s=a!==void 0&&a,c=r.bias,l=r.activation,d=l===void 0?"linear":l,u=r.preluActivationWeights;if(Vb(N.state.gradientDepth,d)===!1){var h=Ic(e,t,o,s);return c!=null&&(h=Ue(h,c)),jb(h,d,u)}var f=E(e,"a","fused matMul"),p=E(t,"b","fused matMul");n=Ht(f,p),f=n[0],p=n[1];var m=o?f.shape[f.rank-2]:f.shape[f.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=o?f.shape[f.rank-1]:f.shape[f.rank-2],_=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=f.shape.slice(0,-2),b=p.shape.slice(0,-2),w=ke(y),C=ke(b);k(f.rank>=2&&p.rank>=2&&f.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."}),k(an(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."}),k(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var A,R,S=f.shape.slice(0,-2).concat([v,_]),D=o?f.as3D(w,m,v):f.as3D(w,v,m),F=s?p.as3D(C,_,g):p.as3D(C,g,_);c!=null&&ct(S,(A=Ht(A=E(c,"bias","fused matMul"),f)[0]).shape),u!=null&&(R=E(u,"prelu weights","fused matMul"));var T={a:D,b:F};c!=null&&(T.bias=A),u!=null&&(T.preluActivationWeights=R);var V=[D,F];return N.runKernelFunc(function(z,U){var Y=z.fusedBatchMatMul({a:D,b:F,transposeA:o,transposeB:s,bias:A,activation:d,preluActivationWeights:R});return U([D,F,Y]),Y},T,function(z,U){var Y=U[0],q=U[1],H=U[2],$=zb(z,H,d),Z={};return c!=null&&(Z={bias:function(){return Ub(A,$)}}),Object.assign(o||s?!o&&s?{a:function(){return $.matMul(q,!1,!1)},b:function(){return $.matMul(Y,!0,!1)}}:o&&!s?{a:function(){return q.matMul($,!1,!0)},b:function(){return Y.matMul($,!1,!1)}}:{a:function(){return q.matMul($,!0,!0)},b:function(){return $.matMul(Y,!0,!0)}}:{a:function(){return $.matMul(q,!1,!0)},b:function(){return Y.matMul($,!0,!1)}},Z)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:d},V,[!0]).reshape(S)}}),r3=O({fusedConv2d_:function(r){var n=r.x,e=r.filter,t=r.strides,i=r.pad,o=r.dataFormat,a=o===void 0?"NHWC":o,s=r.dilations,c=s===void 0?[1,1]:s,l=r.dimRoundingMode,d=r.bias,u=r.activation,h=u===void 0?"linear":u,f=r.preluActivationWeights;if(h=h||"linear",Vb(N.state.gradientDepth,h)===!1){var p=yn(n,e,t,i,a,c,l);return d!=null&&(p=Ue(p,d)),jb(p,h,f)}var m=E(n,"x","conv2d"),g=E(e,"filter","conv2d"),v=m,_=!1;m.rank===3&&(_=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),k(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),k(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&k($t(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),k(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),k($n(t,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+c+"'"}),k(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var y,b,w=Zo(v.shape,g.shape,t,c,i,l);d!=null&&(y=Ht(y=E(d,"bias","fused conv2d"),m)[0],ct(w.outShape,y.shape)),f!=null&&(b=E(f,"prelu weights","fused conv2d"));var C={x:v,filter:g};d!=null&&(C.bias=y),f!=null&&(C.preluActivationWeights=b);var A=[g,v],R=N.runKernelFunc(function(S,D){var F=S.fusedConv2d({input:v,filter:g,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return D([g,v,F]),F},C,function(S,D){var F=D,T=F[0],V=F[1],z=F[2],U=zb(S,z,h);k(Ga(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var Y={};return d!=null&&(Y={bias:function(){return Ub(y,U)}}),Object.assign({x:function(){return nE(V.shape,U,T,t,i)},filter:function(){return Fb(V,U,T.shape,t,i)}},Y)},"FusedConv2D",{convInfo:w,activation:h},A,[!0]);return _?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),i3=O({fusedDepthwiseConv2d_:function(r){var n=r.x,e=r.filter,t=r.strides,i=r.pad,o=r.dataFormat,a=o===void 0?"NHWC":o,s=r.dilations,c=s===void 0?[1,1]:s,l=r.dimRoundingMode,d=r.bias,u=r.activation,h=u===void 0?"linear":u,f=r.preluActivationWeights;if(Vb(N.state.gradientDepth,h)===!1){var p=Rd(n,e,t,i,a,c,l);return d!=null&&(p=Ue(p,d)),jb(p,h,f)}var m=E(n,"x","depthwiseConv2d"),g=E(e,"filter","depthwiseConv2d"),v=m,_=!1;m.rank===3&&(_=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),k(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),k(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),k(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),c==null&&(c=[1,1]),k($n(t,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+c+"'"}),l!=null&&k($t(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var y,b,w=Zo(v.shape,g.shape,t,c,i,l,!0);d!=null&&(y=Ht(y=E(d,"bias","fused conv2d"),m)[0],ct(w.outShape,y.shape)),f!=null&&(b=E(f,"prelu weights","fused depthwiseConv2d"));var C={x:v,filter:g};d!=null&&(C.bias=y),f!=null&&(C.preluActivationWeights=b);var A=[g,v],R=N.runKernelFunc(function(S,D){var F=S.fusedDepthwiseConv2D({input:v,filter:g,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return D([g,v,F]),F},C,function(S,D){k(Ga(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var F=D[0],T=D[1],V=D[2],z=zb(S,V,h),U={};return d!=null&&(U={bias:function(){return Ub(y,z)}}),Object.assign({x:function(){return rE(T.shape,z,F,w)},filter:function(){return iE(T,z,F.shape,w)}},U)},"FusedDepthwiseConv2D",{convInfo:w,activation:h},A,[!0]);return _?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),o3=Object.freeze({matMul:n3,conv2d:r3,depthwiseConv2d:i3}),a3=Object.freeze({image:Fd,linalg:$L,losses:HL,spectral:AL,fused:o3,signal:OL,square:zN,squaredDifference:jD,conv1d:KP,conv2d:yn,conv3d:XP,depthwiseConv2d:Rd,separableConv2d:Md,conv2dTranspose:QP,conv3dTranspose:ZP,op:O,batchNormalization2d:gP,batchNormalization3d:vP,batchNormalization4d:bP,batchNormalization:_P,batchNorm:Rb,batchNorm2d:yP,batchNorm3d:xP,batchNorm4d:wP,booleanMaskAsync:$P,complex:In,real:Or,imag:Mi,concat:Ut,concat1d:kF,concat2d:IF,concat3d:AF,concat4d:RF,split:pb,matMul:Ic,dot:JP,outerProduct:eL,reverse:Td,reverse1d:tL,reverse2d:nL,reverse3d:rL,reverse4d:iL,maxPool:Kt,avgPool:uo,pool:oL,maxPool3d:aL,avgPool3d:sL,slice:ri,slice1d:cL,slice2d:lL,slice3d:Ob,slice4d:dL,abs:UN,acos:jN,acosh:WN,asin:HN,asinh:GN,atan:qN,atanh:YN,ceil:$N,clipByValue:kd,cos:KN,cosh:XN,erf:QN,exp:Pf,expm1:ZN,floor:JN,log:eP,log1p:tP,logSigmoid:nP,neg:Id,reciprocal:rP,round:iP,rsqrt:WD,sigmoid:Ab,sign:oP,isNaN:aP,isInf:sP,isFinite:cP,sin:lP,sinh:dP,softplus:uP,sqrt:hP,step:fP,tan:pP,tanh:mP,all:uL,any:hL,argMax:fL,argMin:pL,logSumExp:mL,max:Ka,mean:gL,min:vL,moments:bL,sum:cE,prod:_L,equal:QD,equalStrict:BP,greater:VP,greaterEqual:ZD,greaterEqualStrict:zP,greaterStrict:UP,less:jP,lessEqual:WP,lessEqualStrict:HP,lessStrict:GP,notEqual:qP,notEqualStrict:YP,add:Ue,addN:EP,addStrict:SP,atan2:kP,div:Nr,divNoNan:IP,divStrict:AP,floorDiv:KD,maximum:Mb,maximumStrict:RP,minimum:XD,minimumStrict:MP,mod:TP,modStrict:FP,mul:Yt,mulStrict:OP,pow:Sf,powStrict:NP,squaredDifferenceStrict:PP,sub:Mt,subStrict:LP,elu:lE,leakyRelu:yL,prelu:dE,relu:wt,relu6:uE,selu:xL,logicalAnd:Bf,logicalNot:CP,logicalOr:YD,logicalXor:DP,where:qa,whereAsync:$D,buffer:et,print:VF,batchToSpaceND:K1,broadcastTo:zF,cast:UF,clone:jF,cumsum:WF,depthToSpace:HF,expandDims:Vn,eye:X1,multinomial:GF,oneHot:Qv,pad:lo,pad1d:qF,pad2d:YF,pad3d:$F,pad4d:KF,rand:XF,randomNormal:QF,randomGamma:ZF,randomUniform:Q1,reshape:Kn,spaceToBatchND:Z1,squeeze:J1,stack:Mn,tile:ja,truncatedNormal:JF,unstack:kt,setdiff1dAsync:eO,fill:xr,linspace:SF,ones:kc,range:yf,scalar:se,tensor:_n,tensor1d:Ot,tensor2d:Ti,tensor3d:Mf,tensor4d:fn,tensor5d:CF,tensor6d:DF,variable:EF,zeros:Lt,onesLike:$1,zerosLike:ut,transpose:Pr,softmax:Xn,logSoftmax:nO,localResponseNormalization:wL,norm:hE,gather:Tb,unsortedSegmentSum:JD,basicLSTMCell:CL,multiRNNCell:DL,movingAverage:EL,stridedSlice:SL,topk:kL,scatterND:IL,fft:Nb,ifft:kf,rfft:Pb,irfft:fE,sparseToDense:RL,gatherND:ML,diag:TL,dropout:FL,hannWindow:Lb,hammingWindow:mE,frame:Bb,stft:gE,inTopKAsync:NL});function K(r,n){Array.isArray(r)||(r=[r]),r.forEach(function(e){e!=null&&k(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function Av(r,n,e,t){if(e==="linear")return r.linear(n);if(e==="relu")return r.relu(n);if(e==="elu")return r.elu(n);if(e==="relu6")return r.relu6(n);if(e==="prelu")return r.prelu(n,t);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var s3=function(r){function n(){var e=r.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new sD(e,N),e}return ii(n,r),n.prototype.write=function(e,t,i){this.firstUse&&(this.firstUse=!1,W().get("IS_NODE")&&bf(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,t,i,o){this.data.set(e,{values:t,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var t=this.data.get(e),i=t.dtype,o=t.complexTensors;return i==="complex64"?eb(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),i=t;if(e.dtype==="string")try{i=t.map(function(o){return gd(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return et(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,t,i){var o=this.write(e,t,i);return N.makeTensorFromDataId(o,t,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;t!=null&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return we(this,void 0,void 0,function(){var t;return Ce(this,function(i){return t=ti(),e(),[2,{kernelMs:ti()-t}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,t){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:N.keep(e.clone()),imag:N.keep(t.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,t,i){if(K(e,"slice"),bb(e.shape,t,i)){var o=_b(t,e.strides),a=ke(i);return _n(this.readSync(e.dataId).subarray(o,o+a),i,e.dtype)}for(var s=et(i,e.dtype),c=this.bufferSync(e),l=0;l<s.size;++l){var d=s.indexToLoc(l).map(function(u,h){return u+t[h]});s.values[l]=c.get.apply(c,d)}return s.toTensor()},n.prototype.stridedSlice=function(e,t,i,o){K(e,"stridedSlice");var a=Ff(t,i,o);if(a.some(function(f){return f===0}))return _n([],a);for(var s=et(a,e.dtype),c=this.bufferSync(e),l=0;l<s.size;l++){for(var d=s.indexToLoc(l),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[h]*o[h]+t[h];s.set.apply(s,[c.get.apply(c,u)].concat(d))}return s.toTensor()},n.prototype.diag=function(e){for(var t=this.readSync(e.dataId),i=et([e.size,e.size],e.dtype),o=i.values,a=0;a<t.length;a++)o[a*e.size+a]=t[a];return i.toTensor()},n.prototype.unstack=function(e,t){for(var i=e.shape[t],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(o[a++]=e.shape[s]);var c=new Array(e.rank).fill(0),l=e.shape.slice();l[t]=1;var d=new Array(i);for(s=0;s<d.length;s++)c[t]=s,d[s]=this.slice(e,c,l).reshape(o);return d},n.prototype.reverse=function(e,t){K(e,"reverse");for(var i=et(e.shape,e.dtype),o=this.bufferSync(e),a=function(c){var l=i.indexToLoc(c),d=l.slice();t.forEach(function(u){return d[u]=e.shape[u]-1-d[u]}),i.set.apply(i,[o.get.apply(o,d)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},n.prototype.concat=function(e,t){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(f){return Or(f)}),a=e.map(function(f){return Mi(f)});return In(this.concat(o,t),this.concat(a,t))}var s=e.map(function(f){var p=ke(f.shape.slice(t));return f.as2D(-1,p)}),c=Ha(s.map(function(f){return f.shape}),1),l=et(c,e[0].dtype).values;if(s[0].shape[0]===1){var d=0;s.forEach(function(f){l.set(i.readSync(f.dataId),d),d+=f.size})}else{var u=0;s.forEach(function(f){for(var p=i.readSync(f.dataId),m=0,g=0;g<f.shape[0];++g)for(var v=g*c[1]+u,_=0;_<f.shape[1];++_)l[v+_]=p[m++];u+=f.shape[1]})}var h=Ha(e.map(function(f){return f.shape}),t);return _n(l,h,e[0].dtype)},n.prototype.neg=function(e){return K(e,"neg"),this.multiply(se(-1),e)},n.prototype.add=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(e,t,bn(e.dtype,t.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var t=this;K(e,"addN");for(var i=e.map(function(d){return t.readSync(d.dataId)}),o=et(e[0].shape,e[0].dtype),a=o.values,s=0;s<e.length;s++)for(var c=i[s],l=0;l<a.length;l++)a[l]+=c[l];return o.toTensor()},n.prototype.softmax=function(e,t){var i=cn([t],e.shape),o=this.max(e,i),a=Yn(o.shape,i),s=this.subtract(e,o.reshape(a)),c=this.exp(s),l=this.sum(c,i).reshape(a);return this.realDivide(c,l)},n.prototype.subtract=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(e,t,bn(e.dtype,t.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,t){return K([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,t,i,o){K([e,t],"matMul");for(var a=i?e.shape[1]:e.shape[2],s=i?e.shape[2]:e.shape[1],c=o?t.shape[1]:t.shape[2],l=e.shape[0],d=this.readSync(e.dataId),u=this.readSync(t.dataId),h=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=h[0],p=h[1],m=h[2],g=o?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=g[0],_=g[1],y=g[2],b=s*c,w=et([l,s,c],e.dtype),C=w.values,A=this.blockSize,R=0;R<l;R++)for(var S=0;S<s;S+=A)for(var D=0;D<c;D+=A)for(var F=0;F<a;F+=A)for(var T=Math.min(S+A,s),V=Math.min(D+A,c),z=Math.min(F+A,a),U=S;U<T;U++)for(var Y=D;Y<V;Y++){for(var q=0,H=F;H<z;H++)q+=d[R*f+U*p+H*m]*u[H*v+Y*_+R*y];C[R*b+(U*c+Y)]+=q}return w.toTensor()},n.prototype.fusedBatchMatMul=function(e){var t=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,c=e.activation,l=e.preluActivationWeights,d=this.batchMatMul(t,i,o,a);return s&&(d=this.add(d,s)),c&&(d=Av(this,d,c,l)),d},n.prototype.multiply=function(e,t){return e.dtype==="complex64"||t.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(e,t,bn(e.dtype,t.dtype),function(i,o){return i*o})},n.prototype.realDivide=function(e,t){return K([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(i,o){return i/o})},n.prototype.floorDiv=function(e,t){return K([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,t){K(e,"sum"),rr("sum",t,e.rank);for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,bn(e.dtype,"int32")),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=0,p=0;p<c;++p)f+=d[h+p];l[u]=f}return s},n.prototype.prod=function(e,t){K(e,"sum");for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,bn(e.dtype,"int32")),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=1,p=0;p<c;++p)f*=d[h+p];l[u]=f}return s},n.prototype.unsortedSegmentSum=function(e,t,i){K(e,"unsortedSegmentSum");for(var o=[],a=e.rank-t.rank,s=0;s<a;++s)t=t.expandDims(s+1);for(s=0;s<i;++s){var c=se(s,"int32"),l=QD(c,t).asType("float32").mul(e).sum(0);o.push(l)}return Mn(o)},n.prototype.argMin=function(e,t){K(e,"argMin");var i=[t];rr("argMin",i,e.rank);for(var o=An(e.shape,i),a=o[0],s=o[1],c=Lt(a,"int32"),l=ke(s),d=this.readSync(c.dataId),u=this.readSync(e.dataId),h=0;h<d.length;++h){for(var f=h*l,p=u[f],m=0,g=0;g<l;++g){var v=u[f+g];v<p&&(p=v,m=g)}d[h]=m}return c},n.prototype.argMax=function(e,t){K(e,"argMax");var i=[t];rr("argMax",i,e.rank);for(var o=An(e.shape,i),a=o[0],s=o[1],c=Lt(a,"int32"),l=ke(s),d=this.readSync(c.dataId),u=this.readSync(e.dataId),h=0;h<d.length;++h){for(var f=h*l,p=u[f],m=0,g=0;g<l;++g){var v=u[f+g];v>p&&(p=v,m=g)}d[h]=m}return c},n.prototype.cumsum=function(e,t,i,o){if(K(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=bn(e.dtype,"int32"),s=Lt(e.shape,a),c=this.readSync(s.dataId),l=this.readSync(e.dataId),d=e.shape[e.rank-1],u=o?function(g,v){return g+d-v-1}:function(g,v){return g+v},h=0;h<l.length;h+=d)for(var f=0;f<d;f++){var p=u(h,f);if(f===0)c[p]=i?0:l[p];else{var m=u(h,f-1);c[p]=i?l[m]+c[m]:l[p]+c[m]}}return s},n.prototype.equal=function(e,t){return K([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,t){return K([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,t){return K([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,t){return K([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,t){return K([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,t){return K([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){K(e,"logicalNot");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)i[o]=t[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,t){return K([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,t){return K([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(i,o){return i||o})},n.prototype.select=function(e,t,i){K([e,t,i],"select");for(var o=this.readSync(e.dataId),a=this.readSync(t.dataId),s=this.readSync(i.dataId),c=Lt(t.shape,bn(t.dtype,i.dtype)),l=this.readSync(c.dataId),d=0,u=e.rank===0||e.rank>1||t.rank===1?1:ke(t.shape.slice(1)),h=0;h<o.length;h++)for(var f=0;f<u;f++)o[h]===1?l[d++]=a[h]:l[d++]=s[h];return c},n.prototype.where=function(e){K([e],"where");var t=this.readSync(e.dataId);return Eb(e.shape,t)},n.prototype.topk=function(e,t,i){return K(e,"topk"),hD(this.readSync(e.dataId),e.shape,e.dtype,t)},n.prototype.min=function(e,t){K(e,"min"),rr("min",t,e.rank);for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,e.dtype),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];m<f&&(f=m)}l[u]=f}return s},n.prototype.minimum=function(e,t){return K([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,t){return K([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},n.prototype.max=function(e,t){K(e,"max"),rr("max",t,e.rank);for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,e.dtype),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];m>f&&(f=m)}l[u]=f}return s},n.prototype.maximum=function(e,t){return K([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,t){K(e,"all"),rr("all",t,e.rank);for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,e.dtype),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];f=f&&m}l[u]=f}return s},n.prototype.any=function(e,t){K(e,"any"),rr("any",t,e.rank);for(var i=An(e.shape,t),o=i[0],a=i[1],s=Lt(o,e.dtype),c=ke(a),l=this.readSync(s.dataId),d=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*c,f=d[h],p=0;p<c;++p){var m=d[h+p];f=f||m}l[u]=f}return s},n.prototype.squaredDifference=function(e,t){return K([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){var a=i-o;return a*a})},n.prototype.ceil=function(e){K(e,"ceil");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.ceil(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){K(e,"floor");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.floor(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){K(e,"x");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)t[o]<0?i[o]=-1:t[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){K(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Number.isNaN(t[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){K(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Math.abs(t[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){K(e,"x");for(var t=this.readSync(e.dataId),i=new Uint8Array(t.length),o=0;o<t.length;++o)Number.isFinite(t[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){K(e,"round");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=Math.floor(t[o]);t[o]-a<.5?i[o]=Math.floor(t[o]):t[o]-a>.5?i[o]=Math.ceil(t[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){K(e,"exp");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.exp(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){K(e,"expm1");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=Math.expm1(t[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){K(e,"log");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.log(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){K(e,"log1p");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.log1p(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){K(e,"sqrt");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){K(e,"rsqrt");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){K(e,"reciprocal");for(var t=this.readSync(e.dataId),i=new Float32Array(t.length),o=0;o<t.length;++o)i[o]=1/t[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){K(e,"relu");for(var t=Lt(e.shape,e.dtype),i=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return t},n.prototype.relu6=function(e){K(e,"relu");for(var t=Lt(e.shape,e.dtype),i=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return t},n.prototype.prelu=function(e,t){return K([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){K(e,"elu");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];t[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},n.prototype.eluDer=function(e,t){K([e,t],"eluDer");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),a=this.readSync(e.dataId),s=0;s<o.length;++s){var c=o[s];i[s]=c>=1?a[s]:a[s]*(c+1)}return this.makeOutput(i,t.shape,"float32")},n.prototype.selu=function(e){K(e,"selu");for(var t=kb,i=Ib,o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var c=a[s];o[s]=c>=0?i*c:t*(Math.exp(c)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,t,i){K(e,"clip");for(var o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var c=a[s];o[s]=c>i?i:c<t?t:c}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.abs(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var a=i[2*o],s=i[2*o+1];t[o]=Math.hypot(a,s)}return this.makeOutput(t,e.shape,"float32")},n.prototype.int=function(e){K(e,"int");for(var t=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=i[o];return this.makeOutput(t,e.shape,"int32")},n.prototype.sigmoid=function(e){K(e,"sigmoid");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(t,e.shape,"float32")},n.prototype.softplus=function(e){K(e,"softplus");for(var t=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a]>-t,c=o[a]<t,l=Math.exp(o[a]),d=void 0;d=c?l:s?o[a]:Math.log(1+l),i[a]=d}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){K(e,"sin");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.sin(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.cos=function(e){K(e,"cos");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.cos(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.tan=function(e){K(e,"tan");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.tan(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.asin=function(e){K(e,"asin");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.asin(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.acos=function(e){K(e,"acos");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.acos(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atan=function(e){K(e,"atan");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.atan(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atan2=function(e,t){return K([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){K(e,"sinh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.sinh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.cosh=function(e){K(e,"cosh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.cosh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.tanh=function(e){K(e,"tanh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=a1(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.asinh=function(e){K(e,"asinh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.asinh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.acosh=function(e){K(e,"acosh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.acosh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.atanh=function(e){K(e,"atanh");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)t[o]=Math.atanh(i[o]);return this.makeOutput(t,e.shape,"float32")},n.prototype.erf=function(e){K(e,"erf");for(var t=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),c=1/(1+.3275911*s);t[o]=a*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-s*s))}return this.makeOutput(t,e.shape,"float32")},n.prototype.step=function(e,t){t===void 0&&(t=0),K(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:t}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights,l=this.conv2d(t,i,o);return a&&(l=this.add(l,a)),s&&(l=Av(this,l,s,c)),l},n.prototype.conv2d=function(e,t,i){K([e,t],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,c=i.dilationWidth,l=i.padInfo.left,d=i.padInfo.top,u=i.dataFormat==="channelsLast",h=et(i.outShape,e.dtype),f=e.strides[0],p=u?e.strides[1]:e.strides[2],m=u?e.strides[2]:1,g=u?1:e.strides[1],v=h.strides[0],_=u?h.strides[1]:h.strides[2],y=u?h.strides[2]:1,b=u?1:h.strides[1],w=this.readSync(e.dataId),C=this.readSync(t.dataId),A=h.values,R=0;R<i.batchSize;++R)for(var S=R*f,D=R*v,F=0;F<i.outHeight;++F)for(var T=D+F*_,V=F*i.strideHeight-d,z=0;z<o;z++){var U=V+z*s;if(!(U<0||U>=i.inHeight))for(var Y=z*t.strides[0],q=S+U*p,H=0;H<i.outWidth;++H)for(var $=T+H*y,Z=H*i.strideWidth-l,ce=0;ce<a;ce++){var ge=Z+ce*c;if(!(ge<0||ge>=i.inWidth))for(var xe=q+ge*m,We=Y+ce*t.strides[1],Re=0;Re<i.inChannels;++Re){for(var Me=w[xe+Re*g],qe=0;qe<i.outChannels;++qe)A[$+qe*b]+=Me*C[We+qe];We+=i.outChannels}}}return h.toTensor()},n.prototype.conv3d=function(e,t,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,c=i.dilationDepth,l=i.dilationHeight,d=i.dilationWidth,u=i.padInfo.front,h=i.padInfo.left,f=i.padInfo.top,p=et(i.outShape,e.dtype),m=this.readSync(e.dataId),g=this.readSync(t.dataId),v=p.values,_=0;_<i.batchSize;++_)for(var y=_*e.strides[0],b=_*p.strides[0],w=0;w<i.outDepth;++w)for(var C=b+w*p.strides[1],A=w*i.strideDepth-u,R=0;R<o;R++){var S=A+R*c;if(!(S<0||S>=i.inDepth))for(var D=R*t.strides[0],F=y+S*e.strides[1],T=0;T<i.outHeight;++T)for(var V=C+T*p.strides[2],z=T*i.strideHeight-f,U=0;U<a;U++){var Y=z+U*l;if(!(Y<0||Y>=i.inHeight))for(var q=D+U*t.strides[1],H=F+Y*e.strides[2],$=0;$<i.outWidth;++$)for(var Z=V+$*i.outChannels,ce=$*i.strideWidth-h,ge=0;ge<s;ge++){var xe=ce+ge*d;if(!(xe<0||xe>=i.inWidth))for(var We=q+ge*t.strides[2],Re=H+xe*i.inChannels,Me=We,qe=0;qe<i.inChannels;++qe){for(var Xe=m[Re+qe],tt=0;tt<i.outChannels;++tt)v[Z+tt]+=Xe*g[Me+tt];Me+=i.outChannels}}}}return p.toTensor()},n.prototype.conv2dDerInput=function(e,t,i){K([e,t],"conv2dDerInput");for(var o=et(i.inShape,"float32"),a=o.values,s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=t.strides,d=l[0],u=l[1],h=l[2],f=i.batchSize,p=i.filterHeight,m=i.filterWidth,g=i.inChannels,v=i.inHeight,_=i.inWidth,y=i.outChannels,b=i.outHeight,w=i.outWidth,C=i.strideHeight,A=i.strideWidth,R=i.dataFormat,S=p-1-i.padInfo.top,D=m-1-i.padInfo.left,F=R==="channelsLast",T=o.strides[0],V=F?o.strides[1]:o.strides[2],z=F?o.strides[2]:1,U=F?1:o.strides[1],Y=e.strides[0],q=F?e.strides[1]:e.strides[2],H=F?e.strides[2]:1,$=F?1:e.strides[1],Z=0;Z<f;++Z)for(var ce=0;ce<g;++ce)for(var ge=0;ge<v;++ge)for(var xe=ge-S,We=Math.max(0,Math.ceil(xe/C)),Re=Math.min(b,(p+xe)/C),Me=0;Me<_;++Me){for(var qe=Me-D,Xe=Math.max(0,Math.ceil(qe/A)),tt=Math.min(w,(m+qe)/A),pt=0,Ie=We;Ie<Re;++Ie)for(var Te=Ie*C-xe,$e=Xe;$e<tt;++$e)for(var mt=Y*Z+q*Ie+H*$e,Nt=d*(p-1-Te)+u*(m-1-($e*A-qe))+h*ce,Gt=0;Gt<y;++Gt)pt+=s[mt+$*Gt]*c[Nt+Gt];a[T*Z+V*ge+z*Me+U*ce]=pt}return o.toTensor()},n.prototype.conv3dDerInput=function(e,t,i){for(var o=et(i.inShape,"float32"),a=o.values,s=o.strides,c=s[0],l=s[1],d=s[2],u=s[3],h=this.readSync(e.dataId),f=e.strides,p=f[0],m=f[1],g=f[2],v=f[3],_=this.readSync(t.dataId),y=t.strides,b=y[0],w=y[1],C=y[2],A=y[3],R=i.batchSize,S=i.filterDepth,D=i.filterHeight,F=i.filterWidth,T=i.inChannels,V=i.inDepth,z=i.inHeight,U=i.inWidth,Y=i.outChannels,q=i.outDepth,H=i.outHeight,$=i.outWidth,Z=i.strideDepth,ce=i.strideHeight,ge=i.strideWidth,xe=S-1-i.padInfo.front,We=D-1-i.padInfo.top,Re=F-1-i.padInfo.left,Me=0;Me<R;++Me)for(var qe=0;qe<T;++qe)for(var Xe=0;Xe<V;++Xe)for(var tt=Xe-xe,pt=Math.max(0,Math.ceil(tt/Z)),Ie=Math.min(q,(S+tt)/Z),Te=0;Te<z;++Te)for(var $e=Te-We,mt=Math.max(0,Math.ceil($e/ce)),Nt=Math.min(H,(D+$e)/ce),Gt=0;Gt<U;++Gt){for(var di=Gt-Re,ui=Math.max(0,Math.ceil(di/ge)),sr=Math.min($,(F+di)/ge),ss=0,zi=pt;zi<Ie;++zi)for(var bo=zi*Z-tt,Ui=mt;Ui<Nt;++Ui)for(var cs=Ui*ce-$e,ji=ui;ji<sr;++ji)for(var Op=p*Me+m*zi+g*Ui+v*ji,ls=b*(S-1-bo)+w*(D-1-cs)+C*(F-1-(ji*ge-di))+A*qe,hi=0;hi<Y;++hi)ss+=h[Op+hi]*_[ls+hi];a[c*Me+l*Xe+d*Te+u*Gt+qe]=ss}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,t,i){K([e,t],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=i.dataFormat==="channelsLast",d=et(i.filterShape,"float32"),u=i.padInfo.left,h=i.padInfo.top,f=this.bufferSync(e),p=this.bufferSync(t),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((h-m)/o)),v=Math.min(i.outHeight,(i.inHeight+h-m)/o),_=0;_<c;++_)for(var y=Math.max(0,Math.ceil((u-_)/a)),b=Math.min(i.outWidth,(i.inWidth+u-_)/a),w=0;w<i.inChannels;++w)for(var C=0;C<i.outChannels;++C){for(var A=0,R=0;R<i.batchSize;++R)for(var S=g;S<v;++S)for(var D=m+S*o-h,F=y;F<b;++F){var T=_+F*a-u;A+=l?f.get(R,D,T,w)*p.get(R,S,F,C):f.get(R,w,D,T)*p.get(R,C,S,F)}d.set(A,m,_,w,C)}return d.toTensor()},n.prototype.conv3dDerFilter=function(e,t,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,c=i.filterDepth,l=i.filterHeight,d=i.filterWidth,u=et(i.filterShape,"float32"),h=u.values,f=u.strides,p=f[0],m=f[1],g=f[2],v=f[3],_=this.readSync(t.dataId),y=t.strides,b=y[0],w=y[1],C=y[2],A=y[3],R=this.readSync(e.dataId),S=e.strides,D=S[0],F=S[1],T=S[2],V=S[3],z=i.padInfo.front,U=i.padInfo.left,Y=i.padInfo.top,q=0;q<c;++q)for(var H=Math.max(0,Math.ceil((z-q)/o)),$=Math.min(i.outDepth,(i.inDepth+z-q)/o),Z=q*p,ce=0;ce<l;++ce)for(var ge=Math.max(0,Math.ceil((Y-ce)/a)),xe=Math.min(i.outHeight,(i.inHeight+Y-ce)/a),We=ce*m+Z,Re=0;Re<d;++Re)for(var Me=Math.max(0,Math.ceil((U-Re)/s)),qe=Math.min(i.outWidth,(i.inWidth+U-Re)/s),Xe=Re*g+We,tt=0;tt<i.inChannels;++tt)for(var pt=tt*v+Xe,Ie=0;Ie<i.outChannels;++Ie){for(var Te=0,$e=0;$e<i.batchSize;++$e)for(var mt=$e*D,Nt=$e*b,Gt=H;Gt<$;++Gt)for(var di=(q+Gt*o-z)*F+mt,ui=Gt*w+Nt,sr=ge;sr<xe;++sr)for(var ss=(ce+sr*a-Y)*T+di,zi=sr*C+ui,bo=Me;bo<qe;++bo){var Ui=bo*A+zi;Te+=R[(Re+bo*s-U)*V+ss+tt]*_[Ui+Ie]}h[pt+Ie]=Te}return u.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,c=e.preluActivationWeights,l=this.depthwiseConv2D(t,i,o);return a&&(l=this.add(l,a)),s&&(l=Av(this,l,s,c)),l},n.prototype.depthwiseConv2D=function(e,t,i){K([e,t],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,c=i.dilationWidth,l=i.padInfo.left,d=i.padInfo.top,u=i.outChannels/i.inChannels,h=et(i.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=h.values,g=0;g<i.batchSize;++g)for(var v=g*e.strides[0],_=g*h.strides[0],y=0;y<i.outHeight;++y)for(var b=_+y*h.strides[1],w=y*i.strideHeight-l,C=0;C<o;++C){var A=w+C*s;if(!(A<0||A>=i.inHeight))for(var R=C*t.strides[0],S=v+A*e.strides[1],D=0;D<i.outWidth;++D)for(var F=b+D*h.strides[2],T=D*i.strideWidth-d,V=0;V<a;++V){var z=T+V*c;if(!(z<0||z>=i.inWidth))for(var U=R+V*t.strides[1],Y=S+z*i.inChannels,q=F,H=U,$=0;$<i.inChannels;++$){for(var Z=f[Y+$],ce=0;ce<u;++ce)m[q+ce]+=Z*p[H+ce];q+=u,H+=u}}}return h.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,t,i){K([e,t],"depthwiseConv2DDerInput");for(var o=et(i.inShape,"float32"),a=o.values,s=o.strides,c=s[0],l=s[1],d=s[2],u=this.readSync(e.dataId),h=e.strides,f=h[0],p=h[1],m=h[2],g=this.readSync(t.dataId),v=t.strides,_=v[0],y=v[1],b=v[2],w=i.batchSize,C=i.filterHeight,A=i.filterWidth,R=i.inChannels,S=i.inHeight,D=i.inWidth,F=i.outChannels,T=i.outHeight,V=i.outWidth,z=i.strideHeight,U=i.strideWidth,Y=C-1-i.padInfo.top,q=A-1-i.padInfo.left,H=F/R,$=0;$<w;++$)for(var Z=0;Z<R;++Z)for(var ce=0;ce<S;++ce)for(var ge=ce-Y,xe=Math.max(0,Math.ceil(ge/z)),We=Math.min(T,(C+ge)/z),Re=0;Re<D;++Re){for(var Me=Re-q,qe=Math.max(0,Math.ceil(Me/U)),Xe=Math.min(V,(A+Me)/U),tt=0,pt=xe;pt<We;++pt)for(var Ie=pt*z-ge,Te=qe;Te<Xe;++Te)for(var $e=f*$+p*pt+m*Te,mt=_*(C-1-Ie)+y*(A-1-(Te*U-Me))+b*Z,Nt=0;Nt<H;++Nt)tt+=u[$e+(Z*H+Nt)]*g[mt+Nt];a[c*$+l*ce+d*Re+Z]=tt}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,t,i){K([e,t],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=et(i.filterShape,"float32"),d=i.padInfo.left,u=i.padInfo.top,h=i.outChannels/i.inChannels,f=this.bufferSync(e),p=this.bufferSync(t),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),v=Math.min(i.outHeight,(i.inHeight+u-m)/o),_=0;_<c;++_)for(var y=Math.max(0,Math.ceil((d-_)/a)),b=Math.min(i.outWidth,(i.inWidth+d-_)/a),w=0;w<i.outChannels;++w){for(var C=Math.trunc(w/h),A=w%h,R=0,S=0;S<i.batchSize;++S)for(var D=g;D<v;++D)for(var F=m+D*o-u,T=y;T<b;++T){var V=_+T*a-d;R+=f.get(S,F,V,C)*p.get(S,D,T,w)}l.set(R,m,_,C,A)}return l.toTensor()},n.prototype.tile=function(e,t){return K(e,"tile"),uD(this.bufferSync(e),t)},n.prototype.pad=function(e,t,i){K(e,"pad");var o=t.map(function(h,f){return h[0]+e.shape[f]+h[1]}),a=t.map(function(h){return h[0]}),s=this.bufferSync(e),c=et(o,e.dtype);i!==0&&c.values.fill(i);for(var l=0;l<e.size;l++){var d=s.indexToLoc(l),u=d.map(function(h,f){return h+a[f]});c.set.apply(c,[s.get.apply(s,d)].concat(u))}return c.toTensor()},n.prototype.transpose=function(e,t){K(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[t[o]];var a=this.readSync(e.dataId),s=et(i,e.dtype),c=this.bufferSync(e);for(o=0;o<e.size;++o){for(var l=c.indexToLoc(o),d=new Array(l.length),u=0;u<d.length;u++)d[u]=l[t[u]];var h=s.locToIndex(d);s.values[h]=a[o]}return s.toTensor()},n.prototype.gather=function(e,t,i){K([e,t],"gather");var o=e.shape.slice(),a=this.readSync(t.dataId);o[i]=a.length;for(var s=et(o,e.dtype),c=this.bufferSync(e),l=0;l<s.size;++l){var d=s.indexToLoc(l),u=d.slice();u[i]=a[d[i]];var h=c.locToIndex(u);s.values[l]=c.values[h]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,t,i){K([e],"batchToSpaceND");var o=t.reduce(function(u,h){return u*h}),a=xf(e.shape,t,o),s=wf(a.length,t.length),c=Cf(e.shape,t,o),l=eD(i,t.length),d=tD(c,i,t.length);return e.reshape(a).transpose(s).reshape(c).slice(l,d)},n.prototype.spaceToBatchND=function(e,t,i){K([e],"spaceToBatchND");var o=t.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,i);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var c=e.pad(a),l=xf(c.shape,t,o,!1),d=wf(l.length,t.length,!1),u=Cf(c.shape,t,o,!1);return c.reshape(l).transpose(d).reshape(u)},n.prototype.pool=function(e,t,i){K(e,"pool");for(var o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,u=t.padInfo.top,h=t.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(e.dataId),m=et(t.outShape,e.dtype),g=m.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],_=t.outShape[2]*t.outShape[3],y=t.outShape[3],b=0;b<t.batchSize;++b)for(var w=b*v,C=b*e.strides[0],A=0;A<t.inChannels;++A)for(var R=0;R<t.outHeight;++R)for(var S=R*o-u,D=Math.max(0,S),F=Math.min(t.inHeight,l+S),T=w+R*_,V=0;V<t.outWidth;++V){for(var z=V*a-h,U=Math.max(0,z),Y=Math.min(t.inWidth,d+z),q=f,H=0,$=0,Z=D;Z<F;Z+=s){for(var ce=C+Z*e.strides[1],ge=U;ge<Y;ge+=c){var xe=p[ce+ge*e.strides[2]+A];i==="max"&&xe>q?q=xe:i==="avg"&&(H+=xe,$++)}if(isNaN(q))break}g[T+V*y+A]=i==="avg"?H/$:q}return m.toTensor()},n.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},n.prototype.maxPoolPositions=function(e,t){for(var i=et(t.outShape,"int32"),o=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,u=t.padInfo.top,h=t.padInfo.left,f=this.bufferSync(e),p=0;p<t.batchSize;++p)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outHeight;++g){for(var v=g*o-u,_=v;_<0;)_+=s;for(var y=Math.min(t.inHeight,l+v),b=0;b<t.outWidth;++b){for(var w=b*a-h,C=w;C<0;)C+=c;for(var A=Math.min(t.inWidth,d+w),R=Number.NEGATIVE_INFINITY,S=-1,D=_;D<y;D+=s)for(var F=D-v,T=C;T<A;T+=c){var V=T-w,z=f.get(p,D,T,m);z>R&&(R=z,S=F*d+V)}i.set(S,p,g,b,m)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(e,t,i,o){K([t,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,o),s=o.strideHeight,c=o.strideWidth,l=o.dilationHeight,d=o.dilationWidth,u=o.effectiveFilterHeight,h=o.effectiveFilterWidth,f=h-1-o.padInfo.left,p=u-1-o.padInfo.top,m=et(t.shape,"float32"),g=this.bufferSync(a),v=this.bufferSync(e),_=0;_<o.batchSize;++_)for(var y=0;y<o.inChannels;++y)for(var b=0;b<o.inHeight;++b)for(var w=0;w<o.inWidth;++w){for(var C=b-p,A=w-f,R=0,S=0;S<u;S+=l){var D=(C+S)/s;if(!(D<0||D>=o.outHeight||Math.floor(D)!==D))for(var F=0;F<h;F+=d){var T=(A+F)/c;if(!(T<0||T>=o.outWidth||Math.floor(T)!==T)){var V=u*h-1-g.get(_,D,T,y)===S*h+F?1:0;V!==0&&(R+=v.get(_,D,T,y)*V)}}}m.set(R,_,b,w,y)}return m.toTensor()},n.prototype.avgPoolBackprop=function(e,t,i){K([e,t],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,c=i.filterWidth,l=i.dilationHeight,d=i.dilationWidth,u=i.effectiveFilterHeight,h=i.effectiveFilterWidth,f=h-1-i.padInfo.left,p=u-1-i.padInfo.top,m=et(t.shape,"float32"),g=1/(s*c),v=this.bufferSync(e),_=0;_<i.batchSize;++_)for(var y=0;y<i.inChannels;++y)for(var b=0;b<i.inHeight;++b)for(var w=0;w<i.inWidth;++w){for(var C=b-p,A=w-f,R=0,S=0;S<u;S+=l){var D=(C+S)/o;if(!(D<0||D>=i.outHeight||Math.floor(D)!==D))for(var F=0;F<h;F+=d){var T=(A+F)/a;T<0||T>=i.outWidth||Math.floor(T)!==T||(R+=v.get(_,D,T,y))}}m.set(R*g,_,b,w,y)}return m.toTensor()},n.prototype.pool3d=function(e,t,i){K(e,"pool3d");for(var o=t.strideDepth,a=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(e.dataId),y=et(t.outShape,e.dtype),b=y.values,w=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],C=t.outShape[2]*t.outShape[3]*t.outShape[4],A=t.outShape[3]*t.outShape[4],R=t.outShape[4],S=0;S<t.batchSize;++S)for(var D=S*w,F=S*e.strides[0],T=0;T<t.inChannels;++T)for(var V=0;V<t.outDepth;++V){for(var z=V*o-p,U=z;U<0;)U+=c;for(var Y=Math.min(t.inDepth,u+z),q=D+V*C,H=0;H<t.outHeight;++H){for(var $=H*a-m,Z=$;Z<0;)Z+=l;for(var ce=Math.min(t.inHeight,h+$),ge=q+H*A,xe=0;xe<t.outWidth;++xe){for(var We=xe*s-g,Re=We;Re<0;)Re+=d;for(var Me=Math.min(t.inWidth,f+We),qe=ge+xe*R,Xe=v,tt=0,pt=0,Ie=U;Ie<Y;Ie+=c){for(var Te=F+Ie*e.strides[1],$e=Z;$e<ce;$e+=l){for(var mt=Te+$e*e.strides[2],Nt=Re;Nt<Me;Nt+=d){var Gt=_[mt+Nt*e.strides[3]+T];if(i==="max"&&Gt>Xe?Xe=Gt:i==="avg"&&(tt+=Gt,pt++),isNaN(Xe))break}if(isNaN(Xe))break}if(isNaN(Xe))break}b[qe+T]=i==="avg"?tt/pt:Xe}}}return y.toTensor()},n.prototype.avgPool3d=function(e,t){return K(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,t,i){K([e,t],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,c=i.filterDepth,l=i.filterHeight,d=i.filterWidth,u=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,g=i.effectiveFilterWidth,v=p-1-i.padInfo.front,_=g-1-i.padInfo.left,y=m-1-i.padInfo.top,b=et(t.shape,"float32"),w=1/(c*l*d),C=this.bufferSync(e),A=0;A<i.batchSize;++A)for(var R=0;R<i.inChannels;++R)for(var S=0;S<i.inDepth;++S)for(var D=0;D<i.inHeight;++D)for(var F=0;F<i.inWidth;++F){for(var T=S-v,V=D-y,z=F-_,U=0,Y=0;Y<p;Y+=u){var q=(T+Y)/o;if(!(q<0||q>=i.outDepth||Math.floor(q)!==q))for(var H=0;H<m;H+=h){var $=(V+H)/a;if(!($<0||$>=i.outHeight||Math.floor($)!==$))for(var Z=0;Z<g;Z+=f){var ce=(z+Z)/s;ce<0||ce>=i.outWidth||Math.floor(ce)!==ce||(U+=C.get(A,q,$,ce,R))}}}b.set(U*w,A,S,D,F,R)}return b.toTensor()},n.prototype.maxPool3d=function(e,t){return K(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,t){for(var i=et(t.outShape,"int32"),o=t.strideDepth,a=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left,v=this.bufferSync(e),_=0;_<t.batchSize;++_)for(var y=0;y<t.inChannels;++y)for(var b=0;b<t.outDepth;++b){for(var w=b*o-p,C=w;C<0;)C+=c;for(var A=Math.min(t.inDepth,u+w),R=0;R<t.outHeight;++R){for(var S=R*a-m,D=S;D<0;)D+=l;for(var F=Math.min(t.inHeight,h+S),T=0;T<t.outWidth;++T){for(var V=T*s-g,z=V;z<0;)z+=d;for(var U=Math.min(t.inWidth,f+V),Y=Number.NEGATIVE_INFINITY,q=-1,H=C;H<A;H+=c)for(var $=H-w,Z=D;Z<F;Z+=l)for(var ce=Z-S,ge=z;ge<U;ge+=d){var xe=ge-V,We=v.get(_,H,Z,ge,y);We>=Y&&(Y=We,q=$*h*f+ce*h+xe)}i.set(q,_,b,R,T,y)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,t,i,o){K([t,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,o),s=o.strideDepth,c=o.strideHeight,l=o.strideWidth,d=o.dilationDepth,u=o.dilationHeight,h=o.dilationWidth,f=o.effectiveFilterDepth,p=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=f-1-o.padInfo.front,v=m-1-o.padInfo.left,_=p-1-o.padInfo.top,y=et(t.shape,"float32"),b=this.bufferSync(a),w=this.bufferSync(e),C=0;C<o.batchSize;++C)for(var A=0;A<o.inChannels;++A)for(var R=0;R<o.inDepth;++R)for(var S=0;S<o.inHeight;++S)for(var D=0;D<o.inWidth;++D){for(var F=R-g,T=S-_,V=D-v,z=0,U=0;U<f;U+=d){var Y=(F+U)/s;if(!(Y<0||Y>=o.outDepth||Math.floor(Y)!==Y))for(var q=0;q<p;q+=u){var H=(T+q)/c;if(!(H<0||H>=o.outHeight||Math.floor(H)!==H))for(var $=0;$<m;$+=h){var Z=(V+$)/l;if(!(Z<0||Z>=o.outWidth||Math.floor(Z)!==Z)){var ce=f*p*m-1-b.get(C,Y,H,Z,A)===U*p*m+q*m+$?1:0;ce!==0&&(z+=w.get(C,Y,H,Z,A)*ce)}}}}y.set(z,C,R,S,D,A)}return y.toTensor()},n.prototype.cast=function(e,t){return xb(e,t,this)},n.prototype.reshape=function(e,t){return Ef(e,t)},n.prototype.avgPool=function(e,t){return K(e,"avgPool"),this.pool(e,t,"avg").toFloat()},n.prototype.resizeBilinear=function(e,t,i,o){K(e,"resizeBilinear");for(var a=e.shape,s=a[0],c=a[1],l=a[2],d=a[3],u=this.readSync(e.dataId),h=new Float32Array(ke([s,t,i,d])),f=[o&&t>1?c-1:c,o&&i>1?l-1:l],p=[o&&t>1?t-1:t,o&&i>1?i-1:i],m=0,g=f[0]/p[0],v=f[1]/p[1],_=0;_<s;_++)for(var y=0;y<t;y++)for(var b=g*y,w=Math.floor(b),C=b-w,A=Math.min(c-1,Math.ceil(b)),R=_*e.strides[0]+w*e.strides[1],S=_*e.strides[0]+A*e.strides[1],D=0;D<i;D++)for(var F=v*D,T=Math.floor(F),V=F-T,z=Math.min(l-1,Math.ceil(F)),U=R+T*e.strides[2],Y=S+T*e.strides[2],q=R+z*e.strides[2],H=S+z*e.strides[2],$=0;$<d;$++){var Z=u[U+$],ce=u[Y+$],ge=Z+(u[q+$]-Z)*V,xe=ge+(ce+(u[H+$]-ce)*V-ge)*C;h[m++]=xe}return _n(h,[s,t,i,d])},n.prototype.resizeBilinearBackprop=function(e,t,i){K([e,t],"resizeBilinearBackprop");for(var o=t.shape,a=o[0],s=o[1],c=o[2],l=o[3],d=e.shape,u=d[1],h=d[2],f=new Float32Array(a*s*c*l),p=[i&&u>1?s-1:s,i&&h>1?c-1:c],m=[i&&u>1?u-1:u,i&&h>1?h-1:h],g=p[0]/m[0],v=p[1]/m[1],_=this.readSync(e.dataId),y=0,b=0;b<a;b++)for(var w=b*t.strides[0],C=0;C<u;C++)for(var A=C*g,R=Math.floor(A),S=Math.min(Math.ceil(A),s-1),D=w+R*t.strides[1],F=w+S*t.strides[1],T=A-R,V=1-T,z=0;z<h;z++)for(var U=z*v,Y=Math.floor(U),q=Math.min(Math.ceil(U),c-1),H=U-Y,$=1-H,Z=D+Y*t.strides[2],ce=D+q*t.strides[2],ge=F+Y*t.strides[2],xe=F+q*t.strides[2],We=V*$,Re=V*H,Me=T*$,qe=T*H,Xe=0;Xe<l;Xe++){var tt=_[y++];f[Z+Xe]+=tt*We,f[ce+Xe]+=tt*Re,f[ge+Xe]+=tt*Me,f[xe+Xe]+=tt*qe}return fn(f,[a,c,s,l],t.dtype)},n.prototype.resizeNearestNeighbor=function(e,t,i,o){K(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],c=a[1],l=a[2],d=a[3],u=this.readSync(e.dataId),h=new Float32Array(s*t*i*d),f=[o&&t>1?c-1:c,o&&i>1?l-1:l],p=[o&&t>1?t-1:t,o&&i>1?i-1:i],m=f[0]/p[0],g=f[1]/p[1],v=0,_=0;_<s;_++)for(var y=_*e.strides[0],b=0;b<t;b++)for(var w=m*b,C=y+Math.min(c-1,o?Math.round(w):Math.floor(w))*e.strides[1],A=0;A<i;A++)for(var R=g*A,S=C+Math.min(l-1,o?Math.round(R):Math.floor(R))*e.strides[2],D=0;D<d;D++){var F=u[S+D];h[v++]=F}return _n(h,[s,t,i,d],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,t,i){K([e,t],"resizeNearestNeighborBackprop");for(var o=t.shape,a=o[0],s=o[1],c=o[2],l=o[3],d=e.shape,u=d[1],h=d[2],f=new Float32Array(a*s*c*l),p=this.readSync(e.dataId),m=[i&&u>1?s-1:s,i&&h>1?c-1:c],g=[i&&u>1?u-1:u,i&&h>1?h-1:h],v=m[0]/g[0],_=m[1]/g[1],y=1/v,b=1/_,w=2*Math.ceil(y)+2,C=2*Math.ceil(b)+2,A=0;A<a;A++)for(var R=A*t.strides[0],S=0;S<s;S++)for(var D=R+S*t.strides[1],F=Math.floor(S*y),T=Math.floor(F-w/2),V=0;V<c;V++)for(var z=D+V*t.strides[2],U=Math.floor(V*b),Y=Math.floor(U-C/2),q=0;q<l;q++){for(var H=0,$=0;$<w;$++){var Z=$+T;if(!(Z<0||Z>=u)){var ce=R+Z*e.strides[1],ge=Z*v;if(S===Math.min(s-1,i?Math.round(ge):Math.floor(ge)))for(var xe=0;xe<C;xe++){var We=xe+Y;if(!(We<0||We>=h)){var Re=ce+We*e.strides[2],Me=We*_;V===Math.min(c-1,i?Math.round(Me):Math.floor(Me))&&(H+=p[Re+q])}}}}f[z+q]=H}return fn(f,t.shape,t.dtype)},n.prototype.batchNormalization=function(e,t,i,o,a,s){K([e,t,i,a,s],"batchNorm");for(var c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=this.readSync(i.dataId),u=a?this.readSync(a.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),f=new Float32Array(c.length),p=h.length,m=u.length,g=d.length,v=l.length,_=0,y=0,b=0,w=0,C=0;C<c.length;++C)f[C]=h[_++]+(c[C]-l[y++])*u[b++]/Math.sqrt(d[w++]+o),_>=p&&(_=0),y>=v&&(y=0),b>=m&&(b=0),w>=g&&(w=0);return fn(f,e.shape)},n.prototype.localResponseNormalization4D=function(e,t,i,o,a){K(e,"localResponseNormalization4D");var s=e.shape[3],c=s-1,l=this.readSync(e.dataId),d=e.size,u=new Float32Array(d);function h(g){for(var v=g%s,_=g-v+Math.max(0,v-t),y=g-v+Math.min(v+t,c),b=0;_<=y;_++){var w=l[_];b+=w*w}return b}for(var f=0;f<d;f++){var p=h(f),m=l[f]*Math.pow(i+o*p,-a);u[f]=m}return fn(u,e.shape)},n.prototype.LRNGrad=function(e,t,i,o,a,s,c){K(e,"LRNGrad");for(var l=e.shape[3],d=this.readSync(e.dataId),u=this.readSync(t.dataId),h=this.readSync(i.dataId),f=new Float32Array(e.size),p=e.size,m=0;m<p;m++){for(var g=m%l,v=m-g+Math.max(0,g-o),_=m-g+Math.min(l,g+o+1),y=0,b=v;b<_;b++)y+=Math.pow(u[b],2);for(y=s*y+a,b=v;b<_;b++){var w=-2*s*c*u[b]*h[m]/y;m===b&&(w+=Math.pow(y,-c)),w*=d[m],f[b]+=w}}return fn(f,e.shape)},n.prototype.multinomial=function(e,t,i,o){K(e,"multinomial");for(var a=t?e:Xn(e),s=a.shape[0],c=a.shape[1],l=Lt([s,i],"int32"),d=this.readSync(l.dataId),u=this.readSync(a.dataId),h=0;h<s;++h){var f=h*c,p=new Float32Array(c-1);p[0]=u[f];for(var m=1;m<p.length;++m)p[m]=p[m-1]+u[f+m];for(var g=Tf(o.toString()),v=h*i,_=0;_<i;++_){var y=g();d[v+_]=p.length;for(var b=0;b<p.length;b++)if(y<p[b]){d[v+_]=b;break}}}return l},n.prototype.oneHot=function(e,t,i,o){K(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(o);for(var s=this.readSync(e.dataId),c=0;c<e.size;++c)s[c]>=0&&s[c]<t&&(a[c*t+s[c]]=i);return Ti(a,[e.size,t],"int32")},n.prototype.nonMaxSuppression=function(e,t,i,o,a){return K(e,"nonMaxSuppression"),Cb(this.readSync(e.dataId),this.readSync(t.dataId),i,o,a)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,t){for(var i=e.shape[0],o=e.shape[1],a=et(e.shape,"float32"),s=et(e.shape,"float32"),c=Or(e).as2D(i,o),l=Mi(e).as2D(i,o),d=0;d<i;d++)for(var u=c.slice([d,0],[1,o]),h=l.slice([d,0],[1,o]),f=In(u,h),p=this.readSync(this.fftImpl(f,t).dataId),m=0;m<o;m++){var g=CC(p,m);a.values[d*o+m]=g.real,s.values[d*o+m]=g.imag}return In(a.toTensor(),s.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,t){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,t).as2D(e.shape[0],e.shape[1]);return t&&(a=In(Or(a).div(se(o)),Mi(a).div(se(o)))),a}var s=this.readSync(e.dataId),c=function(l){for(var d=new Float32Array(l.length/2),u=new Float32Array(l.length/2),h=0;h<l.length;h+=2)d[h/2]=l[h],u[h/2]=l[h+1];return{real:d,imag:u}}(this.fourierTransformByMatmul(s,o,t));return In(c.real,c.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,t,i){if(t===1)return e;var o=this.readSync(e.dataId),a=t/2,s=function(v){for(var _=Math.ceil(v.length/4),y=new Float32Array(_),b=new Float32Array(_),w=0;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(o),c=In(s.real,s.imag).as1D(),l=function(v){for(var _=Math.floor(v.length/4),y=new Float32Array(_),b=new Float32Array(_),w=2;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(o),d=In(l.real,l.imag).as1D();c=this.fftRadix2(c,a,i),d=this.fftRadix2(d,a,i);var u=function(v,_){for(var y=new Float32Array(v/2),b=new Float32Array(v/2),w=0;w<Math.ceil(v/2);w++){var C=(_?2:-2)*Math.PI*(w/v);y[w]=Math.cos(C),b[w]=Math.sin(C)}return{real:y,imag:b}}(t,i),h=In(u.real,u.imag).mul(d),f=c.add(h),p=c.sub(h),m=Or(f).concat(Or(p)),g=Mi(f).concat(Mi(p));return In(m,g).as1D()},n.prototype.fourierTransformByMatmul=function(e,t,i){for(var o=new Float32Array(2*t),a=0;a<t;a++){for(var s=0,c=0,l=0;l<t;l++){var d=iO(a*l,t,i),u=CC(e,l);s+=u.real*d.real-u.imag*d.imag,c+=u.real*d.imag+u.imag*d.real}i&&(s/=t,c/=t),rO(o,s,c,a)}return o},n.prototype.depthToSpace=function(e,t,i){k(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),k(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var o=e.shape[0],a=e.shape[1],s=e.shape[2],c=e.shape[3],l=a*t,d=s*t,u=c/(t*t),h=this.readSync(e.dataId),f=new Float32Array(o*l*d*u),p=0,m=0;m<o;++m)for(var g=0;g<l;++g)for(var v=Math.floor(g/t),_=g%t,y=0;y<d;++y)for(var b=Math.floor(y/t),w=(_*t+y%t)*u,C=0;C<u;++C){var A=C+w+c*(b+s*(v+a*m));f[p++]=h[A]}return fn(f,[o,l,d,u])},n.prototype.broadcastedBinaryOp=function(e,t,i,o){var a=ct(e.shape,t.shape),s=et(a,i),c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=ao(e.shape,a),u=ao(t.shape,a),h=s.values;if(d.length+u.length===0)for(var f=0;f<h.length;++f)h[f]=o(c[f%c.length],l[f%l.length]);else{var p=this.bufferSync(e),m=this.bufferSync(t),g=function(v){var _=s.indexToLoc(v),y=_.slice(-e.rank);d.forEach(function(A){return y[A]=0});var b=p.locToIndex(y),w=_.slice(-t.rank);u.forEach(function(A){return w[A]=0});var C=m.locToIndex(w);h[v]=o(c[b],l[C])};for(f=0;f<h.length;++f)g(f)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,t,i){var o=ct(e.shape,t.shape),a=et(o,"float32"),s=et(o,"float32"),c=this.readSync(e.dataId),l=this.readSync(t.dataId),d=ao(e.shape,o),u=ao(t.shape,o),h=a.values,f=s.values;if(d.length+u.length===0)for(var p=0;p<h.length;p++){var m=p%c.length,g=p%l.length,v=i(c[2*m],c[2*m+1],l[2*g],l[2*g+1]);h[p]=v.real,f[p]=v.imag}else{var _=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=this.bufferSync(this.data.get(t.dataId).complexTensors.real),b=function(w){var C=a.indexToLoc(w),A=C.slice(-e.rank);d.forEach(function(T){return A[T]=0});var R=_.locToIndex(A),S=C.slice(-t.rank);u.forEach(function(T){return S[T]=0});var D=y.locToIndex(S),F=i(c[2*R],c[2*R+1],l[2*D],l[2*D+1]);h[w]=F.real,f[w]=F.imag};for(p=0;p<h.length;p++)b(p)}return this.complex(a.toTensor(),s.toTensor())},n.prototype.split=function(e,t,i){return dD(e,t,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,t,i,o,a,s){for(var c=e.shape,l=c[0],d=c[1],u=c[2],h=c[3],f=t.shape[0],p=o[0],m=o[1],g=et([f,p,m,h],"float32"),v=this.readSync(t.dataId),_=this.readSync(i.dataId),y=this.readSync(e.dataId),b=e.strides,w=g.strides,C=0;C<f;C++){var A=4*C,R=v[A],S=v[A+1],D=v[A+2],F=v[A+3],T=_[C];if(!(T>=l))for(var V=p>1?(D-R)*(d-1)/(p-1):0,z=m>1?(F-S)*(u-1)/(m-1):0,U=0;U<p;U++){var Y=p>1?R*(d-1)+U*V:.5*(R+D)*(d-1);if(Y<0||Y>d-1)for(var q=0;q<m;q++)for(var H=0;H<h;H++){var $=H+q*w[2]+U*w[1]+C*w[0];g.values[$]=s}else if(a==="bilinear"){var Z=Math.floor(Y),ce=Math.ceil(Y),ge=Y-Z;for(q=0;q<m;q++)if((Ie=m>1?S*(u-1)+q*z:.5*(S+F)*(u-1))<0||Ie>u-1)for(H=0;H<h;H++)$=H+q*w[2]+U*w[1]+C*w[0],g.values[$]=s;else{var xe=Math.floor(Ie),We=Math.ceil(Ie),Re=Ie-xe;for(H=0;H<h;H++){var Me=y[$=H+xe*b[2]+Z*b[1]+T*b[0]],qe=y[$=H+We*b[2]+Z*b[1]+T*b[0]],Xe=y[$=H+xe*b[2]+ce*b[1]+T*b[0]],tt=Me+(qe-Me)*Re,pt=Xe+(y[$=H+We*b[2]+ce*b[1]+T*b[0]]-Xe)*Re;$=H+q*w[2]+U*w[1]+C*w[0],g.values[$]=tt+(pt-tt)*ge}}}else for(q=0;q<m;++q){var Ie;if((Ie=m>1?S*(u-1)+q*z:.5*(S+F)*(u-1))<0||Ie>u-1)for(H=0;H<h;H++)$=H+q*w[2]+U*w[1]+C*w[0],g.values[$]=s;else{var Te=Math.round(Ie),$e=Math.round(Y);for(H=0;H<h;H++){var mt=H+Te*b[2]+$e*b[1]+T*b[0],Nt=H+q*w[2]+U*w[1]+C*w[0];g.values[Nt]=y[mt]}}}}}return g.toTensor()},n.prototype.sparseToDense=function(e,t,i,o){var a=xd(0,e,i),s=a.sliceRank,c=a.numUpdates,l=a.sliceSize,d=a.strides,u=a.outputSize;return this.scatter(e,t,i,u,l,c,s,d,o,!1)},n.prototype.gatherND=function(e,t){var i=t.shape,o=i[i.length-1],a=gb(e,t),s=a[0],c=a[1],l=a[2],d=a[3];if(c===0)return _n([],s,e.dtype);for(var u=new vd([c,l],e.dtype),h=this.readSync(t.dataId),f=this.readSync(e.dataId),p=0;p<c;p++){for(var m=[],g=0,v=0;v<o;v++){var _=h[p*o+v];g+=_*d[v],m.push(_)}if(g<0||g>=e.size/l)throw new Error("Invalid indices: "+m+" does not index into "+e.shape);for(var y=0;y<l;y++)u.values[p*l+y]=f[g*l+y]}return u.toTensor().reshape(s)},n.prototype.scatterND=function(e,t,i){var o=xd(0,e,i),a=o.sliceRank,s=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,u=se(0);return this.scatter(e,t,i,d,c,s,a,l,u,!0)},n.prototype.fill=function(e,t,i){var o=md(i=i||Ec(t),ke(e));return o.fill(t),N.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var t=md(e.dtype,ke(e.shape));return this.makeOutput(t,e.shape,e.dtype)},n.prototype.linspace=function(e,t,i){return wb(e,t,i)},n.prototype.scatter=function(e,t,i,o,a,s,c,l,d,u){var h=[o/a,a],f=this.readSync(e.dataId),p=this.readSync(t.dataId);if(o===0)return _n([],i,t.dtype);var m=new vd(h,t.dtype);m.values.fill(this.readSync(d.dataId)[0]);for(var g=0;g<s;g++){for(var v=[],_=0,y=0;y<c;y++){var b=f[g*c+y];v.push(b),_+=b*l[y]}if(_<0||_>=o/a)throw new Error("Invalid indices: "+v+" does not index into "+i);for(var w=0;w<a;w++)u?m.values[_*a+w]+=p[g*a+w]:m.values[_*a+w]=t.rank===0?p[0]:p[g*a+w]}return m.toTensor().reshape(i)},n}(cD);N.registerBackend("cpu",function(){return new s3},1);for(nf=0,Rv=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs,i=n,o=i.boxes,a=i.scores,s=t,c=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,u=s.softNmsSigma,h=e;K(o,"NonMaxSuppressionWithScore");var f=Db(h.data.get(o.dataId).values,h.data.get(a.dataId).values,c,l,d,u);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n.x,i=e;K(t,"square");for(var o=i.data.get(t.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var c=o[s];a[s]=c*c}return{dataId:i.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}},{kernelName:Dd,backendName:"cpu",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n,i=t.a,o=t.b,a=e;K([i,o],Dd);var s=a.data.get(i.dataId).values,c=a.data.get(o.dataId).values,l=function(h,f,p,m,g,v){var _=ct(h,f),y=_.length,b=ni(_),w=Cc(g,ke(_)),C=h.length,A=f.length,R=ni(h),S=ni(f),D=ao(h,_),F=ao(f,_);if(D.length+F.length===0)for(var T=0;T<w.length;++T)w[T]=v(p[T%p.length],m[T%m.length]);else{var V=function(z){var U=m1(z,y,b),Y=U.slice(-C);D.forEach(function(Z){return Y[Z]=0});var q=jv(Y,C,R),H=U.slice(-A);F.forEach(function(Z){return H[Z]=0});var $=jv(H,A,S);w[z]=v(p[q],m[$])};for(T=0;T<w.length;++T)V(T)}return[w,_]}(i.shape,o.shape,s,c,i.dtype,function(h,f){var p=h-f;return p*p}),d=l[0],u=l[1];return{dataId:a.write(d,u,i.dtype),shape:u,dtype:i.dtype}}}];nf<Rv.length;nf++)r1(Rv[nf]);var nf,Rv,fc,c3=function(r){this.variableNames=["A"];var n=zn(),e=r[0],t=r[1];this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+t+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},l3=function(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=zn(),e=r[0],t=r[1];this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+t+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(rf=0,Mv=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs,i=n.pixels,o=t.numChannels,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,c=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=c[0],d=c[1],u=[d,l],h=[d,l,o];(s||a)&&(fc==null&&(fc=document.createElement("canvas").getContext("2d")),fc.canvas.width=l,fc.canvas.height=d,fc.drawImage(i,0,0,l,d),i=fc.canvas);var f=e.makeTensorInfo(u,"int32");e.texData.get(f.dataId).usage=br.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(f.dataId),i);var p=W().getBool("WEBGL_PACK")?new l3(h):new c3(h),m=e.runWebGLProgram(p,[f],"int32");return e.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=r.attrs;bf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=n,o=i.boxes,a=i.scores,s=t,c=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,u=s.softNmsSigma,h=e,f=Db(h.readSync(o.dataId),h.readSync(a.dataId),c,l,d,u);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n.x,i=e,o=new it(t.shape,"return x * x;");return i.runWebGLProgram(o,[t],t.dtype)}},{kernelName:Dd,backendName:"webgl",kernelFunc:function(r){var n=r.inputs,e=r.backend,t=n,i=t.a,o=t.b,a=e,s=W().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new io("return (a - b) * (a - b);",i.shape,o.shape):new Qt("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}}];rf<Mv.length;rf++)r1(Mv[rf]);var rf,Mv;for(of=0,Tv=[{kernelName:"Square",gradFunc:function(r,n){var e=n[0];return{x:function(){return r.mul(e.toFloat().mul(2))}}}},{kernelName:Dd,gradFunc:function(r,n){var e=n[0],t=n[1],i=se(2);return{a:function(){return Yt(r,Yt(i,Mt(e,t)))},b:function(){return Yt(r,Yt(i,Mt(t,e)))}}}}];of<Tv.length;of++)hF(Tv[of]);var of,Tv,d3=function(){function r(){}return r.prototype.fetch=function(n,e){return fetch(n,e)},r.prototype.now=function(){return performance.now()},r.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},r.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},r}();W().get("IS_BROWSER")&&W().setPlatform("browser",new d3);var Fv,u3=function(){return mC()},h3=function(){function r(){this.util=gC(),this.textEncoder=new this.util.TextEncoder}return r.prototype.fetch=function(n,e){return W().global.fetch!=null?W().global.fetch(n,e):(Fv==null&&(Fv=u3()),Fv(n,e))},r.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},r.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},r.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},r}();W().get("IS_NODE")&&W().setPlatform("node",new h3);var tb={float32:4,int32:4,uint16:2,uint8:1,bool:1},If=4;function vE(r,n){for(var e={},t=0,i=function(s){var c=s.name,l=s.dtype,d=s.shape,u=ke(d),h=void 0;if("quantization"in s){var f=s.quantization;if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+f.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=tb[f.dtype],m=r.slice(t,t+u*p),g=f.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")h=Float32Array.from(g,function(C){return C*f.scale+f.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+l);h=Int32Array.from(g,function(C){return Math.round(C*f.scale+f.min)})}t+=u*p}else if(l==="string"){var v=ke(s.shape);h=[];for(var _=0;_<v;_++){var y=new Uint32Array(r.slice(t,t+If))[0];t+=If;var b=new Uint8Array(r.slice(t,t+y));h.push(b),t+=y}}else{var w=tb[l];if(m=r.slice(t,t+u*w),l==="float32")h=new Float32Array(m);else if(l==="int32")h=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+l);h=new Uint8Array(m)}t+=u*w}e[c]=_n(h,d,l)},o=0,a=n;o<a.length;o++)i(a[o]);return e}function f3(r){if(r===null)throw new Error("Invalid input value: "+JSON.stringify(r));var n=0,e=[];r.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var t=new Uint8Array(n),i=0;return e.forEach(function(o){t.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),t.buffer}var nb=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function GC(r){return nb?Buffer.byteLength(r):new Blob([r]).size}function Wb(r){var n=0;r.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),t=0;return r.forEach(function(i){e.set(new Uint8Array(i),t),t+=i.byteLength}),e.buffer}function qC(r){for(r=r.trim();r.endsWith("/");)r=r.slice(0,r.length-1);var n=r.split("/");return n[n.length-1]}function Od(r){if(r.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:r.modelTopology==null?0:GC(JSON.stringify(r.modelTopology)),weightSpecsBytes:r.weightSpecs==null?0:GC(JSON.stringify(r.weightSpecs)),weightDataBytes:r.weightData==null?0:r.weightData.byteLength}}var yr=function(){function r(){this.saveRouters=[],this.loadRouters=[]}return r.getInstance=function(){return r.instance==null&&(r.instance=new r),r.instance},r.registerSaveRouter=function(n){r.getInstance().saveRouters.push(n)},r.registerLoadRouter=function(n){r.getInstance().loadRouters.push(n)},r.getSaveHandlers=function(n){return r.getHandlers(n,"save")},r.getLoadHandlers=function(n,e){return r.getHandlers(n,"load",e)},r.getHandlers=function(n,e,t){var i=[];return(e==="load"?r.getInstance().loadRouters:r.getInstance().saveRouters).forEach(function(o){var a=o(n,t);a!==null&&i.push(a)}),i},r}(),yc="://",Xo=function(){function r(){this.managers={}}return r.getInstance=function(){return r.instance==null&&(r.instance=new r),r.instance},r.registerManager=function(n,e){k(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(yc)&&(n=n.slice(0,n.indexOf(yc))),k(n.length>0,function(){return"scheme must not be an empty string."});var t=r.getInstance();k(t.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),t.managers[n]=e},r.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},r.getSchemes=function(){return Object.keys(this.getInstance().managers)},r}();function hf(r){if(r.indexOf(yc)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Xo.getSchemes().join(","));return{scheme:r.split(yc)[0],path:r.split(yc)[1]}}function YC(r,n,e){return e===void 0&&(e=!1),we(this,void 0,void 0,function(){var t,i,o,a,s,c,l,d,u;return Ce(this,function(h){switch(h.label){case 0:return k(r!==n,function(){return"Old path and new path are the same: '"+r+"'"}),k((t=yr.getLoadHandlers(r)).length>0,function(){return"Copying failed because no load handler is found for source URL "+r+"."}),k(t.length<2,function(){return"Copying failed because more than one ("+t.length+") load handlers for source URL "+r+"."}),i=t[0],k((o=yr.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),k(o.length<2,function(){return"Copying failed because more than one ("+t.length+") save handlers for destination URL "+n+"."}),a=o[0],s=hf(r).scheme,c=hf(r).path,l=s===hf(r).scheme,[4,i.load()];case 1:return d=h.sent(),e&&l?[4,Xo.getManager(s).removeModel(c)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(d)];case 4:return u=h.sent(),!e||l?[3,6]:[4,Xo.getManager(s).removeModel(c)];case 5:h.sent(),h.label=6;case 6:return[2,u.modelArtifactsInfo]}})})}var za="models_store",Ko="model_info_store";function bE(){if(!W().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var r=window||self,n=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB||r.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function rb(r){var n=r.result;n.createObjectStore(za,{keyPath:"modelPath"}),n.createObjectStore(Ko,{keyPath:"modelPath"})}var xc=function(){function r(n){if(this.indexedDB=bE(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return r.prototype.save=function(n){return we(this,void 0,void 0,function(){return Ce(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},r.prototype.load=function(){return we(this,void 0,void 0,function(){return Ce(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},r.prototype.databaseAction=function(n,e){var t=this;return new Promise(function(i,o){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return rb(a)},a.onsuccess=function(){var s=a.result;if(e==null){var c=s.transaction(za,"readonly"),l=c.objectStore(za).get(t.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+t.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),o(l.error)},c.oncomplete=function(){return s.close()}}else{var d,u=Od(e),h=s.transaction(Ko,"readwrite"),f=h.objectStore(Ko),p=f.put({modelPath:t.modelPath,modelArtifactsInfo:u});p.onsuccess=function(){var m=(d=s.transaction(za,"readwrite")).objectStore(za).put({modelPath:t.modelPath,modelArtifacts:e,modelArtifactsInfo:u});m.onsuccess=function(){return i({modelArtifactsInfo:u})},m.onerror=function(g){var v=(f=h.objectStore(Ko)).delete(t.modelPath);v.onsuccess=function(){return s.close(),o(m.error)},v.onerror=function(_){return s.close(),o(m.error)}}},p.onerror=function(m){return s.close(),o(p.error)},h.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},r.URL_SCHEME="indexeddb://",r}(),$C=function(r){return W().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(xc.URL_SCHEME)?(n=r.slice(xc.URL_SCHEME.length),new xc(n)):null;var n};yr.registerSaveRouter($C),yr.registerLoadRouter($C);var p3=function(){function r(){this.indexedDB=bE()}return r.prototype.listModels=function(){return we(this,void 0,void 0,function(){var n=this;return Ce(this,function(e){return[2,new Promise(function(t,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return rb(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(Ko,"readonly"),c=s.objectStore(Ko).getAll();c.onsuccess=function(){for(var l={},d=0,u=c.result;d<u.length;d++){var h=u[d];l[h.modelPath]=h.modelArtifactsInfo}t(l)},c.onerror=function(l){return a.close(),i(c.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},r.prototype.removeModel=function(n){return we(this,void 0,void 0,function(){var e=this;return Ce(this,function(t){var i;return n=(i=n).startsWith(xc.URL_SCHEME)?i.slice(xc.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return rb(s)},s.onsuccess=function(){var c,l=s.result,d=l.transaction(Ko,"readwrite"),u=d.objectStore(Ko),h=u.get(n);h.onsuccess=function(){if(h.result==null)return l.close(),a(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var f=u.delete(n),p=function(){var m=(c=l.transaction(za,"readwrite")).objectStore(za).delete(n);m.onsuccess=function(){return o(h.result.modelArtifactsInfo)},m.onerror=function(g){return a(h.error)}};f.onsuccess=p,f.onerror=function(m){return p(),l.close(),a(h.error)}},h.onerror=function(f){return l.close(),a(h.error)},d.oncomplete=function(){c==null?l.close():c.oncomplete=function(){return l.close()}}},s.onerror=function(c){return a(s.error)}})]})})},r}();if(W().getBool("IS_BROWSER"))try{Xo.registerManager(xc.URL_SCHEME,new p3)}catch{}var oo="/",bc="tensorflowjs_models",_E="info",m3="model_topology",g3="weight_specs",v3="weight_data",b3="model_metadata";function yE(r){return{info:[bc,r,_E].join(oo),topology:[bc,r,m3].join(oo),weightSpecs:[bc,r,g3].join(oo),weightData:[bc,r,v3].join(oo),modelMetadata:[bc,r,b3].join(oo)}}function _3(r){var n=r.split(oo);if(n.length<3)throw new Error("Invalid key format: "+r);return n.slice(1,n.length-1).join(oo)}var wc=function(){function r(n){if(!W().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=yE(this.modelPath)}return r.prototype.save=function(n){return we(this,void 0,void 0,function(){var e,t,i;return Ce(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),t=JSON.stringify(n.weightSpecs),i=Od(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,t),this.LS.setItem(this.keys.weightData,function(a){if(nb)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),c="",l=0,d=s.length;l<d;l++)c+=String.fromCharCode(s[l]);return btoa(c)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},r.prototype.load=function(){return we(this,void 0,void 0,function(){var n,e,t,i,o,a,s;return Ce(this,function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(t=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=t,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy,e.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(l){if(nb){var d=Buffer.from(l,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var u=atob(l),h=new Uint8Array(u.length),f=0;f<u.length;++f)h.set([u.charCodeAt(f)],f);return h.buffer}(s),[2,e]})})},r.URL_SCHEME="localstorage://",r}(),KC=function(r){return W().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(wc.URL_SCHEME)?(n=r.slice(wc.URL_SCHEME.length),new wc(n)):null;var n};yr.registerSaveRouter(KC),yr.registerLoadRouter(KC);var y3=function(){function r(){k(W().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),k(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return r.prototype.listModels=function(){return we(this,void 0,void 0,function(){var n,e,t,i,o,a;return Ce(this,function(s){for(n={},e=bc+oo,t=oo+_E,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(t)&&(a=_3(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},r.prototype.removeModel=function(n){return we(this,void 0,void 0,function(){var e,t;return Ce(this,function(i){var o;if(n=(o=n).startsWith(wc.URL_SCHEME)?o.slice(wc.URL_SCHEME.length):o,e=yE(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return t=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,t]})})},r}();if(W().getBool("IS_BROWSER"))try{Xo.registerManager(wc.URL_SCHEME,new y3)}catch{}var x3="model",w3=".json",C3=".weights.bin";function XC(r){return new Promise(function(n){return setTimeout(n)}).then(r)}var Ov=function(){function r(n){if(!W().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(r.URL_SCHEME)&&(n=n.slice(r.URL_SCHEME.length)),n!=null&&n.length!==0||(n=x3),this.modelTopologyFileName=n+w3,this.weightDataFileName=n+C3}return r.prototype.save=function(n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s;return Ce(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return t=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:t},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,XC(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,XC(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Od(n)}]}})})},r.URL_SCHEME="downloads://",r}(),D3=function(){function r(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return r.prototype.load=function(){return we(this,void 0,void 0,function(){var n,e,t=this;return Ce(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(c){var l=JSON.parse(c.target.result),d=l.modelTopology;if(d!=null){e.length===0&&o({modelTopology:d});var u=l.weightsManifest;if(u!=null){var h;try{h=t.checkManifestAndWeightFiles(u,e)}catch(g){return void a(g)}var f=[],p=[],m=[];u.forEach(function(g){g.paths.forEach(function(v){p.push(v),m.push(null)}),f.push.apply(f,g.weights)}),u.forEach(function(g){g.paths.forEach(function(v){var _=new FileReader;_.onload=function(y){var b=y.target.result,w=p.indexOf(v);m[w]=b,m.indexOf(null)===-1&&o({modelTopology:d,weightSpecs:f,weightData:Wb(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},_.onerror=function(y){return a("Failed to weights data from file of path '"+v+"'.")},_.readAsArrayBuffer(h[v])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(c){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},r.prototype.checkManifestAndWeightFiles=function(n,e){for(var t=[],i=e.map(function(c){return qC(c.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(c){var l=qC(c);if(t.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(t.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[c]=e[i.indexOf(l)]});if(t.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+t.length+") and the number of weight files provided ("+e.length+").");return o},r}();function QC(r,n,e,t){(function(o){k(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(r),function(o,a){k(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),k(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),k(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,t=t??1);var i=0;return Promise.all(r.map(function(o){return o.then(function(a){var s=e+ ++i/r.length*(t-e);return n(s),a}),o}))}function xE(r,n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d;return Ce(this,function(u){switch(u.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?W().platform.fetch:n.fetchFunc,t=r.map(function(h){return e(h,n.requestInit,{isBinary:!0})}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(t)];case 1:return a=u.sent(),[3,4];case 2:return[4,QC(t,n.onProgress,i,o)];case 3:a=u.sent(),u.label=4;case 4:return s=a.map(function(h){return h.arrayBuffer()}),c=.5,l=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=u.sent(),[3,8];case 6:return[4,QC(s,n.onProgress,c,l)];case 7:d=u.sent(),u.label=8;case 8:return[2,d]}})})}function ZC(r){var n=this;return function(e,t,i){return t===void 0&&(t=""),we(n,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p;return Ce(this,function(m){switch(m.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],c=[],e.forEach(function(g,v){var _=0;g.weights.forEach(function(y){var b="quantization"in y?y.quantization.dtype:y.dtype,w=tb[b]*ke(y.shape),C=function(){o[v]=!0,a[v]==null&&(a[v]=[]),a[v].push({manifestEntry:y,groupOffset:_,sizeBytes:w})};i!=null?i.forEach(function(A,R){A===y.name&&(C(),s[R]=!0)}):C(),c.push(y.name),_+=w})}),!s.every(function(g){return g}))throw l=i.filter(function(g,v){return!s[v]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=o.reduce(function(g,v,_){return v&&g.push(_),g},[]),u=[],d.forEach(function(g){e[g].paths.forEach(function(v){var _=t+(t.endsWith("/")?"":"/")+v;u.push(_)})}),[4,r(u)];case 1:return h=m.sent(),f={},p=0,d.forEach(function(g){for(var v=e[g].paths.length,_=0,y=0;y<v;y++)_+=h[p+y].byteLength;for(var b=new ArrayBuffer(_),w=new Uint8Array(b),C=0,A=0;A<v;A++){var R=new Uint8Array(h[p+A]);w.set(R,C),C+=R.byteLength}a[g].forEach(function(S){var D=vE(b.slice(S.groupOffset,S.groupOffset+S.sizeBytes),[S.manifestEntry]);for(var F in D)f[F]=D[F]}),p+=v}),[2,f]}})})}}yr.registerSaveRouter(function(r){return W().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(Ov.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new Ov(n)}(r.slice(Ov.URL_SCHEME.length)):null});var wE=function(){function r(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(k(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=W().platform.fetch,k(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&k(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return r.prototype.save=function(n){return we(this,void 0,void 0,function(){var e,t,i,o;return Ce(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,t=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:t},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Od(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},r.prototype.load=function(){return we(this,void 0,void 0,function(){var n,e,t,i,o,a,s,c,l,d,u,h;return Ce(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=f.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");f.label=2;case 2:return f.trys.push([2,4,,5]),[4,n.json()];case 3:return e=f.sent(),[3,5];case 4:throw f.sent(),t="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t);case 5:if(i=e.modelTopology,o=e.weightsManifest,a=e.generatedBy,s=e.convertedBy,c=e.format,l=e.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:h=f.sent(),d=h[0],u=h[1],f.label=7;case 7:return[2,{modelTopology:i,weightSpecs:d,weightData:u,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:c}]}})})},r.prototype.loadWeights=function(n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u,h;return Ce(this,function(f){switch(f.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,t=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),v=p.substring(0,m),_=g>m?p.substring(g):"";return[v+"/",_]}(e),i=t[0],o=t[1],a=this.weightPathPrefix||i,s=[],c=0,l=n;c<l.length;c++)d=l[c],s.push.apply(s,d.weights);return u=[],n.forEach(function(p){p.paths.forEach(function(m){u.push(a+m+o)})}),[4,xE(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=f.sent(),[2,[s,Wb(h)]]}})})},r.URL_SCHEME_REGEX=/^https?:\/\//,r}();function ib(r){return r.match(wE.URL_SCHEME_REGEX)!=null}var JC=function(r,n){return typeof fetch>"u"?null:(Array.isArray(r)?r.every(function(e){return ib(e)}):ib(r))?ob(r,{onProgress:n}):null};function ob(r,n){return new wE(r,n)}yr.registerSaveRouter(JC),yr.registerLoadRouter(JC);var Nv=function(){function r(n){this.modelArtifacts=n}return r.prototype.load=function(){return we(this,void 0,void 0,function(){return Ce(this,function(n){return[2,this.modelArtifacts]})})},r}(),E3=function(){function r(n){this.saveHandler=n}return r.prototype.save=function(n){return we(this,void 0,void 0,function(){return Ce(this,function(e){return[2,this.saveHandler(n)]})})},r}(),zf=Object.freeze({browserFiles:function(r){return new D3(r)},browserHTTPRequest:function(r,n){return ob(r,n)},concatenateArrayBuffers:Wb,decodeWeights:vE,encodeWeights:function(r,n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s=this;return Ce(this,function(c){switch(c.label){case 0:for(e=[],t=[],i=Array.isArray(r)?r.map(function(l){return l.name}):Object.keys(r),o=function(l){var d=i[l],u=Array.isArray(r)?r[l].tensor:r[d];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+u.dtype);var h={name:d,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){var f=new Promise(function(p){return we(s,void 0,void 0,function(){var m,g,v,_,y,b,w;return Ce(this,function(C){switch(C.label){case 0:return[4,u.bytes()];case 1:for(m=C.sent(),g=m.reduce(function(A,R){return A+R.length},0)+If*m.length,v=new Uint8Array(g),_=0,y=0;y<m.length;y++)b=m[y],w=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(w,_),_+=If,v.set(b,_),_+=b.length;return p(v),[2]}})})});t.push(f)}else t.push(u.data());n!=null&&(h.group=n),e.push(h)},a=0;a<i.length;++a)o(a);return[4,Promise.all(t)];case 1:return[2,{data:f3(c.sent()),specs:e}]}})})},fromMemory:function(r,n,e,t){return arguments.length===1?r.modelTopology!=null||r.weightSpecs!=null?new Nv(r):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Nv({modelTopology:r})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Nv({modelTopology:r,weightSpecs:n,weightData:e,trainingConfig:t}))},getLoadHandlers:function(r,n){return yr.getLoadHandlers(r,n)},getModelArtifactsInfoForJSON:Od,getSaveHandlers:function(r){return yr.getSaveHandlers(r)},http:ob,isHTTPScheme:ib,loadWeights:function(r,n,e,t){return n===void 0&&(n=""),we(this,void 0,void 0,function(){return Ce(this,function(i){return[2,ZC(function(o){return xE(o,{requestInit:t})})(r,n,e)]})})},registerLoadRouter:function(r){return yr.registerLoadRouter(r)},registerSaveRouter:function(r){return yr.registerSaveRouter(r)},weightsLoaderFactory:ZC,withSaveHandler:function(r){return new E3(r)},copyModel:function(r,n){return we(this,void 0,void 0,function(){return Ce(this,function(e){return[2,YC(r,n,!1)]})})},listModels:function(){return we(this,void 0,void 0,function(){var r,n,e,t,i,o,a;return Ce(this,function(s){switch(s.label){case 0:r=Xo.getSchemes(),n={},e=0,t=r,s.label=1;case 1:return e<t.length?(i=t[e],[4,Xo.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+yc+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(r,n){return we(this,void 0,void 0,function(){return Ce(this,function(e){return[2,YC(r,n,!0)]})})},removeModel:function(r){return we(this,void 0,void 0,function(){var n;return Ce(this,function(e){return n=hf(r),[2,Xo.getManager(n.scheme).removeModel(n.path)]})})}}),pc,S3=O({confusionMatrix_:function(r,n,e){var t=E(r,"labels","confusionMatrix"),i=E(n,"predictions","confusionMatrix");k(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),k(t.rank===1,function(){return"Expected the rank of labels to be 1, but got "+t.rank}),k(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),k(t.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+t.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),k(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=Qv(t.asType("int32"),e),a=Qv(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}}),W6=Object.freeze({confusionMatrix:S3}),k3=O({fromPixels_:function(r,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(r==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,t=!1,i=!1,o=!1,a=!1;if(r.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&r instanceof ImageData)t=!0;else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement)o=!0;else{if(r.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+r.constructor.name);a=!0}if(i&&i&&r.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(n1("FromPixels",N.backendName)!=null)return N.runKernel("FromPixels",{pixels:r},{numChannels:n});var s,c,l=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],d=l[0],u=l[1];if(a?s=r.getContext("2d").getImageData(0,0,d,u).data:t||e?s=r.data:(o||i)&&(pc==null&&(pc=document.createElement("canvas").getContext("2d")),pc.canvas.width=d,pc.canvas.height=u,pc.drawImage(r,0,0,d,u),s=pc.getImageData(0,0,d,u).data),n===4)c=new Int32Array(s);else{var h=d*u;c=new Int32Array(h*n);for(var f=0;f<h;f++)for(var p=0;p<n;++p)c[f*n+p]=s[4*f+p]}return Mf(c,[u,d,n],"int32")}}),Ac=Object.freeze({toPixels:function(r,n){return we(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,w,C,A,R;return Ce(this,function(S){switch(S.label){case 0:if(e=E(r,"img","toPixels"),r instanceof Rt||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(t=e.shape.slice(0,2),i=t[0],o=t[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.data()];case 1:return s=S.sent(),c=e.min(),l=e.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(d=S.sent(),u=d[0],h=d[1],f=u[0],p=h[0],c.dispose(),l.dispose(),e.dtype==="float32"){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m=e.dtype==="float32"?255:1,g=new Uint8ClampedArray(o*i*4),v=0;v<i*o;++v)_=void 0,y=void 0,b=void 0,w=void 0,a===1?(_=s[v]*m,y=s[v]*m,b=s[v]*m,w=255):a===3?(_=s[3*v]*m,y=s[3*v+1]*m,b=s[3*v+2]*m,w=255):a===4&&(_=s[4*v]*m,y=s[4*v+1]*m,b=s[4*v+2]*m,w=s[4*v+3]*m),g[(C=4*v)+0]=Math.round(_),g[C+1]=Math.round(y),g[C+2]=Math.round(b),g[C+3]=Math.round(w);return n!=null&&(n.width=o,n.height=i,A=n.getContext("2d"),R=new ImageData(g,o,i),A.putImageData(R,0,0)),e!==r&&e.dispose(),[2,g]}})})},fromPixels:k3}),CE=function(){function r(){}return r.prototype.getClassName=function(){return this.constructor.className},r.fromConfig=function(n,e){return new n(e)},r}(),DE=function(){function r(){this.classNameMap={}}return r.getMap=function(){return r.instance==null&&(r.instance=new r),r.instance},r.register=function(n){r.getMap().classNameMap[n.className]=[n,n.fromConfig]},r}();function Jo(r){k(r.className!=null,function(){return"Class being registered does not have the static className property defined."}),k(typeof r.className=="string",function(){return"className is required to be a string, but got type "+typeof r.className}),k(r.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),DE.register(r)}var H6=Object.freeze({Serializable:CE,SerializationMap:DE,registerClass:Jo}),I3=.001,EE=.1;function Pv(){return N.backend.floatPrecision()===32?I3:EE}function Lv(r,n,e){var t=!0;if((Rn(r)||Rn(n))&&(t=!1),Rn(r)&&Rn(n)&&(t=!0),t){var i=r.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(r)&&Array.isArray(n)){var a=Fi(r),s=Fi(n);if(!an(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var c=Rn(r)?r:so(r),l=Rn(n)?n:so(n);if(c.length!==l.length)throw new Error("Arrays have different lengths actual: "+c.length+" vs expected: "+l.length+`.
Actual:   `+c+`.
Expected: `+l+".");for(var d=0;d<l.length;++d){var u=c[d],h=l[d];if(!e(u,h))throw new Error("Arrays differ: actual["+d+"] = "+u+", expected["+d+"] = "+h+`.
Actual:   `+c+`.
Expected: `+l+".")}}function Bv(r,n,e){return!isFinite(r)&&!isFinite(n)||!(isNaN(r)||isNaN(n)||Math.abs(r-n)>e)}var G6=Object.freeze({TEST_EPSILON_FLOAT16:EE,expectArraysClose:function(r,n,e){return e==null&&(e=Pv()),Lv(r,n,function(t,i){return Bv(t,i,e)})},testEpsilon:Pv,expectPromiseToFail:function(r,n){r().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(r,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return $o(r)||$o(r[0])||$o(n)||$o(n[0])?Lv(r,e,function(t,i){return t==i}):Lv(r,n,function(t,i){return Bv(t,i,0)})},expectNumbersClose:function(r,n,e){if(e==null&&(e=Pv()),!Bv(r,n,e))throw new Error("Numbers differ: actual === "+r+", expected === "+n)},expectValuesInRange:function(r,n,e){for(var t=0;t<r.length;t++)if(r[t]<n||r[t]>e)throw new Error("Value out of range:"+r[t]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(r,n){expect(new Float32Array(r)).toEqual(new Float32Array(n))}});var q6=Object.freeze({gpgpu_util:QO,webgl_util:xF,forceHalfFloat:function(){W().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:UD,setWebGLContext:y1,GPGPUContext:OD}),Xa=function(r){function n(){return r!==null&&r.apply(this,arguments)||this}return ii(n,r),n.prototype.minimize=function(e,t,i){t===void 0&&(t=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;if(i!=null){var c=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(c)}else this.applyGradients(s);return or(s),t?a:(a.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,t){return tO(e,t)},n.prototype.dispose=function(){this.iterations_!=null&&or(this.iterations_)},n.prototype.saveIterations=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:se(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return we(this,void 0,void 0,function(){var t;return Ce(this,function(i){switch(i.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}(CE);Object.defineProperty(Xa,Symbol.hasInstance,{value:function(r){return r.minimize!=null&&r.computeGradients!=null&&r.applyGradients!=null}});var SE=function(r){function n(e,t,i){i===void 0&&(i=null);var o=r.call(this)||this;return o.learningRate=e,o.rho=t,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=N.backend.epsilon()),o}return ii(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=N.registeredVariables[i];t.accumulatedGrads[o]==null&&(t.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Q(function(){return ut(a).variable(!1)})}),t.accumulatedUpdates[o]==null&&(t.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Q(function(){return ut(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedGrads[o].variable,l=t.accumulatedUpdates[o].variable;Q(function(){var d=c.mul(t.rho).add(s.square().mul(1-t.rho)),u=l.add(t.epsilon).sqrt().div(c.add(t.epsilon).sqrt()).mul(s),h=l.mul(t.rho).add(u.square().mul(1-t.rho));c.assign(d),l.assign(h);var f=u.mul(-t.learningRate).add(a);a.assign(f)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(or(this.accumulatedGrads.map(function(e){return e.variable})),or(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var e;return Ce(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){var t;return Ce(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},n.className="Adadelta",n}(Xa);Jo(SE);var kE=function(r){function n(e,t){t===void 0&&(t=.1);var i=r.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=t,i.accumulatedGrads=[],i}return ii(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=N.registeredVariables[i];t.accumulatedGrads[o]==null&&(t.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Q(function(){return xr(a.shape,t.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedGrads[o].variable;Q(function(){var l=c.add(s.square());c.assign(l);var d=s.div(l.add(N.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(d)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&or(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},n.className="Adagrad",n}(Xa);Jo(kE);var IE=function(r){function n(e,t,i,o){o===void 0&&(o=null);var a=r.call(this)||this;return a.learningRate=e,a.beta1=t,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],Q(function(){a.accBeta1=se(t).variable(),a.accBeta2=se(i).variable()}),o==null&&(a.epsilon=N.backend.epsilon()),a}return ii(n,r),n.prototype.applyGradients=function(e){var t=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Q(function(){var o=Mt(1,t.accBeta1),a=Mt(1,t.accBeta2);i.forEach(function(s,c){var l=N.registeredVariables[s];t.accumulatedFirstMoment[c]==null&&(t.accumulatedFirstMoment[c]={originalName:s+"/m",variable:Q(function(){return ut(l).variable(!1)})}),t.accumulatedSecondMoment[c]==null&&(t.accumulatedSecondMoment[c]={originalName:s+"/v",variable:Q(function(){return ut(l).variable(!1)})});var d=Array.isArray(e)?e[c].tensor:e[s];if(d!=null){var u=t.accumulatedFirstMoment[c].variable,h=t.accumulatedSecondMoment[c].variable,f=u.mul(t.beta1).add(d.mul(1-t.beta1)),p=h.mul(t.beta2).add(d.square().mul(1-t.beta2)),m=f.div(o),g=p.div(a);u.assign(f),h.assign(p);var v=m.div(g.sqrt().add(t.epsilon)).mul(-t.learningRate).add(l);l.assign(v)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&or(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&or(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var e;return Ce(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){var t,i=this;return Ce(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),Q(function(){i.accBeta1.assign(Sf(i.beta1,i.iterations_+1)),i.accBeta2.assign(Sf(i.beta2,i.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},n.className="Adam",n}(Xa);Jo(IE);var AE=function(r){function n(e,t,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=r.call(this)||this;return s.learningRate=e,s.beta1=t,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Q(function(){s.iteration=se(0).variable(),s.accBeta1=se(t).variable()}),o==null&&(s.epsilon=N.backend.epsilon()),s}return ii(n,r),n.prototype.applyGradients=function(e){var t=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Q(function(){var o=Mt(1,t.accBeta1),a=Nr(-t.learningRate,t.iteration.mul(t.decay).add(1));i.forEach(function(s,c){var l=N.registeredVariables[s];t.accumulatedFirstMoment[c]==null&&(t.accumulatedFirstMoment[c]={originalName:s+"/m",variable:ut(l).variable(!1)}),t.accumulatedWeightedInfNorm[c]==null&&(t.accumulatedWeightedInfNorm[c]={originalName:s+"/v",variable:ut(l).variable(!1)});var d=Array.isArray(e)?e[c].tensor:e[s];if(d!=null){var u=t.accumulatedFirstMoment[c].variable,h=t.accumulatedWeightedInfNorm[c].variable,f=u.mul(t.beta1).add(d.mul(1-t.beta1)),p=h.mul(t.beta2),m=d.abs(),g=p.maximum(m);u.assign(f),h.assign(g);var v=a.div(o).mul(f.div(g.add(t.epsilon))).add(l);l.assign(v)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&or(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&or(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},n.className="Adamax",n}(Xa);Jo(AE);var Hb=function(r){function n(e){var t=r.call(this)||this;return t.learningRate=e,t.setLearningRate(e),t}return ii(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var s=N.registeredVariables[i];Q(function(){var c=t.c.mul(a).add(s);s.assign(c)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=wF(se(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=t.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,t){return new e(t.learningRate)},n.className="SGD",n}(Xa);Jo(Hb);var RE=function(r){function n(e,t,i){i===void 0&&(i=!1);var o=r.call(this,e)||this;return o.learningRate=e,o.momentum=t,o.useNesterov=i,o.accumulations=[],o.m=se(o.momentum),o}return ii(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=N.registeredVariables[i];t.accumulations[o]==null&&(t.accumulations[o]={originalName:i+"/momentum",variable:Q(function(){return ut(a).variable(!1)})});var s=t.accumulations[o].variable,c=Array.isArray(e)?e[o].tensor:e[i];c!=null&&Q(function(){var l,d=t.m.mul(s).add(c);l=t.useNesterov?t.c.mul(c.add(d.mul(t.m))).add(a):t.c.mul(d).add(a),s.assign(d),a.assign(l)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&or(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Ce(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},n.className="Momentum",n}(Hb);Jo(RE);var ME=function(r){function n(e,t,i,o,a){t===void 0&&(t=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=r.call(this)||this;if(s.learningRate=e,s.decay=t,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=N.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return ii(n,r),n.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=N.registeredVariables[i];t.accumulatedMeanSquares[o]==null&&(t.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Q(function(){return ut(a).variable(!1)})}),t.accumulatedMoments[o]==null&&(t.accumulatedMoments[o]={originalName:i+"/momentum",variable:Q(function(){return ut(a).variable(!1)})}),t.accumulatedMeanGrads[o]==null&&t.centered&&(t.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Q(function(){return ut(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var c=t.accumulatedMeanSquares[o].variable,l=t.accumulatedMoments[o].variable;Q(function(){var d=c.mul(t.decay).add(s.square().mul(1-t.decay));if(t.centered){var u=t.accumulatedMeanGrads[o].variable,h=u.mul(t.decay).add(s.mul(1-t.decay)),f=l.mul(t.momentum).add(s.mul(t.learningRate).div(d.sub(h.square().add(t.epsilon)).sqrt()));c.assign(d),u.assign(h),l.assign(f);var p=a.sub(f);a.assign(p)}else{var m=c.mul(t.decay).add(s.square().mul(1-t.decay));f=l.mul(t.momentum).add(s.mul(t.learningRate).div(m.add(t.epsilon).sqrt())),c.assign(m),l.assign(f),p=a.sub(f),a.assign(p)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&or(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&or(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&or(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var e;return Ce(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return we(this,void 0,void 0,function(){var t;return Ce(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},n.className="RMSProp",n}(Xa);Jo(ME);var Pa=function(){function r(){}return r.sgd=function(n){return new Hb(n)},r.momentum=function(n,e,t){return t===void 0&&(t=!1),new RE(n,e,t)},r.rmsprop=function(n,e,t,i,o){return e===void 0&&(e=.9),t===void 0&&(t=0),i===void 0&&(i=null),o===void 0&&(o=!1),new ME(n,e,t,i,o)},r.adam=function(n,e,t,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),t===void 0&&(t=.999),i===void 0&&(i=null),new IE(n,e,t,i)},r.adadelta=function(n,e,t){return n===void 0&&(n=.001),e===void 0&&(e=.95),t===void 0&&(t=null),new SE(n,e,t)},r.adamax=function(n,e,t,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),t===void 0&&(t=.999),i===void 0&&(i=null),o===void 0&&(o=0),new AE(n,e,t,i,o)},r.adagrad=function(n,e){return e===void 0&&(e=.1),new kE(n,e)},r}(),Y6={sgd:Pa.sgd,momentum:Pa.momentum,adadelta:Pa.adadelta,adagrad:Pa.adagrad,rmsprop:Pa.rmsprop,adamax:Pa.adamax,adam:Pa.adam};Rt.prototype.squaredDifference=function(r){return jD(this,r)},B=a3;function ea(r,n,e){if(e===void 0&&(e=!1),r.beginPath(),n.slice(1).forEach(function(o,a){var s=o.x,c=o.y,l=n[a];r.moveTo(l.x,l.y),r.lineTo(s,c)}),e){var t=n[n.length-1],i=n[0];if(!t||!i)return;r.moveTo(t.x,t.y),r.lineTo(i.x,i.y)}r.stroke()}var Gb=function(r,n){return Gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},Gb(r,n)};function ue(r,n){Gb(r,n);function e(){this.constructor=r}r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var ln=function(){return ln=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},ln.apply(this,arguments)};function ie(r,n,e,t){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{l(t.next(d))}catch(u){a(u)}}function c(d){try{l(t.throw(d))}catch(u){a(u)}}function l(d){d.done?o(d.value):i(d.value).then(s,c)}l((t=t.apply(r,n||[])).next())})}function oe(r,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(d){return c([l,d])}}function c(l){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(r,e)}catch(d){l=[6,d],i=0}finally{t=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Qa(){for(var r=0,n=0,e=arguments.length;n<e;n++)r+=arguments[n].length;for(var t=Array(r),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)t[i]=o[a];return t}var Lr=function(){function r(n,e){if(!Ni(n)||!Ni(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),r.prototype.reverse=function(){return new r(1/this.width,1/this.height)},r}();function Nd(r,n){return r instanceof Rt&&r.shape.length===n}function TE(r){return Nd(r,2)}function ta(r){return Nd(r,3)}function Br(r){return Nd(r,4)}function FE(r){return r%1!==0}function qb(r){return r%2===0}function Uf(r,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(r*e)/e}function Yb(r){return r&&r.width&&r.height}function OE(r,n){var e=r.width,t=r.height,i=n/Math.max(t,e);return new Lr(Math.round(e*i),Math.round(t*i))}function Rc(r){return r.reduce(function(n,e){return n.add(e)},new ot(0,0)).div(new ot(r.length,r.length))}function fo(r,n,e){return Array(r).fill(0).map(function(t,i){return n+i*e})}function Ni(r){return!!r&&r!==1/0&&r!==-1/0&&!isNaN(r)||r===0}function jf(r){return Ni(r)&&0<=r&&r<=1}var ot=function(){function r(n,e){this._x=n,this._y=e}return Object.defineProperty(r.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),r.prototype.add=function(n){return new r(this.x+n.x,this.y+n.y)},r.prototype.sub=function(n){return new r(this.x-n.x,this.y-n.y)},r.prototype.mul=function(n){return new r(this.x*n.x,this.y*n.y)},r.prototype.div=function(n){return new r(this.x/n.x,this.y/n.y)},r.prototype.abs=function(){return new r(Math.abs(this.x),Math.abs(this.y))},r.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},r.prototype.floor=function(){return new r(Math.floor(this.x),Math.floor(this.y))},r}();var Tn=function(){function r(n,e){e===void 0&&(e=!0);var t=n||{},i=[t.left,t.top,t.right,t.bottom].every(Ni),o=[t.x,t.y,t.width,t.height].every(Ni);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(t));var a=o?[t.x,t.y,t.width,t.height]:[t.left,t.top,t.right-t.left,t.bottom-t.top],s=a[0],c=a[1],l=a[2],d=a[3];r.assertIsValidBox({x:s,y:c,width:l,height:d},"Box.constructor",e),this._x=s,this._y=c,this._width=l,this._height=d}return r.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Ni)},r.assertIsValidBox=function(n,e,t){if(t===void 0&&(t=!1),!r.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!t&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new ot(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topRight",{get:function(){return new ot(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomLeft",{get:function(){return new ot(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new ot(this.right,this.bottom)},enumerable:!0,configurable:!0}),r.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),e=n[0],t=n[1],i=n[2],o=n[3];return new r({x:e,y:t,width:i,height:o})},r.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),e=n[0],t=n[1],i=n[2],o=n[3];return new r({x:e,y:t,width:i,height:o})},r.prototype.toSquare=function(){var n=this,e=n.x,t=n.y,i=n.width,o=n.height,a=Math.abs(i-o);return i<o&&(e-=a/2,i+=a),o<i&&(t-=a/2,o+=a),new r({x:e,y:t,width:i,height:o})},r.prototype.rescale=function(n){var e=Yb(n)?n.width:n,t=Yb(n)?n.height:n;return new r({x:this.x*e,y:this.y*t,width:this.width*e,height:this.height*t})},r.prototype.pad=function(n,e){var t=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],i=t[0],o=t[1],a=t[2],s=t[3];return new r({x:i,y:o,width:a,height:s})},r.prototype.clipAtImageBorders=function(n,e){var t=this,i=t.x,o=t.y,a=t.right,s=t.bottom,c=Math.max(i,0),l=Math.max(o,0),d=a-c,u=s-l,h=Math.min(d,n-c),f=Math.min(u,e-l);return new r({x:c,y:l,width:h,height:f}).floor()},r.prototype.shift=function(n,e){var t=this,i=t.width,o=t.height,a=this.x+n,s=this.y+e;return new r({x:a,y:s,width:i,height:o})},r.prototype.padAtBorders=function(n,e){var t=this.width+1,i=this.height+1,o=1,a=1,s=t,c=i,l=this.left,d=this.top,u=this.right,h=this.bottom;return u>e&&(s=-u+e+t,u=e),h>n&&(c=-h+n+i,h=n),l<1&&(c=2-l,l=1),d<1&&(c=2-d,d=1),{dy:a,edy:c,dx:o,edx:s,y:d,ey:h,x:l,ex:u,w:t,h:i}},r.prototype.calibrate=function(n){return new r({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},r}();var Za=function(r){ue(n,r);function n(e,t,i,o,a){return a===void 0&&(a=!1),r.call(this,{left:e,top:t,right:i,bottom:o},a)||this}return n}(Tn);var Wf=function(){function r(n,e,t,i,o){this._imageDims=new Lr(o.width,o.height),this._score=n,this._classScore=e,this._className=t,this._box=new Tn(i).rescale(this._imageDims)}return Object.defineProperty(r.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"relativeBox",{get:function(){return new Tn(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),r.prototype.forSize=function(n,e){return new r(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},r}();var Zt=function(r){ue(n,r);function n(e,t,i){return r.call(this,e,e,"",t,i)||this}return n.prototype.forSize=function(e,t){var i=r.prototype.forSize.call(this,e,t),o=i.score,a=i.relativeBox,s=i.imageDims;return new n(o,a,s)},n}(Wf);function NE(r,n,e){e===void 0&&(e=!0);var t=Math.max(0,Math.min(r.right,n.right)-Math.max(r.left,n.left)),i=Math.max(0,Math.min(r.bottom,n.bottom)-Math.max(r.top,n.top)),o=t*i;return e?o/(r.area+n.area-o):o/Math.min(r.area,n.area)}function PE(r){var n=r.map(function(s){return s.x}),e=r.map(function(s){return s.y}),t=n.reduce(function(s,c){return c<s?c:s},1/0),i=e.reduce(function(s,c){return c<s?c:s},1/0),o=n.reduce(function(s,c){return s<c?c:s},0),a=e.reduce(function(s,c){return s<c?c:s},0);return new Za(t,i,o,a)}function po(r,n,e,t){t===void 0&&(t=!0);for(var i=n.map(function(s,c){return{score:s,boxIndex:c}}).sort(function(s,c){return s.score-c.score}).map(function(s){return s.boxIndex}),o=[],a=function(){var s=i.pop();o.push(s);for(var c=i,l=[],d=0;d<c.length;d++){var u=c[d],h=r[s],f=r[u];l.push(NE(h,f,t))}i=i.filter(function(p,m){return l[m]<=e})};i.length>0;)a();return o}function Pi(r,n){return Q(function(){var e=n[0],t=n[1],i=n[2],o=xr(Qa(r.shape.slice(0,3),[1]),e),a=xr(Qa(r.shape.slice(0,3),[1]),t),s=xr(Qa(r.shape.slice(0,3),[1]),i),c=Ut([o,a,s],3);return Mt(r,c)})}function LE(r,n){return n===void 0&&(n=!1),Q(function(){var e=r.shape.slice(1),t=e[0],i=e[1];if(t===i)return r;var o=Math.abs(t-i),a=Math.round(o*(n?.5:1)),s=t>i?2:1,c=function(f){var p=r.shape.slice();return p[s]=f,xr(p,0)},l=c(a),d=o-l.shape[s],u=n&&d?c(d):null,h=[u,r,l].filter(function(f){return!!f}).map(function(f){return f.toFloat()});return Ut(h,s)})}function Hf(r){return 1/(1+Math.exp(-r))}var Mc=function(r){ue(n,r);function n(e,t,i,o,a){return a===void 0&&(a=!1),r.call(this,{x:e,y:t,width:i,height:o},a)||this}return n}(Tn);var R3=.5,M3=.43,T3=.45,Li=function(){function r(n,e,t){t===void 0&&(t=new ot(0,0));var i=e.width,o=e.height;this._imgDims=new Lr(i,o),this._shift=t,this._positions=n.map(function(a){return a.mul(new ot(i,o)).add(t)})}return Object.defineProperty(r.prototype,"shift",{get:function(){return new ot(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new ot(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),r.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},r.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new ot(n,e))},r.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},r.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var t=n instanceof Zt?n.box.floor():new Tn(n);return this.shiftBy(t.x,t.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},r.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],t=n[1],i=n[2],o=function(u){return i.sub(u).magnitude()},a=(o(e)+o(t))/2,s=Math.floor(a/T3),c=Rc(n),l=Math.floor(Math.max(0,c.x-R3*s)),d=Math.floor(Math.max(0,c.y-M3*s));return new Mc(l,d,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+d))},r.prototype.alignMinBbox=function(n){var e=PE(this.positions);return e.pad(e.width*n,e.height*n)},r.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},r}();var BE=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Rc([e[3],e[4]])]},n}(Li);var Gf=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Rc)},n}(Li);var $b=function(){function r(n,e){this._label=n,this._distance=e}return Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),r.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+Uf(this.distance)+")":"")},r}();var Kb=function(r){ue(n,r);function n(e,t){var i=r.call(this,e)||this;return i._label=t,i}return n.assertIsValidLabeledBox=function(e,t){if(Tn.assertIsValidBox(e,t),!Ni(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(Tn);var Pd=function(){function r(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(t){return!(t instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),r.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},r.fromJSON=function(n){var e=n.descriptors.map(function(t){return new Float32Array(t)});return new r(n.label,e)},r}();var i8=function(r){ue(n,r);function n(e,t,i,o){var a=r.call(this,e,t)||this;return a._score=i,a._classScore=o,a}return n.assertIsValidPredictedBox=function(e,t){if(Kb.assertIsValidLabeledBox(e,t),!jf(e.score)||!jf(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n}(Kb);function Tc(r){return r.detection instanceof Zt}function na(r,n){var e={detection:n};return Object.assign({},r,e)}function Xb(){var r=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:r,readFile:n}}function qf(r){var n="";if(!r)try{r=Vp("fs")}catch(t){n=t.toString()}var e=r?function(t){return new Promise(function(i,o){r.readFile(t,function(a,s){return a?o(a):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function Qb(){var r=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(r)return new r;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},t=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=qf();return ln({Canvas:r||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:n||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:e,createImageElement:t,fetch:i},o)}function Zb(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function Jb(){return typeof global=="object"&&typeof Vp=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var pn;function F3(){if(!pn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return pn}function e_(r){pn=r}function t_(){Zb()&&e_(Xb()),Jb()&&e_(Qb())}function O3(r){if(pn||t_(),!pn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=r.Canvas,e=n===void 0?pn.Canvas:n,t=r.Image,i=t===void 0?pn.Image:t;pn.Canvas=e,pn.Image=i,pn.createCanvasElement=r.createCanvasElement||function(){return new e},pn.createImageElement=r.createImageElement||function(){return new i},pn.ImageData=r.ImageData||pn.ImageData,pn.Video=r.Video||pn.Video,pn.fetch=r.fetch||pn.fetch,pn.readFile=r.readFile||pn.readFile}var bt={getEnv:F3,setEnv:e_,initialize:t_,createBrowserEnv:Xb,createFileSystem:qf,createNodejsEnv:Qb,monkeyPatch:O3,isBrowser:Zb,isNodejs:Jb};t_();function Fc(r){return!bt.isNodejs()&&typeof r=="string"?document.getElementById(r):r}function Fn(r){var n=bt.getEnv(),e=n.Canvas,t=n.CanvasRenderingContext2D;if(r instanceof t)return r;var i=Fc(r);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var ra=function(r){return r.TOP_LEFT="TOP_LEFT",r.TOP_RIGHT="TOP_RIGHT",r.BOTTOM_LEFT="BOTTOM_LEFT",r.BOTTOM_RIGHT="BOTTOM_RIGHT",r}(ra||{}),n_=function(){function r(n){n===void 0&&(n={});var e=n.anchorPosition,t=n.backgroundColor,i=n.fontColor,o=n.fontSize,a=n.fontStyle,s=n.padding;this.anchorPosition=e||ra.TOP_LEFT,this.backgroundColor=t||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=s||4}return r}();var r_=function(){function r(n,e,t){t===void 0&&(t={}),this.text=typeof n=="string"?[n]:n instanceof r?n.text:n,this.anchor=e,this.options=new n_(t)}return r.prototype.measureWidth=function(n){var e=this.options.padding;return this.text.map(function(t){return n.measureText(t).width}).reduce(function(t,i){return t<i?i:t},0)+2*e},r.prototype.measureHeight=function(){var n=this.options,e=n.fontSize,t=n.padding;return this.text.length*e+2*t},r.prototype.getUpperLeft=function(n,e){var t=this.options.anchorPosition,i=t===ra.BOTTOM_RIGHT||t===ra.TOP_RIGHT,o=t===ra.BOTTOM_LEFT||t===ra.BOTTOM_RIGHT,a=this.measureWidth(n),s=this.measureHeight(),c=i?this.anchor.x-a:this.anchor.x,l=o?this.anchor.y-s:this.anchor.y;if(e){var d=e.width,u=e.height,h=Math.max(Math.min(c,d-a),0),f=Math.max(Math.min(l,u-s),0);return{x:h,y:f}}return{x:c,y:l}},r.prototype.draw=function(n){var e=Fc(n),t=Fn(e),i=this.options,o=i.backgroundColor,a=i.fontColor,s=i.fontSize,c=i.fontStyle,l=i.padding;t.font=s+"px "+c;var d=this.measureWidth(t),u=this.measureHeight();t.fillStyle=o;var h=this.getUpperLeft(t,e);t.fillRect(h.x,h.y,d,u),t.fillStyle=a,this.text.forEach(function(f,p){var m=l+h.x,g=l+h.y+(p+1)*s;t.fillText(f,m,g)})},r}();var N3=function(){function r(n){n===void 0&&(n={});var e=n.boxColor,t=n.lineWidth,i=n.label,o=n.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=t||2,this.label=i;var a={anchorPosition:ra.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new n_(Object.assign({},a,o))}return r}();var P3=function(){function r(n,e){e===void 0&&(e={}),this.box=new Tn(n),this.options=new N3(e)}return r.prototype.draw=function(n){var e=Fn(n),t=this.options,i=t.boxColor,o=t.lineWidth,a=this.box,s=a.x,c=a.y,l=a.width,d=a.height;e.strokeStyle=i,e.lineWidth=o,e.strokeRect(s,c,l,d);var u=this.options.label;u&&new r_([u],{x:s-o/2,y:c},this.options.drawLabelOptions).draw(n)},r}();function Yf(r){var n=bt.getEnv(),e=n.Image,t=n.Video;return r instanceof e&&r.complete||r instanceof t&&r.readyState>=3}function VE(r){return new Promise(function(n,e){if(r instanceof bt.getEnv().Canvas||Yf(r))return n();function t(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",t),o.currentTarget.removeEventListener("error",i),n(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",t),o.currentTarget.removeEventListener("error",i),e(o))}r.addEventListener("load",t),r.addEventListener("error",i)})}function Oc(r){var n=bt.getEnv(),e=n.Image,t=n.Video;return r instanceof e?new Lr(r.naturalWidth,r.naturalHeight):r instanceof t?new Lr(r.videoWidth,r.videoHeight):new Lr(r.width,r.height)}function Ja(r){var n=r.width,e=r.height,t=bt.getEnv().createCanvasElement,i=t();return i.width=n,i.height=e,i}function Nc(r,n){var e=bt.getEnv().ImageData;if(!(r instanceof e)&&!Yf(r))throw new Error("createCanvasFromMedia - media has not finished loading yet");var t=n||Oc(r),i=t.width,o=t.height,a=Ja({width:i,height:o});return r instanceof e?Fn(a).putImageData(r,0,0):Fn(a).drawImage(r,0,0,i,o),a}function zE(r,n){return ie(this,void 0,void 0,function(){var e,t,i,o,a,s;return oe(this,function(c){switch(c.label){case 0:return e=n||bt.getEnv().createCanvasElement(),t=r.shape.slice(Br(r)?1:0),i=t[0],o=t[1],a=t[2],s=Q(function(){return r.as3D(i,o,a).toInt()}),[4,Ac.toPixels(s,e)];case 1:return c.sent(),s.dispose(),[2,e]}})})}function i_(r){var n=bt.getEnv(),e=n.Image,t=n.Canvas,i=n.Video;return r instanceof e||r instanceof t||r instanceof i}function UE(r,n,e){e===void 0&&(e=!1);var t=bt.getEnv(),i=t.Image,o=t.Canvas;if(!(r instanceof i||r instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Oc(r),s=n/Math.max(a.height,a.width),c=s*a.width,l=s*a.height,d=Ja({width:n,height:n}),u=r instanceof o?r:Nc(r),h=Math.abs(c-l)/2,f=e&&c<l?h:0,p=e&&l<c?h:0;return Fn(d).drawImage(u,f,p,c,l),d}var es=function(){function r(n,e){var t=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(i,o){if(ta(i)){t._imageTensors[o]=i,t._inputDimensions[o]=i.shape;return}if(Br(i)){var a=i.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");t._imageTensors[o]=i,t._inputDimensions[o]=i.shape.slice(1);return}var s=i instanceof bt.getEnv().Canvas?i:Nc(i);t._canvases[o]=s,t._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(r.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"reshapedInputDimensions",{get:function(){var n=this;return fo(this.batchSize,0,1).map(function(e,t){return n.getReshapedInputDimensions(t)})},enumerable:!0,configurable:!0}),r.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},r.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},r.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},r.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},r.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),t=this.getInputHeight(n);return OE({width:e,height:t},this.inputSize)},r.prototype.toBatchTensor=function(n,e){var t=this;return e===void 0&&(e=!0),this._inputSize=n,Q(function(){var i=fo(t.batchSize,0,1).map(function(a){var s=t.getInput(a);if(s instanceof Rt){var c=Br(s)?s:s.expandDims();return c=LE(c,e),(c.shape[1]!==n||c.shape[2]!==n)&&(c=Fd.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(s instanceof bt.getEnv().Canvas)return Ac.fromPixels(UE(s,n,e));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=Mn(i.map(function(a){return a.toFloat()})).as4D(t.batchSize,n,n,3);return o})},r}();function It(r){return ie(this,void 0,void 0,function(){var n,e,t;return oe(this,function(i){switch(i.label){case 0:if(r instanceof es)return[2,r];if(n=Array.isArray(r)?r:[r],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(r)?" at input index "+o+":":""},t=n.map(Fc),t.forEach(function(o,a){if(!i_(o)&&!ta(o)&&!Br(o))throw typeof n[a]=="string"?new Error("toNetInput -"+e(a)+" string passed, but could not resolve HTMLElement for element id "+n[a]):new Error("toNetInput -"+e(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Br(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+e(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(t.map(function(o){return i_(o)&&VE(o)}))];case 1:return i.sent(),[2,new es(t,Array.isArray(r))]}})})}function Ld(r,n){return ie(this,void 0,void 0,function(){var e,t,i,o,a,s,c;return oe(this,function(l){switch(l.label){case 0:return e=bt.getEnv().Canvas,t=r,r instanceof e?[3,5]:[4,It(r)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof e?(a=o,[3,4]):[3,2];case 2:return[4,zE(o)];case 3:a=l.sent(),l.label=4;case 4:t=a,l.label=5;case 5:return s=Fn(t),c=n.map(function(d){return d instanceof Zt?d.forSize(t.width,t.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(t.width,t.height)}),[2,c.map(function(d){var u=d.x,h=d.y,f=d.width,p=d.height,m=Ja({width:f,height:p});return Fn(m).putImageData(s.getImageData(u,h,f,p),0,0),m})]}})})}function Bd(r,n){return ie(this,void 0,void 0,function(){return oe(this,function(e){if(!ta(r)&&!Br(r))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Br(r)&&r.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Q(function(){var t=r.shape.slice(Br(r)?1:0),i=t[0],o=t[1],a=t[2],s=n.map(function(l){return l instanceof Zt?l.forSize(o,i).box:l}).map(function(l){return l.clipAtImageBorders(o,i)}),c=s.map(function(l){var d=l.x,u=l.y,h=l.width,f=l.height;return Ob(r.as3D(i,o,a),[u,d,0],[f,h,a])});return c})]})})}function $f(r,n){return ie(this,void 0,void 0,function(){var e,t;return oe(this,function(i){switch(i.label){case 0:return e=bt.getEnv().fetch,[4,e(r,n)];case 1:if(t=i.sent(),!(t.status<400))throw new Error("failed to fetch: ("+t.status+") "+t.statusText+", from url: "+t.url);return[2,t]}})})}function jE(r){return ie(this,void 0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,$f(r)];case 1:return[2,n.sent().json()]}})})}function Kf(r,n){var e=n+"-weights_manifest.json";if(!r)return{modelBaseUri:"",manifestUri:e};if(r==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var t=r.startsWith("http://")?"http://":r.startsWith("https://")?"https://":"";r=r.replace(t,"");var i=r.split("/").filter(function(s){return s}),o=r.endsWith(".json")?i[i.length-1]:e,a=t+(r.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=r.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+o:a+"/"+o}}function WE(r,n){return ie(this,void 0,void 0,function(){var e,t,i,o;return oe(this,function(a){switch(a.label){case 0:return e=Kf(r,n),t=e.manifestUri,i=e.modelBaseUri,[4,jE(t)];case 1:return o=a.sent(),[2,zf.loadWeights(o,i)]}})})}function HE(r,n,e){e===void 0&&(e=!1);var t=e?Oc(n):n,i=t.width,o=t.height;return r.width=i,r.height=o,{width:i,height:o}}var xn=function(){function r(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(r.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),r.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),t=e.obj,i=e.objProp;return t[i]},r.prototype.reassignParamFromPath=function(n,e){var t=this.traversePropertyPath(n),i=t.obj,o=t.objProp;i[o].dispose(),i[o]=e},r.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var t=e.paramPath;return{path:t,tensor:n.getParamFromPath(t)}})},r.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof Wa})},r.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof Wa)})},r.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var t=e.path,i=e.tensor;n.reassignParamFromPath(t,i.variable())})},r.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var t=e.path,i=e.tensor,o=_n(i.dataSync());i.dispose(),n.reassignParamFromPath(t,o)})},r.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},r.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},r.prototype.load=function(n){return ie(this,void 0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},r.prototype.loadFromUri=function(n){return ie(this,void 0,void 0,function(){var e;return oe(this,function(t){switch(t.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,WE(n,this.getDefaultModelName())];case 1:return e=t.sent(),this.loadFromWeightMap(e),[2]}})})},r.prototype.loadFromDisk=function(n){return ie(this,void 0,void 0,function(){var e,t,i,o,a,s,c,l,d,u;return oe(this,function(h){switch(h.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=bt.getEnv().readFile,t=Kf(n,this.getDefaultModelName()),i=t.manifestUri,o=t.modelBaseUri,a=function(f){return Promise.all(f.map(function(p){return e(p).then(function(m){return m.buffer})}))},s=zf.weightsLoaderFactory(a),d=(l=JSON).parse,[4,e(i)];case 1:return c=d.apply(l,[h.sent().toString()]),[4,s(c,o)];case 2:return u=h.sent(),this.loadFromWeightMap(u),[2]}})})},r.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),t=e.paramMappings,i=e.params;this._paramMappings=t,this._params=i},r.prototype.extractWeights=function(n){var e=this.extractParams(n),t=e.paramMappings,i=e.params;this._paramMappings=t,this._params=i},r.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,a){if(!o.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+n);return{obj:o.nextObj,objProp:a,nextObj:o.nextObj[a]}},{nextObj:this.params}),t=e.obj,i=e.objProp;if(!t||!i||!(t[i]instanceof Rt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:t,objProp:i}},r}();function Qn(r,n,e){return Q(function(){var t=Md(r,n.depthwise_filter,n.pointwise_filter,e,"same");return t=Ue(t,n.bias),t})}function Xf(r,n,e){return e===void 0&&(e=!1),Q(function(){var t=wt(e?Ue(yn(r,n.conv0.filters,[2,2],"same"),n.conv0.bias):Qn(r,n.conv0,[2,2])),i=Qn(t,n.conv1,[1,1]),o=wt(Ue(t,i)),a=Qn(o,n.conv2,[1,1]);return wt(Ue(t,Ue(i,a)))})}function Vd(r,n,e,t){return e===void 0&&(e=!1),t===void 0&&(t=!0),Q(function(){var i=wt(e?Ue(yn(r,n.conv0.filters,t?[2,2]:[1,1],"same"),n.conv0.bias):Qn(r,n.conv0,t?[2,2]:[1,1])),o=Qn(i,n.conv1,[1,1]),a=wt(Ue(i,o)),s=Qn(a,n.conv2,[1,1]),c=wt(Ue(i,Ue(o,s))),l=Qn(c,n.conv3,[1,1]);return wt(Ue(i,Ue(o,Ue(s,l))))})}function jn(r,n,e,t){return e===void 0&&(e="same"),t===void 0&&(t=!1),Q(function(){var i=Ue(yn(r,n.filters,[1,1],e),n.bias);return t?wt(i):i})}function wn(r,n){Object.keys(r).forEach(function(e){n.some(function(t){return t.originalPath===e})||r[e].dispose()})}function ia(r,n){return function(e,t,i,o){var a=fn(r(e*t*i*i),[i,i,e,t]),s=Ot(r(t));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function Pc(r,n){return function(e,t,i){var o=Ti(r(e*t),[e,t]),a=Ot(r(t));return n.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var o_=function(){function r(n,e,t){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=t}return r}();function Lc(r,n){return function(e,t,i){var o=fn(r(9*e),[3,3,e,1]),a=fn(r(e*t),[1,1,e,t]),s=Ot(r(t));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new o_(o,a,s)}}function Bc(r){return function(n){var e=r(n+"/depthwise_filter",4),t=r(n+"/pointwise_filter",4),i=r(n+"/bias",1);return new o_(e,t,i)}}function Wn(r,n){return function(e,t,i){var o=r[e];if(!Nd(o,t))throw new Error("expected weightMap["+e+"] to be a Tensor"+t+"D, instead have "+o);return n.push({originalPath:e,paramPath:i||e}),o}}function Cn(r){var n=r;function e(i){var o=n.slice(0,i);return n=n.slice(i),o}function t(){return n}return{extractWeights:e,getRemainingWeights:t}}function Qf(r,n){var e=ia(r,n),t=Lc(r,n);function i(a,s,c,l){l===void 0&&(l=!1);var d=l?e(a,s,3,c+"/conv0"):t(a,s,c+"/conv0"),u=t(s,s,c+"/conv1"),h=t(s,s,c+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(a,s,c,l){l===void 0&&(l=!1);var d=i(a,s,c,l),u=d.conv0,h=d.conv1,f=d.conv2,p=t(s,s,c+"/conv3");return{conv0:u,conv1:h,conv2:f,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function GE(r){var n=[],e=Cn(r),t=e.extractWeights,i=e.getRemainingWeights,o=Qf(t,n).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2"),l=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:c,dense3:l}}}function Zf(r){return function(n){var e=r(n+"/filters",4),t=r(n+"/bias",1);return{filters:e,bias:t}}}function Jf(r,n){var e=Wn(r,n),t=Zf(e),i=Bc(e);function o(s,c){c===void 0&&(c=!1);var l=c?t(s+"/conv0"):i(s+"/conv0"),d=i(s+"/conv1"),u=i(s+"/conv2");return{conv0:l,conv1:d,conv2:u}}function a(s,c){c===void 0&&(c=!1);var l=c?t(s+"/conv0"):i(s+"/conv0"),d=i(s+"/conv1"),u=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:d,conv2:u,conv3:h}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function qE(r){var n=[],e=Jf(r,n).extractDenseBlock4Params,t={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return wn(r,n),{params:t,paramMappings:n}}var ep=function(r){ue(n,r);function n(){return r.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Q(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=Pi(i,o).div(se(255)),s=Vd(a,t.dense0,!0);return s=Vd(s,t.dense1),s=Vd(s,t.dense2),s=Vd(s,t.dense3),s=uo(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return qE(e)},n.prototype.extractParams=function(e){return GE(e)},n}(xn);function ar(r,n){return Q(function(){return Ue(Ic(r,n.weights),n.bias)})}function YE(r,n,e){var t=[],i=Cn(r),o=i.extractWeights,a=i.getRemainingWeights,s=Pc(o,t),c=s(n,e,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:c}}}function $E(r){var n=[],e=Wn(r,n);function t(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:t("fc")};return wn(r,n),{params:i,paramMappings:n}}function tp(r){var n={},e={};return Object.keys(r).forEach(function(t){var i=t.startsWith("fc")?e:n;i[t]=r[t]}),{featureExtractorMap:n,classifierMap:e}}var np=function(r){ue(n,r);function n(e,t){var i=r.call(this,e)||this;return i._faceFeatureExtractor=t,i}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var t=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Q(function(){var o=e instanceof es?t.faceFeatureExtractor.forwardInput(e):e;return ar(o.as2D(o.shape[0],-1),i.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),r.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),i=t.params,o=t.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return YE(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var t=tp(e),i=t.featureExtractorMap,o=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),$E(o)},n.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*t+i,a=e.slice(0,e.length-o),s=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},n}(xn);var KE=["neutral","happy","sad","angry","fearful","disgusted","surprised"],rp=function(){function r(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);KE.forEach(function(t,i){e[t]=n[i]})}return r.prototype.asSortedArray=function(){var n=this;return KE.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,t){return t.probability-e.probability})},r}();var XE=function(r){ue(n,r);function n(e){return e===void 0&&(e=new ep),r.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var t=this;return Q(function(){return Xn(t.runNet(e))})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.predictExpressions=function(e){return ie(this,void 0,void 0,function(){var t,i,o,a,s=this;return oe(this,function(c){switch(c.label){case 0:return[4,It(e)];case 1:return t=c.sent(),[4,this.forwardInput(t)];case 2:return i=c.sent(),[4,Promise.all(kt(i).map(function(l){return ie(s,void 0,void 0,function(){var d;return oe(this,function(u){switch(u.label){case 0:return[4,l.data()];case 1:return d=u.sent(),l.dispose(),[2,d]}})})}))];case 3:return o=c.sent(),i.dispose(),a=o.map(function(l){return new rp(l)}),[2,t.isBatchInput?a:a[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(np);function a_(r,n){var e={expressions:n};return Object.assign({},r,e)}function zd(r){return Tc(r)&&r.landmarks instanceof Li&&r.unshiftedLandmarks instanceof Li&&r.alignedRect instanceof Zt}function ts(r,n){var e=r.detection.box,t=n.shiftBy(e.x,e.y),i=t.align(),o=r.detection.imageDims,a=new Zt(r.detection.score,i.rescale(o.reverse()),o),s={landmarks:t,unshiftedLandmarks:n,alignedRect:a};return Object.assign({},r,s)}var L3=function(){function r(n){n===void 0&&(n={});var e=n.drawLines,t=e===void 0?!0:e,i=n.drawPoints,o=i===void 0?!0:i,a=n.lineWidth,s=n.lineColor,c=n.pointSize,l=n.pointColor;this.drawLines=t,this.drawPoints=o,this.lineWidth=a||1,this.pointSize=c||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"}return r}();var w7=function(){function r(n,e){e===void 0&&(e={}),this.faceLandmarks=n,this.options=new L3(e)}return r.prototype.draw=function(n){var e=Fn(n),t=this.options,i=t.drawLines,o=t.drawPoints,a=t.lineWidth,s=t.lineColor,c=t.pointSize,l=t.pointColor;if(i&&this.faceLandmarks instanceof Gf&&(e.strokeStyle=s,e.lineWidth=a,ea(e,this.faceLandmarks.getJawOutline()),ea(e,this.faceLandmarks.getLeftEyeBrow()),ea(e,this.faceLandmarks.getRightEyeBrow()),ea(e,this.faceLandmarks.getNose()),ea(e,this.faceLandmarks.getLeftEye(),!0),ea(e,this.faceLandmarks.getRightEye(),!0),ea(e,this.faceLandmarks.getMouth(),!0)),o){e.strokeStyle=l,e.fillStyle=l;var d=function(u){e.beginPath(),e.arc(u.x,u.y,c,0,2*Math.PI),e.fill()};this.faceLandmarks.positions.forEach(d)}},r}();function V3(r,n){var e=ia(r,n),t=Lc(r,n);function i(a,s,c){var l=t(a,s,c+"/separable_conv0"),d=t(s,s,c+"/separable_conv1"),u=e(a,s,1,c+"/expansion_conv");return{separable_conv0:l,separable_conv1:d,expansion_conv:u}}function o(a,s){var c=t(a,a,s+"/separable_conv0"),l=t(a,a,s+"/separable_conv1"),d=t(a,a,s+"/separable_conv2");return{separable_conv0:c,separable_conv1:l,separable_conv2:d}}return{extractConvParams:e,extractSeparableConvParams:t,extractReductionBlockParams:i,extractMainBlockParams:o}}function QE(r,n){var e=[],t=Cn(r),i=t.extractWeights,o=t.getRemainingWeights,a=V3(i,e),s=a.extractConvParams,c=a.extractSeparableConvParams,l=a.extractReductionBlockParams,d=a.extractMainBlockParams,u=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),f=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:u,reduction_block_0:h,reduction_block_1:f},m={};fo(n,0,1).forEach(function(y){m["main_block_"+y]=d(128,"middle_flow/main_block_"+y)});var g=l(128,256,"exit_flow/reduction_block"),v=c(256,512,"exit_flow/separable_conv"),_={reduction_block:g,separable_conv:v};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:p,middle_flow:m,exit_flow:_}}}function z3(r,n){var e=Wn(r,n),t=Zf(e),i=Bc(e);function o(s){var c=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),d=t(s+"/expansion_conv");return{separable_conv0:c,separable_conv1:l,expansion_conv:d}}function a(s){var c=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),d=i(s+"/separable_conv2");return{separable_conv0:c,separable_conv1:l,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}}function ZE(r,n){var e=[],t=z3(r,e),i=t.extractConvParams,o=t.extractSeparableConvParams,a=t.extractReductionBlockParams,s=t.extractMainBlockParams,c=i("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),d=a("entry_flow/reduction_block_1"),u={conv_in:c,reduction_block_0:l,reduction_block_1:d},h={};fo(n,0,1).forEach(function(g){h["main_block_"+g]=s("middle_flow/main_block_"+g)});var f=a("exit_flow/reduction_block"),p=o("exit_flow/separable_conv"),m={reduction_block:f,separable_conv:p};return wn(r,e),{params:{entry_flow:u,middle_flow:h,exit_flow:m},paramMappings:e}}function JE(r,n,e){return Ue(yn(r,n.filters,e,"same"),n.bias)}function s_(r,n,e){e===void 0&&(e=!0);var t=e?wt(r):r;return t=Qn(t,n.separable_conv0,[1,1]),t=Qn(wt(t),n.separable_conv1,[1,1]),t=Kt(t,[3,3],[2,2],"same"),t=Ue(t,JE(r,n.expansion_conv,[2,2])),t}function U3(r,n){var e=Qn(wt(r),n.separable_conv0,[1,1]);return e=Qn(wt(e),n.separable_conv1,[1,1]),e=Qn(wt(e),n.separable_conv2,[1,1]),e=Ue(e,r),e}var eS=function(r){ue(n,r);function n(e){var t=r.call(this,"TinyXception")||this;return t._numMainBlocks=e,t}return n.prototype.forwardInput=function(e){var t=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return Q(function(){var o=e.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=Pi(o,a).div(se(256)),c=wt(JE(s,i.entry_flow.conv_in,[2,2]));return c=s_(c,i.entry_flow.reduction_block_0,!1),c=s_(c,i.entry_flow.reduction_block_1),fo(t._numMainBlocks,0,1).forEach(function(l){c=U3(c,i.middle_flow["main_block_"+l])}),c=s_(c,i.exit_flow.reduction_block),c=wt(Qn(c,i.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return ZE(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return QE(e,this._numMainBlocks)},n}(xn);function tS(r){var n=[],e=Cn(r),t=e.extractWeights,i=e.getRemainingWeights,o=Pc(t,n),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{fc:{age:a,gender:s}}}}function nS(r){var n=[],e=Wn(r,n);function t(o){var a=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:a,bias:s}}var i={fc:{age:t("fc/age"),gender:t("fc/gender")}};return wn(r,n),{params:i,paramMappings:n}}var Ud=function(r){return r.FEMALE="female",r.MALE="male",r}(Ud||{});var rS=function(r){ue(n,r);function n(e){e===void 0&&(e=new eS(2));var t=r.call(this,"AgeGenderNet")||this;return t._faceFeatureExtractor=e,t}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var t=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Q(function(){var o=e instanceof es?t.faceFeatureExtractor.forwardInput(e):e,a=uo(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=ar(a,i.fc.age).as1D(),c=ar(a,i.fc.gender);return{age:s,gender:c}})},n.prototype.forwardInput=function(e){var t=this;return Q(function(){var i=t.runNet(e),o=i.age,a=i.gender;return{age:o,gender:Xn(a)}})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return ie(this,void 0,void 0,function(){var t,i,o,a,s,c,l=this;return oe(this,function(d){switch(d.label){case 0:return[4,It(e)];case 1:return t=d.sent(),[4,this.forwardInput(t)];case 2:return i=d.sent(),o=kt(i.age),a=kt(i.gender),s=o.map(function(u,h){return{ageTensor:u,genderTensor:a[h]}}),[4,Promise.all(s.map(function(u){var h=u.ageTensor,f=u.genderTensor;return ie(l,void 0,void 0,function(){var p,m,g,v,_;return oe(this,function(y){switch(y.label){case 0:return[4,h.data()];case 1:return p=y.sent()[0],[4,f.data()];case 2:return m=y.sent()[0],g=m>.5,v=g?Ud.MALE:Ud.FEMALE,_=g?m:1-m,h.dispose(),f.dispose(),[2,{age:p,gender:v,genderProbability:_}]}})})}))];case 3:return c=d.sent(),i.age.dispose(),i.gender.dispose(),[2,t.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),r.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),i=t.params,o=t.paramMappings;this._params=i,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return tS(e)},n.prototype.extractParamsFromWeigthMap=function(e){var t=tp(e),i=t.featureExtractorMap,o=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),nS(o)},n.prototype.extractParams=function(e){var t=1539,i=e.slice(0,e.length-t),o=e.slice(e.length-t);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},n}(xn);var ip=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.postProcess=function(e,t,i){var o=i.map(function(s){var c=s.width,l=s.height,d=t/Math.max(l,c);return{width:c*d,height:l*d}}),a=o.length;return Q(function(){var s=function(h,f){return Mn([xr([68],h),xr([68],f)],1).as2D(1,136).as1D()},c=function(h,f){var p=o[h],m=p.width,g=p.height;return f(m,g)?Math.abs(m-g)/2:0},l=function(h){return c(h,function(f,p){return f<p})},d=function(h){return c(h,function(f,p){return p<f})},u=e.mul(xr([a,136],t)).sub(Mn(Array.from(Array(a),function(h,f){return s(l(f),d(f))}))).div(Mn(Array.from(Array(a),function(h,f){return s(o[f].width,o[f].height)})));return u})},n.prototype.forwardInput=function(e){var t=this;return Q(function(){var i=t.runNet(e);return t.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){var a=o[0],s=o[1];return{height:a,width:s}}))})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.detectLandmarks=function(e){return ie(this,void 0,void 0,function(){var t,i,o,a=this;return oe(this,function(s){switch(s.label){case 0:return[4,It(e)];case 1:return t=s.sent(),i=Q(function(){return kt(a.forwardInput(t))}),[4,Promise.all(i.map(function(c,l){return ie(a,void 0,void 0,function(){var d,u,h,f,p;return oe(this,function(m){switch(m.label){case 0:return h=(u=Array).from,[4,c.data()];case 1:return d=h.apply(u,[m.sent()]),f=d.filter(function(g,v){return qb(v)}),p=d.filter(function(g,v){return!qb(v)}),[2,new Gf(Array(68).fill(0).map(function(g,v){return new ot(f[v],p[v])}),{height:t.getInputHeight(l),width:t.getInputWidth(l)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(c){return c.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(np);var op=function(r){ue(n,r);function n(e){return e===void 0&&(e=new ep),r.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(ip);function iS(r){var n=[],e=Jf(r,n).extractDenseBlock3Params,t={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return wn(r,n),{params:t,paramMappings:n}}function oS(r){var n=[],e=Cn(r),t=e.extractWeights,i=e.getRemainingWeights,o=Qf(t,n).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:c}}}var aS=function(r){ue(n,r);function n(){return r.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Q(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=Pi(i,o).div(se(255)),s=Xf(a,t.dense0,!0);return s=Xf(s,t.dense1),s=Xf(s,t.dense2),s=uo(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return iS(e)},n.prototype.extractParams=function(e){return oS(e)},n}(xn);var sS=function(r){ue(n,r);function n(e){return e===void 0&&(e=new aS),r.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(ip);var U$=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(op);function cS(r,n){return Ue(Yt(r,n.weights),n.biases)}function c_(r,n,e,t,i){i===void 0&&(i="same");var o=n.conv,a=o.filters,s=o.bias,c=yn(r,a,e,i);return c=Ue(c,s),c=cS(c,n.scale),t?wt(c):c}function lS(r,n){return c_(r,n,[1,1],!0)}function l_(r,n){return c_(r,n,[1,1],!1)}function ap(r,n){return c_(r,n,[2,2],!0,"valid")}function j3(r,n){function e(s,c,l){var d=r(s),u=d.length/(c*l*l);if(FE(u))throw new Error("depth has to be an integer: "+u+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+l);return Q(function(){return Pr(fn(d,[c,u,l,l]),[2,3,1,0])})}function t(s,c,l,d){var u=e(s,c,l),h=Ot(r(c));return n.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:u,bias:h}}function i(s,c){var l=Ot(r(s)),d=Ot(r(s));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:l,biases:d}}function o(s,c,l,d){var u=t(s,c,l,d+"/conv"),h=i(c,d+"/scale");return{conv:u,scale:h}}function a(s,c,l,d,u){u===void 0&&(u=!1);var h=o((u?.5:1)*s,c,l,d+"/conv1"),f=o(s,c,l,d+"/conv2");return{conv1:h,conv2:f}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function dS(r){var n=Cn(r),e=n.extractWeights,t=n.getRemainingWeights,i=[],o=j3(e,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,c=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),d=s(9216,32,3,"conv32_2"),u=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),_=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),A=Q(function(){return Pr(Ti(e(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),t().length!==0)throw new Error("weights remaing after extract: "+t().length);var R={conv32_down:c,conv32_1:l,conv32_2:d,conv32_3:u,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:_,conv256_down:y,conv256_1:b,conv256_2:w,conv256_down_out:C,fc:A};return{params:R,paramMappings:i}}function W3(r,n){var e=Wn(r,n);function t(a){var s=e(a+"/scale/weights",1),c=e(a+"/scale/biases",1);return{weights:s,biases:c}}function i(a){var s=e(a+"/conv/filters",4),c=e(a+"/conv/bias",1),l=t(a);return{conv:{filters:s,bias:c},scale:l}}function o(a){return{conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function uS(r){var n=[],e=W3(r,n),t=e.extractConvLayerParams,i=e.extractResidualLayerParams,o=t("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),c=i("conv32_3"),l=i("conv64_down"),d=i("conv64_1"),u=i("conv64_2"),h=i("conv64_3"),f=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),_=i("conv256_2"),y=i("conv256_down_out"),b=r.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!TE(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:c,conv64_down:l,conv64_1:d,conv64_2:u,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:_,conv256_down_out:y,fc:b};return wn(r,n),{params:w,paramMappings:n}}function ci(r,n){var e=lS(r,n.conv1);return e=l_(e,n.conv2),e=Ue(e,r),e=wt(e),e}function jd(r,n){var e=ap(r,n.conv1);e=l_(e,n.conv2);var t=uo(r,2,2,"valid"),i=Lt(t.shape),o=t.shape[3]!==e.shape[3],a=t.shape[1]!==e.shape[1]||t.shape[2]!==e.shape[2];if(a){var s=Qa(e.shape);s[1]=1;var c=Lt(s);e=Ut([e,c],1);var l=Qa(e.shape);l[2]=1;var d=Lt(l);e=Ut([e,d],2)}return t=o?Ut([t,i],3):t,e=Ue(t,e),e=wt(e),e}var d_=function(r){ue(n,r);function n(){return r.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Q(function(){var i=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],a=Pi(i,o).div(se(256)),s=ap(a,t.conv32_down);s=Kt(s,3,2,"valid"),s=ci(s,t.conv32_1),s=ci(s,t.conv32_2),s=ci(s,t.conv32_3),s=jd(s,t.conv64_down),s=ci(s,t.conv64_1),s=ci(s,t.conv64_2),s=ci(s,t.conv64_3),s=jd(s,t.conv128_down),s=ci(s,t.conv128_1),s=ci(s,t.conv128_2),s=jd(s,t.conv256_down),s=ci(s,t.conv256_1),s=ci(s,t.conv256_2),s=jd(s,t.conv256_down_out);var c=s.mean([1,2]),l=Ic(c,t.fc);return l})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return ie(this,void 0,void 0,function(){var t,i,o,a=this;return oe(this,function(s){switch(s.label){case 0:return[4,It(e)];case 1:return t=s.sent(),i=Q(function(){return kt(a.forwardInput(t))}),[4,Promise.all(i.map(function(c){return c.data()}))];case 2:return o=s.sent(),i.forEach(function(c){return c.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return uS(e)},n.prototype.extractParams=function(e){return dS(e)},n}(xn);function u_(r,n){var e={descriptor:n};return Object.assign({},r,e)}function h_(r,n){var e={age:n};return Object.assign({},r,e)}function f_(r,n,e){var t={gender:n,genderProbability:e};return Object.assign({},r,t)}var Wd=function(){function r(n){var e=n===void 0?{}:n,t=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,a=e.scoreThresholds,s=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=t||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(r.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),r}();function H3(r,n){function e(c,l){var d=fn(r(9*c),[3,3,c,1]),u=Ot(r(c)),h=Ot(r(c)),f=Ot(r(c)),p=Ot(r(c));return n.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:d,batch_norm_scale:u,batch_norm_offset:h,batch_norm_mean:f,batch_norm_variance:p}}function t(c,l,d,u,h){var f=fn(r(c*l*d*d),[d,d,c,l]),p=Ot(r(l));return n.push({paramPath:u+"/filters"},{paramPath:u+"/"+(h?"batch_norm_offset":"bias")}),{filters:f,bias:p}}function i(c,l,d,u){var h=t(c,l,d,u,!0),f=h.filters,p=h.bias;return{filters:f,batch_norm_offset:p}}function o(c,l,d){var u=e(c,d+"/depthwise_conv"),h=i(c,l,1,d+"/pointwise_conv");return{depthwise_conv:u,pointwise_conv:h}}function a(){var c=i(3,32,3,"mobilenetv1/conv_0"),l=o(32,64,"mobilenetv1/conv_1"),d=o(64,128,"mobilenetv1/conv_2"),u=o(128,128,"mobilenetv1/conv_3"),h=o(128,256,"mobilenetv1/conv_4"),f=o(256,256,"mobilenetv1/conv_5"),p=o(256,512,"mobilenetv1/conv_6"),m=o(512,512,"mobilenetv1/conv_7"),g=o(512,512,"mobilenetv1/conv_8"),v=o(512,512,"mobilenetv1/conv_9"),_=o(512,512,"mobilenetv1/conv_10"),y=o(512,512,"mobilenetv1/conv_11"),b=o(512,1024,"mobilenetv1/conv_12"),w=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:l,conv_2:d,conv_3:u,conv_4:h,conv_5:f,conv_6:p,conv_7:m,conv_8:g,conv_9:v,conv_10:_,conv_11:y,conv_12:b,conv_13:w}}function s(){var c=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),d=i(512,128,1,"prediction_layer/conv_2"),u=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),f=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),g=t(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=t(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),_=t(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=t(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=t(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=t(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=t(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),A=t(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),R=t(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),S=t(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),D=t(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),F=t(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),T={box_encoding_predictor:g,class_predictor:v},V={box_encoding_predictor:_,class_predictor:y},z={box_encoding_predictor:b,class_predictor:w},U={box_encoding_predictor:C,class_predictor:A},Y={box_encoding_predictor:R,class_predictor:S},q={box_encoding_predictor:D,class_predictor:F};return{conv_0:c,conv_1:l,conv_2:d,conv_3:u,conv_4:h,conv_5:f,conv_6:p,conv_7:m,box_predictor_0:T,box_predictor_1:V,box_predictor_2:z,box_predictor_3:U,box_predictor_4:Y,box_predictor_5:q}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function hS(r){var n=[],e=Cn(r),t=e.extractWeights,i=e.getRemainingWeights,o=H3(t,n),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,c=a(),l=s(),d=Mf(t(5118*4),[1,5118,4]),u={extra_dim:d};if(n.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:c,prediction_layer:l,output_layer:u},paramMappings:n}}function G3(r,n){var e=Wn(r,n);function t(l,d,u){var h=e(l+"/Conv2d_"+d+"_pointwise/weights",4,u+"/filters"),f=e(l+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,u+"/batch_norm_offset");return{filters:h,batch_norm_offset:f}}function i(l){var d="mobilenetv1/conv_"+l,u="MobilenetV1/Conv2d_"+l+"_depthwise",h=d+"/depthwise_conv",f=d+"/pointwise_conv",p=e(u+"/depthwise_weights",4,h+"/filters"),m=e(u+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),g=e(u+"/BatchNorm/beta",1,h+"/batch_norm_offset"),v=e(u+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),_=e(u+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:_},pointwise_conv:t("MobilenetV1",l,f)}}function o(){return{conv_0:t("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function a(l,d){var u=e(l+"/weights",4,d+"/filters"),h=e(l+"/biases",1,d+"/bias");return{filters:u,bias:h}}function s(l){var d=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),u=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:d,class_predictor:u}}function c(){return{conv_0:t("Prediction",0,"prediction_layer/conv_0"),conv_1:t("Prediction",1,"prediction_layer/conv_1"),conv_2:t("Prediction",2,"prediction_layer/conv_2"),conv_3:t("Prediction",3,"prediction_layer/conv_3"),conv_4:t("Prediction",4,"prediction_layer/conv_4"),conv_5:t("Prediction",5,"prediction_layer/conv_5"),conv_6:t("Prediction",6,"prediction_layer/conv_6"),conv_7:t("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function fS(r){var n=[],e=G3(r,n),t=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=r["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!ta(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:t(),prediction_layer:i(),output_layer:{extra_dim:o}};return wn(r,n),{params:a,paramMappings:n}}function Vr(r,n,e){return Q(function(){var t=yn(r,n.filters,e,"same");return t=Ue(t,n.batch_norm_offset),kd(t,0,6)})}var q3=.0010000000474974513;function Y3(r,n,e){return Q(function(){var t=Rd(r,n.filters,e,"same");return t=Rb(t,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,q3),kd(t,0,6)})}function $3(r){return[2,4,6,12].some(function(n){return n===r})?[2,2]:[1,1]}function pS(r,n){return Q(function(){var e=null,t=Vr(r,n.conv_0,[2,2]),i=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(i.forEach(function(o,a){var s=a+1,c=$3(s);t=Y3(t,o.depthwise_conv,c),t=Vr(t,o.pointwise_conv,[1,1]),s===11&&(e=t)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:t,conv11:e}})}function mS(r,n,e,t,i){var o=r.shape[0],a=Math.min(e,o),s=n.map(function(d,u){return{score:d,boxIndex:u}}).filter(function(d){return d.score>i}).sort(function(d,u){return u.score-d.score}),c=function(d){return d<=t?1:0},l=[];return s.forEach(function(d){if(!(l.length>=a)){for(var u=d.score,h=l.length-1;h>=0;--h){var f=K3(r,d.boxIndex,l[h]);if(f!==0&&(d.score*=c(f),d.score<=i))break}u===d.score&&l.push(d.boxIndex)}}),l}function K3(r,n,e){var t=r.arraySync(),i=Math.min(t[n][0],t[n][2]),o=Math.min(t[n][1],t[n][3]),a=Math.max(t[n][0],t[n][2]),s=Math.max(t[n][1],t[n][3]),c=Math.min(t[e][0],t[e][2]),l=Math.min(t[e][1],t[e][3]),d=Math.max(t[e][0],t[e][2]),u=Math.max(t[e][1],t[e][3]),h=(a-i)*(s-o),f=(d-c)*(u-l);if(h<=0||f<=0)return 0;var p=Math.max(i,c),m=Math.max(o,l),g=Math.min(a,d),v=Math.min(s,u),_=Math.max(g-p,0)*Math.max(v-m,0);return _/(h+f-_)}function X3(r){var n=kt(Pr(r,[1,0])),e=[Mt(n[2],n[0]),Mt(n[3],n[1])],t=[Ue(n[0],Nr(e[0],se(2))),Ue(n[1],Nr(e[1],se(2)))];return{sizes:e,centers:t}}function Q3(r,n){var e=X3(r),t=e.sizes,i=e.centers,o=kt(Pr(n,[1,0])),a=Nr(Yt(Pf(Nr(o[2],se(5))),t[0]),se(2)),s=Ue(Yt(Nr(o[0],se(10)),t[0]),i[0]),c=Nr(Yt(Pf(Nr(o[3],se(5))),t[1]),se(2)),l=Ue(Yt(Nr(o[1],se(10)),t[1]),i[1]);return Pr(Mn([Mt(s,a),Mt(l,c),Ue(s,a),Ue(l,c)]),[1,0])}function gS(r,n,e){return Q(function(){var t=r.shape[0],i=Q3(Kn(ja(e.extra_dim,[t,1,1]),[-1,4]),Kn(r,[-1,4]));i=Kn(i,[t,i.shape[0]/t,4]);var o=Ab(ri(n,[0,0,1],[-1,-1,-1])),a=ri(o,[0,0,0],[-1,-1,1]);a=Kn(a,[t,a.shape[1]]);var s=kt(i),c=kt(a);return{boxes:s,scores:c}})}function ns(r,n){return Q(function(){var e=r.shape[0],t=Kn(jn(r,n.box_encoding_predictor),[e,-1,1,4]),i=Kn(jn(r,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:t,classPrediction:i}})}function vS(r,n,e){return Q(function(){var t=Vr(r,e.conv_0,[1,1]),i=Vr(t,e.conv_1,[2,2]),o=Vr(i,e.conv_2,[1,1]),a=Vr(o,e.conv_3,[2,2]),s=Vr(a,e.conv_4,[1,1]),c=Vr(s,e.conv_5,[2,2]),l=Vr(c,e.conv_6,[1,1]),d=Vr(l,e.conv_7,[2,2]),u=ns(n,e.box_predictor_0),h=ns(r,e.box_predictor_1),f=ns(i,e.box_predictor_2),p=ns(a,e.box_predictor_3),m=ns(c,e.box_predictor_4),g=ns(d,e.box_predictor_5),v=Ut([u.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),_=Ut([u.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:_}})}var oa=function(){function r(n){var e=n===void 0?{}:n,t=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=t||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(r.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),r}();var sp=function(r){ue(n,r);function n(){return r.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Q(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=Mt(Yt(i,se(.007843137718737125)),se(1)),a=pS(o,t.mobilenetv1),s=vS(a.out,a.conv11,t.prediction_layer),c=s.boxPredictions,l=s.classPredictions;return gS(c,l,t.output_layer)})},n.prototype.forward=function(e){return ie(this,void 0,void 0,function(){var t;return oe(this,function(i){switch(i.label){case 0:return t=this.forwardInput,[4,It(e)];case 1:return[2,t.apply(this,[i.sent()])]}})})},n.prototype.locateFaces=function(e,t){return t===void 0&&(t={}),ie(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,w,C,A,R;return oe(this,function(S){switch(S.label){case 0:return i=new oa(t),o=i.maxResults,a=i.minConfidence,[4,It(e)];case 1:for(s=S.sent(),c=this.forwardInput(s),l=c.boxes,d=c.scores,u=l[0],h=d[0],f=1;f<l.length;f++)l[f].dispose(),d[f].dispose();return g=(m=Array).from,[4,h.data()];case 2:return p=g.apply(m,[S.sent()]),v=.5,_=mS(u,p,o,v,a),y=s.getReshapedInputDimensions(0),b=s.inputSize,w=b/y.width,C=b/y.height,A=u.arraySync(),R=_.map(function(D){var F=[Math.max(0,A[D][0]),Math.min(1,A[D][2])].map(function(q){return q*C}),T=F[0],V=F[1],z=[Math.max(0,A[D][1]),Math.min(1,A[D][3])].map(function(q){return q*w}),U=z[0],Y=z[1];return new Zt(p[D],new Mc(U,T,Y-U,V-T),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),u.dispose(),h.dispose(),[2,R]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return fS(e)},n.prototype.extractParams=function(e){return hS(e)},n}(xn);var oX=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(sp);var bS=.4,_S=[new ot(.738768,.874946),new ot(2.42204,2.65704),new ot(4.30971,7.04493),new ot(10.246,4.59428),new ot(12.6868,11.8741)],yS=[new ot(1.603231,2.094468),new ot(6.041143,7.080126),new ot(2.882459,3.518061),new ot(4.266906,5.178857),new ot(9.041765,10.66308)],xS=[117.001,114.697,97.404],wS="tiny_yolov2_model",CS="tiny_yolov2_separable_conv_model";var cp=function(r){return typeof r=="number"};function DS(r){if(!r)throw new Error("invalid config: "+r);if(typeof r.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+r.withSeparableConvs);if(!cp(r.iouThreshold)||r.iouThreshold<0||r.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+r.iouThreshold);if(!Array.isArray(r.classes)||!r.classes.length||!r.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(r.classes));if(!Array.isArray(r.anchors)||!r.anchors.length||!r.anchors.map(function(n){return n||{}}).every(function(n){return cp(n.x)&&cp(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(r.anchors));if(r.meanRgb&&(!Array.isArray(r.meanRgb)||r.meanRgb.length!==3||!r.meanRgb.every(cp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(r.meanRgb))}function Vc(r){return Q(function(){var n=Yt(r,se(.10000000149011612));return Ue(wt(Mt(r,n)),n)})}function mo(r,n){return Q(function(){var e=lo(r,[[0,0],[1,1],[1,1],[0,0]]);return e=yn(e,n.conv.filters,[1,1],"valid"),e=Mt(e,n.bn.sub),e=Yt(e,n.bn.truediv),e=Ue(e,n.conv.bias),Vc(e)})}function go(r,n){return Q(function(){var e=lo(r,[[0,0],[1,1],[1,1],[0,0]]);return e=Md(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=Ue(e,n.bias),Vc(e)})}function Z3(r,n){var e=ia(r,n);function t(a,s){var c=Ot(r(a)),l=Ot(r(a));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:c,truediv:l}}function i(a,s,c){var l=e(a,s,3,c+"/conv"),d=t(s,c+"/bn");return{conv:l,bn:d}}var o=Lc(r,n);return{extractConvParams:e,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function ES(r,n,e,t){var i=Cn(r),o=i.extractWeights,a=i.getRemainingWeights,s=[],c=Z3(o,s),l=c.extractConvParams,d=c.extractConvWithBatchNormParams,u=c.extractSeparableConvParams,h;if(n.withSeparableConvs){var f=t[0],p=t[1],m=t[2],g=t[3],v=t[4],_=t[5],y=t[6],b=t[7],w=t[8],C=n.isFirstLayerConv2d?l(f,p,3,"conv0"):u(f,p,"conv0"),A=u(p,m,"conv1"),R=u(m,g,"conv2"),S=u(g,v,"conv3"),D=u(v,_,"conv4"),F=u(_,y,"conv5"),T=b?u(y,b,"conv6"):void 0,V=w?u(b,w,"conv7"):void 0,z=l(w||b||y,5*e,1,"conv8");h={conv0:C,conv1:A,conv2:R,conv3:S,conv4:D,conv5:F,conv6:T,conv7:V,conv8:z}}else{var f=t[0],p=t[1],m=t[2],g=t[3],v=t[4],_=t[5],y=t[6],b=t[7],w=t[8],C=d(f,p,"conv0"),A=d(p,m,"conv1"),R=d(m,g,"conv2"),S=d(g,v,"conv3"),D=d(v,_,"conv4"),F=d(_,y,"conv5"),T=d(y,b,"conv6"),V=d(b,w,"conv7"),z=l(w,5*e,1,"conv8");h={conv0:C,conv1:A,conv2:R,conv3:S,conv4:D,conv5:F,conv6:T,conv7:V,conv8:z}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:h,paramMappings:s}}function J3(r,n){var e=Wn(r,n);function t(s){var c=e(s+"/sub",1),l=e(s+"/truediv",1);return{sub:c,truediv:l}}function i(s){var c=e(s+"/filters",4),l=e(s+"/bias",1);return{filters:c,bias:l}}function o(s){var c=i(s+"/conv"),l=t(s+"/bn");return{conv:c,bn:l}}var a=Bc(e);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function SS(r,n){var e=[],t=J3(r,e),i=t.extractConvParams,o=t.extractConvWithBatchNormParams,a=t.extractSeparableConvParams,s;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:c>7?a("conv6"):void 0,conv7:c>8?a("conv7"):void 0,conv8:i("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return wn(r,e),{params:s,paramMappings:e}}var rs=function(){function r(n){var e=n===void 0?{}:n,t=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=t||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(r.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),r}();var lp=function(r){ue(n,r);function n(e){var t=r.call(this,"TinyYolov2")||this;return DS(e),t._config=e,t}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,t){var i=mo(e,t.conv0);return i=Kt(i,[2,2],[2,2],"same"),i=mo(i,t.conv1),i=Kt(i,[2,2],[2,2],"same"),i=mo(i,t.conv2),i=Kt(i,[2,2],[2,2],"same"),i=mo(i,t.conv3),i=Kt(i,[2,2],[2,2],"same"),i=mo(i,t.conv4),i=Kt(i,[2,2],[2,2],"same"),i=mo(i,t.conv5),i=Kt(i,[2,2],[1,1],"same"),i=mo(i,t.conv6),i=mo(i,t.conv7),jn(i,t.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,t){var i=this.config.isFirstLayerConv2d?Vc(jn(e,t.conv0,"valid",!1)):go(e,t.conv0);return i=Kt(i,[2,2],[2,2],"same"),i=go(i,t.conv1),i=Kt(i,[2,2],[2,2],"same"),i=go(i,t.conv2),i=Kt(i,[2,2],[2,2],"same"),i=go(i,t.conv3),i=Kt(i,[2,2],[2,2],"same"),i=go(i,t.conv4),i=Kt(i,[2,2],[2,2],"same"),i=go(i,t.conv5),i=Kt(i,[2,2],[1,1],"same"),i=t.conv6?go(i,t.conv6):i,i=t.conv7?go(i,t.conv7):i,jn(i,t.conv8,"valid",!1)},n.prototype.forwardInput=function(e,t){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Q(function(){var a=e.toBatchTensor(t,!1).toFloat();return a=i.config.meanRgb?Pi(a,i.config.meanRgb):a,a=a.div(se(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},n.prototype.forward=function(e,t){return ie(this,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,It(e)];case 1:return[4,i.apply(this,[o.sent(),t])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,t){return t===void 0&&(t={}),ie(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_=this;return oe(this,function(y){switch(y.label){case 0:return i=new rs(t),o=i.inputSize,a=i.scoreThreshold,[4,It(e)];case 1:return s=y.sent(),[4,this.forwardInput(s,o)];case 2:return c=y.sent(),l=Q(function(){return kt(c)[0].expandDims()}),d={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return u=y.sent(),c.dispose(),l.dispose(),h=u.map(function(b){return b.box}),f=u.map(function(b){return b.score}),p=u.map(function(b){return b.classScore}),m=u.map(function(b){return _.config.classes[b.label]}),g=po(h.map(function(b){return b.rescale(o)}),f,this.config.iouThreshold,!0),v=g.map(function(b){return new Wf(f[b],p[b],m[b],h[b],d)}),[2,v]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return SS(e,this.config)},n.prototype.extractParams=function(e){var t=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,i=t?t.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return ES(e,this.config,this.boxEncodingSize,t)},n.prototype.extractBoxes=function(e,t,i){return ie(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,w,C,A,R,S,D,F,T,V,z,U,Y,q,H=this;return oe(this,function($){switch($.label){case 0:return o=t.width,a=t.height,s=Math.max(o,a),c=s/o,l=s/a,d=e.shape[1],u=this.config.anchors.length,h=Q(function(){var Z=e.reshape([d,d,u,H.boxEncodingSize]),ce=Z.slice([0,0,0,0],[d,d,u,4]),ge=Z.slice([0,0,0,4],[d,d,u,1]),xe=H.withClassScores?Xn(Z.slice([0,0,0,5],[d,d,u,H.config.classes.length]),3):se(0);return[ce,ge,xe]}),f=h[0],p=h[1],m=h[2],g=[],[4,p.array()];case 1:return v=$.sent(),[4,f.array()];case 2:_=$.sent(),y=0,$.label=3;case 3:if(!(y<d))return[3,12];b=0,$.label=4;case 4:if(!(b<d))return[3,11];w=0,$.label=5;case 5:return w<u?(C=Hf(v[y][b][w][0]),!i||C>i?(A=(b+Hf(_[y][b][w][0]))/d*c,R=(y+Hf(_[y][b][w][1]))/d*l,S=Math.exp(_[y][b][w][2])*this.config.anchors[w].x/d*c,D=Math.exp(_[y][b][w][3])*this.config.anchors[w].y/d*l,F=A-S/2,T=R-D/2,V={row:y,col:b,anchor:w},this.withClassScores?[4,this.extractPredictedClass(m,V)]:[3,7]):[3,9]):[3,10];case 6:return q=$.sent(),[3,8];case 7:q={classScore:1,label:0},$.label=8;case 8:z=q,U=z.classScore,Y=z.label,g.push(ln({box:new Za(F,T,F+S,T+D),score:C,classScore:C*U,label:Y},V)),$.label=9;case 9:return w++,[3,5];case 10:return b++,[3,4];case 11:return y++,[3,3];case 12:return f.dispose(),p.dispose(),m.dispose(),[2,g]}})})},n.prototype.extractPredictedClass=function(e,t){return ie(this,void 0,void 0,function(){var i,o,a,s;return oe(this,function(c){switch(c.label){case 0:return i=t.row,o=t.col,a=t.anchor,[4,e.array()];case 1:return s=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,d){return s[i][o][a][d]}).map(function(l,d){return{classScore:l,label:d}}).reduce(function(l,d){return l.classScore>d.classScore?l:d})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(xn);var p_=function(r){ue(n,r);function n(e){e===void 0&&(e=!0);var t=this,i=Object.assign({},{withSeparableConvs:e,iouThreshold:bS,classes:["face"]},e?{anchors:yS,meanRgb:xS}:{anchors:_S,withClassScores:!0});return t=r.call(this,i)||this,t}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,t){return ie(this,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return[4,this.detect(e,t)];case 1:return i=o.sent(),[2,i.map(function(a){return new Zt(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?CS:wS},n.prototype.extractParamsFromWeigthMap=function(e){return r.prototype.extractParamsFromWeigthMap.call(this,e)},n}(lp);var zc=function(r){ue(n,r);function n(){var e=r!==null&&r.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n}(rs);var Bi=function(){function r(){}return r.prototype.then=function(n){return ie(this,void 0,void 0,function(){var e;return oe(this,function(t){switch(t.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},r.prototype.run=function(){return ie(this,void 0,void 0,function(){return oe(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},r}();function is(r,n,e,t,i){return i===void 0&&(i=function(o){var a=o.alignedRect;return a}),ie(this,void 0,void 0,function(){var o,a,s,c,l;return oe(this,function(d){switch(d.label){case 0:return o=r.map(function(u){return zd(u)?i(u):u.detection}),s=t,s?[3,5]:n instanceof Rt?[4,Bd(n,o)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,Ld(n,o)];case 3:c=d.sent(),d.label=4;case 4:s=c,d.label=5;case 5:return a=s,[4,e(a)];case 6:return l=d.sent(),a.forEach(function(u){return u instanceof Rt&&u.dispose()}),[2,l]}})})}function Uc(r,n,e,t,i){return ie(this,void 0,void 0,function(){var o=this;return oe(this,function(a){return[2,is([r],n,function(s){return ie(o,void 0,void 0,function(){return oe(this,function(c){return[2,e(s[0])]})})},t,i)]})})}function kS(r){return Q(function(){return Mn(kt(r,3).reverse(),3)})}var Hd=2,os=12;function eB(r,n){var e=ia(r,n),t=Pc(r,n);function i(l,d){var u=Ot(r(l));return n.push({paramPath:d}),u}function o(l,d,u){u===void 0&&(u=!1);var h=e(l[0],l[1],3,d+"/conv1"),f=i(l[1],d+"/prelu1_alpha"),p=e(l[1],l[2],3,d+"/conv2"),m=i(l[2],d+"/prelu2_alpha"),g=e(l[2],l[3],u?2:3,d+"/conv3"),v=i(l[3],d+"/prelu3_alpha");return{conv1:h,prelu1_alpha:f,conv2:p,prelu2_alpha:m,conv3:g,prelu3_alpha:v}}function a(){var l=o([3,10,16,32],"pnet"),d=e(32,2,1,"pnet/conv4_1"),u=e(32,4,1,"pnet/conv4_2");return ln(ln({},l),{conv4_1:d,conv4_2:u})}function s(){var l=o([3,28,48,64],"rnet",!0),d=t(576,128,"rnet/fc1"),u=i(128,"rnet/prelu4_alpha"),h=t(128,2,"rnet/fc2_1"),f=t(128,4,"rnet/fc2_2");return ln(ln({},l),{fc1:d,prelu4_alpha:u,fc2_1:h,fc2_2:f})}function c(){var l=o([3,32,64,64],"onet"),d=e(64,128,2,"onet/conv4"),u=i(128,"onet/prelu4_alpha"),h=t(1152,256,"onet/fc1"),f=i(256,"onet/prelu5_alpha"),p=t(256,2,"onet/fc2_1"),m=t(256,4,"onet/fc2_2"),g=t(256,10,"onet/fc2_3");return ln(ln({},l),{conv4:d,prelu4_alpha:u,fc1:h,prelu5_alpha:f,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:c}}function IS(r){var n=Cn(r),e=n.extractWeights,t=n.getRemainingWeights,i=[],o=eB(e,i),a=o.extractPNetParams,s=o.extractRNetParams,c=o.extractONetParams,l=a(),d=s(),u=c();if(t().length!==0)throw new Error("weights remaing after extract: "+t().length);return{params:{pnet:l,rnet:d,onet:u},paramMappings:i}}function tB(r,n){var e=Wn(r,n);function t(d){var u=e(d+"/weights",4,d+"/filters"),h=e(d+"/bias",1);return{filters:u,bias:h}}function i(d){var u=e(d+"/weights",2),h=e(d+"/bias",1);return{weights:u,bias:h}}function o(d){return e(d,1)}function a(d){var u=t(d+"/conv1"),h=o(d+"/prelu1_alpha"),f=t(d+"/conv2"),p=o(d+"/prelu2_alpha"),m=t(d+"/conv3"),g=o(d+"/prelu3_alpha");return{conv1:u,prelu1_alpha:h,conv2:f,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function s(){var d=a("pnet"),u=t("pnet/conv4_1"),h=t("pnet/conv4_2");return ln(ln({},d),{conv4_1:u,conv4_2:h})}function c(){var d=a("rnet"),u=i("rnet/fc1"),h=o("rnet/prelu4_alpha"),f=i("rnet/fc2_1"),p=i("rnet/fc2_2");return ln(ln({},d),{fc1:u,prelu4_alpha:h,fc2_1:f,fc2_2:p})}function l(){var d=a("onet"),u=t("onet/conv4"),h=o("onet/prelu4_alpha"),f=i("onet/fc1"),p=o("onet/prelu5_alpha"),m=i("onet/fc2_1"),g=i("onet/fc2_2"),v=i("onet/fc2_3");return ln(ln({},d),{conv4:u,prelu4_alpha:h,fc1:f,prelu5_alpha:p,fc2_1:m,fc2_2:g,fc2_3:v})}return{extractPNetParams:s,extractRNetParams:c,extractONetParams:l}}function AS(r){var n=[],e=tB(r,n),t=e.extractPNetParams,i=e.extractRNetParams,o=e.extractONetParams,a=t(),s=i(),c=o();return wn(r,n),{params:{pnet:a,rnet:s,onet:c},paramMappings:n}}function Gd(r,n){var e=n[0],t=n[1];return{height:Math.floor(e*r),width:Math.floor(t*r)}}function RS(r,n,e){for(var t=e[0],i=e[1],o=os/r,a=[],s=Math.min(t,i)*o,c=0;s>=12;)a.push(o*Math.pow(n,c)),s=s*n,c+=1;return a}var jc=function(r){ue(n,r);function n(e,t,i,o){return r.call(this,{left:e,top:t,right:i,bottom:o},!0)||this}return n}(Tn);function dp(r){return Q(function(){return Yt(Mt(r,se(127.5)),se(.0078125))})}function vo(r,n){return Q(function(){return Ue(wt(r),Yt(n,Id(wt(Id(r)))))})}function Wc(r,n,e){return e===void 0&&(e=!1),Q(function(){var t=jn(r,n.conv1,"valid");return t=vo(t,n.prelu1_alpha),t=Kt(t,e?[2,2]:[3,3],[2,2],"same"),t=jn(t,n.conv2,"valid"),t=vo(t,n.prelu2_alpha),t=e?t:Kt(t,[3,3],[2,2],"valid"),t=jn(t,n.conv3,"valid"),t=vo(t,n.prelu3_alpha),t})}function MS(r,n){return Q(function(){var e=Wc(r,n,!0),t=jn(e,n.conv4_1,"valid"),i=Vn(Ka(t,3),3),o=Xn(Mt(t,i),3),a=jn(e,n.conv4_2,"valid");return{prob:o,regions:a}})}function nB(r,n){return Q(function(){var e=Gd(n,r.shape.slice(1)),t=e.height,i=e.width,o=Fd.resizeBilinear(r,[t,i]),a=dp(o);return Pr(a,[0,2,1,3])})}function rB(r,n,e,t){for(var i=[],o=r.arraySync(),a=0;a<r.shape[0];a++)for(var s=0;s<r.shape[1];s++)o[a][s]>=t&&i.push(new ot(s,a));var c=i.map(function(l){var d=new Za(Math.round((l.y*Hd+1)/e),Math.round((l.x*Hd+1)/e),Math.round((l.y*Hd+os)/e),Math.round((l.x*Hd+os)/e)),u=o[l.y][l.x],h=n.arraySync(),f=new jc(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:d,score:u,region:f}});return c}function TS(r,n,e,t,i){i.stage1=[];var o=n.map(function(h){return Q(function(){var f={scale:h},p=nB(r,h),m=Date.now(),g=MS(p,t),v=g.prob,_=g.regions;f.pnet=Date.now()-m;var y=kt(kt(v,3)[1])[0],b=kt(_)[0];return{scoresTensor:y,regionsTensor:b,scale:h,statsForScale:f}})}),a=o.map(function(h){var f=h.scoresTensor,p=h.regionsTensor,m=h.scale,g=h.statsForScale,v=rB(f,p,m,e);if(f.dispose(),p.dispose(),!v.length)return i.stage1.push(g),[];var _=Date.now(),y=po(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return g.nms=Date.now()-_,g.numBoxes=y.length,i.stage1.push(g),y.map(function(b){return v[b]})}),s=a.reduce(function(h,f){return h.concat(f)},[]),c=[],l=[];if(s.length>0){var d=Date.now(),u=po(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-d,l=u.map(function(h){return s[h].score}),c=u.map(function(h){return s[h]}).map(function(h){var f=h.cell,p=h.region;return new Za(f.left+p.left*f.width,f.top+p.top*f.height,f.right+p.right*f.width,f.bottom+p.bottom*f.height).toSquare().round()})}return{boxes:c,scores:l}}function up(r,n,e){var t=e.width,i=e.height;return ie(this,void 0,void 0,function(){var o,a,s,c=this;return oe(this,function(l){switch(l.label){case 0:return o=Fn(r),[4,Promise.all(n.map(function(d){return ie(c,void 0,void 0,function(){var u,h,f,p,m,g,v,_;return oe(this,function(y){return u=d.padAtBorders(r.height,r.width),h=u.y,f=u.ey,p=u.x,m=u.ex,g=p-1,v=h-1,_=o.getImageData(g,v,m-g,f-v),[2,bt.isNodejs()?Nc(_):createImageBitmap(_)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(d){var u=Ja({width:t,height:i}),h=Fn(u);h.drawImage(d,0,0,t,i);for(var f=h.getImageData(0,0,t,i).data,p=[],m=0;m<f.length;m+=4)p.push(f[m+2]),p.push(f[m+1]),p.push(f[m]);s.push(p)}),[2,s.map(function(d){var u=Q(function(){var h=Pr(fn(d,[1,t,i,3]),[0,2,1,3]).toFloat();return dp(h)});return u})]}})})}function FS(r,n){return Q(function(){var e=Wc(r,n),t=Kn(e,[e.shape[0],n.fc1.weights.shape[0]]),i=ar(t,n.fc1),o=vo(i,n.prelu4_alpha),a=ar(o,n.fc2_1),s=Vn(Ka(a,1),1),c=Xn(Mt(a,s),1),l=ar(o,n.fc2_2),d=kt(c,1)[1];return{scores:d,regions:l}})}function OS(r,n,e,t,i){return ie(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_;return oe(this,function(y){switch(y.label){case 0:return o=Date.now(),[4,up(r,n,{width:24,height:24})];case 1:return a=y.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(b){var w=FS(b,t);return b.dispose(),w}),i.stage2_rnet=Date.now()-o,c=s.length>1?Ut(s.map(function(b){return b.scores})):s[0].scores,u=(d=Array).from,[4,c.data()];case 2:return l=u.apply(d,[y.sent()]),c.dispose(),h=l.map(function(b,w){return{score:b,idx:w}}).filter(function(b){return b.score>e}).map(function(b){var w=b.idx;return w}),f=h.map(function(b){return n[b]}),p=h.map(function(b){return l[b]}),m=[],g=[],f.length>0&&(o=Date.now(),v=po(f,p,.7),i.stage2_nms=Date.now()-o,_=v.map(function(b){var w=s[h[b]].regions.arraySync();return new jc(w[0][0],w[0][1],w[0][2],w[0][3])}),g=v.map(function(b){return p[b]}),m=v.map(function(b,w){return f[b].calibrate(_[w])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function NS(r,n){return Q(function(){var e=Wc(r,n);e=Kt(e,[2,2],[2,2],"same"),e=jn(e,n.conv4,"valid"),e=vo(e,n.prelu4_alpha);var t=Kn(e,[e.shape[0],n.fc1.weights.shape[0]]),i=ar(t,n.fc1),o=vo(i,n.prelu5_alpha),a=ar(o,n.fc2_1),s=Vn(Ka(a,1),1),c=Xn(Mt(a,s),1),l=ar(o,n.fc2_2),d=ar(o,n.fc2_3),u=kt(c,1)[1];return{scores:u,regions:l,points:d}})}function PS(r,n,e,t,i){return ie(this,void 0,void 0,function(){var o,a,s,c,l,d,u,h,f,p,m,g,v,_,y;return oe(this,function(b){switch(b.label){case 0:return o=Date.now(),[4,up(r,n,{width:48,height:48})];case 1:return a=b.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(w){var C=NS(w,t);return w.dispose(),C}),i.stage3_onet=Date.now()-o,c=s.length>1?Ut(s.map(function(w){return w.scores})):s[0].scores,u=(d=Array).from,[4,c.data()];case 2:return l=u.apply(d,[b.sent()]),c.dispose(),h=l.map(function(w,C){return{score:w,idx:C}}).filter(function(w){return w.score>e}).map(function(w){var C=w.idx;return C}),f=h.map(function(w){var C=s[w].regions.arraySync();return new jc(C[0][0],C[0][1],C[0][2],C[0][3])}),p=h.map(function(w,C){return n[w].calibrate(f[C])}),m=h.map(function(w){return l[w]}),g=[],v=[],_=[],p.length>0&&(o=Date.now(),y=po(p,m,.7,!1),i.stage3_nms=Date.now()-o,g=y.map(function(w){return p[w]}),v=y.map(function(w){return m[w]}),_=y.map(function(w,C){return Array(5).fill(0).map(function(A,R){var S=s[w].points.arraySync();return new ot(S[0][R]*(g[C].width+1)+g[C].left,S[0][R+5]*(g[C].height+1)+g[C].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:g,scores:v,points:_}]}})})}var m_=function(r){ue(n,r);function n(){return r.call(this,"Mtcnn")||this}return n.prototype.load=function(e){return ie(this,void 0,void 0,function(){return oe(this,function(t){return console.warn("mtcnn is deprecated and will be removed soon"),[2,r.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return ie(this,void 0,void 0,function(){return oe(this,function(t){return console.warn("mtcnn is deprecated and will be removed soon"),[2,r.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,t){return t===void 0&&(t={}),ie(this,void 0,void 0,function(){var i,o,a,s,c,l,d,u,h,f,p,m,g,v,_,y,b,w,C,A,R;return oe(this,function(S){switch(S.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),c=Q(function(){return kS(Vn(Ac.fromPixels(o)).toFloat())}),l=function(D){return c.dispose(),a.total=Date.now()-s,D},d=c.shape.slice(1),u=d[0],h=d[1],f=new Wd(t),p=f.minFaceSize,m=f.scaleFactor,g=f.maxNumScales,v=f.scoreThresholds,_=f.scaleSteps,y=(_||RS(p,m,[u,h])).filter(function(D){var F=Gd(D,[u,h]);return Math.min(F.width,F.height)>os}).slice(0,g),a.scales=y,a.pyramid=y.map(function(D){return Gd(D,[u,h])}),b=Date.now(),[4,TS(c,y,v[0],i.pnet,a)];case 1:return w=S.sent(),a.total_stage1=Date.now()-b,w.boxes.length?(a.stage2_numInputBoxes=w.boxes.length,b=Date.now(),[4,OS(o,w.boxes,v[1],i.rnet,a)]):[2,l({results:[],stats:a})];case 2:return C=S.sent(),a.total_stage2=Date.now()-b,C.boxes.length?(a.stage3_numInputBoxes=C.boxes.length,b=Date.now(),[4,PS(o,C.boxes,v[2],i.onet,a)]):[2,l({results:[],stats:a})];case 3:return A=S.sent(),a.total_stage3=Date.now()-b,R=A.boxes.map(function(D,F){return ts(na({},new Zt(A.scores[F],new Mc(D.left/h,D.top/u,D.width/h,D.height/u),{height:u,width:h})),new BE(A.points[F].map(function(T){return T.sub(new ot(D.left,D.top)).div(new ot(D.width,D.height))}),{width:D.width,height:D.height}))}),[2,l({results:R,stats:a})]}})})},n.prototype.forward=function(e,t){return t===void 0&&(t={}),ie(this,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,It(e)];case 1:return[4,i.apply(this,[o.sent(),t])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,t){return t===void 0&&(t={}),ie(this,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,It(e)];case 1:return[2,i.apply(this,[o.sent(),t])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return AS(e)},n.prototype.extractParams=function(e){return IS(e)},n}(xn);var LS=.4,BS=[new ot(1.603231,2.094468),new ot(6.041143,7.080126),new ot(2.882459,3.518061),new ot(4.266906,5.178857),new ot(9.041765,10.66308)],VS=[117.001,114.697,97.404];var g_=function(r){ue(n,r);function n(){var e=this,t={withSeparableConvs:!0,iouThreshold:LS,classes:["face"],anchors:BS,meanRgb:VS,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=r.call(this,t)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,t){return ie(this,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return[4,this.detect(e,t)];case 1:return i=o.sent(),[2,i.map(function(a){return new Zt(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return r.prototype.extractParamsFromWeigthMap.call(this,e)},n}(lp);var dn={ssdMobilenetv1:new sp,tinyFaceDetector:new g_,tinyYolov2:new p_,mtcnn:new m_,faceLandmark68Net:new op,faceLandmark68TinyNet:new sS,faceRecognitionNet:new d_,faceExpressionNet:new XE,ageGenderNet:new rS};var zS=function(r){ue(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.extractedFaces=i,o}return n}(Bi);var qd=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i=this;return oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,is(e,this.input,function(a){return ie(i,void 0,void 0,function(){return oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(c){return dn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return t=o.sent(),[2,e.map(function(a,s){return a_(a,t[s])})]}})})},n.prototype.withAgeAndGender=function(){return new $d(this,this.input)},n}(zS);var Yd=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t;return oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,Uc(e,this.input,function(o){return dn.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return t=i.sent(),[2,a_(e,t)]}})})},n.prototype.withAgeAndGender=function(){return new Kd(this,this.input)},n}(zS);var Hc=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new qc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new $c(this,this.input)},n}(qd);var Gc=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Yc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Kc(this,this.input)},n}(Yd);var US=function(r){ue(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.extractedFaces=i,o}return n}(Bi);var $d=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i=this;return oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,is(e,this.input,function(a){return ie(i,void 0,void 0,function(){return oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(c){return dn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return t=o.sent(),[2,e.map(function(a,s){var c=t[s],l=c.age,d=c.gender,u=c.genderProbability;return h_(f_(a,d,u),l)})]}})})},n.prototype.withFaceExpressions=function(){return new qd(this,this.input)},n}(US);var Kd=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i,o,a;return oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?[4,Uc(e,this.input,function(c){return dn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return t=s.sent(),i=t.age,o=t.gender,a=t.genderProbability,[2,h_(f_(e,o,a),i)]}})})},n.prototype.withFaceExpressions=function(){return new Yd(this,this.input)},n}(US);var qc=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Hc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new $c(this,this.input)},n}($d);var Yc=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Gc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Kc(this,this.input)},n}(Kd);var jS=function(r){ue(n,r);function n(e,t){var i=r.call(this)||this;return i.parentTask=e,i.input=t,i}return n}(Bi);var $c=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t;return oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),[4,is(e,this.input,function(o){return Promise.all(o.map(function(a){return dn.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return t=i.sent(),[2,t.map(function(o,a){return u_(e[a],o)})]}})})},n.prototype.withFaceExpressions=function(){return new Hc(this,this.input)},n.prototype.withAgeAndGender=function(){return new qc(this,this.input)},n}(jS);var Kc=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t;return oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,Uc(e,this.input,function(o){return dn.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=i.sent(),[2,u_(e,t)]}})})},n.prototype.withFaceExpressions=function(){return new Gc(this,this.input)},n.prototype.withAgeAndGender=function(){return new Yc(this,this.input)},n}(jS);var WS=function(r){ue(n,r);function n(e,t,i){var o=r.call(this)||this;return o.parentTask=e,o.input=t,o.useTinyLandmarkNet=i,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?dn.faceLandmark68TinyNet:dn.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(Bi);var HS=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i,o,a,s=this;return oe(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return e=c.sent(),t=e.map(function(l){return l.detection}),this.input instanceof Rt?[4,Bd(this.input,t)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,Ld(this.input,t)];case 4:o=c.sent(),c.label=5;case 5:return i=o,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=c.sent(),i.forEach(function(l){return l instanceof Rt&&l.dispose()}),[2,e.map(function(l,d){return ts(l,a[d])})]}})})},n.prototype.withFaceExpressions=function(){return new Hc(this,this.input)},n.prototype.withAgeAndGender=function(){return new qc(this,this.input)},n.prototype.withFaceDescriptors=function(){return new $c(this,this.input)},n}(WS);var GS=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i,o,a;return oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?(t=e.detection,this.input instanceof Rt?[4,Bd(this.input,[t])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,Ld(this.input,[t])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(c){return c instanceof Rt&&c.dispose()}),[2,ts(e,a)]}})})},n.prototype.withFaceExpressions=function(){return new Gc(this,this.input)},n.prototype.withAgeAndGender=function(){return new Yc(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Kc(this,this.input)},n}(WS);var qS=function(r){ue(n,r);function n(e,t){t===void 0&&(t=new oa);var i=r.call(this)||this;return i.input=e,i.options=t,i}return n}(Bi);var v_=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t,i,o;return oe(this,function(a){switch(a.label){case 0:return e=this,t=e.input,i=e.options,i instanceof Wd?[4,dn.mtcnn.forward(t,i)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(o=i instanceof zc?function(s){return dn.tinyFaceDetector.locateFaces(s,i)}:i instanceof oa?function(s){return dn.ssdMobilenetv1.locateFaces(s,i)}:i instanceof rs?function(s){return dn.tinyYolov2.locateFaces(s,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(t)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return ie(e,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,t(i.map(function(a){return na({},a)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new HS(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new qd(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new $d(this.runAndExtendWithFaceDetections(),this.input)},n}(qS);var iB=function(r){ue(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype.run=function(){return ie(this,void 0,void 0,function(){var e,t;return oe(this,function(i){switch(i.label){case 0:return[4,new v_(this.input,this.options)];case 1:return e=i.sent(),t=e[0],e.forEach(function(o){o.score>t.score&&(t=o)}),[2,t]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return ie(e,void 0,void 0,function(){var i;return oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,t(i?na({},i):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new GS(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new Yd(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new Kd(this.runAndExtendWithFaceDetection(),this.input)},n}(qS);function Xd(r,n){return n===void 0&&(n=new oa),new v_(r,n)}function YS(r,n){if(r.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(r),t=Array.from(n);return Math.sqrt(e.map(function(i,o){return i-t[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}var KJ=function(){function r(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var t=Array.isArray(n)?n:[n];if(!t.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=t.map(function(a){if(a instanceof Pd)return a;if(a instanceof Float32Array)return new Pd(o(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Pd(o(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(r.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),r.prototype.computeMeanDistance=function(n,e){return e.map(function(t){return YS(t,n)}).reduce(function(t,i){return t+i},0)/(e.length||1)},r.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(t){var i=t.descriptors,o=t.label;return new $b(o,e.computeMeanDistance(n,i))}).reduce(function(t,i){return t.distance<i.distance?t:i})},r.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new $b("unknown",e.distance)},r.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},r.fromJSON=function(n){var e=n.labeledDescriptors.map(function(t){return Pd.fromJSON(t)});return new r(e,n.distanceThreshold)},r}();function b_(r,n){var e=new Lr(n.width,n.height),t=e.width,i=e.height;if(t<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:t,height:i}));if(Array.isArray(r))return r.map(function(s){return b_(s,{width:t,height:i})});if(zd(r)){var o=r.detection.forSize(t,i),a=r.unshiftedLandmarks.forSize(o.box.width,o.box.height);return ts(na(r,o),a)}return Tc(r)?na(r,r.detection.forSize(t,i)):r instanceof Li||r instanceof Zt?r.forSize(t,i):r}var oB=["trigger"],aB=["panel"],sB=[[["mat-select-trigger"]],"*"],cB=["mat-select-trigger","*"];function lB(r,n){if(r&1&&(I(0,"span",4),j(1),M()),r&2){let e=ee();P(),ht(e.placeholder)}}function dB(r,n){r&1&&je(0)}function uB(r,n){if(r&1&&(I(0,"span",11),j(1),M()),r&2){let e=ee(2);P(),ht(e.triggerValue)}}function hB(r,n){if(r&1&&(I(0,"span",5),he(1,dB,1,0)(2,uB,2,1,"span",11),M()),r&2){let e=ee();P(),me(e.customTrigger?1:2)}}function fB(r,n){if(r&1){let e=nt();I(0,"div",12,1),te("@transformPanel.done",function(i){le(e);let o=ee();return de(o._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){le(e);let o=ee();return de(o._handleKeydown(i))}),je(2,1),M()}if(r&2){let e=ee();oy("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),pe("ngClass",e.panelClass)("@transformPanel","showing"),Ze("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var pB={transformPanelWrap:Do("transformPanelWrap",[qr("* => void",My("@transformPanel",[Ry()],{optional:!0}))]),transformPanel:Do("transformPanel",[va("void",Gn({opacity:0,transform:"scale(1, 0.8)"})),qr("void => showing",vi("120ms cubic-bezier(0, 0, 0.2, 1)",Gn({opacity:1,transform:"scale(1, 1)"}))),qr("* => void",vi("100ms linear",Gn({opacity:0})))])};var KS=new ne("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=x(kn);return()=>r.scrollStrategies.reposition()}});function mB(r){return()=>r.scrollStrategies.reposition()}var gB=new ne("MAT_SELECT_CONFIG"),vB={provide:KS,deps:[kn],useFactory:mB},bB=new ne("MatSelectTrigger"),__=class{source;value;constructor(n,e){this.source=n,this.value=e}},hp=(()=>{class r{_viewportRuler=x(Aa);_changeDetectorRef=x(St);_elementRef=x(Fe);_dir=x(hn,{optional:!0});_idGenerator=x(zt);_parentFormField=x(Fa,{optional:!0});ngControl=x(Ci,{self:!0,optional:!0});_liveAnnouncer=x(hx);_defaultOptions=x(gB,{optional:!0});options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let t=this.options.toArray()[e];if(t){let i=this.panel.nativeElement,o=Cx(e,this.options,this.optionGroups),a=t._getHostElement();e===0&&o===1?i.scrollTop=0:i.scrollTop=Dx(a.offsetTop,a.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new __(this,e)}_scrollStrategyFactory=x(KS);_panelOpen=!1;_compareWith=(e,t)=>e===t;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new _e;_errorStateTracker;stateChanges=new _e;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new _e;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Ft.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";_initialized=new _e;optionSelectionChanges=Wi(()=>{let e=this.options;return e?e.changes.pipe(gn(e),En(()=>Zn(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(En(()=>this.optionSelectionChanges))});openedChange=new fe;_openedStream=this.openedChange.pipe(Ct(e=>e),He(()=>{}));_closedStream=this.openedChange.pipe(Ct(e=>!e),He(()=>{}));selectionChange=new fe;valueChange=new fe;constructor(){let e=x(Ul),t=x(ec,{optional:!0}),i=x(Bn,{optional:!0}),o=x(new Ur("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new Ea(e,this.ngControl,i,t,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new _h(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Jc(),Pt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Pt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Pt(this._destroy)).subscribe(e=>{e.added.forEach(t=>t.select()),e.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(gn(null),Pt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),t=this.ngControl;if(e!==this._triggerAriaLabelledBy){let i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}t&&(this._previousControl!==t.control&&(this._previousControl!==void 0&&t.disabled!==null&&t.disabled!==this.disabled&&(this.disabled=t.disabled),this._previousControl=t.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=`${this.id}-panel`;this._trackedModal&&rh(this._trackedModal,"aria-owns",t),hg(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;rh(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let t=e.keyCode,i=t===40||t===38||t===37||t===39,o=t===13||t===32,a=this._keyManager;if(!a.isTyping()&&o&&!rn(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){let s=this.selected;a.onKeydown(e);let c=this.selected;c&&s!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(e){let t=this._keyManager,i=e.keyCode,o=i===40||i===38,a=t.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!a&&(i===13||i===32)&&t.activeItem&&!rn(e))e.preventDefault(),t.activeItem._selectViaInteraction();else if(!a&&this._multiple&&i===65&&e.ctrlKey){e.preventDefault();let s=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(s?c.select():c.deselect())})}else{let s=t.activeItemIndex;t.onKeydown(e),this._multiple&&o&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==s&&t.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(un(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(t=>t.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(t=>this._selectOptionByValue(t)),this._sortValues();else{let t=this._selectOptionByValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let t=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return i.value!=null&&this._compareWith(i.value,e)}catch{return!1}});return t&&this._selectionModel.select(t),t}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof $l?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new nh(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Zn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Pt(e)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Zn(...this.options.map(t=>t._stateChanges)).pipe(Pt(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,t){let i=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((t,i)=>this.sortComparator?this.sortComparator(t,i,e):e.indexOf(t)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let t;this.multiple?t=this.selected.map(i=>i.value):t=this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let t=0;t<this.options.length;t++)if(!this.options.get(t).disabled){e=t;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),t=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(t+=" "+this.ariaLabelledby),t}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-select"]],contentQueries:function(t,i,o){if(t&1&&(Vt(o,bB,5),Vt(o,Vs,5),Vt(o,Sg,5)),t&2){let a;Ne(a=Pe())&&(i.customTrigger=a.first),Ne(a=Pe())&&(i.options=a),Ne(a=Pe())&&(i.optionGroups=a)}},viewQuery:function(t,i){if(t&1&&(lt(oB,5),lt(aB,5),lt(Ug,5)),t&2){let o;Ne(o=Pe())&&(i.trigger=o.first),Ne(o=Pe())&&(i.panel=o.first),Ne(o=Pe())&&(i._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(t,i){t&1&&te("keydown",function(a){return i._handleKeydown(a)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),t&2&&(Ze("id",i.id)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),Oe("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Se],disableRipple:[2,"disableRipple","disableRipple",Se],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Hr(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Se],placeholder:"placeholder",required:[2,"required","required",Se],multiple:[2,"multiple","multiple",Se],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Se],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Hr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[Ke([{provide:rc,useExisting:r},{provide:Eg,useExisting:r}]),st,At],ngContentSelectors:cB,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(t,i){if(t&1){let o=nt();Et(sB),I(0,"div",2,0),te("click",function(){return le(o),de(i.open())}),I(3,"div",3),he(4,lB,2,1,"span",4)(5,hB,3,1,"span",5),M(),I(6,"div",6)(7,"div",7),Sn(),I(8,"svg",8),G(9,"path",9),M()()()(),he(10,fB,3,9,"ng-template",10),te("backdropClick",function(){return le(o),de(i.close())})("attach",function(){return le(o),de(i._onAttached())})("detach",function(){return le(o),de(i.close())})}if(t&2){let o=Wr(1);P(3),Ze("id",i._valueId),P(),me(i.empty?4:5),P(6),pe("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||o)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[$l,Ug,bu],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[pB.transformPanel]},changeDetection:0})}return r})();var Xc=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({providers:[vB],imports:[zo,kg,Je,Ys,ei,kg,Je]})}return r})();var yB=[[["caption"]],[["colgroup"],["col"]],"*"],xB=["caption","colgroup, col","*"];function wB(r,n){r&1&&je(0,2)}function CB(r,n){r&1&&(I(0,"thead",0),Jn(1,1),M(),I(2,"tbody",0),Jn(3,2)(4,3),M(),I(5,"tfoot",0),Jn(6,4),M())}function DB(r,n){r&1&&Jn(0,1)(1,2)(2,3)(3,4)}var li=new ne("CDK_TABLE");var bp=(()=>{class r{template=x(Nn);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkCellDef",""]]})}return r})(),_p=(()=>{class r{template=x(Nn);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkHeaderCellDef",""]]})}return r})(),JS=(()=>{class r{template=x(Nn);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkFooterCellDef",""]]})}return r})(),Qc=(()=>{class r{_table=x(li,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,o){if(t&1&&(Vt(o,bp,5),Vt(o,_p,5),Vt(o,JS,5)),t&2){let a;Ne(a=Pe())&&(i.cell=a.first),Ne(a=Pe())&&(i.headerCell=a.first),Ne(a=Pe())&&(i.footerCell=a.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",Se],stickyEnd:[2,"stickyEnd","stickyEnd",Se]},features:[Ke([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}]),st]})}return r})(),pp=class{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}},ek=(()=>{class r extends pp{constructor(){super(x(Qc),x(Fe))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Qe]})}return r})();var tk=(()=>{class r extends pp{constructor(){let e=x(Qc),t=x(Fe);super(e,t);let i=e._table?._getCellRole();i&&t.nativeElement.setAttribute("role",i)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Qe]})}return r})(),mp=class{tasks=[];endTasks=[]},gp=new ne("_COALESCED_STYLE_SCHEDULER"),x_=(()=>{class r{_currentSchedule=null;_ngZone=x(Le);constructor(){}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new mp,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new mp;for(let t of e.tasks)t();for(let t of e.endTasks)t()}this._currentSchedule=null})))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})();var w_=(()=>{class r{template=x(Nn);_differs=x(ga);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let t=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(t).create(),this._columnsDiffer.diff(t)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof Qd?e.headerCell.template:this instanceof C_?e.footerCell.template:e.cell.template}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,features:[At]})}return r})(),Qd=(()=>{class r extends w_{_table=x(li,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(x(Nn),x(ga))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",Se]},features:[st,Qe,At]})}return r})(),C_=(()=>{class r extends w_{_table=x(li,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(x(Nn),x(ga))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",Se]},features:[st,Qe,At]})}return r})(),yp=(()=>{class r extends w_{_table=x(li,{optional:!0});when;constructor(){super(x(Nn),x(ga))}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Qe]})}return r})(),as=(()=>{class r{_viewContainer=x(Hn);cells;context;static mostRecentCellOutlet=null;constructor(){r.mostRecentCellOutlet=this}ngOnDestroy(){r.mostRecentCellOutlet===this&&(r.mostRecentCellOutlet=null)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","cdkCellOutlet",""]]})}return r})(),D_=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){t&1&&Jn(0,0)},dependencies:[as],encapsulation:2})}return r})();var E_=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){t&1&&Jn(0,0)},dependencies:[as],encapsulation:2})}return r})(),nk=(()=>{class r{templateRef=x(Nn);_contentClassName="cdk-no-data-row";constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["ng-template","cdkNoDataRow",""]]})}return r})(),QS=["top","bottom","left","right"],y_=class{_isNativeHtmlTable;_stickCellCss;direction;_coalescedStyleScheduler;_isBrowser;_needsPositionStickyOnElement;_positionListener;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(n=>this._updateCachedSizes(n)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;constructor(n,e,t,i,o=!0,a=!0,s){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=t,this._coalescedStyleScheduler=i,this._isBrowser=o,this._needsPositionStickyOnElement=a,this._positionListener=s,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(n);let t=[];for(let i of n)if(i.nodeType===i.ELEMENT_NODE){t.push(i);for(let o=0;o<i.children.length;o++)t.push(i.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(let i of t)this._removeStickyStyle(i,e)})}updateStickyColumns(n,e,t,i=!0,o=!0){if(o&&this._updateStickyColumnReplayQueue({rows:[...n],stickyStartStates:[...e],stickyEndStates:[...t]}),!n.length||!this._isBrowser||!(e.some(a=>a)||t.some(a=>a))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let a=n[0],s=a.children.length,c=this._getCellWidths(a,i),l=this._getStickyStartColumnPositions(c,e),d=this._getStickyEndColumnPositions(c,t),u=e.lastIndexOf(!0),h=t.indexOf(!0),f=this.direction==="rtl",p=f?"right":"left",m=f?"left":"right";for(let g of n)for(let v=0;v<s;v++){let _=g.children[v];e[v]&&this._addStickyStyle(_,p,l[v],v===u),t[v]&&this._addStickyStyle(_,m,d[v],v===h)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:u===-1?[]:c.slice(0,u+1).map((g,v)=>e[v]?g:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:h===-1?[]:c.slice(h).map((g,v)=>t[v+h]?g:null).reverse()}))})}stickRows(n,e,t){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let i=t==="bottom"?n.slice().reverse():n,o=t==="bottom"?e.slice().reverse():e,a=[],s=[],c=[];for(let d=0,u=0;d<i.length;d++){if(!o[d])continue;a[d]=u;let h=i[d];c[d]=this._isNativeHtmlTable?Array.from(h.children):[h];let f=this._retrieveElementSize(h).height;u+=f,s[d]=f}let l=o.lastIndexOf(!0);for(let d=0;d<i.length;d++){if(!o[d])continue;let u=a[d],h=d===l;for(let f of c[d])this._addStickyStyle(f,t,u,h)}t==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:a,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:a,elements:c})})}updateStickyFooterContainer(n,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let t=n.querySelector("tfoot");t&&(e.some(i=>!i)?this._removeStickyStyle(t,["bottom"]):this._addStickyStyle(t,"bottom",0,!1))})}_removeStickyStyle(n,e){for(let i of e)n.style[i]="",n.classList.remove(this._borderCellCss[i]);QS.some(i=>e.indexOf(i)===-1&&n.style[i])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,t,i){n.classList.add(this._stickCellCss),i&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${t}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){let e={top:100,bottom:10,left:1,right:1},t=0;for(let i of QS)n.style[i]&&(t+=e[i]);return t?`${t}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let t=[],i=n.children;for(let o=0;o<i.length;o++){let a=i[o];t.push(this._retrieveElementSize(a).width)}return this._cachedCellWidths=t,t}_getStickyStartColumnPositions(n,e){let t=[],i=0;for(let o=0;o<n.length;o++)e[o]&&(t[o]=i,i+=n[o]);return t}_getStickyEndColumnPositions(n,e){let t=[],i=0;for(let o=n.length;o>0;o--)e[o]&&(t[o]=i,i+=n[o]);return t}_retrieveElementSize(n){let e=this._elemSizeCache.get(n);if(e)return e;let t=n.getBoundingClientRect(),i={width:t.width,height:t.height};return this._resizeObserver&&(this._elemSizeCache.set(n,i),this._resizeObserver.observe(n,{box:"border-box"})),i}_updateStickyColumnReplayQueue(n){this._removeFromStickyColumnReplayQueue(n.rows),!this._stickyColumnsReplayTimeout&&this._updatedStickyColumnsParamsToReplay.push(n)}_removeFromStickyColumnReplayQueue(n){let e=new Set(n);for(let t of this._updatedStickyColumnsParamsToReplay)t.rows=t.rows.filter(i=>!e.has(i));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(t=>!!t.rows.length)}_updateCachedSizes(n){let e=!1;for(let t of n){let i=t.borderBoxSize?.length?{width:t.borderBoxSize[0].inlineSize,height:t.borderBoxSize[0].blockSize}:{width:t.contentRect.width,height:t.contentRect.height};i.width!==this._elemSizeCache.get(t.target)?.width&&EB(t.target)&&(e=!0),this._elemSizeCache.set(t.target,i)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{for(let t of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(t.rows,t.stickyStartStates,t.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null},0))}};function EB(r){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(n=>r.classList.contains(n))}var vp=new ne("CDK_SPL");var S_=(()=>{class r{viewContainer=x(Hn);elementRef=x(Fe);constructor(){let e=x(li);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","rowOutlet",""]]})}return r})(),k_=(()=>{class r{viewContainer=x(Hn);elementRef=x(Fe);constructor(){let e=x(li);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","headerRowOutlet",""]]})}return r})(),I_=(()=>{class r{viewContainer=x(Hn);elementRef=x(Fe);constructor(){let e=x(li);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","footerRowOutlet",""]]})}return r})(),A_=(()=>{class r{viewContainer=x(Hn);elementRef=x(Fe);constructor(){let e=x(li);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=ae({type:r,selectors:[["","noDataRowOutlet",""]]})}return r})();var R_=(()=>{class r{_differs=x(ga);_changeDetectorRef=x(St);_elementRef=x(Fe);_dir=x(hn,{optional:!0});_platform=x(ft);_viewRepeater=x(Hl);_coalescedStyleScheduler=x(gp);_viewportRuler=x(Aa);_stickyPositioningListener=x(vp,{optional:!0,skipSelf:!0});_document=x(Ge);_data;_onDestroy=new _e;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new fe;viewChange=new mn({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=x(yt);constructor(){x(new Ur("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,t)=>this.trackBy?this.trackBy(t.dataIndex,t.data):t),this._viewportRuler.change().pipe(Pt(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),yh(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let t=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,t,(i,o,a)=>this._getEmbeddedViewArgs(i.item,a),i=>i.item.data,i=>{i.operation===Gs.INSERTED&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(i=>{let o=t.get(i.currentIndex);o.context.$implicit=i.item.data}),this._updateNoDataRow(),On(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let i=ZS(this._headerRowOutlet,"thead");i&&(i.style.display=e.length?"":"none")}let t=this._headerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,t,"top"),this._headerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let i=ZS(this._footerRowOutlet,"tfoot");i&&(i.style.display=e.length?"":"none")}let t=this._footerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,t,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,t),this._footerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),t=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...t,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,a)=>{this._addStickyColumnStyles([o],this._headerRowDefs[a])}),this._rowDefs.forEach(o=>{let a=[];for(let s=0;s<t.length;s++)this._renderRows[s].rowDef===o&&a.push(t[s]);this._addStickyColumnStyles(a,o)}),i.forEach((o,a)=>{this._addStickyColumnStyles([o],this._footerRowDefs[a])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let t=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||t,this._forceRecalculateCellWidths=t,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],t=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let o=this._data[i],a=this._getRenderRowsForData(o,i,t.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let s=0;s<a.length;s++){let c=a[s],l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),e.push(c)}}return e}_getRenderRowsForData(e,t,i){return this._getRowDefs(e,t).map(a=>{let s=i&&i.has(a)?i.get(a):[];if(s.length){let c=s.shift();return c.dataIndex=t,c}else return{data:e,rowDef:a,dataIndex:t}})}_cacheColumnDefs(){this._columnDefsByName.clear(),fp(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(t=>{this._columnDefsByName.has(t.name),this._columnDefsByName.set(t.name,t)})}_cacheRowDefs(){this._headerRowDefs=fp(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=fp(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=fp(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(t=>!t.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(a,s)=>{let c=!!s.getColumnsDiff();return a||c},t=this._rowDefs.reduce(e,!1);t&&this._forceRenderDataRows();let i=this._headerRowDefs.reduce(e,!1);i&&this._forceRenderHeaderRows();let o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),t||i||o}_switchDataSource(e){this._data=[],yh(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;yh(this.dataSource)?e=this.dataSource.connect(this):ca(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=be(this.dataSource)),this._renderChangeSubscription=e.pipe(Pt(this._onDestroy)).subscribe(t=>{this._data=t||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,t)=>this._renderRow(this._headerRowOutlet,e,t)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,t)=>this._renderRow(this._footerRowOutlet,e,t)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,t){let i=Array.from(t.columns||[]).map(s=>{let c=this._columnDefsByName.get(s);return c}),o=i.map(s=>s.sticky),a=i.map(s=>s.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,a,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let t=[];for(let i=0;i<e.viewContainer.length;i++){let o=e.viewContainer.get(i);t.push(o.rootNodes[0])}return t}_getRowDefs(e,t){if(this._rowDefs.length==1)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(o=>!o.when||o.when(t,e));else{let o=this._rowDefs.find(a=>a.when&&a.when(t,e))||this._defaultRowDef;o&&i.push(o)}return i.length,i}_getEmbeddedViewArgs(e,t){let i=e.rowDef,o={$implicit:e.data};return{templateRef:i.template,context:o,index:t}}_renderRow(e,t,i,o={}){let a=e.viewContainer.createEmbeddedView(t.template,o,i);return this._renderCellTemplateForItem(t,o),a}_renderCellTemplateForItem(e,t){for(let i of this._getCellTemplates(e))as.mostRecentCellOutlet&&as.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,t);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let t=0,i=e.length;t<i;t++){let a=e.get(t).context;a.count=i,a.first=t===0,a.last=t===i-1,a.even=t%2===0,a.odd=!a.even,this.multiTemplateDataRows?(a.dataIndex=this._renderRows[t].dataIndex,a.renderIndex=t):a.index=this._renderRows[t].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,t=>{let i=this._columnDefsByName.get(t);return e.extractCellTemplate(i)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(t,i)=>t||i.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new y_(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:be()).pipe(Pt(this._onDestroy)).subscribe(t=>{this._stickyStyler.direction=t,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(t=>!t._table||t._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let t=this._rowOutlet.viewContainer.length===0;if(t===this._isShowingNoDataRow)return;let i=this._noDataRowOutlet.viewContainer;if(t){let o=i.createEmbeddedView(e.templateRef),a=o.rootNodes[0];o.rootNodes.length===1&&a?.nodeType===this._document.ELEMENT_NODE&&(a.setAttribute("role","row"),a.classList.add(e._contentClassName))}else i.clear();this._isShowingNoDataRow=t,this._changeDetectorRef.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,o){if(t&1&&(Vt(o,nk,5),Vt(o,Qc,5),Vt(o,yp,5),Vt(o,Qd,5),Vt(o,C_,5)),t&2){let a;Ne(a=Pe())&&(i._noDataRow=a.first),Ne(a=Pe())&&(i._contentColumnDefs=a),Ne(a=Pe())&&(i._contentRowDefs=a),Ne(a=Pe())&&(i._contentHeaderRowDefs=a),Ne(a=Pe())&&(i._contentFooterRowDefs=a)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",Se],fixedLayout:[2,"fixedLayout","fixedLayout",Se]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Ke([{provide:li,useExisting:r},{provide:Hl,useClass:qs},{provide:gp,useClass:x_},{provide:vp,useValue:null}]),st],ngContentSelectors:xB,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){t&1&&(Et(yB),je(0),je(1,1),he(2,wB,1,0)(3,CB,7,0)(4,DB,4,0)),t&2&&(P(2),me(i._isServer?2:-1),P(),me(i._isNativeHtmlTable?3:4))},dependencies:[k_,S_,A_,I_],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return r})();function fp(r,n){return r.concat(Array.from(n))}function ZS(r,n){let e=n.toUpperCase(),t=r.viewContainer.element.nativeElement;for(;t;){let i=t.nodeType===1?t.nodeName:null;if(i===e)return t;if(i==="TABLE")break;t=t.parentNode}return null}var rk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Gl]})}return r})();var SB=[[["caption"]],[["colgroup"],["col"]],"*"],kB=["caption","colgroup, col","*"];function IB(r,n){r&1&&je(0,2)}function AB(r,n){r&1&&(I(0,"thead",0),Jn(1,1),M(),I(2,"tbody",2),Jn(3,3)(4,4),M(),I(5,"tfoot",0),Jn(6,5),M())}function RB(r,n){r&1&&Jn(0,1)(1,3)(2,4)(3,5)}var ik=(()=>{class r extends R_{stickyCssClass="mat-mdc-table-sticky";needsPositionStickyOnElement=!1;static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(t,i){t&2&&Oe("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[Ke([{provide:R_,useExisting:r},{provide:li,useExisting:r},{provide:gp,useClass:x_},{provide:Hl,useClass:qs},{provide:vp,useValue:null}]),Qe],ngContentSelectors:kB,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){t&1&&(Et(SB),je(0),je(1,1),he(2,IB,1,0)(3,AB,7,0)(4,RB,4,0)),t&2&&(P(2),me(i._isServer?2:-1),P(),me(i._isNativeHtmlTable?3:4))},dependencies:[k_,S_,A_,I_],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-sys-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-sys-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-sys-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-sys-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-sys-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return r})(),ok=(()=>{class r extends bp{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","matCellDef",""]],features:[Ke([{provide:bp,useExisting:r}]),Qe]})}return r})(),ak=(()=>{class r extends _p{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","matHeaderCellDef",""]],features:[Ke([{provide:_p,useExisting:r}]),Qe]})}return r})();var sk=(()=>{class r extends Qc{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},features:[Ke([{provide:Qc,useExisting:r},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}]),Qe]})}return r})(),ck=(()=>{class r extends ek{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[Qe]})}return r})();var lk=(()=>{class r extends tk{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[Qe]})}return r})();var dk=(()=>{class r extends Qd{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",Se]},features:[Ke([{provide:Qd,useExisting:r}]),st,Qe]})}return r})();var uk=(()=>{class r extends yp{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275dir=ae({type:r,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},features:[Ke([{provide:yp,useExisting:r}]),Qe]})}return r})(),hk=(()=>{class r extends D_{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[Ke([{provide:D_,useExisting:r}]),Qe],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){t&1&&Jn(0,0)},dependencies:[as],encapsulation:2})}return r})();var fk=(()=>{class r extends E_{static \u0275fac=(()=>{let e;return function(i){return(e||(e=gt(r)))(i||r)}})();static \u0275cmp=re({type:r,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[Ke([{provide:E_,useExisting:r}]),Qe],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){t&1&&Jn(0,0)},dependencies:[as],encapsulation:2})}return r})();var pk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,rk,Je]})}return r})();var aa=class r{constructor(n,e){this.storage=n;this.http=e}api=ph.api;getLocation(){let n=`${this.api}/location`,e=this.storage.get("token"),t=new Jt({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""});return this.http.get(n,{headers:t})}getDefualt(n=null){let e=`${this.api}/attendance`,t=this.storage.get("token"),i=new Jt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}addAttendance(){let n=`${this.api}/attendance`,e=this.storage.get("token"),t=new Jt({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""});return this.http.put(n,{},{headers:t})}getAllStudent(n){let e=`${this.api}/attendance`,t=this.storage.get("token"),i=new Jt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""});return this.http.post(e,n,{headers:i})}getStudentByface(n){let e=`${this.api}/attendance/face`,t=this.storage.get("token"),i=new Jt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}),o={image:n};return this.http.post(`${this.api}/attendance/face`,o,{headers:i})}sendHaven(n){let e=`${this.api}/attendance/comeHaven`,t=this.storage.get("token"),i=new Jt({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}),o={id:n};return this.http.post(`${e}`,o,{headers:i})}addClass(n){let e=`${this.api}/classes`,t=n,i={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.post(e,t,{headers:i})}getAll(n){let e=`${this.api}/classes/${n}`,t={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.get(e,{headers:t})}getInfoSem(n){let e=`${this.api}/info/sem`,t={stream:n},i={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.post(e,t,{headers:i})}getStreamInfo(){let n=`${this.api}/info/stream`,e={},t={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.post(n,e,{headers:t})}getAllNotic(){let n=`${this.api}/notice`,e={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.get(n,{headers:e})}createNotic(n){let e=`${this.api}/notice`,t={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.post(e,n,{headers:t})}static \u0275fac=function(e){return new(e||r)(Ae(on),Ae(Yi))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var xp=class r{modelsLoaded=!1;loadModels(){return at(this,null,function*(){try{yield dn.tinyFaceDetector.loadFromUri("/models"),yield dn.faceLandmark68Net.loadFromUri("/models"),this.modelsLoaded=!0,console.log("Models loaded successfully")}catch(n){console.error("Error loading face recognition models:",n)}})}detectBestFace(n){return at(this,null,function*(){if(!this.modelsLoaded)return console.warn("Models are not loaded yet. Please wait."),null;let e=new zc({inputSize:128,scoreThreshold:.5}),t=yield Xd(n,e).withFaceLandmarks();if(t.length===0)return null;let i=t.reduce((o,a)=>a.detection.box.width*a.detection.box.height>o.detection.box.width*o.detection.box.height?a:o);return{box:i.detection.box,landmarks:i.landmarks.positions}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};var FB=["video"],OB=["overlay"];function NB(r,n){if(r&1&&(I(0,"mat-option",6),j(1),M()),r&2){let e=n.$implicit;pe("value",e.value),P(),Xt(" ",e.lable," ")}}function PB(r,n){if(r&1&&(I(0,"mat-option",6),j(1),M()),r&2){let e=n.$implicit;pe("value",e.value),P(),ht(e.lable)}}function LB(r,n){r&1&&(I(0,"th",21),j(1," No. "),M())}function BB(r,n){if(r&1&&(I(0,"td",22),j(1),M()),r&2){let e=n.$implicit;P(),Xt(" ",e.position," ")}}function VB(r,n){r&1&&(I(0,"th",21),j(1," Name "),M())}function zB(r,n){if(r&1&&(I(0,"td",22),j(1),M()),r&2){let e=n.$implicit;P(),Xt(" ",e.name," ")}}function UB(r,n){r&1&&(I(0,"th",21),j(1," Roll "),M())}function jB(r,n){if(r&1&&(I(0,"td",22),j(1),M()),r&2){let e=n.$implicit;P(),Xt(" ",e.roll," ")}}function WB(r,n){r&1&&(I(0,"th",21),j(1," Action "),M())}function HB(r,n){if(r&1){let e=nt();I(0,"td",22)(1,"button",23),te("click",function(){let i=le(e).$implicit,o=ee(3);return de(o.deleteUser(i.roll))}),j(2," Delete "),M()()}}function GB(r,n){r&1&&G(0,"tr",24)}function qB(r,n){r&1&&G(0,"tr",25)}function YB(r,n){if(r&1&&(I(0,"table",12),pa(1,13),he(2,LB,2,0,"th",14)(3,BB,2,1,"td",15),ma(),pa(4,16),he(5,VB,2,0,"th",14)(6,zB,2,1,"td",15),ma(),pa(7,17),he(8,UB,2,0,"th",14)(9,jB,2,1,"td",15),ma(),pa(10,18),he(11,WB,2,0,"th",14)(12,HB,3,0,"td",15),ma(),he(13,GB,1,0,"tr",19)(14,qB,1,0,"tr",20),M()),r&2){let e=ee(2);pe("dataSource",e.usersList),P(13),pe("matHeaderRowDef",e.displayedColumns),P(),pe("matRowDefColumns",e.displayedColumns)}}function $B(r,n){if(r&1){let e=nt();I(0,"div",4)(1,"mat-form-field")(2,"mat-label"),j(3,"Stream"),M(),I(4,"mat-select",5),te("selectionChange",function(i){le(e);let o=ee();return de(o.selectStream(i.value))}),ur(5,NB,2,2,"mat-option",6,gs),M()(),I(7,"mat-form-field")(8,"mat-label"),j(9,"Date"),M(),I(10,"input",7),te("dateChange",function(i){le(e);let o=ee();return de(o.onDateChange(i.value))}),M(),G(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,0),M(),I(14,"mat-form-field")(15,"mat-label"),j(16,"semester"),M(),I(17,"mat-select",5),te("selectionChange",function(i){le(e);let o=ee();return de(o.selectSem(i.value))}),ur(18,PB,2,2,"mat-option",6,il),M()()(),I(20,"div",9)(21,"div",10),he(22,YB,15,3,"table",11),M()()}if(r&2){let e=Wr(13),t=ee();P(5),hr(t.stream),P(5),pe("matDatepicker",e),P(),pe("for",e),P(7),hr(t.semester),P(4),pe("ngIf",t.usersList.length>0)}}function KB(r,n){r&1&&G(0,"video",32,2)}function XB(r,n){if(r&1){let e=nt();I(0,"button",39),te("click",function(){le(e);let i=ee(2);return de(i.reset())}),G(1,"i",40),M()}}function QB(r,n){if(r&1){let e=nt();I(0,"div",35)(1,"div",41)(2,"div",42),G(3,"img",43),M()(),I(4,"div")(5,"div",44),j(6),M(),I(7,"div",45),j(8),M()(),I(9,"div",46)(10,"button",47)(11,"i",48),te("click",function(){le(e);let i=ee(2);return de(i.giveTOHaven())}),M()()()()}if(r&2){let e=ee(2);P(3),pe("src",e.giveUser.img,Dr),P(3),ht(e.giveUser.name),P(2),ht(e.giveUser.roll)}}function ZB(r,n){if(r&1){let e=nt();I(0,"div",26)(1,"button",27),te("click",function(){le(e);let i=ee();return de(i.back())}),Sn(),I(2,"svg",28),G(3,"path",29),M()()(),ua(),I(4,"div",3)(5,"div",30)(6,"div",31),te("click",function(){le(e);let i=ee();return de(i.enableScan())}),he(7,KB,2,0,"video",32),G(8,"canvas",33,1),M(),he(10,XB,2,0,"button",34)(11,QB,12,3,"div",35),I(12,"div",36)(13,"button",37),te("click",function(){le(e);let i=ee();return de(i.attend())}),G(14,"i",38),j(15),M()()()()}if(r&2){let e=ee();P(7),me(e.scan?7:-1),P(3),me(e.alradyDetected?10:-1),P(),me(e.giveUser?11:-1),P(2),pe("disabled",!e.attAble),P(2),ht(e.attAble?"Give Attendance":"Attendance alrady given")}}var wp=class r{constructor(n,e,t,i){this.service=n;this.location=e;this.faceRecognitionService=t;this.alertService=i}deleteUser(n){throw new Error("Method not implemented.")}videoRef;overlayRef;detectionInterval;success=!1;user=localStorage.getItem("info");lable;storedLocation={lat:0,lng:0};attAble=!1;months;selectedDate="0";semester=[];selectedsem="0";stream=[];selectedstream="0";msg="";distent;alradyDetected=!1;enableReset=!1;currentStream;giveUser=void 0;usersList=[];scan=!1;displayedColumns=["position","name","roll","symbol"];ngOnDestroy(){clearInterval(this.detectionInterval),this.releaseStream()}ngOnInit(){return at(this,null,function*(){if(yield this.faceRecognitionService.loadModels(),this.months=[{lable:"January",value:1},{lable:"February",value:2},{lable:"March",value:3},{lable:"April",value:4},{lable:"May",value:5},{lable:"June",value:6},{lable:"July",value:7},{lable:"August",value:8},{lable:"Septembe",value:9},{lable:"October",value:10},{lable:"November",value:11},{lable:"December",value:12}],this.user&&(this.user=JSON.parse(this.user),this.lable=localStorage.getItem("lable"),this.lable==3)){let n=localStorage.getItem("presentDate");if(n!=null){let e=new Date(n),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0),t.getTime()!==e.getTime()&&(this.attAble=!0)}else this.attAble=!0}this.getCources()})}ngAfterViewInit(){}enableScan(){this.scan=!0,this.startVideo()}startVideo(){this.releaseStream(),navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{this.videoRef.nativeElement.srcObject=n,this.startDetection(),this.currentStream=n}).catch(n=>{})}releaseStream(){this.currentStream&&(this.currentStream.getTracks().forEach(n=>n.stop()),this.videoRef.nativeElement.srcObject=null,this.currentStream=null)}startDetection(){return at(this,null,function*(){let n=this.videoRef.nativeElement,e=this.overlayRef.nativeElement,t={width:n.width,height:n.height};HE(e,t),this.detectionInterval=setInterval(()=>at(this,null,function*(){let i=yield Xd(n,new zc).withFaceLandmarks(),o=e.getContext("2d");if(o){o.clearRect(0,0,e.width,e.height);let a=b_(i,t);if(i.length>0){let s=i[0];this.alradyDetected||(this.alradyDetected=!0,this.captureFaceImage(n),clearInterval(this.detectionInterval))}}}),100)})}captureFaceImage(n){let e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight;let t=e.getContext("2d");if(t){t.drawImage(n,0,0,e.width,e.height);let i=e.toDataURL("image/jpeg").split(",")[1];this.sendImageToBackend(i)}}sendImageToBackend(n){return at(this,null,function*(){yield _t(this.service.getStudentByface(n).pipe(Ve(e=>{e&&(this.giveUser=e)},e=>{this.alertService.showErrorAlert(e.error.massage),this.back()})))})}getAllStudents(){return at(this,null,function*(){if(this.selectedDate=="0"||this.selectedsem=="0"||this.selectedstream=="0")return;let n={sem:this.selectedsem,stream:this.selectedstream,date:this.selectedDate};yield _t(this.service.getAllStudent(n).pipe(Ve(e=>{if(e.attendance.length>0)for(let t=0;t<e.attendance.length;t++)this.usersList.push({position:t+1,name:e.attendance[t].name,roll:e.attendance[t].roll});else this.alertService.showWarningAlert("No student recode found")})))})}selectSem(n){this.selectedsem=n,this.getAllStudents()}selectStream(n){this.selectedstream=n,this.getAllStudents(),this.getSem()}back(){this.location.back()}attend(){return at(this,null,function*(){yield _t(this.service.getDefualt().pipe(Ve(n=>at(this,null,function*(){if(n&&n.record)if(n.record.length<1)yield _t(this.service.getLocation().pipe(Ve(e=>{this.storedLocation={lat:e.locations.lat,lng:e.locations.lon},this.distent=e.locations.distend,qn(this.distent)}))),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude},i=this.calculateDistance(t,this.storedLocation);this.distent!=null&&i<=String(this.distent)?this.add():this.alertService.showErrorAlert("You are too far from the collage location.")},e=>{switch(e.code){case e.PERMISSION_DENIED:this.msg="Permission denied. Please allow location access.";break;case e.POSITION_UNAVAILABLE:this.msg="Location information is unavailable.";break;case e.TIMEOUT:this.msg="Location request timed out.";break;default:this.msg="An unknown error occurred.";break}this.alertService.showErrorAlert(this.msg)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):this.alertService.showWarningAlert("Geolocation is not supported by this browser.");else{let e=new Date;localStorage.setItem("presentDate",e.toISOString()),this.attAble=!1}}))))})}add(){return at(this,null,function*(){try{let n=yield _t(this.service.addAttendance().pipe(Ve(e=>{if(!e.message){this.alertService.showSuccessAlert("Attendees Update successfully!");let t=new Date;localStorage.setItem("presentDate",t.toISOString()),this.attAble=!1}})))}catch{this.alertService.showErrorAlert("Error updating attendance. Please try again.")}})}calculateDistance(n,e){let t=h=>h*Math.PI/180,o=t(n.lat),a=t(e.lat),s=t(e.lat-n.lat),c=t(e.lng-n.lng),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2),u=6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)));return u>=1e3?(u/1e3).toFixed(2)+" km":u.toFixed(2)+" meters"}reset(){this.alradyDetected=!1,this.startDetection()}giveTOHaven(){return at(this,null,function*(){this.giveUser.user_id!=null&&(navigator.geolocation?(yield _t(this.service.getLocation().pipe(Ve(n=>{this.storedLocation={lat:n.locations.lat,lng:n.locations.lon},this.distent=n.locations.distend}))),navigator.geolocation.getCurrentPosition(n=>at(this,null,function*(){let e={lat:n.coords.latitude,lng:n.coords.longitude},t=this.calculateDistance(e,this.storedLocation);if(this.distent!=null&&t<=String(this.distent)){let i=new Date;localStorage.setItem("presentDate",i.toISOString()),yield _t(this.service.sendHaven(this.giveUser.user_id).pipe(Ve(o=>{o.message?(this.alertService.showSuccessAlert(o.message),this.giveUser=void 0):this.alertService.showErrorAlert("Error updating attendance. Please try again.")},o=>{this.alertService.showErrorAlert("Error updating attendance. Please try again.")})))}else this.alertService.showErrorAlert("You are too far from the collage location.")}),n=>{switch(n.code){case n.PERMISSION_DENIED:this.msg="Permission denied. Please allow location access.";break;case n.POSITION_UNAVAILABLE:this.msg="Location information is unavailable.";break;case n.TIMEOUT:this.msg="Location request timed out.";break;default:this.msg="An unknown error occurred.";break}this.alertService.showWarningAlert(this.msg)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):this.alertService.showWarningAlert("Geolocation is not supported by this browser."))})}onDateChange(n){this.selectedDate=`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`,this.getAllStudents()}getCources(){return at(this,null,function*(){yield _t(this.service.getStreamInfo().pipe(Ve(n=>{n.map(e=>{this.stream?.push({lable:e.name,value:e.id})})})))})}getSem(){return at(this,null,function*(){yield _t(this.service.getInfoSem(this.selectedstream).pipe(Ve(n=>{for(let e=1;e<=Number(n.course_duration)*2;e++)this.semester.push({lable:String(e),value:e})})))})}static \u0275fac=function(e){return new(e||r)(ve(aa),ve(qi),ve(xp),ve(Ln))};static \u0275cmp=re({type:r,selectors:[["app-attendance"]],viewQuery:function(e,t){if(e&1&&(lt(FB,5),lt(OB,5)),e&2){let i;Ne(i=Pe())&&(t.videoRef=i.first),Ne(i=Pe())&&(t.overlayRef=i.first)}},features:[Ke([xi()])],decls:3,vars:2,consts:[["picker",""],["overlay",""],["video",""],[1,"root"],[1,"w-full","h-[10%]","absolute","bottom-0","flex","items-center","justify-center"],[3,"selectionChange"],[3,"value"],["matInput","",3,"dateChange","matDatepicker"],["matIconSuffix","",3,"for"],[1,"w-full","h-[90%]","overflow-x-scroll","absolute","top-0"],[1,"h-full","w-full","relative","flex-col"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","roll"],["matColumnDef","symbol"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","",2,"color","red !important",3,"click"],["mat-header-row",""],["mat-row",""],[1,"w-full","h-[54px]","absolute","top-0","flex","items-center","pl-2"],["mat-button","",1,"btn","btn-circle","bg-transparent","outline-none","hover:bg-blue-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","w-full","h-full","flex-col","justify-center","items-center"],["id","scan-box",1,"w-52","h-52","bg-black","place-items-center","rounded-box","my_shdow","overflow-hidden","outline","outline-[#647bfd7a]","relative",3,"click"],["autoplay","","width","100%","height","100%",1,"rounded-box"],[2,"position","absolute","top","0","left","0","bottom","0","right","0","height","100%","width","100%"],[1,"btn","btn-outline","btn-info","m-4"],[1,"flex","gap-3","items-center","bg-[#ffffff2c]","px-6","rounded-md","m-5"],[1,"m-14"],["mat-flat-button","","extended","",1,"btn","btn-outline","btn-info","disabled",3,"click","disabled"],[1,"bi","bi-person-raised-hand","text-2xl"],[1,"btn","btn-outline","btn-info","m-4",3,"click"],[1,"bi","bi-arrow-clockwise","text-2xl"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],["alt","Avatar Tailwind CSS Component",3,"src"],[1,"font-bold","text-white"],[1,"text-sm","opacity-50","text-white"],["data-tip","Give Attendance",1,"tooltip","my-6","ml-4","text-white"],[1,"btn","btn-outline","btn-info"],[1,"bi","bi-person-check","text-2xl",3,"click"]],template:function(e,t){e&1&&(I(0,"div",3),he(1,$B,23,3)(2,ZB,16,5),M()),e&2&&(P(),me(t.lable==1||t.lable==2?1:-1),P(),me(t.lable==3?2:-1))},dependencies:[al,Dy,Wt,qt,dc,lc,qo,Oa,ei,Rr,nr,nc,Tr,Mr,Xc,hp,Vs,pk,ik,ak,dk,sk,ok,uk,ck,lk,hk,fk],styles:[".holder[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background:linear-gradient(to right,#f0f4f8,#c9e2f4)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0003;padding:20px;text-align:center;width:350px;max-width:100%;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 16px #0000004d}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-top:20px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:16px;margin:10px 0}.my_shdow[_ngcontent-%COMP%]{box-shadow:#107af30d 0 0 0 1px,#015ce48a 0 0 0 1px inset}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}#scan-box[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-image:url(/img/face-scan.png);background-size:contain}"]})};var Vi=class r{constructor(n,e){this.storage=n;this.http=e}api=jh.api;getPost(n){let e={"Content-Type":"application/json",Authorization:`Bearer ${this.storage.get("token")}`};return this.http.get(`${this.api}/posts/${n}`,{headers:e})}postPost(n){let e=this.storage.get("token"),t=new Jt({Authorization:e?`Bearer ${e}`:""}),i=new FormData;return i.append("file",n),this.http.post(this.api+"/posts",i,{headers:t})}static \u0275fac=function(e){return new(e||r)(Ae(on),Ae(Yi))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function JB(r,n){if(r&1&&(I(0,"mat-card-content",15),G(1,"img",16),M(),G(2,"mat-divider",8)),r&2){let e=ee(2);P(),vs("src","data:",e.contentInformation==null?null:e.contentInformation.content_type,";base64,",e.contentInformation==null?null:e.contentInformation.content,"",Dr)}}function e4(r,n){if(r&1&&(I(0,"mat-card-content",15)(1,"video",17),G(2,"source",18),M()(),G(3,"mat-divider",8)),r&2){let e=ee(2);P(2),vs("src","data:",e.contentInformation==null?null:e.contentInformation.content_type,";base64,",e.contentInformation==null?null:e.contentInformation.content,"",Dr)}}function t4(r,n){if(r&1&&G(0,"iframe",19),r&2){let e=ee(3);ol("src",e.videLink,ty)}}function n4(r,n){if(r&1&&(I(0,"mat-card-content"),he(1,t4,1,1,"iframe",19),M(),G(2,"mat-divider",8)),r&2){let e=ee(2);P(),me(e.videLink?1:-1)}}function r4(r,n){r&1&&(I(0,"button",14)(1,"mat-icon"),Sn(),I(2,"svg",20),G(3,"path",21),M()()())}function i4(r,n){if(r&1){let e=nt();I(0,"button",22),te("click",function(){le(e);let i=ee(2);return de(i.downloadContentInformation())}),I(1,"mat-icon",23),j(2," download_for_offline "),M()()}}function o4(r,n){if(r&1&&(I(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"div",4),G(5,"img",5),M(),I(6,"div",6)(7,"mat-card-subtitle"),j(8),M(),I(9,"div",7),j(10),M()()(),G(11,"mat-divider",8),I(12,"div",9),j(13),M()(),he(14,JB,3,3)(15,e4,4,3)(16,n4,3,1),I(17,"mat-card-content")(18,"p",10),j(19),M()(),I(20,"div",11)(21,"mat-card-footer",12)(22,"div",13),he(23,r4,4,0,"button",14)(24,i4,3,0,"button",14),M()()()()()),r&2){let e=ee();P(5),ol("src",e.user==null?null:e.user.img,Dr),P(3),ht(e.user==null?null:e.user.name),P(2),ht(e.card.createDate),P(3),Xt(" ",e.card.title," "),P(),me((e.contentInformation==null?null:e.contentInformation.content_type)=="image/png"||(e.contentInformation==null?null:e.contentInformation.content_type)=="image/jpeg"?14:-1),P(),me((e.contentInformation==null?null:e.contentInformation.content_type)=="video/mp4"?15:-1),P(),me(e.videLink?16:-1),P(3),ht(e.card.description),P(4),me(e.downloadLink?23:-1),P(),me(e.contentDownloadLink?24:-1)}}var Dp=class r{constructor(n,e){this.service=n;this.postService=e}card;downloadLink;user;videLink;contentInformation;contentDownloadLink;ngOnInit(){if(this.card?.host&&this.hostInfo(this.card.host),this.card?.description&&(this.videLink=gh(this.card.description)[0]),this.card?.createDate&&(this.card.createDate=bh(this.card.createDate)),this.card?.content_id){if(this.contentInformation&&this.contentInformation.id==this.card.content_id)return;this.getPost(this.card.content_id)}}ngOnChanges(n){n.card&&this.ngOnInit()}hostInfo(n){return at(this,null,function*(){yield _t(this.service.getUserinfo(n).pipe(Ve(e=>{e&&(this.user=e,this.user&&(this.user.name=Ia(this.user.name)),this.user.img==""&&(this.user.img="/img/user-286-64.png"))})))})}getPost(n){return at(this,null,function*(){yield _t(this.postService.getPost(n).pipe(Ve(e=>{e&&(this.contentInformation=e,this.contentInformation?.content_type!="image/jpeg"&&this.contentInformation?.content_type!="image/jpg"&&this.contentInformation?.content_type!="image/png"&&this.contentInformation?.content_type!="image/gif"&&this.contentInformation?.content_type!="image/webp"&&this.contentInformation?.content_type!="image/png"&&this.contentInformation?.content_type!="video/mp4"&&(this.contentDownloadLink=!0))},e=>{qn(e)})))})}onclickDownload(){console.log(this.downloadLink)}downloadContentInformation(){vh(this.contentInformation)}static \u0275fac=function(e){return new(e||r)(ve(Ai),ve(Vi))};static \u0275cmp=re({type:r,selectors:[["class-card"]],inputs:{card:"card"},features:[Ke([xi()]),At],decls:1,vars:1,consts:[[1,"overflow-scroll","p-4","flex-col","right-0","justify-center","items-center"],[1,"h-[]","w-[]","mb-3","mt-0","p-3",2,"background-color","rgb(201, 207, 235)"],[1,"mb-1","font-bold","flex-col",2,"font-size","large"],[1,"h-full","flex","w-full","m-4"],[1,"h-full","items-start"],["alt","Profile Image","onerror","this.onerror=null; this.src='/img/user-286-64.png';",1,"rounded-full","h-full",3,"src"],[1,"h-full","w-[75%]","ml-10","mt-4"],[1,"text-sm","opacity-50"],[1,"m-4"],[1,"w-full","decoration-auto","m-4"],[1,"p-2","text-justify"],[1,"mt-6"],[1,"p-4","opacity-80","flex"],[1,"w-full","text-end"],["mat-flat-button","",1,"pl-2"],[1,"m-2"],["mat-card-image","","alt","Profile Image",1,"w-full",3,"src"],["controls",""],["type","video/mp4",3,"src"],["width","100%","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","referrerpolicy","strict-origin-when-cross-origin","allowfullscreen","",3,"src"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-browser-chrome"],["fill-rule","evenodd","d","M16 8a8 8 0 0 1-7.022 7.94l1.902-7.098a3 3 0 0 0 .05-1.492A3 3 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8M0 8a8 8 0 0 0 7.927 8l1.426-5.321a3 3 0 0 1-.723.255 3 3 0 0 1-1.743-.147 3 3 0 0 1-1.043-.7L.633 4.876A8 8 0 0 0 0 8m5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a3 3 0 0 0-1.252.243 2.99 2.99 0 0 0-1.81 2.59M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"],["mat-flat-button","",1,"pl-2",3,"click"],[1,"large-icon"]],template:function(e,t){e&1&&he(0,o4,25,10,"div",0),e&2&&me(t.card?0:-1)},dependencies:[er,js,Ws,lh,ch,dh,sh,Wt,qt,zs,Oo],encapsulation:2})};function a4(r,n){if(r&1){let e=nt();I(0,"div",4)(1,"button",13),te("click",function(){le(e);let i=ee();return de(i.createClass())}),I(2,"mat-icon"),j(3,"add"),M()()()}if(r&2){let e=ee();pe("hidden",!(e.label=="1"||e.label=="2"))}}function s4(r,n){if(r&1&&G(0,"class-card",8),r&2){let e=n.$implicit;pe("card",e)}}function c4(r,n){if(r&1&&(I(0,"mat-option",24),j(1),M()),r&2){let e=n.$implicit;pe("value",e.value),P(),ht(e.lable)}}function l4(r,n){if(r&1&&(I(0,"mat-option",24),j(1),M()),r&2){let e=n.$implicit;pe("value",e.value),P(),ht(e.lable)}}function d4(r,n){if(r&1){let e=nt();I(0,"input",19),te("change",function(i){le(e);let o=ee(2);return de(o.onFileSelected(i))}),M(),I(1,"form",20)(2,"mat-form-field",21)(3,"mat-label"),j(4,"Title or Class name"),M(),G(5,"input",22),M(),I(6,"mat-form-field")(7,"mat-label"),j(8,"Stream"),M(),I(9,"mat-select",23),te("selectionChange",function(i){le(e);let o=ee(2);return de(o.selectStream(i.value))}),ur(10,c4,2,2,"mat-option",24,il),M()(),I(12,"mat-form-field")(13,"mat-label"),j(14,"Semester"),M(),I(15,"mat-select",23),te("selectionChange",function(i){le(e);let o=ee(2);return de(o.selectSem(i.value))}),ur(16,l4,2,2,"mat-option",24,il),M()(),I(18,"mat-form-field",21)(19,"mat-label"),j(20,"Leave a comment"),M(),G(21,"textarea",25),M()()}if(r&2){let e=ee(2);P(),pe("formGroup",e.calssForm),P(9),hr(e.stream),P(6),hr(e.semester)}}function u4(r,n){if(r&1){let e=nt();I(0,"div",12)(1,"div",14)(2,"div",15),he(3,d4,22,1),M(),I(4,"div",16)(5,"button",17),te("click",function(){le(e);let i=ee();return de(i.createClass())}),j(6,"Cancle"),M(),I(7,"button",18),te("click",function(){le(e);let i=ee();return de(i.onSubmit())}),j(8,"Save"),M()()()()}if(r&2){let e=ee();P(3),me(e.calssForm?3:-1)}}var Ep=class r{constructor(n,e,t,i){this.postService=n;this.fb=e;this.service=t;this.alertService=i}allClassesView=!1;createClassView=!1;selectedFile=null;uploadId;progress;semester=[];stream=[];label=localStorage.getItem("lable");calssForm;cardData=[];dateFilter=n=>{let e=new Date;return e.setHours(0,0,0,0),(n||e)<=e};date=new Date().toISOString();ngOnInit(){this.fetchClasses(this.date),(this.label=="1"||this.label=="2")&&this.fetchStream()}fetchClasses(n){return at(this,null,function*(){yield _t(this.service.getAll(mh(n)).pipe(Ve(e=>{e&&(this.cardData=e)},e=>{this.alertService.showWarningAlert(e.error.message)})))})}createClass(){if(this.createClassView){this.createClassView=!this.createClassView,this.createClassView||this.fetchClasses(this.date);return}this.calssForm=this.fb.group({content_id:[""],title:["",Ft.required],stream:["",Ft.required],semester:["",Ft.required],description:[""]}),this.createClassView=!this.createClassView}onFileSelected(n){let e=n.target;e.files&&e.files[0]&&(this.selectedFile=e.files[0],this.uploadFile())}uploadFile(){return at(this,null,function*(){this.selectedFile&&(yield _t(this.postService.postPost(this.selectedFile).pipe(Ve(n=>{n.post_id&&(this.uploadId=n.post_id)},n=>{console.log(n),this.alertService.showWarningAlert(n.error.message)}))))})}onSubmit(){return at(this,null,function*(){this.calssForm?.patchValue({content_id:this.uploadId}),this.calssForm?.valid?yield _t(this.service.addClass(this.calssForm.value).pipe(Ve(n=>{this.alertService.showSuccessAlert(n.message)},n=>{this.alertService.showWarningAlert(n.error.message)}))):(qn(this.calssForm?.value),this.alertService.showWarningAlert("Please fill all the fields"))})}selectSem(n){this.calssForm?.patchValue({semester:n})}selectStream(n){this.calssForm?.patchValue({stream:n}),this.fetchSemester(n)}onDateChange(n){this.date=n?.toISOString()||"",this.fetchClasses(this.date)}fetchStream(){return at(this,null,function*(){yield _t(this.service.getStreamInfo().pipe(Ve(n=>{n.map(e=>{this.stream?.push({lable:e.name,value:e.id})})})))})}fetchSemester(n){return at(this,null,function*(){yield _t(this.service.getInfoSem(n).pipe(Ve(e=>{for(let t=1;t<=Number(e.course_duration)*2;t++)this.semester?.push({lable:t,value:t})})))})}static \u0275fac=function(e){return new(e||r)(ve(Vi),ve(ki),ve(aa),ve(Ln))};static \u0275cmp=re({type:r,selectors:[["app-classes"]],features:[Ke([xi()])],decls:16,vars:5,consts:[["picker",""],[1,"root","flex-col","relative"],["data-aos","fade-down",1,"bg-blue-500","w-[140%]","h-[200px]","absolute","top-[-90px]","text-center","flex","justify-center","items-center","z-[3]",2,"border-radius","100%"],[1,"decoration-auto","parkinsans","text-2xl","text-white","mt-[20%]"],[1,"bg-red-50","absolute","bottom-16","right-4","z-[3]",3,"hidden"],[1,"h-full","w-full","relative"],[1,"absolute","bottom-[41px]","left-0","right-0","top-[100px]"],[1,"w-full","h-full","overflow-x-scroll","flex","flex-col","items-center","p-1"],[1,"w-[95%]",3,"card"],[1,"absolute","w-full","bottom-1","h-[40px]","text-center"],["matInput","",2,"height","0px","width","0px",3,"dateChange","matDatepicker","matDatepickerFilter"],["matIconSuffix","",3,"for"],["data-aos","fade-up",1,"absolute","z-[3]","shadow-2","w-[95%]","h-[60%]","bottom-0","bg-white","pt-[22px]",2,"border-radius","22px 22px 0px 0px"],["mat-fab","",3,"click"],[1,"relative","w-full","h-full"],[1,"w-full","h-[80%]","p-4"],[1,"w-full","h-[20%]","flex","justify-center","items-center","gap-4"],["mat-flat-button","","extended","",1,"red-btn",3,"click"],["mat-flat-button","","extended","",3,"click"],["type","file","extensions","pdf,xlsx,mp4,doc",1,"lock","w-full","border","border-gray-200","shadow-sm","rounded-lg","text-sm","focus:z-10","focus:border-blue-500","focus:ring-blue-500","disabled:opacity-50","disabled:pointer-events-none","dark:bg-gray-900","dark:border-gray-700","dark:text-neutral-400","file:bg-gray-50","file:border-0","file:me-4","file:py-3","file:px-4","dark:file:bg-gray-700","dark:file:text-neutral-400","mb-3",3,"change"],[1,"w-full","h-full",3,"formGroup"],[1,"example-full-width"],["matInput","","type","text","formControlName","title","placeholder","Title or Class name",1,"grow"],[3,"selectionChange"],[3,"value"],["matInput","","type","password","formControlName","description","placeholder","description",1,"textarea","textarea-bordered","grow","gap-2","m-3","w-[99%]"]],template:function(e,t){if(e&1){let i=nt();I(0,"div",1)(1,"div",2)(2,"h1",3),j(3,"Classes"),M()(),he(4,a4,4,1,"div",4),I(5,"div",5)(6,"div",6)(7,"div",7),ur(8,s4,1,1,"class-card",8,gs),M()(),I(10,"div",9)(11,"input",10),te("dateChange",function(a){return le(i),de(t.onDateChange(a.value))}),M(),G(12,"mat-datepicker-toggle",11)(13,"mat-datepicker",null,0),M()(),he(15,u4,9,1,"div",12),M()}if(e&2){let i=Wr(14);P(4),me(t.createClassView?-1:4),P(4),hr(t.cardData),P(3),pe("matDatepicker",i)("matDatepickerFilter",t.dateFilter),P(),pe("for",i),P(3),me(t.createClassView?15:-1)}},dependencies:[Ii,Si,Ar,Di,Ei,Bn,Jr,No,Oo,Wt,qt,Hs,Tr,Mr,Rr,nr,nc,Xc,hp,Vs,dc,lc,qo,Oa,er,Dp],styles:[".card-css[_ngcontent-%COMP%]{box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px}.red-btn[_ngcontent-%COMP%]{background-color:red!important}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};var Sp=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=re({type:r,selectors:[["app-feedback"]],decls:2,vars:0,template:function(e,t){e&1&&(I(0,"p"),j(1,"feedback works!"),M())},encapsulation:2})};var kp=class r{constructor(n,e){this.router=n;this.storage=e}ngOnInit(){localStorage.getItem("token")&&localStorage.removeItem("token"),localStorage.getItem("info")&&localStorage.removeItem("info")}logout(){localStorage.clear(),this.storage.delete("token"),this.storage.delete("ifo"),this.router.navigate(["/welcome"])}static \u0275fac=function(e){return new(e||r)(ve(nn),ve(on))};static \u0275cmp=re({type:r,selectors:[["app-logout"]],decls:8,vars:1,consts:[[1,"root","flex-col"],[1,"w-72","h-72"],["src","/img/verified_7641727.png",1,"w-full"],[1,"text-center"],["type","button",1,"w-50","mt-3","select-none","rounded-lg","bg-blue-500","py-3","px-6","text-center","align-middle","font-sans","text-xs","font-bold","uppercase","text-white","shadow-md","shadow-blue-500/20","transition-all","hover:shadow-lg","hover:shadow-blue-500/40","focus:opacity-[0.85]","focus:shadow-none","active:opacity-[0.85]","active:shadow-none","disabled:pointer-events-none","disabled:opacity-50","disabled:shadow-none",3,"click"]],template:function(e,t){e&1&&(I(0,"div",0)(1,"div",1),G(2,"img",2),M(),I(3,"div",3)(4,"h1"),j(5,"Successfully Logout!"),M(),I(6,"button",4),te("click",function(){return t.logout()}),j(7," Login Again "),M()()()),e&2&&(P(),pe("@bounceUp",void 0))},encapsulation:2})};function h4(r,n){if(r&1){let e=nt();I(0,"form",6)(1,"mat-form-field",7)(2,"mat-label"),j(3,"New Password"),M(),G(4,"input",8),M(),I(5,"mat-form-field",7)(6,"mat-label"),j(7,"Confirm Password"),M(),G(8,"input",9),M(),I(9,"div",10)(10,"button",11),te("click",function(){le(e);let i=ee(2);return de(i.onSubmit())}),j(11," Save "),M()()()}if(r&2){let e=ee(2);pe("formGroup",e.passwordFrom)}}function f4(r,n){if(r&1&&(I(0,"div",0)(1,"div",1),G(2,"div",2),I(3,"div",3)(4,"h1",4),j(5),M()()(),I(6,"div",5),he(7,h4,12,1,"form",6),M()()),r&2){let e=ee();P(2),dy("background: url('",e.imgUrl,"'); background-size: cover; background-repeat: no-repeat;"),P(3),ht(e.user.name),P(2),me(e.passwordFrom?7:-1)}}var Ip=class r{constructor(n,e,t){this.storage=n;this.fb=e;this.alertService=t}user;imgUrl="img/user-286-512.png";passwordFrom;ngOnInit(){this.init(),this.user=this.storage.get("info"),this.user.img!=""&&(this.imgUrl=this.user.img)}init(){this.passwordFrom=this.fb.group({password:["",Ft.required],confirm_password:["",Ft.required]})}onSubmit(){this.passwordFrom?.valid&&(this.passwordFrom.value.password==this.passwordFrom.value.confirm_password?this.alertService.showSuccessAlert("Do you want save password?",!0):this.alertService.showWarningAlert("Password and Confirm Password not match!"))}onOk(){this.passwordFrom?.valid&&console.log(this.passwordFrom.value)}static \u0275fac=function(e){return new(e||r)(ve(on),ve(ki),ve(Ln))};static \u0275cmp=re({type:r,selectors:[["app-securty"]],decls:1,vars:1,consts:[[1,"root"],[1,"absolute","top-5"],[1,"shadow-2","w-[200px]","h-[200px]","rounded-full"],[1,"w-full","text-center","mt-4"],[1,"text-2xl","font-bold","parkinsans"],[1,"w-[90%]","shadow-1","p-4"],[3,"formGroup"],[1,"example-full-width","w-full","bg-transparent"],["matInput","","type","password","placeholder","password","formControlName","password"],["matInput","","type","password","placeholder","password","formControlName","confirm_password"],[1,"w-full","text-center"],["mat-flat-button","",3,"click"]],template:function(e,t){e&1&&he(0,f4,8,5,"div",0),e&2&&me(t.user?0:-1)},dependencies:[er,Tr,Mr,Rr,nr,tc,Si,Ar,Di,Ei,Ii,Bn,Jr,Wt,qt],encapsulation:2})};function p4(r,n){r&1&&(I(0,"div",15),j(1,"NEW"),M())}function m4(r,n){if(r&1&&(I(0,"div",3)(1,"div",12),G(2,"img",13),M(),I(3,"div",14)(4,"mat-card-subtitle"),j(5),M()(),he(6,p4,2,0,"div",15),M()),r&2){let e=ee(2);P(2),ol("src",e.user.img,Dr),P(3),ht(e.user.name),P(),me(e.itNew?6:-1)}}function g4(r,n){if(r&1&&(I(0,"mat-card-content",16),G(1,"img",17),M(),G(2,"mat-divider",4)),r&2){let e=ee(2);P(),vs("src","data:",e.contentInformation==null?null:e.contentInformation.content_type,";base64,",e.contentInformation==null?null:e.contentInformation.content,"",Dr)}}function v4(r,n){if(r&1&&(I(0,"mat-card-content",16)(1,"video",18),G(2,"source",19),M()(),G(3,"mat-divider",4)),r&2){let e=ee(2);P(2),vs("src","data:",e.contentInformation==null?null:e.contentInformation.content_type,";base64,",e.contentInformation==null?null:e.contentInformation.content,"",Dr)}}function b4(r,n){r&1&&(I(0,"button",10)(1,"mat-icon"),Sn(),I(2,"svg",20),G(3,"path",21),M()()())}function _4(r,n){if(r&1){let e=nt();I(0,"button",22),te("click",function(){le(e);let i=ee(2);return de(i.downloadContentInformation())}),I(1,"mat-icon",23),j(2," download_for_offline "),M()()}}function y4(r,n){if(r&1&&(I(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2),he(3,m4,7,3,"div",3),G(4,"mat-divider",4),I(5,"div",5),j(6),M()(),he(7,g4,3,3)(8,v4,4,3),I(9,"mat-card-content")(10,"p",6),j(11),M()(),I(12,"div",7)(13,"mat-card-footer",8)(14,"div",9),he(15,b4,4,0,"button",10)(16,_4,3,0,"button",10),M(),I(17,"div",11),j(18),M()()()()()),r&2){let e=ee();P(3),me(e.user?3:-1),P(3),Xt(" ",e.notic.title," "),P(),me((e.contentInformation==null?null:e.contentInformation.content_type)=="image/png"||(e.contentInformation==null?null:e.contentInformation.content_type)=="image/jpeg"?7:-1),P(),me((e.contentInformation==null?null:e.contentInformation.content_type)=="video/mp4"?8:-1),P(3),ht(e.notic.content),P(4),me(e.downloadLink?15:-1),P(),me(e.contentDownloadLink?16:-1),P(2),Xt(" ",e.notic.createDate," ")}}var Ap=class r{constructor(n,e){this.userService=n;this.postService=e}notic;user;downloadLink;itNew=!1;contentInformation;contentDownloadLink;ngOnInit(){this.notic?.createBy&&this.getInfoHost(),this.notic?.post_id&&this.getPostData(),this.notic?.createDate&&(this.notic.createDate=bh(this.notic.createDate)),this.notic&&(this.notic.title=Ia(this.notic.title)),this.notic?.content&&(this.downloadLink=gh(this.notic.content)[0])}calculateNew(){if(this.notic?.createDate){let n=new Date(this.notic.createDate),t=new Date().getTime()-n.getTime();Math.ceil(t/(1e3*60*60*24))<=7&&(this.itNew=!0)}}getInfoHost(){return at(this,null,function*(){this.notic?.createBy&&(yield _t(this.userService.getUserinfo(this.notic.createBy).pipe(Ve(n=>{n&&(this.user=n,this.user&&this.user.img==""&&(this.user.img="/img/user-286-64.png"),this.user&&(this.user.name=Ia(this.user.name)))}))))})}getPostData(){return at(this,null,function*(){this.notic?.post_id&&(yield _t(this.postService.getPost(this.notic.post_id).pipe(Ve(n=>{n&&n&&(this.contentInformation=n,this.contentInformation?.content_type!="image/jpeg"&&this.contentInformation?.content_type!="image/jpg"&&this.contentInformation?.content_type!="image/png"&&this.contentInformation?.content_type!="image/gif"&&this.contentInformation?.content_type!="image/webp"&&this.contentInformation?.content_type!="image/png"&&this.contentInformation?.content_type!="video/mp4"&&(this.contentDownloadLink=!0))}))))})}downloadContentInformation(){vh(this.contentInformation)}static \u0275fac=function(e){return new(e||r)(ve(Ai),ve(Vi))};static \u0275cmp=re({type:r,selectors:[["notic-card"]],inputs:{notic:"notic"},decls:1,vars:1,consts:[[1,"overflow-scroll","p-4","flex-col","right-0","justify-center","items-center"],[1,"h-[]","w-[]","mb-3","mt-0","p-3",2,"background-color","rgb(201, 207, 235)"],[1,"mb-1","font-bold","flex-col",2,"font-size","large"],[1,"h-full","flex","w-full","m-4"],[1,"m-4"],[1,"w-full","decoration-auto","m-4"],[1,"p-2","text-justify"],[1,"mt-6"],[1,"p-4","opacity-80","flex"],[1,"w-[50%]"],["mat-button",""],[1,"w-[50%]","text-end"],[1,"h-full","items-start"],["alt","Profile Image","onerror","this.onerror=null; this.src='/img/user-286-64.png';",1,"rounded-full","h-full",3,"src"],[1,"h-full","w-[75%]","ml-10","mt-4"],[1,"bg-[#5036e4]","h-[28px]","w-[70px]","text-center","rounded-l-[2rem]","rounded-r-[2rem]","animate-pulse","text-white","font-parkinsans"],[1,"m-2"],["mat-card-image","","alt","Profile Image",1,"w-full",3,"src"],["controls",""],["type","video/mp4",3,"src"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-browser-chrome"],["fill-rule","evenodd","d","M16 8a8 8 0 0 1-7.022 7.94l1.902-7.098a3 3 0 0 0 .05-1.492A3 3 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8M0 8a8 8 0 0 0 7.927 8l1.426-5.321a3 3 0 0 1-.723.255 3 3 0 0 1-1.743-.147 3 3 0 0 1-1.043-.7L.633 4.876A8 8 0 0 0 0 8m5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a3 3 0 0 0-1.252.243 2.99 2.99 0 0 0-1.81 2.59M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"],["mat-button","",3,"click"],[1,"large-icon"]],template:function(e,t){e&1&&he(0,y4,19,8,"div",0),e&2&&me(t.notic?0:-1)},dependencies:[qt,er,js,Ws,lh,ch,dh,sh,Us,zs,Oo],encapsulation:2})};function x4(r,n){if(r&1&&G(0,"notic-card",4),r&2){let e=n.$implicit;pe("notic",e)}}function w4(r,n){if(r&1){let e=nt();I(0,"div",5)(1,"button",7),te("click",function(){le(e);let i=ee();return de(i.switchViewe())}),Sn(),I(2,"svg",8),G(3,"path",9)(4,"path",10),M()()()}}function C4(r,n){if(r&1){let e=nt();I(0,"input",16),te("change",function(i){le(e);let o=ee(2);return de(o.onFileSelected(i))}),M(),I(1,"form",17)(2,"mat-form-field",18)(3,"mat-label"),j(4,"Notice Title"),M(),G(5,"input",19),M(),I(6,"mat-form-field",18)(7,"mat-label"),j(8,"Content"),M(),I(9,"textarea",20),j(10,"                            "),M()()()}if(r&2){let e=ee(2);P(),pe("formGroup",e.noticFrom)}}function D4(r,n){if(r&1){let e=nt();I(0,"div",6)(1,"div",11)(2,"div",12),he(3,C4,11,1),M(),I(4,"div",13)(5,"button",14),te("click",function(){le(e);let i=ee();return de(i.switchViewe())}),j(6,"Cancle"),M(),I(7,"button",15),te("click",function(){le(e);let i=ee();return de(i.onSubmit())}),j(8,"Save"),M()()()()}if(r&2){let e=ee();P(3),me(e.noticFrom?3:-1)}}var Rp=class r{constructor(n,e,t,i,o){this.fb=n;this.postService=e;this.alertService=t;this.collageService=i;this.storage=o}switchView=!1;notices=[];noticFrom=new Ho({});selectedFile=null;lable;ngOnInit(){this.lable=this.storage.get("lable"),this.noticFrom=this.fb.group({title:["",Ft.required],content:[""],uploadId:[null]}),this.fetchAllnotic()}onFileSelected(n){let e=n.target;e.files&&e.files[0]&&(this.selectedFile=e.files[0],this.uploadFile())}onSubmit(){return at(this,null,function*(){this.noticFrom.valid&&(yield _t(this.collageService.createNotic(this.noticFrom.value).pipe(Ve(n=>{this.alertService.showSuccessAlert(n.message)},n=>{this.alertService.showWarningAlert(n.error.message)}))))})}createNotic(){this.switchView=!this.switchView}uploadFile(){return at(this,null,function*(){this.selectedFile&&(yield _t(this.postService.postPost(this.selectedFile).pipe(Ve(n=>{n.post_id&&this.noticFrom?.patchValue({uploadId:n.post_id})},n=>{console.error(n),this.alertService.showWarningAlert(n.error.message)}))))})}switchViewe(){this.switchView=!this.switchView,this.switchView||this.fetchAllnotic()}fetchAllnotic(){return at(this,null,function*(){yield _t(this.collageService.getAllNotic().pipe(Ve(n=>{n&&(this.notices=n)},n=>{this.alertService.showWarningAlert(n.error.message)})))})}static \u0275fac=function(e){return new(e||r)(ve(ki),ve(Vi),ve(Ln),ve(aa),ve(on))};static \u0275cmp=re({type:r,selectors:[["app-notic"]],features:[Ke([xi()])],decls:9,vars:2,consts:[[1,"root"],["data-aos","fade-down",1,"flex","w-[120%]","h-[200px]","bg-[#4340dd]","absolute","top-[-90px]","z-[3]","justify-center","items-center","pt-[100px]",2,"border-radius","100%"],[1,"font-bold",2,"font-size","large"],["data-aos","fade-left",1,"w-full","h-full","pb-32","overflow-scroll","flex","flex-col","absolute","z-[0]","top-[100px]"],[3,"notic"],[1,"absolute","right-4","bottom-[10%]","animate-bounce","z-[3]"],["data-aos","fade-up",1,"absolute","z-[3]","shadow-2","w-[95%]","h-[60%]","bottom-0","bg-white","pt-[22px]",2,"border-radius","22px 22px 0px 0px"],["mat-fab","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-patch-plus"],["fill-rule","evenodd","d","M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5"],["d","m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"],[1,"relative","w-full","h-full"],[1,"w-full","h-[80%]","p-4"],[1,"w-full","h-[20%]","flex","justify-center","items-center","gap-4"],["mat-flat-button","","extended","",2,"width","20%","background-color","#f63b3b",3,"click"],["mat-flat-button","","extended","",2,"width","20%","background-color","#41f63b",3,"click"],["type","file","extensions","pdf,xlsx,mp4,doc",1,"lock","w-full","border","border-gray-200","shadow-sm","rounded-lg","text-sm","focus:z-10","focus:border-blue-500","focus:ring-blue-500","disabled:opacity-50","disabled:pointer-events-none","dark:bg-gray-900","dark:border-gray-700","dark:text-neutral-400","file:bg-gray-50","file:border-0","file:me-4","file:py-3","file:px-4","dark:file:bg-gray-700","dark:file:text-neutral-400","mb-3",3,"change"],[3,"formGroup"],[1,"example-full-width"],["matInput","","type","text","formControlName","title","placeholder","Title or Notic name",1,"grow"],["matInput","","type","password","formControlName","content","placeholder","description",1,"textarea","textarea-bordered","grow","gap-2","m-3","w-[99%]"]],template:function(e,t){e&1&&(I(0,"div",0)(1,"div",1)(2,"h4",2),j(3,"Notice Board"),M()(),I(4,"div",3),ur(5,x4,1,1,"notic-card",4,gs),M(),he(7,w4,5,0,"div",5)(8,D4,9,1,"div",6),M()),e&2&&(P(5),hr(t.notices),P(2),me(t.lable=="1"||t.lable=="2"?7:-1),P(),me(t.switchView?8:-1))},dependencies:[er,Wt,qt,Hs,Ap,Tr,Mr,Rr,nr,Xc,Ii,Si,Ar,Di,Ei,Bn,Jr,ei],encapsulation:2})};var mk=[{path:"",component:Ih,canActivate:[Zr]},{path:"welcome",component:Gh},{path:"login",component:Hh},{path:"me_data",component:Kh,canActivate:[Zr]},{path:"college/attendance",component:wp,canActivate:[Zr]},{path:"college/class",component:Ep,canActivate:[Zr]},{path:"college/feedback",component:Sp,canActivate:[Zr]},{path:"user/security",component:Ip,canActivate:[Zr]},{path:"college/notic",component:Rp,canActivate:[Zr]},{path:"logout",component:kp,canActivate:[Zr]}];var E4="@",S4=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=x(H_,{optional:!0});loadingSchedulerFn=x(k4,{optional:!0});_engine;constructor(e,t,i,o,a){this.doc=e,this.delegate=t,this.zone=i,this.animationType=o,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-6SPPW5TX.js").then(i=>i),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(i=>{throw new Dt(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let o=new T_(i);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(e,t);o.use(s),this.scheduler?.notify(11)}).catch(a=>{o.use(i)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(t){ps()};static \u0275prov=X({token:r,factory:r.\u0275fac})}return r})(),T_=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,t,i){this.delegate.insertBefore(n,e,t,i)}removeChild(n,e,t){this.delegate.removeChild(n,e,t)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,t,i){this.delegate.setAttribute(n,e,t,i)}removeAttribute(n,e,t){this.delegate.removeAttribute(n,e,t)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,t,i){this.delegate.setStyle(n,e,t,i)}removeStyle(n,e,t){this.delegate.removeStyle(n,e,t)}setProperty(n,e,t){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(n,e,t)),this.delegate.setProperty(n,e,t)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,t){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(n,e,t)),this.delegate.listen(n,e,t)}shouldReplay(n){return this.replay!==null&&n.startsWith(E4)}},k4=new ne("");function gk(r="animations"){return Kp("NgAsyncAnimations"),da([{provide:su,useFactory:(n,e,t)=>new S4(n,e,t,r),deps:[Ge,ku,Le]},{provide:tn,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var F_={providers:[py({eventCoalescing:!0}),H0(mk),gk()]};var vk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je,Je]})}return r})();function I4(r,n){r&1&&G(0,"div",2)}var A4=new ne("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var _k=(()=>{class r{_elementRef=x(Fe);_ngZone=x(Le);_changeDetectorRef=x(St);_animationMode=x(tn,{optional:!0});constructor(){let e=x(A4,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=bk(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=bk(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new fe;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(t){return new(t||r)};static \u0275cmp=re({type:r,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(t,i){t&2&&(Ze("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),dr("mat-"+i.color),Oe("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Hr],bufferValue:[2,"bufferValue","bufferValue",Hr],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[st],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(t,i){t&1&&(I(0,"div",0),G(1,"div",1),he(2,I4,1,0,"div",2),M(),I(3,"div",3),G(4,"span",4),M(),I(5,"div",5),G(6,"span",4),M()),t&2&&(P(),gi("flex-basis",i._getBufferBarFlexBasis()),P(),me(i.mode==="buffer"?2:-1),P(),gi("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return r})();function bk(r,n=0,e=100){return Math.max(n,Math.min(e,r))}var yk=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ee({type:r});static \u0275inj=De({imports:[Je]})}return r})();var Mp=class r{loadingSubject=new mn(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function T4(r,n){r&1&&G(0,"mat-progress-bar",0)}var Tp=class r{constructor(n){this.loadingService=n}isLoading;ngOnInit(){this.isLoading=this.loadingService.loading$}static \u0275fac=function(e){return new(e||r)(ve(Mp))};static \u0275cmp=re({type:r,selectors:[["app-loading"]],decls:2,vars:3,consts:[["mode","indeterminate","color","primary"]],template:function(e,t){e&1&&(he(0,T4,1,0,"mat-progress-bar",0),uy(1,"async")),e&2&&me(hy(1,1,t.isLoading)?0:-1)},dependencies:[yk,_k,al,Sy],styles:["mat-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}"]})};var wk=Sk(xk());var Fp=class r{title="timt";ngOnInit(){wk.init({duration:1e3,easing:"ease-in-out",once:!0})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=re({type:r,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"w-full","h-full"]],template:function(e,t){e&1&&(G(0,"app-loading"),I(1,"div",0),G(2,"router-outlet"),M())},dependencies:[$m,vk,Wt,er,Tp],encapsulation:2})};Zy(Fp,dt(J({},F_),{providers:[Wy(),...F_.providers||[]]})).catch(r=>console.error(r));
